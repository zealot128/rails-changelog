<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
<channel>
<title>Rails Changelog</title>
<link>https://zealot128.github.io/rails-changelog</link>
<description>Changelog for Rails</description>
<atom:link href="https://zealot128.github.io/rails-changelog/feed.xml" rel="self" type="application/rss+xml" />
  <item>
    <title>activejob: Deprecate `sucker_punch` as an adapter option.
</title>
    <link>https://github.com/rails/rails/issues/52990</link>
    <guid>https://github.com/rails/rails/issues/52990</guid>
    <description>*   Deprecate `sucker_punch` as an adapter option.

    If you&#39;re using this adapter, change to `adapter: async` for the same functionality.

    *Dino Maric, zzak*</description>
    <pubDate>Thu, 26 Sep 2024 13:39:29 +0000</pubDate>
    <author>zzak</author>
    <content:encoded><![CDATA[<p>Deprecate <code>sucker_punch</code> as an adapter option.</p>

<p>If you’re using this adapter, change to <code>adapter: async</code> for the same functionality.</p>

<p><em>Dino Maric, zzak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activejob: Use `RAILS_MAX_THREADS` in `ActiveJob::AsyncAdapter`. If it is not set, use 5 as default.
</title>
    <link>https://github.com/rails/rails/issues/52468</link>
    <guid>https://github.com/rails/rails/issues/52468</guid>
    <description>*   Use `RAILS_MAX_THREADS` in `ActiveJob::AsyncAdapter`. If it is not set, use 5 as default.

    *heka1024*</description>
    <pubDate>Fri, 02 Aug 2024 12:34:23 +0000</pubDate>
    <author>heka1024</author>
    <content:encoded><![CDATA[<p>Use <code>RAILS_MAX_THREADS</code> in <code>ActiveJob::AsyncAdapter</code>. If it is not set, use 5 as default.</p>

<p><em>heka1024</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actioncable: Add an `identifier` to the event payload for the ActiveSupport::Notification `transmit_subscription_confirmation.action_cable` and `transmit_subscription_rejection.action_cable`.
</title>
    <link>https://github.com/rails/rails/issues/52421</link>
    <guid>https://github.com/rails/rails/issues/52421</guid>
    <description>*   Add an `identifier` to the event payload for the ActiveSupport::Notification `transmit_subscription_confirmation.action_cable` and `transmit_subscription_rejection.action_cable`.

    *Keith Schacht*</description>
    <pubDate>Wed, 31 Jul 2024 21:49:36 +0000</pubDate>
    <author>Keith Schacht</author>
    <content:encoded><![CDATA[<p>Add an <code>identifier</code> to the event payload for the ActiveSupport::Notification <code>transmit_subscription_confirmation.action_cable</code> and <code>transmit_subscription_rejection.action_cable</code>.</p>

<p><em>Keith Schacht</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activestorage: Deprecate `ActiveStorage::Service::AzureStorageService`.
</title>
    <link>https://github.com/rails/rails/issues/52863</link>
    <guid>https://github.com/rails/rails/issues/52863</guid>
    <description>*   Deprecate `ActiveStorage::Service::AzureStorageService`.

    *zzak*</description>
    <pubDate>Wed, 11 Sep 2024 15:59:00 +0000</pubDate>
    <author>zzak</author>
    <content:encoded><![CDATA[<p>Deprecate <code>ActiveStorage::Service::AzureStorageService</code>.</p>

<p><em>zzak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activestorage: Improve `ActiveStorage::Filename#sanitized` method to handle special characters more effectively.
</title>
    <link>https://github.com/rails/rails/issues/52496</link>
    <guid>https://github.com/rails/rails/issues/52496</guid>
    <description>*   Improve `ActiveStorage::Filename#sanitized` method to handle special characters more effectively.
    Replace the characters `&quot;*?&lt;&gt;` with `-` if they exist in the Filename to match the Filename convention of Win OS.

    *Luong Viet Dung(Martin)*</description>
    <pubDate>Mon, 05 Aug 2024 18:28:33 +0000</pubDate>
    <author>Martin(Luong Viet Dung)</author>
    <content:encoded><![CDATA[<p>Improve <code>ActiveStorage::Filename#sanitized</code> method to handle special characters more effectively.<br />
Replace the characters <code>"*?&lt;&gt;</code> with <code>-</code> if they exist in the Filename to match the Filename convention of Win OS.</p>

<p><em>Luong Viet Dung(Martin)</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activestorage: Improve InvariableError, UnpreviewableError and UnrepresentableError message.
</title>
    <link>https://github.com/rails/rails/issues/52193</link>
    <guid>https://github.com/rails/rails/issues/52193</guid>
    <description>*   Improve InvariableError, UnpreviewableError and UnrepresentableError message.

    Include Blob ID and content_type in the messages.

    *Petrik de Heus*</description>
    <pubDate>Tue, 30 Jul 2024 10:35:59 +0000</pubDate>
    <author>Petrik</author>
    <content:encoded><![CDATA[<p>Improve InvariableError, UnpreviewableError and UnrepresentableError message.</p>

<p>Include Blob ID and content_type in the messages.</p>

<p><em>Petrik de Heus</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activestorage: Mark proxied files as `immutable` in their Cache-Control header
</title>
    <link>https://github.com/rails/rails/issues/52283</link>
    <guid>https://github.com/rails/rails/issues/52283</guid>
    <description>*   Mark proxied files as `immutable` in their Cache-Control header

    *Nate Matykiewicz*</description>
    <pubDate>Sat, 06 Jul 2024 18:08:48 +0000</pubDate>
    <author>Nate Matykiewicz</author>
    <content:encoded><![CDATA[<p>Mark proxied files as <code>immutable</code> in their Cache-Control header</p>

<p><em>Nate Matykiewicz</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Exit `rails g` with code 1 if generator could not be found.
</title>
    <link>https://github.com/rails/rails/issues/53028</link>
    <guid>https://github.com/rails/rails/issues/53028</guid>
    <description>*   Exit `rails g` with code 1 if generator could not be found.

    Previously `rails g` returned 0, which would make it harder to catch typos in scripts calling `rails g`.

    *Christopher Özbek*</description>
    <pubDate>Thu, 26 Sep 2024 03:57:41 +0000</pubDate>
    <author>Christopher Özbek</author>
    <content:encoded><![CDATA[<p>Exit <code>rails g</code> with code 1 if generator could not be found.</p>

<p>Previously <code>rails g</code> returned 0, which would make it harder to catch typos in scripts calling <code>rails g</code>.</p>

<p><em>Christopher Özbek</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Remove `require_*` statements from application.css to align with the transition from Sprockets to Propshaft.
</title>
    <link>https://github.com/rails/rails/issues/53021</link>
    <guid>https://github.com/rails/rails/issues/53021</guid>
    <description>*   Remove `require_*` statements from application.css to align with the transition from Sprockets to Propshaft.

    With Propshaft as the default asset pipeline in Rails 8, the require_tree and require_self clauses in application.css are no longer necessary, as they were specific to Sprockets. Additionally, the comment has been updated to clarify that CSS precedence now follows standard cascading order without automatic prioritization by the asset pipeline.

    *Eduardo Alencar*</description>
    <pubDate>Wed, 25 Sep 2024 17:43:36 +0000</pubDate>
    <author>Eduardo Alencar</author>
    <content:encoded><![CDATA[<p>Remove <code>require_*</code> statements from application.css to align with the transition from Sprockets to Propshaft.</p>

<p>With Propshaft as the default asset pipeline in Rails 8, the require_tree and require_self clauses in application.css are no longer necessary, as they were specific to Sprockets. Additionally, the comment has been updated to clarify that CSS precedence now follows standard cascading order without automatic prioritization by the asset pipeline.</p>

<p><em>Eduardo Alencar</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Do not include redis by default in generated Dev Containers.
</title>
    <link>https://github.com/rails/rails/issues/52934</link>
    <guid>https://github.com/rails/rails/issues/52934</guid>
    <description>*   Do not include redis by default in generated Dev Containers.

    Now that applications use the Solid Queue and Solid Cache gems by default, we do not need to include redis
    in the Dev Container. We will only include redis if `--skip-solid` is used when generating an app that uses
    Active Job or Action Cable.

    When generating a Dev Container for an existing app, we will not include redis if either of the solid gems
    are in use.

    *Andrew Novoselac*</description>
    <pubDate>Mon, 16 Sep 2024 21:48:10 +0000</pubDate>
    <author>Andrew Novoselac</author>
    <content:encoded><![CDATA[<p>Do not include redis by default in generated Dev Containers.</p>

<p>Now that applications use the Solid Queue and Solid Cache gems by default, we do not need to include redis<br />
in the Dev Container. We will only include redis if <code>--skip-solid</code> is used when generating an app that uses<br />
Active Job or Action Cable.</p>

<p>When generating a Dev Container for an existing app, we will not include redis if either of the solid gems<br />
are in use.</p>

<p><em>Andrew Novoselac</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Use [Solid Cable](https://github.com/rails/solid_cable) as the default Action Cable adapter in production, configured as a separate queue database in config/database.yml. It keeps messages in a table and continuously polls for updates. This makes it possible to drop the common dependency on Redis, if it isn&#39;t needed for any other purpose. Despite polling, the performance of Solid Cable is comparable to Redis in most situations. And in all circumstances, it makes it easier to deploy Rails when Redis is no longer a required dependency for Action Cable functionality.
</title>
    <link>https://github.com/rails/rails/issues/52911</link>
    <guid>https://github.com/rails/rails/issues/52911</guid>
    <description>*   Use [Solid Cable](https://github.com/rails/solid_cable) as the default Action Cable adapter in production, configured as a separate queue database in config/database.yml. It keeps messages in a table and continuously polls for updates. This makes it possible to drop the common dependency on Redis, if it isn&#39;t needed for any other purpose. Despite polling, the performance of Solid Cable is comparable to Redis in most situations. And in all circumstances, it makes it easier to deploy Rails when Redis is no longer a required dependency for Action Cable functionality.

    *DHH*</description>
    <pubDate>Fri, 13 Sep 2024 16:43:46 +0000</pubDate>
    <author>Vipul A M</author>
    <content:encoded><![CDATA[<p>Use <a href="https://github.com/rails/solid_cable">Solid Cable</a> as the default Action Cable adapter in production, configured as a separate queue database in config/database.yml. It keeps messages in a table and continuously polls for updates. This makes it possible to drop the common dependency on Redis, if it isn’t needed for any other purpose. Despite polling, the performance of Solid Cable is comparable to Redis in most situations. And in all circumstances, it makes it easier to deploy Rails when Redis is no longer a required dependency for Action Cable functionality.</p>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Use [Solid Queue](https://github.com/rails/solid_queue) as the default Active Job backend in production, configured as a separate queue database in config/database.yml. In a single-server deployment, it&#39;ll run as a Puma plugin. This is configured in `config/deploy.yml` and can easily be changed to use a dedicated jobs machine.
</title>
    <link>https://github.com/rails/rails/issues/52813</link>
    <guid>https://github.com/rails/rails/issues/52813</guid>
    <description>*   Use [Solid Queue](https://github.com/rails/solid_queue) as the default Active Job backend in production, configured as a separate queue database in config/database.yml. In a single-server deployment, it&#39;ll run as a Puma plugin. This is configured in `config/deploy.yml` and can easily be changed to use a dedicated jobs machine.

    *DHH*</description>
    <pubDate>Fri, 06 Sep 2024 13:29:24 +0000</pubDate>
    <author>Wojciech Wnętrzak</author>
    <content:encoded><![CDATA[<p>Use <a href="https://github.com/rails/solid_queue">Solid Queue</a> as the default Active Job backend in production, configured as a separate queue database in config/database.yml. In a single-server deployment, it’ll run as a Puma plugin. This is configured in <code>config/deploy.yml</code> and can easily be changed to use a dedicated jobs machine.</p>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Use [Solid Cache](https://github.com/rails/solid_cache) as the default Rails.cache backend in production, configured as a separate cache database in config/database.yml.
</title>
    <link>https://github.com/rails/rails/issues/52790</link>
    <guid>https://github.com/rails/rails/issues/52790</guid>
    <description>*   Use [Solid Cache](https://github.com/rails/solid_cache) as the default Rails.cache backend in production, configured as a separate cache database in config/database.yml.

    *DHH*</description>
    <pubDate>Thu, 05 Sep 2024 04:48:39 +0000</pubDate>
    <author>David Heinemeier Hansson</author>
    <content:encoded><![CDATA[<p>Use <a href="https://github.com/rails/solid_cache">Solid Cache</a> as the default Rails.cache backend in production, configured as a separate cache database in config/database.yml.</p>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Add Rails::Rack::SilenceRequest middleware and use it via `config.silence_healthcheck_path = path`
</title>
    <link>https://github.com/rails/rails/issues/52789</link>
    <guid>https://github.com/rails/rails/issues/52789</guid>
    <description>*   Add Rails::Rack::SilenceRequest middleware and use it via `config.silence_healthcheck_path = path`
    to silence requests to &quot;/up&quot;. This prevents the Kamal-required health checks from clogging up
    the production logs.

    *DHH*</description>
    <pubDate>Wed, 04 Sep 2024 14:34:59 +0000</pubDate>
    <author>David Heinemeier Hansson</author>
    <content:encoded><![CDATA[<p>Add Rails::Rack::SilenceRequest middleware and use it via <code>config.silence_healthcheck_path = path</code><br />
to silence requests to “/up”. This prevents the Kamal-required health checks from clogging up<br />
the production logs.</p>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Introduce `mariadb-mysql` and `mariadb-trilogy` database options for `rails new`
</title>
    <link>https://github.com/rails/rails/issues/52266</link>
    <guid>https://github.com/rails/rails/issues/52266</guid>
    <description>*   Introduce `mariadb-mysql` and `mariadb-trilogy` database options for `rails new`

    When used with the `--devcontainer` flag, these options will use `mariadb` as the database for the
    Dev Container. The original `mysql` and `trilogy` options will use `mysql`. Users who are not
    generating a Dev Container do not need to use the new options.

    *Andrew Novoselac*</description>
    <pubDate>Tue, 27 Aug 2024 20:31:20 +0000</pubDate>
    <author>Andrew Novoselac</author>
    <content:encoded><![CDATA[<p>Introduce <code>mariadb-mysql</code> and <code>mariadb-trilogy</code> database options for <code>rails new</code></p>

<p>When used with the <code>--devcontainer</code> flag, these options will use <code>mariadb</code> as the database for the<br />
Dev Container. The original <code>mysql</code> and <code>trilogy</code> options will use <code>mysql</code>. Users who are not<br />
generating a Dev Container do not need to use the new options.</p>

<p><em>Andrew Novoselac</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Deprecate `::STATS_DIRECTORIES`.
</title>
    <link>https://github.com/rails/rails/issues/52226</link>
    <guid>https://github.com/rails/rails/issues/52226</guid>
    <description>*   Deprecate `::STATS_DIRECTORIES`.

    The global constant `STATS_DIRECTORIES` has been deprecated in favor of
    `Rails::CodeStatistics.register_directory`.

    Add extra directories with `Rails::CodeStatistics.register_directory(label, path)`:

    ```ruby
    require &quot;rails/code_statistics&quot;
    Rails::CodeStatistics.register_directory(&#39;My Directory&#39;, &#39;path/to/dir&#39;)
    ```

    *Petrik de Heus*</description>
    <pubDate>Fri, 23 Aug 2024 21:10:48 +0000</pubDate>
    <author>Petrik</author>
    <content:encoded><![CDATA[<p>Deprecate <code>::STATS_DIRECTORIES</code>.</p>

<p>The global constant <code>STATS_DIRECTORIES</code> has been deprecated in favor of<br />
<code>Rails::CodeStatistics.register_directory</code>.</p>

<p>Add extra directories with <code>Rails::CodeStatistics.register_directory(label, path)</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"rails/code_statistics"</span>
<span class="no">Rails</span><span class="o">::</span><span class="no">CodeStatistics</span><span class="p">.</span><span class="nf">register_directory</span><span class="p">(</span><span class="s1">'My Directory'</span><span class="p">,</span> <span class="s1">'path/to/dir'</span><span class="p">)</span>
</code></pre></div></div>

<p><em>Petrik de Heus</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Enable query log tags by default on development env
</title>
    <link>https://github.com/rails/rails/issues/51342</link>
    <guid>https://github.com/rails/rails/issues/51342</guid>
    <description>*   Enable query log tags by default on development env

    This can be used to trace troublesome SQL statements back to the application
    code that generated these statements. It is also useful when using multiple
    databases because the query logs can identify which database is being used.

    *Matheus Richard*</description>
    <pubDate>Sun, 11 Aug 2024 09:11:53 +0000</pubDate>
    <author>Matheus Richard</author>
    <content:encoded><![CDATA[<p>Enable query log tags by default on development env</p>

<p>This can be used to trace troublesome SQL statements back to the application<br />
code that generated these statements. It is also useful when using multiple<br />
databases because the query logs can identify which database is being used.</p>

<p><em>Matheus Richard</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Defer route drawing to the first request, or when url_helpers are called
</title>
    <link>https://github.com/rails/rails/issues/52353</link>
    <guid>https://github.com/rails/rails/issues/52353</guid>
    <description>*   Defer route drawing to the first request, or when url_helpers are called

    Executes the first routes reload in middleware, or when a route set&#39;s
    url_helpers receives a route call / asked if it responds to a route.
    Previously, this was executed unconditionally on boot, which can
    slow down boot time unnecessarily for larger apps with lots of routes.

    Environments like production that have `config.eager_load = true` will
    continue to eagerly load routes on boot.

    *Gannon McGibbon*</description>
    <pubDate>Fri, 09 Aug 2024 06:44:23 +0000</pubDate>
    <author>Gannon McGibbon</author>
    <content:encoded><![CDATA[<p>Defer route drawing to the first request, or when url_helpers are called</p>

<p>Executes the first routes reload in middleware, or when a route set’s<br />
url_helpers receives a route call / asked if it responds to a route.<br />
Previously, this was executed unconditionally on boot, which can<br />
slow down boot time unnecessarily for larger apps with lots of routes.</p>

<p>Environments like production that have <code>config.eager_load = true</code> will<br />
continue to eagerly load routes on boot.</p>

<p><em>Gannon McGibbon</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Generate form helpers to use `textarea*` methods instead of `text_area*` methods
</title>
    <link>https://github.com/rails/rails/issues/52467</link>
    <guid>https://github.com/rails/rails/issues/52467</guid>
    <description>*   Generate form helpers to use `textarea*` methods instead of `text_area*` methods

    *Sean Doyle*</description>
    <pubDate>Wed, 31 Jul 2024 17:16:23 +0000</pubDate>
    <author>Sean Doyle</author>
    <content:encoded><![CDATA[<p>Generate form helpers to use <code>textarea*</code> methods instead of <code>text_area*</code> methods</p>

<p><em>Sean Doyle</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Add authentication generator to give a basic start to an authentication system using database-tracked sessions and password reset.
</title>
    <link>https://github.com/rails/rails/issues/52468</link>
    <guid>https://github.com/rails/rails/issues/52468</guid>
    <description>*   Add authentication generator to give a basic start to an authentication system using database-tracked sessions and password reset.

    Generate with...

    ```
    bin/rails generate authentication
    ```

    Generated files:

    ```
    app/models/current.rb
    app/models/user.rb
    app/models/session.rb
    app/controllers/sessions_controller.rb
    app/controllers/passwords_controller.rb
    app/mailers/passwords_mailer.rb
    app/views/sessions/new.html.erb
    app/views/passwords/new.html.erb
    app/views/passwords/edit.html.erb
    app/views/passwords_mailer/reset.html.erb
    app/views/passwords_mailer/reset.text.erb
    db/migrate/xxxxxxx_create_users.rb
    db/migrate/xxxxxxx_create_sessions.rb
    test/mailers/previews/passwords_mailer_preview.rb
    ```

    *DHH*</description>
    <pubDate>Fri, 02 Aug 2024 12:34:23 +0000</pubDate>
    <author>David Heinemeier Hansson</author>
    <content:encoded><![CDATA[<p>Add authentication generator to give a basic start to an authentication system using database-tracked sessions and password reset.</p>

<p>Generate with…</p>

<pre><code>bin/rails generate authentication
</code></pre>

<p>Generated files:</p>

<pre><code>app/models/current.rb
app/models/user.rb
app/models/session.rb
app/controllers/sessions_controller.rb
app/controllers/passwords_controller.rb
app/mailers/passwords_mailer.rb
app/views/sessions/new.html.erb
app/views/passwords/new.html.erb
app/views/passwords/edit.html.erb
app/views/passwords_mailer/reset.html.erb
app/views/passwords_mailer/reset.text.erb
db/migrate/xxxxxxx_create_users.rb
db/migrate/xxxxxxx_create_sessions.rb
test/mailers/previews/passwords_mailer_preview.rb
</code></pre>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Add not-null type modifier to migration attributes.
</title>
    <link>https://github.com/rails/rails/issues/52327</link>
    <guid>https://github.com/rails/rails/issues/52327</guid>
    <description>*   Add not-null type modifier to migration attributes.

    Generating with...

    ```
    bin/rails generate migration CreateUsers email_address:string!:uniq password_digest:string!
    ```

    Produces:

    ```ruby
    class CreateUsers &lt; ActiveRecord::Migration[8.0]
      def change
        create_table :users do |t|
          t.string :email_address, null: false
          t.string :password_digest, null: false

          t.timestamps
        end
        add_index :users, :email_address, unique: true
      end
    end
    ```

    *DHH*</description>
    <pubDate>Tue, 16 Jul 2024 13:00:51 +0000</pubDate>
    <author>David Heinemeier Hansson</author>
    <content:encoded><![CDATA[<p>Add not-null type modifier to migration attributes.</p>

<p>Generating with…</p>

<pre><code>bin/rails generate migration CreateUsers email_address:string!:uniq password_digest:string!
</code></pre>

<p>Produces:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">8.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:users</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:email_address</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:password_digest</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
    <span class="n">add_index</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:email_address</span><span class="p">,</span> <span class="ss">unique: </span><span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Add a `script` folder to applications, and a scripts generator.
</title>
    <link>https://github.com/rails/rails/issues/52454</link>
    <guid>https://github.com/rails/rails/issues/52454</guid>
    <description>*   Add a `script` folder to applications, and a scripts generator.

    The new `script` folder is meant to hold one-off or general purpose scripts,
    such as data migration scripts, cleanup scripts, etc.

    A new script generator allows you to create such scripts:

    ```
    bin/rails generate script my_script
    bin/rails generate script data/backfill
    ```

    You can run the generated script using:

    ```
    bundle exec ruby script/my_script.rb
    bundle exec ruby script/data/backfill.rb
    ```

    *Jerome Dalbert*, *Haroon Ahmed*</description>
    <pubDate>Tue, 30 Jul 2024 19:25:16 +0000</pubDate>
    <author>Xavier Noria</author>
    <content:encoded><![CDATA[<p>Add a <code>script</code> folder to applications, and a scripts generator.</p>

<p>The new <code>script</code> folder is meant to hold one-off or general purpose scripts,<br />
such as data migration scripts, cleanup scripts, etc.</p>

<p>A new script generator allows you to create such scripts:</p>

<pre><code>bin/rails generate script my_script
bin/rails generate script data/backfill
</code></pre>

<p>You can run the generated script using:</p>

<pre><code>bundle exec ruby script/my_script.rb
bundle exec ruby script/data/backfill.rb
</code></pre>

<p><em>Jerome Dalbert</em>, <em>Haroon Ahmed</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Deprecate `bin/rake stats` in favor of `bin/rails stats`.
</title>
    <link>https://github.com/rails/rails/issues/52231</link>
    <guid>https://github.com/rails/rails/issues/52231</guid>
    <description>*   Deprecate `bin/rake stats` in favor of `bin/rails stats`.

    *Juan Vásquez*</description>
    <pubDate>Sat, 29 Jun 2024 06:52:05 +0000</pubDate>
    <author>Juan Vásquez</author>
    <content:encoded><![CDATA[<p>Deprecate <code>bin/rake stats</code> in favor of <code>bin/rails stats</code>.</p>

<p><em>Juan Vásquez</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Add internal page `/rails/info/notes`, that displays the same information as `bin/rails notes`.
</title>
    <link>https://github.com/rails/rails/issues/52115</link>
    <guid>https://github.com/rails/rails/issues/52115</guid>
    <description>*   Add internal page `/rails/info/notes`, that displays the same information as `bin/rails notes`.

    *Deepak Mahakale*</description>
    <pubDate>Thu, 13 Jun 2024 17:22:29 +0000</pubDate>
    <author>Deepak Mahakale</author>
    <content:encoded><![CDATA[<p>Add internal page <code>/rails/info/notes</code>, that displays the same information as <code>bin/rails notes</code>.</p>

<p><em>Deepak Mahakale</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Add Rubocop and GitHub Actions to plugin generator.
</title>
    <link>https://github.com/rails/rails/issues/51822</link>
    <guid>https://github.com/rails/rails/issues/51822</guid>
    <description>*   Add Rubocop and GitHub Actions to plugin generator.
    This can be skipped using --skip-rubocop and --skip-ci.

    *Chris Oliver*</description>
    <pubDate>Thu, 23 May 2024 18:08:58 +0000</pubDate>
    <author>Chris Oliver</author>
    <content:encoded><![CDATA[<p>Add Rubocop and GitHub Actions to plugin generator.<br />
This can be skipped using –skip-rubocop and –skip-ci.</p>

<p><em>Chris Oliver</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>railties: Use Kamal for deployment by default, which includes generating a Rails-specific config/deploy.yml.
</title>
    <link>https://github.com/rails/rails/issues/51798</link>
    <guid>https://github.com/rails/rails/issues/51798</guid>
    <description>*   Use Kamal for deployment by default, which includes generating a Rails-specific config/deploy.yml.
    This can be skipped using --skip-kamal. See more: https://kamal-deploy.org/

    *DHH*</description>
    <pubDate>Tue, 14 May 2024 00:37:39 +0000</pubDate>
    <author>David Heinemeier Hansson</author>
    <content:encoded><![CDATA[<p>Use Kamal for deployment by default, which includes generating a Rails-specific config/deploy.yml.<br />
This can be skipped using –skip-kamal. See more: https://kamal-deploy.org/</p>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Raise an `ArgumentError` when invalid `:on` or `:except` options are passed into `#resource` and `#resources`.
</title>
    <link>https://github.com/rails/rails/issues/51463</link>
    <guid>https://github.com/rails/rails/issues/51463</guid>
    <description>*   Raise an `ArgumentError` when invalid `:on` or `:except` options are passed into `#resource` and `#resources`.

    *Joshua Young*</description>
    <pubDate>Fri, 04 Oct 2024 14:26:22 +0000</pubDate>
    <author>Joshua Young</author>
    <content:encoded><![CDATA[<p>Raise an <code>ArgumentError</code> when invalid <code>:on</code> or <code>:except</code> options are passed into <code>#resource</code> and <code>#resources</code>.</p>

<p><em>Joshua Young</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Fix non-GET requests not updating cookies in `ActionController::TestCase`.
</title>
    <link>https://github.com/rails/rails/issues/52348</link>
    <guid>https://github.com/rails/rails/issues/52348</guid>
    <description>*   Fix non-GET requests not updating cookies in `ActionController::TestCase`.

    *Jon Moss*, *Hartley McGuire*</description>
    <pubDate>Thu, 26 Sep 2024 03:57:41 +0000</pubDate>
    <author>Hartley McGuire</author>
    <content:encoded><![CDATA[<p>Fix non-GET requests not updating cookies in <code>ActionController::TestCase</code>.</p>

<p><em>Jon Moss</em>, <em>Hartley McGuire</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Update `ActionController::Live` to use a thread-pool to reuse threads across requests.
</title>
    <link>https://github.com/rails/rails/issues/52731</link>
    <guid>https://github.com/rails/rails/issues/52731</guid>
    <description>*   Update `ActionController::Live` to use a thread-pool to reuse threads across requests.

    *Adam Renberg Tamm*</description>
    <pubDate>Mon, 16 Sep 2024 22:39:38 +0000</pubDate>
    <author>Adam Renberg Tamm</author>
    <content:encoded><![CDATA[<p>Update <code>ActionController::Live</code> to use a thread-pool to reuse threads across requests.</p>

<p><em>Adam Renberg Tamm</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Introduce safer, more explicit params handling method with `params#expect` such that
</title>
    <link>https://github.com/rails/rails/issues/51674</link>
    <guid>https://github.com/rails/rails/issues/51674</guid>
    <description>*   Introduce safer, more explicit params handling method with `params#expect` such that
    `params.expect(table: [ :attr ])` replaces `params.require(:table).permit(:attr)`

    Ensures params are filtered with consideration for the expected
    types of values, improving handling of params and avoiding ignorable
    errors caused by params tampering.

    ```ruby
    # If the url is altered to ?person=hacked
    # Before
    params.require(:person).permit(:name, :age, pets: [:name])
    # raises NoMethodError, causing a 500 and potential error reporting

    # After
    params.expect(person: [ :name, :age, pets: [[:name]] ])
    # raises ActionController::ParameterMissing, correctly returning a 400 error
    ```

    You may also notice the new double array `[[:name]]`. In order to
    declare when a param is expected to be an array of parameter hashes,
    this new double array syntax is used to explicitly declare an array.
    `expect` requires you to declare expected arrays in this way, and will
    ignore arrays that are passed when, for example, `pet: [:name]` is used.

    In order to preserve compatibility, `permit` does not adopt the new
    double array syntax and is therefore more permissive about unexpected
    types. Using `expect` everywhere is recommended.

    We suggest replacing `params.require(:person).permit(:name, :age)`
    with the direct replacement `params.expect(person: [:name, :age])`
    to prevent external users from manipulating params to trigger 500
    errors. A 400 error will be returned instead, using public/400.html

    Usage of `params.require(:id)` should likewise be replaced with
    `params.expect(:id)` which is designed to ensure that `params[:id]`
    is a scalar and not an array or hash, also requiring the param.

    ```ruby
    # Before
    User.find(params.require(:id)) # allows an array, altering behavior

    # After
    User.find(params.expect(:id)) # expect only returns non-blank permitted scalars (excludes Hash, Array, nil, &quot;&quot;, etc)
    ```

    *Martin Emde*</description>
    <pubDate>Mon, 09 Sep 2024 08:26:31 +0000</pubDate>
    <author>Martin Emde</author>
    <content:encoded><![CDATA[<p>Introduce safer, more explicit params handling method with <code>params#expect</code> such that<br />
<code>params.expect(table: [ :attr ])</code> replaces <code>params.require(:table).permit(:attr)</code></p>

<p>Ensures params are filtered with consideration for the expected<br />
types of values, improving handling of params and avoiding ignorable<br />
errors caused by params tampering.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># If the url is altered to ?person=hacked</span>
<span class="c1"># Before</span>
<span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:person</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span><span class="p">,</span> <span class="ss">pets: </span><span class="p">[</span><span class="ss">:name</span><span class="p">])</span>
<span class="c1"># raises NoMethodError, causing a 500 and potential error reporting</span>

<span class="c1"># After</span>
<span class="n">params</span><span class="p">.</span><span class="nf">expect</span><span class="p">(</span><span class="ss">person: </span><span class="p">[</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span><span class="p">,</span> <span class="ss">pets: </span><span class="p">[[</span><span class="ss">:name</span><span class="p">]]</span> <span class="p">])</span>
<span class="c1"># raises ActionController::ParameterMissing, correctly returning a 400 error</span>
</code></pre></div></div>

<p>You may also notice the new double array <code>[[:name]]</code>. In order to<br />
declare when a param is expected to be an array of parameter hashes,<br />
this new double array syntax is used to explicitly declare an array.<br />
<code>expect</code> requires you to declare expected arrays in this way, and will<br />
ignore arrays that are passed when, for example, <code>pet: [:name]</code> is used.</p>

<p>In order to preserve compatibility, <code>permit</code> does not adopt the new<br />
double array syntax and is therefore more permissive about unexpected<br />
types. Using <code>expect</code> everywhere is recommended.</p>

<p>We suggest replacing <code>params.require(:person).permit(:name, :age)</code><br />
with the direct replacement <code>params.expect(person: [:name, :age])</code><br />
to prevent external users from manipulating params to trigger 500<br />
errors. A 400 error will be returned instead, using public/400.html</p>

<p>Usage of <code>params.require(:id)</code> should likewise be replaced with<br />
<code>params.expect(:id)</code> which is designed to ensure that <code>params[:id]</code><br />
is a scalar and not an array or hash, also requiring the param.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Before</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:id</span><span class="p">))</span> <span class="c1"># allows an array, altering behavior</span>

<span class="c1"># After</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">expect</span><span class="p">(</span><span class="ss">:id</span><span class="p">))</span> <span class="c1"># expect only returns non-blank permitted scalars (excludes Hash, Array, nil, "", etc)</span>
</code></pre></div></div>

<p><em>Martin Emde</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: System Testing: Disable Chrome&#39;s search engine choice by default in system tests.
</title>
    <link>https://github.com/rails/rails/issues/52805</link>
    <guid>https://github.com/rails/rails/issues/52805</guid>
    <description>*   System Testing: Disable Chrome&#39;s search engine choice by default in system tests.

    *glaszig*</description>
    <pubDate>Fri, 06 Sep 2024 21:22:14 +0000</pubDate>
    <author>glaszig</author>
    <content:encoded><![CDATA[<p>System Testing: Disable Chrome’s search engine choice by default in system tests.</p>

<p><em>glaszig</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Fix `Request#raw_post` raising `NoMethodError` when `rack.input` is `nil`.
</title>
    <link>https://github.com/rails/rails/issues/52138</link>
    <guid>https://github.com/rails/rails/issues/52138</guid>
    <description>*   Fix `Request#raw_post` raising `NoMethodError` when `rack.input` is `nil`.

    *Hartley McGuire*</description>
    <pubDate>Wed, 21 Aug 2024 20:16:11 +0000</pubDate>
    <author>Hartley McGuire</author>
    <content:encoded><![CDATA[<p>Fix <code>Request#raw_post</code> raising <code>NoMethodError</code> when <code>rack.input</code> is <code>nil</code>.</p>

<p><em>Hartley McGuire</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Remove `racc` dependency by manually writing `ActionDispatch::Journey::Scanner`.
</title>
    <link>https://github.com/rails/rails/issues/52610</link>
    <guid>https://github.com/rails/rails/issues/52610</guid>
    <description>*   Remove `racc` dependency by manually writing `ActionDispatch::Journey::Scanner`.

    *Gannon McGibbon*</description>
    <pubDate>Thu, 15 Aug 2024 18:04:26 +0000</pubDate>
    <author>Gannon McGibbon</author>
    <content:encoded><![CDATA[<p>Remove <code>racc</code> dependency by manually writing <code>ActionDispatch::Journey::Scanner</code>.</p>

<p><em>Gannon McGibbon</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Speed up `ActionDispatch::Routing::Mapper::Scope#[]` by merging frame hashes.
</title>
    <link>https://github.com/rails/rails/issues/52525</link>
    <guid>https://github.com/rails/rails/issues/52525</guid>
    <description>*   Speed up `ActionDispatch::Routing::Mapper::Scope#[]` by merging frame hashes.

    *Gannon McGibbon*</description>
    <pubDate>Thu, 08 Aug 2024 02:26:51 +0000</pubDate>
    <author>Gannon McGibbon</author>
    <content:encoded><![CDATA[<p>Speed up <code>ActionDispatch::Routing::Mapper::Scope#[]</code> by merging frame hashes.</p>

<p><em>Gannon McGibbon</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Allow bots to ignore `allow_browser`.
</title>
    <link>https://github.com/rails/rails/issues/52531</link>
    <guid>https://github.com/rails/rails/issues/52531</guid>
    <description>*   Allow bots to ignore `allow_browser`.

    *Matthew Nguyen*</description>
    <pubDate>Wed, 07 Aug 2024 16:29:46 +0000</pubDate>
    <author>Matthew Nguyen</author>
    <content:encoded><![CDATA[<p>Allow bots to ignore <code>allow_browser</code>.</p>

<p><em>Matthew Nguyen</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Deprecate drawing routes with multiple paths to make routing faster.
</title>
    <link>https://github.com/rails/rails/issues/52409</link>
    <guid>https://github.com/rails/rails/issues/52409</guid>
    <description>*   Deprecate drawing routes with multiple paths to make routing faster.
    You may use `with_options` or a loop to make drawing multiple paths easier.

    ```ruby
    # Before
    get &quot;/users&quot;, &quot;/other_path&quot;, to: &quot;users#index&quot;

    # After
    get &quot;/users&quot;, to: &quot;users#index&quot;
    get &quot;/other_path&quot;, to: &quot;users#index&quot;
    ```

    *Gannon McGibbon*</description>
    <pubDate>Sat, 27 Jul 2024 03:42:17 +0000</pubDate>
    <author>Gannon McGibbon</author>
    <content:encoded><![CDATA[<p>Deprecate drawing routes with multiple paths to make routing faster.<br />
You may use <code>with_options</code> or a loop to make drawing multiple paths easier.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Before</span>
<span class="n">get</span> <span class="s2">"/users"</span><span class="p">,</span> <span class="s2">"/other_path"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"users#index"</span>

<span class="c1"># After</span>
<span class="n">get</span> <span class="s2">"/users"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"users#index"</span>
<span class="n">get</span> <span class="s2">"/other_path"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"users#index"</span>
</code></pre></div></div>

<p><em>Gannon McGibbon</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Make `http_cache_forever` use `immutable: true`
</title>
    <link>https://github.com/rails/rails/issues/52283</link>
    <guid>https://github.com/rails/rails/issues/52283</guid>
    <description>*   Make `http_cache_forever` use `immutable: true`

    *Nate Matykiewicz*</description>
    <pubDate>Sat, 06 Jul 2024 18:08:48 +0000</pubDate>
    <author>Nate Matykiewicz</author>
    <content:encoded><![CDATA[<p>Make <code>http_cache_forever</code> use <code>immutable: true</code></p>

<p><em>Nate Matykiewicz</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Add `config.action_dispatch.strict_freshness`.
</title>
    <link>https://github.com/rails/rails/issues/52274</link>
    <guid>https://github.com/rails/rails/issues/52274</guid>
    <description>*   Add `config.action_dispatch.strict_freshness`.

    When set to `true`, the `ETag` header takes precedence over the `Last-Modified` header when both are present,
    as specified by RFC 7232, Section 6.

    Defaults to `false` to maintain compatibility with previous versions of Rails, but is enabled as part of
    Rails 8.0 defaults.

    *heka1024*</description>
    <pubDate>Fri, 05 Jul 2024 08:27:46 +0000</pubDate>
    <author>heka1024</author>
    <content:encoded><![CDATA[<p>Add <code>config.action_dispatch.strict_freshness</code>.</p>

<p>When set to <code>true</code>, the <code>ETag</code> header takes precedence over the <code>Last-Modified</code> header when both are present,<br />
as specified by RFC 7232, Section 6.</p>

<p>Defaults to <code>false</code> to maintain compatibility with previous versions of Rails, but is enabled as part of<br />
Rails 8.0 defaults.</p>

<p><em>heka1024</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Support `immutable` directive in Cache-Control
</title>
    <link>https://github.com/rails/rails/issues/52197</link>
    <guid>https://github.com/rails/rails/issues/52197</guid>
    <description>*   Support `immutable` directive in Cache-Control

    ```ruby
    expires_in 1.minute, public: true, immutable: true
    # Cache-Control: public, max-age=60, immutable
    ```

    *heka1024*</description>
    <pubDate>Wed, 26 Jun 2024 20:23:19 +0000</pubDate>
    <author>heka1024</author>
    <content:encoded><![CDATA[<p>Support <code>immutable</code> directive in Cache-Control</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">expires_in</span> <span class="mi">1</span><span class="p">.</span><span class="nf">minute</span><span class="p">,</span> <span class="ss">public: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">immutable: </span><span class="kp">true</span>
<span class="c1"># Cache-Control: public, max-age=60, immutable</span>
</code></pre></div></div>

<p><em>heka1024</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Add `:wasm_unsafe_eval` mapping for `content_security_policy`
</title>
    <link>https://github.com/rails/rails/issues/51944</link>
    <guid>https://github.com/rails/rails/issues/51944</guid>
    <description>*   Add `:wasm_unsafe_eval` mapping for `content_security_policy`

    ```ruby
    # Before
    policy.script_src &quot;&#39;wasm-unsafe-eval&#39;&quot;

    # After
    policy.script_src :wasm_unsafe_eval
    ```

    *Joe Haig*</description>
    <pubDate>Wed, 29 May 2024 21:18:43 +0000</pubDate>
    <author>Cyril Blaecke</author>
    <content:encoded><![CDATA[<p>Add <code>:wasm_unsafe_eval</code> mapping for <code>content_security_policy</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Before</span>
<span class="n">policy</span><span class="p">.</span><span class="nf">script_src</span> <span class="s2">"'wasm-unsafe-eval'"</span>

<span class="c1"># After</span>
<span class="n">policy</span><span class="p">.</span><span class="nf">script_src</span> <span class="ss">:wasm_unsafe_eval</span>
</code></pre></div></div>

<p><em>Joe Haig</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Add `display_capture` and `keyboard_map` in `permissions_policy`
</title>
    <link>https://github.com/rails/rails/issues/51944</link>
    <guid>https://github.com/rails/rails/issues/51944</guid>
    <description>*   Add `display_capture` and `keyboard_map` in `permissions_policy`

    *Cyril Blaecke*</description>
    <pubDate>Wed, 29 May 2024 21:18:43 +0000</pubDate>
    <author>Cyril Blaecke</author>
    <content:encoded><![CDATA[<p>Add <code>display_capture</code> and <code>keyboard_map</code> in <code>permissions_policy</code></p>

<p><em>Cyril Blaecke</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionpack: Add `connect` route helper.
</title>
    <link>https://github.com/rails/rails/issues/52169</link>
    <guid>https://github.com/rails/rails/issues/52169</guid>
    <description>*   Add `connect` route helper.

    *Samuel Williams*</description>
    <pubDate>Wed, 14 Aug 2024 17:32:47 +0000</pubDate>
    <author>Samuel Williams</author>
    <content:encoded><![CDATA[<p>Add <code>connect</code> route helper.</p>

<p><em>Samuel Williams</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actiontext: Dispatch direct-upload events on attachment uploads
</title>
    <link>https://github.com/rails/rails/issues/52680</link>
    <guid>https://github.com/rails/rails/issues/52680</guid>
    <description>*   Dispatch direct-upload events on attachment uploads

    When using Action Text&#39;s rich textarea,  it&#39;s possible to attach files to the
    editor. Previously, that action didn&#39;t dispatch any events, which made it hard
    to react to the file uploads. For instance, if an upload failed, there was no
    way to notify the user about it, or remove the attachment from the editor.

    This commits adds new events - `direct-upload:start`, `direct-upload:progress`,
    and `direct-upload:end` - similar to how Active Storage&#39;s direct uploads work.

    *Matheus Richard*, *Brad Rees*</description>
    <pubDate>Tue, 27 Aug 2024 00:20:59 +0000</pubDate>
    <author>Matheus Richard</author>
    <content:encoded><![CDATA[<p>Dispatch direct-upload events on attachment uploads</p>

<p>When using Action Text’s rich textarea,  it’s possible to attach files to the<br />
editor. Previously, that action didn’t dispatch any events, which made it hard<br />
to react to the file uploads. For instance, if an upload failed, there was no<br />
way to notify the user about it, or remove the attachment from the editor.</p>

<p>This commits adds new events - <code>direct-upload:start</code>, <code>direct-upload:progress</code>,<br />
and <code>direct-upload:end</code> - similar to how Active Storage’s direct uploads work.</p>

<p><em>Matheus Richard</em>, <em>Brad Rees</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actiontext: Add `store_if_blank` option to `has_rich_text`
</title>
    <link>https://github.com/rails/rails/issues/52573</link>
    <guid>https://github.com/rails/rails/issues/52573</guid>
    <description>*   Add `store_if_blank` option to `has_rich_text`

    Pass `store_if_blank: false` to not create `ActionText::RichText` records when saving with a blank attribute, such as from an optional form parameter.

    ```ruby
    class Message
      has_rich_text :content, store_if_blank: false
    end

    Message.create(content: &quot;hi&quot;) # creates an ActionText::RichText
    Message.create(content: &quot;&quot;) # does not create an ActionText::RichText
    ```

    *Alex Ghiculescu*</description>
    <pubDate>Wed, 21 Aug 2024 22:26:39 +0000</pubDate>
    <author>Alex</author>
    <content:encoded><![CDATA[<p>Add <code>store_if_blank</code> option to <code>has_rich_text</code></p>

<p>Pass <code>store_if_blank: false</code> to not create <code>ActionText::RichText</code> records when saving with a blank attribute, such as from an optional form parameter.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Message</span>
  <span class="n">has_rich_text</span> <span class="ss">:content</span><span class="p">,</span> <span class="ss">store_if_blank: </span><span class="kp">false</span>
<span class="k">end</span>

<span class="no">Message</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">content: </span><span class="s2">"hi"</span><span class="p">)</span> <span class="c1"># creates an ActionText::RichText</span>
<span class="no">Message</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">content: </span><span class="s2">""</span><span class="p">)</span> <span class="c1"># does not create an ActionText::RichText</span>
</code></pre></div></div>

<p><em>Alex Ghiculescu</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actiontext: Strip `content` attribute if the key is present but the value is empty
</title>
    <link>https://github.com/rails/rails/issues/52281</link>
    <guid>https://github.com/rails/rails/issues/52281</guid>
    <description>*   Strip `content` attribute if the key is present but the value is empty

    *Jeremy Green*</description>
    <pubDate>Wed, 21 Aug 2024 18:26:53 +0000</pubDate>
    <author>Jeremy Green</author>
    <content:encoded><![CDATA[<p>Strip <code>content</code> attribute if the key is present but the value is empty</p>

<p><em>Jeremy Green</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actiontext: Rename `rich_text_area` methods into `rich_textarea`
</title>
    <link>https://github.com/rails/rails/issues/52467</link>
    <guid>https://github.com/rails/rails/issues/52467</guid>
    <description>*   Rename `rich_text_area` methods into `rich_textarea`

    Old names are still available as aliases.

    *Sean Doyle*</description>
    <pubDate>Wed, 31 Jul 2024 17:16:23 +0000</pubDate>
    <author>Sean Doyle</author>
    <content:encoded><![CDATA[<p>Rename <code>rich_text_area</code> methods into <code>rich_textarea</code></p>

<p>Old names are still available as aliases.</p>

<p><em>Sean Doyle</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actiontext: Only sanitize `content` attribute when present in attachments.
</title>
    <link>https://github.com/rails/rails/issues/52093</link>
    <guid>https://github.com/rails/rails/issues/52093</guid>
    <description>*   Only sanitize `content` attribute when present in attachments.

    *Petrik de Heus*</description>
    <pubDate>Wed, 12 Jun 2024 18:21:38 +0000</pubDate>
    <author>Petrik</author>
    <content:encoded><![CDATA[<p>Only sanitize <code>content</code> attribute when present in attachments.</p>

<p><em>Petrik de Heus</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Fix `ActiveSupport::HashWithIndifferentAccess#stringify_keys` to stringify all keys not just symbols.
</title>
    <link>https://github.com/rails/rails/issues/53125</link>
    <guid>https://github.com/rails/rails/issues/53125</guid>
    <description>*   Fix `ActiveSupport::HashWithIndifferentAccess#stringify_keys` to stringify all keys not just symbols.

    Previously:

    ```ruby
    { 1 =&gt; 2 }.with_indifferent_access.stringify_keys[1] # =&gt; 2
    ```

    After this change:

    ```ruby
    { 1 =&gt; 2 }.with_indifferent_access.stringify_keys[&quot;1&quot;] # =&gt; 2
    ```

    This change can be seen as a bug fix, but since it behaved like this for a very long time, we&#39;re deciding
    to not backport the fix and to make the change in a major release.

    *Jean Boussier*</description>
    <pubDate>Mon, 30 Sep 2024 21:48:13 +0000</pubDate>
    <author>Jean Boussier</author>
    <content:encoded><![CDATA[<p>Fix <code>ActiveSupport::HashWithIndifferentAccess#stringify_keys</code> to stringify all keys not just symbols.</p>

<p>Previously:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">2</span> <span class="p">}.</span><span class="nf">with_indifferent_access</span><span class="p">.</span><span class="nf">stringify_keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; 2</span>
</code></pre></div></div>

<p>After this change:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">2</span> <span class="p">}.</span><span class="nf">with_indifferent_access</span><span class="p">.</span><span class="nf">stringify_keys</span><span class="p">[</span><span class="s2">"1"</span><span class="p">]</span> <span class="c1"># =&gt; 2</span>
</code></pre></div></div>

<p>This change can be seen as a bug fix, but since it behaved like this for a very long time, we’re deciding<br />
to not backport the fix and to make the change in a major release.</p>

<p><em>Jean Boussier</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Include options when instrumenting `ActiveSupport::Cache::Store#delete` and `ActiveSupport::Cache::Store#delete_multi`.
</title>
    <link>https://github.com/rails/rails/issues/52912</link>
    <guid>https://github.com/rails/rails/issues/52912</guid>
    <description>*   Include options when instrumenting `ActiveSupport::Cache::Store#delete` and `ActiveSupport::Cache::Store#delete_multi`.

    *Adam Renberg Tamm*</description>
    <pubDate>Sat, 14 Sep 2024 17:40:27 +0000</pubDate>
    <author>Adam Renberg Tamm</author>
    <content:encoded><![CDATA[<p>Include options when instrumenting <code>ActiveSupport::Cache::Store#delete</code> and <code>ActiveSupport::Cache::Store#delete_multi</code>.</p>

<p><em>Adam Renberg Tamm</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Print test names when running `rails test -v` for parallel tests.
</title>
    <link>https://github.com/rails/rails/issues/52917</link>
    <guid>https://github.com/rails/rails/issues/52917</guid>
    <description>*   Print test names when running `rails test -v` for parallel tests.

    *John Hawthorn*, *Abeid Ahmed*</description>
    <pubDate>Fri, 13 Sep 2024 22:21:25 +0000</pubDate>
    <author>John Hawthorn</author>
    <content:encoded><![CDATA[<p>Print test names when running <code>rails test -v</code> for parallel tests.</p>

<p><em>John Hawthorn</em>, <em>Abeid Ahmed</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Deprecate `Benchmark.ms` core extension.
</title>
    <link>https://github.com/rails/rails/issues/52746</link>
    <guid>https://github.com/rails/rails/issues/52746</guid>
    <description>*   Deprecate `Benchmark.ms` core extension.

    The `benchmark` gem will become bundled in Ruby 3.5

    *Earlopain*</description>
    <pubDate>Wed, 11 Sep 2024 17:44:58 +0000</pubDate>
    <author>Earlopain</author>
    <content:encoded><![CDATA[<p>Deprecate <code>Benchmark.ms</code> core extension.</p>

<p>The <code>benchmark</code> gem will become bundled in Ruby 3.5</p>

<p><em>Earlopain</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: `ActiveSupport::TimeWithZone#inspect` now uses ISO 8601 style time like `Time#inspect`
</title>
    <link>https://github.com/rails/rails/issues/52371</link>
    <guid>https://github.com/rails/rails/issues/52371</guid>
    <description>*   `ActiveSupport::TimeWithZone#inspect` now uses ISO 8601 style time like `Time#inspect`

    *John Hawthorn*</description>
    <pubDate>Thu, 05 Sep 2024 22:45:52 +0000</pubDate>
    <author>John Hawthorn</author>
    <content:encoded><![CDATA[<p><code>ActiveSupport::TimeWithZone#inspect</code> now uses ISO 8601 style time like <code>Time#inspect</code></p>

<p><em>John Hawthorn</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: `ActiveSupport::ErrorReporter#report` now assigns a backtrace to unraised exceptions.
</title>
    <link>https://github.com/rails/rails/issues/52684</link>
    <guid>https://github.com/rails/rails/issues/52684</guid>
    <description>*   `ActiveSupport::ErrorReporter#report` now assigns a backtrace to unraised exceptions.

    Previously reporting an un-raised exception would result in an error report without
    a backtrace. Now it automatically generates one.

    *Jean Boussier*</description>
    <pubDate>Fri, 23 Aug 2024 10:34:14 +0000</pubDate>
    <author>Jean Boussier</author>
    <content:encoded><![CDATA[<p><code>ActiveSupport::ErrorReporter#report</code> now assigns a backtrace to unraised exceptions.</p>

<p>Previously reporting an un-raised exception would result in an error report without<br />
a backtrace. Now it automatically generates one.</p>

<p><em>Jean Boussier</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Add `escape_html_entities` option to `ActiveSupport::JSON.encode`.
</title>
    <link>https://github.com/rails/rails/issues/51272</link>
    <guid>https://github.com/rails/rails/issues/51272</guid>
    <description>*   Add `escape_html_entities` option to `ActiveSupport::JSON.encode`.

    This allows for overriding the global configuration found at
    `ActiveSupport.escape_html_entities_in_json` for specific calls to `to_json`.

    This should be usable from controllers in the following manner:
    ```ruby
    class MyController &lt; ApplicationController
      def index
        render json: { hello: &quot;world&quot; }, escape_html_entities: false
      end
    end
    ```

    *Nigel Baillie*</description>
    <pubDate>Sun, 11 Aug 2024 09:34:18 +0000</pubDate>
    <author>Nigel Baillie</author>
    <content:encoded><![CDATA[<p>Add <code>escape_html_entities</code> option to <code>ActiveSupport::JSON.encode</code>.</p>

<p>This allows for overriding the global configuration found at<br />
<code>ActiveSupport.escape_html_entities_in_json</code> for specific calls to <code>to_json</code>.</p>

<p>This should be usable from controllers in the following manner:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MyController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">hello: </span><span class="s2">"world"</span> <span class="p">},</span> <span class="ss">escape_html_entities: </span><span class="kp">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><em>Nigel Baillie</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Raise when using key which can&#39;t respond to `#to_sym` in `EncryptedConfiguration`.
</title>
    <link>https://github.com/rails/rails/issues/51950</link>
    <guid>https://github.com/rails/rails/issues/51950</guid>
    <description>*   Raise when using key which can&#39;t respond to `#to_sym` in `EncryptedConfiguration`.

    As is the case when trying to use an Integer or Float as a key, which is unsupported.

    *zzak*</description>
    <pubDate>Sun, 11 Aug 2024 09:17:26 +0000</pubDate>
    <author>zzak</author>
    <content:encoded><![CDATA[<p>Raise when using key which can’t respond to <code>#to_sym</code> in <code>EncryptedConfiguration</code>.</p>

<p>As is the case when trying to use an Integer or Float as a key, which is unsupported.</p>

<p><em>zzak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Deprecate addition and since between two `Time` and `ActiveSupport::TimeWithZone`.
</title>
    <link>https://github.com/rails/rails/issues/52370</link>
    <guid>https://github.com/rails/rails/issues/52370</guid>
    <description>*   Deprecate addition and since between two `Time` and `ActiveSupport::TimeWithZone`.

    Previously adding time instances together such as `10.days.ago + 10.days.ago` or `10.days.ago.since(10.days.ago)` produced a nonsensical future date. This behavior is deprecated and will be removed in Rails 8.1.

    *Nick Schwaderer*</description>
    <pubDate>Fri, 19 Jul 2024 22:25:26 +0000</pubDate>
    <author>John Hawthorn</author>
    <content:encoded><![CDATA[<p>Deprecate addition and since between two <code>Time</code> and <code>ActiveSupport::TimeWithZone</code>.</p>

<p>Previously adding time instances together such as <code>10.days.ago + 10.days.ago</code> or <code>10.days.ago.since(10.days.ago)</code> produced a nonsensical future date. This behavior is deprecated and will be removed in Rails 8.1.</p>

<p><em>Nick Schwaderer</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Support rfc2822 format for Time#to_fs &amp; Date#to_fs.
</title>
    <link>https://github.com/rails/rails/issues/52337</link>
    <guid>https://github.com/rails/rails/issues/52337</guid>
    <description>*   Support rfc2822 format for Time#to_fs &amp; Date#to_fs.

    *Akshay Birajdar*</description>
    <pubDate>Tue, 16 Jul 2024 13:00:51 +0000</pubDate>
    <author>Akshay Birajdar</author>
    <content:encoded><![CDATA[<p>Support rfc2822 format for Time#to_fs &amp; Date#to_fs.</p>

<p><em>Akshay Birajdar</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Optimize load time for `Railtie#initialize_i18n`. Filter `I18n.load_path`s passed to the file watcher to only those
</title>
    <link>https://github.com/rails/rails/issues/52271</link>
    <guid>https://github.com/rails/rails/issues/52271</guid>
    <description>*   Optimize load time for `Railtie#initialize_i18n`. Filter `I18n.load_path`s passed to the file watcher to only those
    under `Rails.root`. Previously the watcher would grab all available locales, including those in gems
    which do not require a watcher because they won&#39;t change.

    *Nick Schwaderer*</description>
    <pubDate>Thu, 11 Jul 2024 18:00:20 +0000</pubDate>
    <author>Nick Schwaderer</author>
    <content:encoded><![CDATA[<p>Optimize load time for <code>Railtie#initialize_i18n</code>. Filter <code>I18n.load_path</code>s passed to the file watcher to only those<br />
under <code>Rails.root</code>. Previously the watcher would grab all available locales, including those in gems<br />
which do not require a watcher because they won’t change.</p>

<p><em>Nick Schwaderer</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Add a `filter` option to `in_order_of` to prioritize certain values in the sorting without filtering the results
</title>
    <link>https://github.com/rails/rails/issues/52072</link>
    <guid>https://github.com/rails/rails/issues/52072</guid>
    <description>*   Add a `filter` option to `in_order_of` to prioritize certain values in the sorting without filtering the results
    by these values.

    *Igor Depolli*</description>
    <pubDate>Wed, 12 Jun 2024 22:21:17 +0000</pubDate>
    <author>Igor Depolli</author>
    <content:encoded><![CDATA[<p>Add a <code>filter</code> option to <code>in_order_of</code> to prioritize certain values in the sorting without filtering the results<br />
by these values.</p>

<p><em>Igor Depolli</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Improve error message when using `assert_difference` or `assert_changes` with a
</title>
    <link>https://github.com/rails/rails/issues/52036</link>
    <guid>https://github.com/rails/rails/issues/52036</guid>
    <description>*   Improve error message when using `assert_difference` or `assert_changes` with a
    proc by printing the proc&#39;s source code (MRI only).

    *Richard Böhme*, *Jean Boussier*</description>
    <pubDate>Sun, 09 Jun 2024 08:53:48 +0000</pubDate>
    <author>Richard Böhme</author>
    <content:encoded><![CDATA[<p>Improve error message when using <code>assert_difference</code> or <code>assert_changes</code> with a<br />
proc by printing the proc’s source code (MRI only).</p>

<p><em>Richard Böhme</em>, <em>Jean Boussier</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Add a new configuration value `:zone` for `ActiveSupport.to_time_preserves_timezone` and rename the previous `true` value to `:offset`. The new default value is `:zone`.
</title>
    <link>https://github.com/rails/rails/issues/52091</link>
    <guid>https://github.com/rails/rails/issues/52091</guid>
    <description>*   Add a new configuration value `:zone` for `ActiveSupport.to_time_preserves_timezone` and rename the previous `true` value to `:offset`. The new default value is `:zone`.

    *Jason Kim*, *John Hawthorn*</description>
    <pubDate>Wed, 26 Jun 2024 20:16:05 +0000</pubDate>
    <author>Jason Kim</author>
    <content:encoded><![CDATA[<p>Add a new configuration value <code>:zone</code> for <code>ActiveSupport.to_time_preserves_timezone</code> and rename the previous <code>true</code> value to <code>:offset</code>. The new default value is <code>:zone</code>.</p>

<p><em>Jason Kim</em>, <em>John Hawthorn</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Align instrumentation `payload[:key]` in ActiveSupport::Cache to follow the same pattern, with namespaced and normalized keys.
</title>
    <link>https://github.com/rails/rails/issues/52736</link>
    <guid>https://github.com/rails/rails/issues/52736</guid>
    <description>*   Align instrumentation `payload[:key]` in ActiveSupport::Cache to follow the same pattern, with namespaced and normalized keys.

    *Frederik Erbs Spang Thomsen*</description>
    <pubDate>Wed, 28 Aug 2024 19:36:28 +0000</pubDate>
    <author>Frederik Spang</author>
    <content:encoded><![CDATA[<p>Align instrumentation <code>payload[:key]</code> in ActiveSupport::Cache to follow the same pattern, with namespaced and normalized keys.</p>

<p><em>Frederik Erbs Spang Thomsen</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activesupport: Fix `travel_to` to set usec 0 when `with_usec` is `false` and the given argument String or DateTime.
</title>
    <link>https://github.com/rails/rails/issues/52880</link>
    <guid>https://github.com/rails/rails/issues/52880</guid>
    <description>*   Fix `travel_to` to set usec 0 when `with_usec` is `false` and the given argument String or DateTime.

    *mopp*</description>
    <pubDate>Wed, 11 Sep 2024 16:29:34 +0000</pubDate>
    <author>mopp</author>
    <content:encoded><![CDATA[<p>Fix <code>travel_to</code> to set usec 0 when <code>with_usec</code> is <code>false</code> and the given argument String or DateTime.</p>

<p><em>mopp</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>guides: The guide _Classic to Zeitwerk HOWTO_ that documented how to migrate from
</title>
    <link>https://github.com/rails/rails/issues/52165</link>
    <guid>https://github.com/rails/rails/issues/52165</guid>
    <description>*   The guide _Classic to Zeitwerk HOWTO_ that documented how to migrate from
    the `classic` autoloader to Zeitwerk has been deleted.

    The last version of this guide can be found
    [here](https://guides.rubyonrails.org/v7.2/classic_to_zeitwerk_howto.html),
    in case you need it.

    *Petrik de Heus*</description>
    <pubDate>Thu, 20 Jun 2024 08:47:01 +0000</pubDate>
    <author>Xavier Noria</author>
    <content:encoded><![CDATA[<p>The guide <em>Classic to Zeitwerk HOWTO</em> that documented how to migrate from<br />
the <code>classic</code> autoloader to Zeitwerk has been deleted.</p>

<p>The last version of this guide can be found<br />
<a href="https://guides.rubyonrails.org/v7.2/classic_to_zeitwerk_howto.html">here</a>,<br />
in case you need it.</p>

<p><em>Petrik de Heus</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activemodel: Add `:except_on` option for validations. Grants the ability to _skip_ validations in specified contexts.
</title>
    <link>https://github.com/rails/rails/issues/43495</link>
    <guid>https://github.com/rails/rails/issues/43495</guid>
    <description>*   Add `:except_on` option for validations. Grants the ability to _skip_ validations in specified contexts.

    ```ruby
    class User &lt; ApplicationRecord
        #...
        validates :birthday, presence: { except_on: :admin }
        #...
    end

    user = User.new(attributes except birthday)
    user.save(context: :admin)
    ```

    *Drew Bragg*</description>
    <pubDate>Sun, 06 Oct 2024 15:43:03 +0000</pubDate>
    <author>Drew Bragg</author>
    <content:encoded><![CDATA[<p>Add <code>:except_on</code> option for validations. Grants the ability to <em>skip</em> validations in specified contexts.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
    <span class="c1">#...</span>
    <span class="n">validates</span> <span class="ss">:birthday</span><span class="p">,</span> <span class="ss">presence: </span><span class="p">{</span> <span class="ss">except_on: :admin</span> <span class="p">}</span>
    <span class="c1">#...</span>
<span class="k">end</span>

<span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">attributes</span> <span class="n">except</span> <span class="n">birthday</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="ss">context: :admin</span><span class="p">)</span>
</code></pre></div></div>

<p><em>Drew Bragg</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activemodel: Make `ActiveModel::Serialization#read_attribute_for_serialization` public
</title>
    <link>https://github.com/rails/rails/issues/53042</link>
    <guid>https://github.com/rails/rails/issues/53042</guid>
    <description>*   Make `ActiveModel::Serialization#read_attribute_for_serialization` public

    *Sean Doyle*</description>
    <pubDate>Thu, 26 Sep 2024 13:38:44 +0000</pubDate>
    <author>Sean Doyle</author>
    <content:encoded><![CDATA[<p>Make <code>ActiveModel::Serialization#read_attribute_for_serialization</code> public</p>

<p><em>Sean Doyle</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activemodel: Add a default token generator for password reset tokens when using `has_secure_password`.
</title>
    <link>https://github.com/rails/rails/issues/52483</link>
    <guid>https://github.com/rails/rails/issues/52483</guid>
    <description>*   Add a default token generator for password reset tokens when using `has_secure_password`.

    ```ruby
    class User &lt; ApplicationRecord
      has_secure_password
    end

    user = User.create!(name: &quot;david&quot;, password: &quot;123&quot;, password_confirmation: &quot;123&quot;)
    token = user.password_reset_token
    User.find_by_password_reset_token(token) # returns user

    # 16 minutes later...
    User.find_by_password_reset_token(token) # returns nil

    # raises ActiveSupport::MessageVerifier::InvalidSignature since the token is expired
    User.find_by_password_reset_token!(token)
    ```

    *DHH*</description>
    <pubDate>Fri, 02 Aug 2024 12:34:23 +0000</pubDate>
    <author>David Heinemeier Hansson</author>
    <content:encoded><![CDATA[<p>Add a default token generator for password reset tokens when using <code>has_secure_password</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_secure_password</span>
<span class="k">end</span>

<span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create!</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"david"</span><span class="p">,</span> <span class="ss">password: </span><span class="s2">"123"</span><span class="p">,</span> <span class="ss">password_confirmation: </span><span class="s2">"123"</span><span class="p">)</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="nf">password_reset_token</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find_by_password_reset_token</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="c1"># returns user</span>

<span class="c1"># 16 minutes later...</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find_by_password_reset_token</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="c1"># returns nil</span>

<span class="c1"># raises ActiveSupport::MessageVerifier::InvalidSignature since the token is expired</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find_by_password_reset_token!</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</code></pre></div></div>

<p><em>DHH</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activemodel: Add a load hook `active_model_translation` for `ActiveModel::Translation`.
</title>
    <link>https://github.com/rails/rails/issues/52426</link>
    <guid>https://github.com/rails/rails/issues/52426</guid>
    <description>*   Add a load hook `active_model_translation` for `ActiveModel::Translation`.

    *Shouichi Kamiya*</description>
    <pubDate>Mon, 29 Jul 2024 21:59:46 +0000</pubDate>
    <author>Shouichi Kamiya</author>
    <content:encoded><![CDATA[<p>Add a load hook <code>active_model_translation</code> for <code>ActiveModel::Translation</code>.</p>

<p><em>Shouichi Kamiya</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activemodel: Add `raise_on_missing_translations` option to `ActiveModel::Translation`.
</title>
    <link>https://github.com/rails/rails/issues/52426</link>
    <guid>https://github.com/rails/rails/issues/52426</guid>
    <description>*   Add `raise_on_missing_translations` option to `ActiveModel::Translation`.
    When the option is set, `human_attribute_name` raises an error if a translation of the given attribute is missing.

    ```ruby
    # ActiveModel::Translation.raise_on_missing_translations = false
    Post.human_attribute_name(&quot;title&quot;)
    =&gt; &quot;Title&quot;

    # ActiveModel::Translation.raise_on_missing_translations = true
    Post.human_attribute_name(&quot;title&quot;)
    =&gt; Translation missing. Options considered were: (I18n::MissingTranslationData)
        - en.activerecord.attributes.post.title
        - en.attributes.title

                raise exception.respond_to?(:to_exception) ? exception.to_exception : exception
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ```

    *Shouichi Kamiya*</description>
    <pubDate>Mon, 29 Jul 2024 21:59:46 +0000</pubDate>
    <author>Shouichi Kamiya</author>
    <content:encoded><![CDATA[<p>Add <code>raise_on_missing_translations</code> option to <code>ActiveModel::Translation</code>.<br />
When the option is set, <code>human_attribute_name</code> raises an error if a translation of the given attribute is missing.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ActiveModel::Translation.raise_on_missing_translations = false</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">human_attribute_name</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"Title"</span>

<span class="c1"># ActiveModel::Translation.raise_on_missing_translations = true</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">human_attribute_name</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="no">Translation</span> <span class="n">missing</span><span class="o">.</span> <span class="no">Options</span> <span class="n">considered</span> <span class="ss">were: </span><span class="p">(</span><span class="no">I18n</span><span class="o">::</span><span class="no">MissingTranslationData</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">en</span><span class="p">.</span><span class="nf">activerecord</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">post</span><span class="p">.</span><span class="nf">title</span>
    <span class="o">-</span> <span class="n">en</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">title</span>

            <span class="k">raise</span> <span class="n">exception</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="ss">:to_exception</span><span class="p">)</span> <span class="p">?</span> <span class="n">exception</span><span class="p">.</span><span class="nf">to_exception</span> <span class="p">:</span> <span class="n">exception</span>
                  <span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
</code></pre></div></div>

<p><em>Shouichi Kamiya</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activemodel: Introduce `ActiveModel::AttributeAssignment#attribute_writer_missing`
</title>
    <link>https://github.com/rails/rails/issues/52417</link>
    <guid>https://github.com/rails/rails/issues/52417</guid>
    <description>*   Introduce `ActiveModel::AttributeAssignment#attribute_writer_missing`

    Provide instances with an opportunity to gracefully handle assigning to an
    unknown attribute:

    ```ruby
    class Rectangle
      include ActiveModel::AttributeAssignment

      attr_accessor :length, :width

      def attribute_writer_missing(name, value)
        Rails.logger.warn &quot;Tried to assign to unknown attribute #{name}&quot;
      end
    end

    rectangle = Rectangle.new
    rectangle.assign_attributes(height: 10) # =&gt; Logs &quot;Tried to assign to unknown attribute &#39;height&#39;&quot;
    ```

    *Sean Doyle*</description>
    <pubDate>Fri, 26 Jul 2024 22:48:16 +0000</pubDate>
    <author>Sean Doyle</author>
    <content:encoded><![CDATA[<p>Introduce <code>ActiveModel::AttributeAssignment#attribute_writer_missing</code></p>

<p>Provide instances with an opportunity to gracefully handle assigning to an<br />
unknown attribute:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Rectangle</span>
  <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">AttributeAssignment</span>

  <span class="nb">attr_accessor</span> <span class="ss">:length</span><span class="p">,</span> <span class="ss">:width</span>

  <span class="k">def</span> <span class="nf">attribute_writer_missing</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="no">Rails</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">warn</span> <span class="s2">"Tried to assign to unknown attribute </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">rectangle</span> <span class="o">=</span> <span class="no">Rectangle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">rectangle</span><span class="p">.</span><span class="nf">assign_attributes</span><span class="p">(</span><span class="ss">height: </span><span class="mi">10</span><span class="p">)</span> <span class="c1"># =&gt; Logs "Tried to assign to unknown attribute 'height'"</span>
</code></pre></div></div>

<p><em>Sean Doyle</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionview: Enable DependencyTracker to evaluate renders with trailing interpolation.
</title>
    <link>https://github.com/rails/rails/issues/50944</link>
    <guid>https://github.com/rails/rails/issues/50944</guid>
    <description>*   Enable DependencyTracker to evaluate renders with trailing interpolation.

    ```erb
    &lt;%= render &quot;maintenance_tasks/runs/info/#{run.status}&quot; %&gt;
    ```

    Previously, the DependencyTracker would ignore this render, but now it will
    mark all partials in the &quot;maintenance_tasks/runs/info&quot; folder as
    dependencies.

    *Hartley McGuire*</description>
    <pubDate>Wed, 11 Sep 2024 05:50:38 +0000</pubDate>
    <author>Hartley McGuire</author>
    <content:encoded><![CDATA[<p>Enable DependencyTracker to evaluate renders with trailing interpolation.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"maintenance_tasks/runs/info/</span><span class="si">#{</span><span class="n">run</span><span class="p">.</span><span class="nf">status</span><span class="si">}</span><span class="s2">"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Previously, the DependencyTracker would ignore this render, but now it will<br />
mark all partials in the “maintenance_tasks/runs/info” folder as<br />
dependencies.</p>

<p><em>Hartley McGuire</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionview: Rename `text_area` methods into `textarea`
</title>
    <link>https://github.com/rails/rails/issues/52467</link>
    <guid>https://github.com/rails/rails/issues/52467</guid>
    <description>*   Rename `text_area` methods into `textarea`

    Old names are still available as aliases.

    *Sean Doyle*</description>
    <pubDate>Wed, 31 Jul 2024 17:16:23 +0000</pubDate>
    <author>Sean Doyle</author>
    <content:encoded><![CDATA[<p>Rename <code>text_area</code> methods into <code>textarea</code></p>

<p>Old names are still available as aliases.</p>

<p><em>Sean Doyle</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>actionview: Rename `check_box*` methods into `checkbox*`.
</title>
    <link>https://github.com/rails/rails/issues/52432</link>
    <guid>https://github.com/rails/rails/issues/52432</guid>
    <description>*   Rename `check_box*` methods into `checkbox*`.

    Old names are still available as aliases.

    *Jean Boussier*</description>
    <pubDate>Sun, 28 Jul 2024 11:40:25 +0000</pubDate>
    <author>Jean Boussier</author>
    <content:encoded><![CDATA[<p>Rename <code>check_box*</code> methods into <code>checkbox*</code>.</p>

<p>Old names are still available as aliases.</p>

<p><em>Jean Boussier</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Allow `ActiveRecord::Base#pluck` to accept hash arguments with symbol and string values.
</title>
    <link>https://github.com/rails/rails/issues/51676</link>
    <guid>https://github.com/rails/rails/issues/51676</guid>
    <description>*   Allow `ActiveRecord::Base#pluck` to accept hash arguments with symbol and string values.

    ```ruby
    Post.joins(:comments).pluck(:id, comments: :id)
    Post.joins(:comments).pluck(&quot;id&quot;, &quot;comments&quot; =&gt; &quot;id&quot;)
    ```

    *Joshua Young*</description>
    <pubDate>Fri, 04 Oct 2024 13:32:09 +0000</pubDate>
    <author>Joshua Young</author>
    <content:encoded><![CDATA[<p>Allow <code>ActiveRecord::Base#pluck</code> to accept hash arguments with symbol and string values.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Post</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:comments</span><span class="p">).</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">comments: :id</span><span class="p">)</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:comments</span><span class="p">).</span><span class="nf">pluck</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">"comments"</span> <span class="o">=&gt;</span> <span class="s2">"id"</span><span class="p">)</span>
</code></pre></div></div>

<p><em>Joshua Young</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Make Float distinguish between `float4` and `float8` in PostgreSQL.
</title>
    <link>https://github.com/rails/rails/issues/53107</link>
    <guid>https://github.com/rails/rails/issues/53107</guid>
    <description>*   Make Float distinguish between `float4` and `float8` in PostgreSQL.

    Fixes #52742

    *Ryota Kitazawa*, *Takayuki Nagatomi*</description>
    <pubDate>Mon, 30 Sep 2024 07:28:44 +0000</pubDate>
    <author>Takayuki Nagatomi</author>
    <content:encoded><![CDATA[<p>Make Float distinguish between <code>float4</code> and <code>float8</code> in PostgreSQL.</p>

<p>Fixes #52742</p>

<p><em>Ryota Kitazawa</em>, <em>Takayuki Nagatomi</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Allow `drop_table` to accept an array of table names.
</title>
    <link>https://github.com/rails/rails/issues/52773</link>
    <guid>https://github.com/rails/rails/issues/52773</guid>
    <description>*   Allow `drop_table` to accept an array of table names.

    This will let you to drop multiple tables in a single call.

    ```ruby
    ActiveRecord::Base.lease_connection.drop_table(:users, :posts)
    ```

    *Gabriel Sobrinho*</description>
    <pubDate>Tue, 17 Sep 2024 01:19:51 +0000</pubDate>
    <author>Gabriel Sobrinho</author>
    <content:encoded><![CDATA[<p>Allow <code>drop_table</code> to accept an array of table names.</p>

<p>This will let you to drop multiple tables in a single call.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">lease_connection</span><span class="p">.</span><span class="nf">drop_table</span><span class="p">(</span><span class="ss">:users</span><span class="p">,</span> <span class="ss">:posts</span><span class="p">)</span>
</code></pre></div></div>

<p><em>Gabriel Sobrinho</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add support for PostgreSQL `IF NOT EXISTS` via the `:if_not_exists` option
</title>
    <link>https://github.com/rails/rails/issues/52916</link>
    <guid>https://github.com/rails/rails/issues/52916</guid>
    <description>*   Add support for PostgreSQL `IF NOT EXISTS` via the `:if_not_exists` option
    on the `add_enum_value` method.

    *Ariel Rzezak*</description>
    <pubDate>Sat, 14 Sep 2024 05:01:28 +0000</pubDate>
    <author>Ariel Rzezak</author>
    <content:encoded><![CDATA[<p>Add support for PostgreSQL <code>IF NOT EXISTS</code> via the <code>:if_not_exists</code> option<br />
on the <code>add_enum_value</code> method.</p>

<p><em>Ariel Rzezak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: When running `db:migrate` on a fresh database, load the database schema before running migrations.
</title>
    <link>https://github.com/rails/rails/issues/52830</link>
    <guid>https://github.com/rails/rails/issues/52830</guid>
    <description>*   When running `db:migrate` on a fresh database, load the database schema before running migrations.

    *Andrew Novoselac*</description>
    <pubDate>Wed, 11 Sep 2024 17:47:58 +0000</pubDate>
    <author>Andrew Novoselac</author>
    <content:encoded><![CDATA[<p>When running <code>db:migrate</code> on a fresh database, load the database schema before running migrations.</p>

<p><em>Andrew Novoselac</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Fix an issue where `.left_outer_joins` used with multiple associations that have
</title>
    <link>https://github.com/rails/rails/issues/52850</link>
    <guid>https://github.com/rails/rails/issues/52850</guid>
    <description>*   Fix an issue where `.left_outer_joins` used with multiple associations that have
    the same child association but different parents does not join all parents.

    Previously, using `.left_outer_joins` with the same child association would only join one of the parents.

    Now it will correctly join both parents.

    Fixes #41498.

    *Garrett Blehm*</description>
    <pubDate>Wed, 11 Sep 2024 05:50:38 +0000</pubDate>
    <author>Garrett Blehm</author>
    <content:encoded><![CDATA[<p>Fix an issue where <code>.left_outer_joins</code> used with multiple associations that have<br />
the same child association but different parents does not join all parents.</p>

<p>Previously, using <code>.left_outer_joins</code> with the same child association would only join one of the parents.</p>

<p>Now it will correctly join both parents.</p>

<p>Fixes #41498.</p>

<p><em>Garrett Blehm</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Deprecate `unsigned_float` and `unsigned_decimal` short-hand column methods.
</title>
    <link>https://github.com/rails/rails/issues/52828</link>
    <guid>https://github.com/rails/rails/issues/52828</guid>
    <description>*   Deprecate `unsigned_float` and `unsigned_decimal` short-hand column methods.

    As of MySQL 8.0.17, the UNSIGNED attribute is deprecated for columns of type FLOAT, DOUBLE,
    and DECIMAL. Consider using a simple CHECK constraint instead for such columns.

    https://dev.mysql.com/doc/refman/8.0/en/numeric-type-syntax.html

    *Ryuta Kamizono*</description>
    <pubDate>Sat, 07 Sep 2024 18:05:15 +0000</pubDate>
    <author>Ryuta Kamizono</author>
    <content:encoded><![CDATA[<p>Deprecate <code>unsigned_float</code> and <code>unsigned_decimal</code> short-hand column methods.</p>

<p>As of MySQL 8.0.17, the UNSIGNED attribute is deprecated for columns of type FLOAT, DOUBLE,<br />
and DECIMAL. Consider using a simple CHECK constraint instead for such columns.</p>

<p>https://dev.mysql.com/doc/refman/8.0/en/numeric-type-syntax.html</p>

<p><em>Ryuta Kamizono</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Drop MySQL 5.5 support.
</title>
    <link>https://github.com/rails/rails/issues/52817</link>
    <guid>https://github.com/rails/rails/issues/52817</guid>
    <description>*   Drop MySQL 5.5 support.

    MySQL 5.5 is the only version that does not support datetime with precision,
    which we have supported in the core. Now we support MySQL 5.6.4 or later, which
    is the first version to support datetime with precision.

    *Ryuta Kamizono*</description>
    <pubDate>Sat, 07 Sep 2024 05:10:19 +0000</pubDate>
    <author>Ryuta Kamizono</author>
    <content:encoded><![CDATA[<p>Drop MySQL 5.5 support.</p>

<p>MySQL 5.5 is the only version that does not support datetime with precision,<br />
which we have supported in the core. Now we support MySQL 5.6.4 or later, which<br />
is the first version to support datetime with precision.</p>

<p><em>Ryuta Kamizono</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Make Active Record asynchronous queries compatible with transactional fixtures.
</title>
    <link>https://github.com/rails/rails/issues/52806</link>
    <guid>https://github.com/rails/rails/issues/52806</guid>
    <description>*   Make Active Record asynchronous queries compatible with transactional fixtures.

    Previously transactional fixtures would disable asynchronous queries, because transactional
    fixtures impose all queries use the same connection.

    Now asynchronous queries will use the connection pinned by transactional fixtures, and behave
    much closer to production.

    *Jean Boussier*</description>
    <pubDate>Fri, 06 Sep 2024 13:25:16 +0000</pubDate>
    <author>Jean Boussier</author>
    <content:encoded><![CDATA[<p>Make Active Record asynchronous queries compatible with transactional fixtures.</p>

<p>Previously transactional fixtures would disable asynchronous queries, because transactional<br />
fixtures impose all queries use the same connection.</p>

<p>Now asynchronous queries will use the connection pinned by transactional fixtures, and behave<br />
much closer to production.</p>

<p><em>Jean Boussier</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Deserialize binary data before decrypting
</title>
    <link>https://github.com/rails/rails/issues/52729</link>
    <guid>https://github.com/rails/rails/issues/52729</guid>
    <description>*   Deserialize binary data before decrypting

    This ensures that we call `PG::Connection.unescape_bytea` on PostgreSQL before decryption.

    *Donal McBreen*</description>
    <pubDate>Wed, 28 Aug 2024 19:20:42 +0000</pubDate>
    <author>Donal McBreen</author>
    <content:encoded><![CDATA[<p>Deserialize binary data before decrypting</p>

<p>This ensures that we call <code>PG::Connection.unescape_bytea</code> on PostgreSQL before decryption.</p>

<p><em>Donal McBreen</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Ensure `ActiveRecord::Encryption.config` is always ready before access.
</title>
    <link>https://github.com/rails/rails/issues/52669</link>
    <guid>https://github.com/rails/rails/issues/52669</guid>
    <description>*   Ensure `ActiveRecord::Encryption.config` is always ready before access.

    Previously, `ActiveRecord::Encryption` configuration was deferred until `ActiveRecord::Base`
    was loaded. Therefore, accessing `ActiveRecord::Encryption.config` properties before
    `ActiveRecord::Base` was loaded would give incorrect results.

    `ActiveRecord::Encryption` now has its own loading hook so that its configuration is set as
    soon as needed.

    When `ActiveRecord::Base` is loaded, even lazily, it in turn triggers the loading of
    `ActiveRecord::Encryption`, thus preserving the original behavior of having its config ready
    before any use of `ActiveRecord::Base`.

    *Maxime Réty*</description>
    <pubDate>Tue, 27 Aug 2024 17:09:33 +0000</pubDate>
    <author>maximerety</author>
    <content:encoded><![CDATA[<p>Ensure <code>ActiveRecord::Encryption.config</code> is always ready before access.</p>

<p>Previously, <code>ActiveRecord::Encryption</code> configuration was deferred until <code>ActiveRecord::Base</code><br />
was loaded. Therefore, accessing <code>ActiveRecord::Encryption.config</code> properties before<br />
<code>ActiveRecord::Base</code> was loaded would give incorrect results.</p>

<p><code>ActiveRecord::Encryption</code> now has its own loading hook so that its configuration is set as<br />
soon as needed.</p>

<p>When <code>ActiveRecord::Base</code> is loaded, even lazily, it in turn triggers the loading of<br />
<code>ActiveRecord::Encryption</code>, thus preserving the original behavior of having its config ready<br />
before any use of <code>ActiveRecord::Base</code>.</p>

<p><em>Maxime Réty</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add `TimeZoneConverter#==` method, so objects will be properly compared by
</title>
    <link>https://github.com/rails/rails/issues/52698</link>
    <guid>https://github.com/rails/rails/issues/52698</guid>
    <description>*   Add `TimeZoneConverter#==` method, so objects will be properly compared by
    their type, scale, limit &amp; precision.

    Address #52699.

    *Ruy Rocha*</description>
    <pubDate>Tue, 27 Aug 2024 16:17:36 +0000</pubDate>
    <author>Ruy R.</author>
    <content:encoded><![CDATA[<p>Add <code>TimeZoneConverter#==</code> method, so objects will be properly compared by<br />
their type, scale, limit &amp; precision.</p>

<p>Address #52699.</p>

<p><em>Ruy Rocha</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add support for SQLite3 full-text-search and other virtual tables.
</title>
    <link>https://github.com/rails/rails/issues/52354</link>
    <guid>https://github.com/rails/rails/issues/52354</guid>
    <description>*   Add support for SQLite3 full-text-search and other virtual tables.

    Previously, adding sqlite3 virtual tables messed up `schema.rb`.

    Now, virtual tables can safely be added using `create_virtual_table`.

    *Zacharias Knudsen*</description>
    <pubDate>Mon, 26 Aug 2024 17:49:10 +0000</pubDate>
    <author>Zacharias Knudsen</author>
    <content:encoded><![CDATA[<p>Add support for SQLite3 full-text-search and other virtual tables.</p>

<p>Previously, adding sqlite3 virtual tables messed up <code>schema.rb</code>.</p>

<p>Now, virtual tables can safely be added using <code>create_virtual_table</code>.</p>

<p><em>Zacharias Knudsen</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Support use of alternative database interfaces via the `database_cli` ActiveRecord configuration option.
</title>
    <link>https://github.com/rails/rails/issues/52656</link>
    <guid>https://github.com/rails/rails/issues/52656</guid>
    <description>*   Support use of alternative database interfaces via the `database_cli` ActiveRecord configuration option.

    ```ruby
    Rails.application.configure do
      config.active_record.database_cli = { postgresql: &quot;pgcli&quot; }
    end
    ```

    *T S Vallender*</description>
    <pubDate>Thu, 22 Aug 2024 17:58:17 +0000</pubDate>
    <author>Trevor Vallender</author>
    <content:encoded><![CDATA[<p>Support use of alternative database interfaces via the <code>database_cli</code> ActiveRecord configuration option.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">active_record</span><span class="p">.</span><span class="nf">database_cli</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">postgresql: </span><span class="s2">"pgcli"</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<p><em>T S Vallender</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add support for dumping table inheritance and native partitioning table definitions for PostgeSQL adapter
</title>
    <link>https://github.com/rails/rails/issues/50475</link>
    <guid>https://github.com/rails/rails/issues/50475</guid>
    <description>*   Add support for dumping table inheritance and native partitioning table definitions for PostgeSQL adapter

    *Justin Talbott*</description>
    <pubDate>Thu, 22 Aug 2024 17:08:25 +0000</pubDate>
    <author>justin talbott</author>
    <content:encoded><![CDATA[<p>Add support for dumping table inheritance and native partitioning table definitions for PostgeSQL adapter</p>

<p><em>Justin Talbott</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add support for `ActiveRecord::Point` type casts using `Hash` values
</title>
    <link>https://github.com/rails/rails/issues/44841</link>
    <guid>https://github.com/rails/rails/issues/44841</guid>
    <description>*   Add support for `ActiveRecord::Point` type casts using `Hash` values

    This allows `ActiveRecord::Point` to be cast or serialized from a hash
    with `:x` and `:y` keys of numeric values, mirroring the functionality of
    existing casts for string and array values. Both string and symbol keys are
    supported.

    ```ruby
    class PostgresqlPoint &lt; ActiveRecord::Base
      attribute :x, :point
      attribute :y, :point
      attribute :z, :point
    end

    val = PostgresqlPoint.new({
      x: &#39;(12.34, -43.21)&#39;,
      y: [12.34, &#39;-43.21&#39;],
      z: {x: &#39;12.34&#39;, y: -43.21}
    })
    ActiveRecord::Point.new(12.32, -43.21) == val.x == val.y == val.z
    ```

    *Stephen Drew*</description>
    <pubDate>Wed, 21 Aug 2024 18:36:47 +0000</pubDate>
    <author>Stephen Drew</author>
    <content:encoded><![CDATA[<p>Add support for <code>ActiveRecord::Point</code> type casts using <code>Hash</code> values</p>

<p>This allows <code>ActiveRecord::Point</code> to be cast or serialized from a hash<br />
with <code>:x</code> and <code>:y</code> keys of numeric values, mirroring the functionality of<br />
existing casts for string and array values. Both string and symbol keys are<br />
supported.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostgresqlPoint</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">attribute</span> <span class="ss">:x</span><span class="p">,</span> <span class="ss">:point</span>
  <span class="n">attribute</span> <span class="ss">:y</span><span class="p">,</span> <span class="ss">:point</span>
  <span class="n">attribute</span> <span class="ss">:z</span><span class="p">,</span> <span class="ss">:point</span>
<span class="k">end</span>

<span class="n">val</span> <span class="o">=</span> <span class="no">PostgresqlPoint</span><span class="p">.</span><span class="nf">new</span><span class="p">({</span>
  <span class="ss">x: </span><span class="s1">'(12.34, -43.21)'</span><span class="p">,</span>
  <span class="ss">y: </span><span class="p">[</span><span class="mf">12.34</span><span class="p">,</span> <span class="s1">'-43.21'</span><span class="p">],</span>
  <span class="ss">z: </span><span class="p">{</span><span class="ss">x: </span><span class="s1">'12.34'</span><span class="p">,</span> <span class="ss">y: </span><span class="o">-</span><span class="mf">43.21</span><span class="p">}</span>
<span class="p">})</span>
<span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Point</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mf">12.32</span><span class="p">,</span> <span class="o">-</span><span class="mf">43.21</span><span class="p">)</span> <span class="o">==</span> <span class="n">val</span><span class="p">.</span><span class="nf">x</span> <span class="o">==</span> <span class="n">val</span><span class="p">.</span><span class="nf">y</span> <span class="o">==</span> <span class="n">val</span><span class="p">.</span><span class="nf">z</span>
</code></pre></div></div>

<p><em>Stephen Drew</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Replace `SQLite3::Database#busy_timeout` with `#busy_handler_timeout=`.
</title>
    <link>https://github.com/rails/rails/issues/52636</link>
    <guid>https://github.com/rails/rails/issues/52636</guid>
    <description>*   Replace `SQLite3::Database#busy_timeout` with `#busy_handler_timeout=`.

    Provides a non-GVL-blocking, fair retry interval busy handler implementation.

    *Stephen Margheim*</description>
    <pubDate>Sat, 17 Aug 2024 15:23:46 +0000</pubDate>
    <author>Xavier Noria</author>
    <content:encoded><![CDATA[<p>Replace <code>SQLite3::Database#busy_timeout</code> with <code>#busy_handler_timeout=</code>.</p>

<p>Provides a non-GVL-blocking, fair retry interval busy handler implementation.</p>

<p><em>Stephen Margheim</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: SQLite3Adapter: Translate `SQLite3::BusyException` into `ActiveRecord::StatementTimeout`.
</title>
    <link>https://github.com/rails/rails/issues/52577</link>
    <guid>https://github.com/rails/rails/issues/52577</guid>
    <description>*   SQLite3Adapter: Translate `SQLite3::BusyException` into `ActiveRecord::StatementTimeout`.

    *Matthew Nguyen*</description>
    <pubDate>Fri, 16 Aug 2024 11:49:14 +0000</pubDate>
    <author>Matthew Nguyen</author>
    <content:encoded><![CDATA[<p>SQLite3Adapter: Translate <code>SQLite3::BusyException</code> into <code>ActiveRecord::StatementTimeout</code>.</p>

<p><em>Matthew Nguyen</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Include schema name in `enable_extension` statements in `db/schema.rb`.
</title>
    <link>https://github.com/rails/rails/issues/52313</link>
    <guid>https://github.com/rails/rails/issues/52313</guid>
    <description>*   Include schema name in `enable_extension` statements in `db/schema.rb`.

    The schema dumper will now include the schema name in generated
    `enable_extension` statements if they differ from the current schema.

    For example, if you have a migration:

    ```ruby
    enable_extension &quot;heroku_ext.pgcrypto&quot;
    enable_extension &quot;pg_stat_statements&quot;
    ```

    then the generated schema dump will also contain:

    ```ruby
    enable_extension &quot;heroku_ext.pgcrypto&quot;
    enable_extension &quot;pg_stat_statements&quot;
    ```

    *Tony Novak*</description>
    <pubDate>Thu, 15 Aug 2024 00:29:36 +0000</pubDate>
    <author>Tony Novak</author>
    <content:encoded><![CDATA[<p>Include schema name in <code>enable_extension</code> statements in <code>db/schema.rb</code>.</p>

<p>The schema dumper will now include the schema name in generated<br />
<code>enable_extension</code> statements if they differ from the current schema.</p>

<p>For example, if you have a migration:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">enable_extension</span> <span class="s2">"heroku_ext.pgcrypto"</span>
<span class="n">enable_extension</span> <span class="s2">"pg_stat_statements"</span>
</code></pre></div></div>

<p>then the generated schema dump will also contain:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">enable_extension</span> <span class="s2">"heroku_ext.pgcrypto"</span>
<span class="n">enable_extension</span> <span class="s2">"pg_stat_statements"</span>
</code></pre></div></div>

<p><em>Tony Novak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Fix `ActiveRecord::Encryption::EncryptedAttributeType#type` to return
</title>
    <link>https://github.com/rails/rails/issues/52247</link>
    <guid>https://github.com/rails/rails/issues/52247</guid>
    <description>*   Fix `ActiveRecord::Encryption::EncryptedAttributeType#type` to return
    actual cast type.

    *Vasiliy Ermolovich*</description>
    <pubDate>Wed, 14 Aug 2024 17:32:47 +0000</pubDate>
    <author>Vasiliy Ermolovich</author>
    <content:encoded><![CDATA[<p>Fix <code>ActiveRecord::Encryption::EncryptedAttributeType#type</code> to return<br />
actual cast type.</p>

<p><em>Vasiliy Ermolovich</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: SQLite3Adapter: Bulk insert fixtures.
</title>
    <link>https://github.com/rails/rails/issues/52562</link>
    <guid>https://github.com/rails/rails/issues/52562</guid>
    <description>*   SQLite3Adapter: Bulk insert fixtures.

    Previously one insert command was executed for each fixture, now they are
    aggregated in a single bulk insert command.

    *Lázaro Nixon*</description>
    <pubDate>Sun, 11 Aug 2024 07:45:53 +0000</pubDate>
    <author>Nixon</author>
    <content:encoded><![CDATA[<p>SQLite3Adapter: Bulk insert fixtures.</p>

<p>Previously one insert command was executed for each fixture, now they are<br />
aggregated in a single bulk insert command.</p>

<p><em>Lázaro Nixon</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: PostgreSQLAdapter: Allow `disable_extension` to be called with schema-qualified name.
</title>
    <link>https://github.com/rails/rails/issues/52452</link>
    <guid>https://github.com/rails/rails/issues/52452</guid>
    <description>*   PostgreSQLAdapter: Allow `disable_extension` to be called with schema-qualified name.

    For parity with `enable_extension`, the `disable_extension` method can be called with a schema-qualified
    name (e.g. `disable_extension &quot;myschema.pgcrypto&quot;`). Note that PostgreSQL&#39;s `DROP EXTENSION` does not
    actually take a schema name (unlike `CREATE EXTENSION`), so the resulting SQL statement will only name
    the extension, e.g. `DROP EXTENSION IF EXISTS &quot;pgcrypto&quot;`.

    *Tony Novak*</description>
    <pubDate>Wed, 07 Aug 2024 08:05:06 +0000</pubDate>
    <author>Tony Novak</author>
    <content:encoded><![CDATA[<p>PostgreSQLAdapter: Allow <code>disable_extension</code> to be called with schema-qualified name.</p>

<p>For parity with <code>enable_extension</code>, the <code>disable_extension</code> method can be called with a schema-qualified<br />
name (e.g. <code>disable_extension "myschema.pgcrypto"</code>). Note that PostgreSQL’s <code>DROP EXTENSION</code> does not<br />
actually take a schema name (unlike <code>CREATE EXTENSION</code>), so the resulting SQL statement will only name<br />
the extension, e.g. <code>DROP EXTENSION IF EXISTS "pgcrypto"</code>.</p>

<p><em>Tony Novak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Make `create_schema` / `drop_schema` reversible in migrations.
</title>
    <link>https://github.com/rails/rails/issues/52451</link>
    <guid>https://github.com/rails/rails/issues/52451</guid>
    <description>*   Make `create_schema` / `drop_schema` reversible in migrations.

    Previously, `create_schema` and `drop_schema` were irreversible migration operations.

    *Tony Novak*</description>
    <pubDate>Fri, 02 Aug 2024 12:37:44 +0000</pubDate>
    <author>Tony Novak</author>
    <content:encoded><![CDATA[<p>Make <code>create_schema</code> / <code>drop_schema</code> reversible in migrations.</p>

<p>Previously, <code>create_schema</code> and <code>drop_schema</code> were irreversible migration operations.</p>

<p><em>Tony Novak</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Support batching using custom columns.
</title>
    <link>https://github.com/rails/rails/issues/52384</link>
    <guid>https://github.com/rails/rails/issues/52384</guid>
    <description>*   Support batching using custom columns.

    ```ruby
    Product.in_batches(cursor: [:shop_id, :id]) do |relation|
      # do something with relation
    end
    ```

    *fatkodima*</description>
    <pubDate>Mon, 29 Jul 2024 21:43:04 +0000</pubDate>
    <author>fatkodima</author>
    <content:encoded><![CDATA[<p>Support batching using custom columns.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Product</span><span class="p">.</span><span class="nf">in_batches</span><span class="p">(</span><span class="ss">cursor: </span><span class="p">[</span><span class="ss">:shop_id</span><span class="p">,</span> <span class="ss">:id</span><span class="p">])</span> <span class="k">do</span> <span class="o">|</span><span class="n">relation</span><span class="o">|</span>
  <span class="c1"># do something with relation</span>
<span class="k">end</span>
</code></pre></div></div>

<p><em>fatkodima</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Use SQLite `IMMEDIATE` transactions when possible.
</title>
    <link>https://github.com/rails/rails/issues/50371</link>
    <guid>https://github.com/rails/rails/issues/50371</guid>
    <description>*   Use SQLite `IMMEDIATE` transactions when possible.

    Transactions run against the SQLite3 adapter default to IMMEDIATE mode to improve concurrency support and avoid busy exceptions.

    *Stephen Margheim*</description>
    <pubDate>Fri, 26 Jul 2024 07:15:38 +0000</pubDate>
    <author>Stephen Margheim</author>
    <content:encoded><![CDATA[<p>Use SQLite <code>IMMEDIATE</code> transactions when possible.</p>

<p>Transactions run against the SQLite3 adapter default to IMMEDIATE mode to improve concurrency support and avoid busy exceptions.</p>

<p><em>Stephen Margheim</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Raise specific exception when a connection is not defined.
</title>
    <link>https://github.com/rails/rails/issues/52298</link>
    <guid>https://github.com/rails/rails/issues/52298</guid>
    <description>*   Raise specific exception when a connection is not defined.

    The new `ConnectionNotDefined` exception provides connection name, shard and role accessors indicating the details of the connection that was requested.

    *Hana Harencarova*, *Matthew Draper*</description>
    <pubDate>Tue, 16 Jul 2024 20:57:00 +0000</pubDate>
    <author>Hana Harencarova</author>
    <content:encoded><![CDATA[<p>Raise specific exception when a connection is not defined.</p>

<p>The new <code>ConnectionNotDefined</code> exception provides connection name, shard and role accessors indicating the details of the connection that was requested.</p>

<p><em>Hana Harencarova</em>, <em>Matthew Draper</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Delete the deprecated constant `ActiveRecord::ImmutableRelation`.
</title>
    <link>https://github.com/rails/rails/issues/52321</link>
    <guid>https://github.com/rails/rails/issues/52321</guid>
    <description>*   Delete the deprecated constant `ActiveRecord::ImmutableRelation`.

    *Xavier Noria*</description>
    <pubDate>Sat, 13 Jul 2024 11:28:24 +0000</pubDate>
    <author>Xavier Noria</author>
    <content:encoded><![CDATA[<p>Delete the deprecated constant <code>ActiveRecord::ImmutableRelation</code>.</p>

<p><em>Xavier Noria</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Fix duplicate callback execution when child autosaves parent with `has_one` and `belongs_to`.
</title>
    <link>https://github.com/rails/rails/issues/49847</link>
    <guid>https://github.com/rails/rails/issues/49847</guid>
    <description>*   Fix duplicate callback execution when child autosaves parent with `has_one` and `belongs_to`.

    Before, persisting a new child record with a new associated parent record would run `before_validation`,
    `after_validation`, `before_save` and `after_save` callbacks twice.

    Now, these callbacks are only executed once as expected.

    *Joshua Young*</description>
    <pubDate>Mon, 08 Jul 2024 17:00:47 +0000</pubDate>
    <author>Joshua Young</author>
    <content:encoded><![CDATA[<p>Fix duplicate callback execution when child autosaves parent with <code>has_one</code> and <code>belongs_to</code>.</p>

<p>Before, persisting a new child record with a new associated parent record would run <code>before_validation</code>,<br />
<code>after_validation</code>, <code>before_save</code> and <code>after_save</code> callbacks twice.</p>

<p>Now, these callbacks are only executed once as expected.</p>

<p><em>Joshua Young</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: `ActiveRecord::Encryption::Encryptor` now supports a `:compressor` option to customize the compression algorithm used.
</title>
    <link>https://github.com/rails/rails/issues/51735</link>
    <guid>https://github.com/rails/rails/issues/51735</guid>
    <description>*   `ActiveRecord::Encryption::Encryptor` now supports a `:compressor` option to customize the compression algorithm used.

    ```ruby
    module ZstdCompressor
      def self.deflate(data)
        Zstd.compress(data)
      end

      def self.inflate(data)
        Zstd.decompress(data)
      end
    end

    class User
      encrypts :name, compressor: ZstdCompressor
    end
    ```

    You disable compression by passing `compress: false`.

    ```ruby
    class User
      encrypts :name, compress: false
    end
    ```

    *heka1024*</description>
    <pubDate>Wed, 03 Jul 2024 12:39:13 +0000</pubDate>
    <author>heka1024</author>
    <content:encoded><![CDATA[<p><code>ActiveRecord::Encryption::Encryptor</code> now supports a <code>:compressor</code> option to customize the compression algorithm used.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">ZstdCompressor</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">deflate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="no">Zstd</span><span class="p">.</span><span class="nf">compress</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">inflate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="no">Zstd</span><span class="p">.</span><span class="nf">decompress</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">User</span>
  <span class="n">encrypts</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">compressor: </span><span class="no">ZstdCompressor</span>
<span class="k">end</span>
</code></pre></div></div>

<p>You disable compression by passing <code>compress: false</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span>
  <span class="n">encrypts</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">compress: </span><span class="kp">false</span>
<span class="k">end</span>
</code></pre></div></div>

<p><em>heka1024</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add condensed `#inspect` for `ConnectionPool`, `AbstractAdapter`, and
</title>
    <link>https://github.com/rails/rails/issues/50405</link>
    <guid>https://github.com/rails/rails/issues/50405</guid>
    <description>*   Add condensed `#inspect` for `ConnectionPool`, `AbstractAdapter`, and
    `DatabaseConfig`.

    *Hartley McGuire*</description>
    <pubDate>Fri, 21 Jun 2024 21:45:53 +0000</pubDate>
    <author>Hartley McGuire</author>
    <content:encoded><![CDATA[<p>Add condensed <code>#inspect</code> for <code>ConnectionPool</code>, <code>AbstractAdapter</code>, and<br />
<code>DatabaseConfig</code>.</p>

<p><em>Hartley McGuire</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add `.shard_keys`, `.sharded?`, &amp; `.connected_to_all_shards` methods.
</title>
    <link>https://github.com/rails/rails/issues/51009</link>
    <guid>https://github.com/rails/rails/issues/51009</guid>
    <description>*   Add `.shard_keys`, `.sharded?`, &amp; `.connected_to_all_shards` methods.

    ```ruby
    class ShardedBase &lt; ActiveRecord::Base
        self.abstract_class = true

        connects_to shards: {
          shard_one: { writing: :shard_one },
          shard_two: { writing: :shard_two }
        }
    end

    class ShardedModel &lt; ShardedBase
    end

    ShardedModel.shard_keys =&gt; [:shard_one, :shard_two]
    ShardedModel.sharded? =&gt; true
    ShardedBase.connected_to_all_shards { ShardedModel.current_shard } =&gt; [:shard_one, :shard_two]
    ```

    *Nony Dutton*</description>
    <pubDate>Tue, 18 Jun 2024 12:45:23 +0000</pubDate>
    <author>Nony Dutton</author>
    <content:encoded><![CDATA[<p>Add <code>.shard_keys</code>, <code>.sharded?</code>, &amp; <code>.connected_to_all_shards</code> methods.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ShardedBase</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">abstract_class</span> <span class="o">=</span> <span class="kp">true</span>

    <span class="n">connects_to</span> <span class="ss">shards: </span><span class="p">{</span>
      <span class="ss">shard_one: </span><span class="p">{</span> <span class="ss">writing: :shard_one</span> <span class="p">},</span>
      <span class="ss">shard_two: </span><span class="p">{</span> <span class="ss">writing: :shard_two</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">ShardedModel</span> <span class="o">&lt;</span> <span class="no">ShardedBase</span>
<span class="k">end</span>

<span class="no">ShardedModel</span><span class="p">.</span><span class="nf">shard_keys</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="ss">:shard_one</span><span class="p">,</span> <span class="ss">:shard_two</span><span class="p">]</span>
<span class="no">ShardedModel</span><span class="p">.</span><span class="nf">sharded?</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="no">ShardedBase</span><span class="p">.</span><span class="nf">connected_to_all_shards</span> <span class="p">{</span> <span class="no">ShardedModel</span><span class="p">.</span><span class="nf">current_shard</span> <span class="p">}</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="ss">:shard_one</span><span class="p">,</span> <span class="ss">:shard_two</span><span class="p">]</span>
</code></pre></div></div>

<p><em>Nony Dutton</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add a `filter` option to `in_order_of` to prioritize certain values in the sorting without filtering the results
</title>
    <link>https://github.com/rails/rails/issues/51761</link>
    <guid>https://github.com/rails/rails/issues/51761</guid>
    <description>*   Add a `filter` option to `in_order_of` to prioritize certain values in the sorting without filtering the results
    by these values.

    *Igor Depolli*</description>
    <pubDate>Wed, 12 Jun 2024 22:21:17 +0000</pubDate>
    <author>Igor Depolli</author>
    <content:encoded><![CDATA[<p>Add a <code>filter</code> option to <code>in_order_of</code> to prioritize certain values in the sorting without filtering the results<br />
by these values.</p>

<p><em>Igor Depolli</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Fix an issue where the IDs reader method did not return expected results
</title>
    <link>https://github.com/rails/rails/issues/51167</link>
    <guid>https://github.com/rails/rails/issues/51167</guid>
    <description>*   Fix an issue where the IDs reader method did not return expected results
    for preloaded associations in models using composite primary keys.

    *Jay Ang*</description>
    <pubDate>Wed, 05 Jun 2024 14:55:08 +0000</pubDate>
    <author>Jay Ang</author>
    <content:encoded><![CDATA[<p>Fix an issue where the IDs reader method did not return expected results<br />
for preloaded associations in models using composite primary keys.</p>

<p><em>Jay Ang</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Allow to configure `strict_loading_mode` globally or within a model.
</title>
    <link>https://github.com/rails/rails/issues/51339</link>
    <guid>https://github.com/rails/rails/issues/51339</guid>
    <description>*   Allow to configure `strict_loading_mode` globally or within a model.

    Defaults to `:all`, can be changed to `:n_plus_one_only`.

    *Garen Torikian*</description>
    <pubDate>Mon, 03 Jun 2024 13:12:04 +0000</pubDate>
    <author>Garen J. Torikian</author>
    <content:encoded><![CDATA[<p>Allow to configure <code>strict_loading_mode</code> globally or within a model.</p>

<p>Defaults to <code>:all</code>, can be changed to <code>:n_plus_one_only</code>.</p>

<p><em>Garen Torikian</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add `ActiveRecord::Relation#readonly?`.
</title>
    <link>https://github.com/rails/rails/issues/51943</link>
    <guid>https://github.com/rails/rails/issues/51943</guid>
    <description>*   Add `ActiveRecord::Relation#readonly?`.

    Reflects if the relation has been marked as readonly.

    *Theodor Tonum*</description>
    <pubDate>Wed, 29 May 2024 19:05:24 +0000</pubDate>
    <author>Carlos Antonio da Silva</author>
    <content:encoded><![CDATA[<p>Add <code>ActiveRecord::Relation#readonly?</code>.</p>

<p>Reflects if the relation has been marked as readonly.</p>

<p><em>Theodor Tonum</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Improve `ActiveRecord::Store` to raise a descriptive exception if the column is not either
</title>
    <link>https://github.com/rails/rails/issues/51898</link>
    <guid>https://github.com/rails/rails/issues/51898</guid>
    <description>*   Improve `ActiveRecord::Store` to raise a descriptive exception if the column is not either
    structured (e.g., PostgreSQL +hstore+/+json+, or MySQL +json+) or declared serializable via
    `ActiveRecord.store`.

    Previously, a `NoMethodError` would be raised when the accessor was read or written:

        NoMethodError: undefined method `accessor&#39; for an instance of ActiveRecord::Type::Text

    Now, a descriptive `ConfigurationError` is raised:

        ActiveRecord::ConfigurationError: the column &#39;metadata&#39; has not been configured as a store.
          Please make sure the column is declared serializable via &#39;ActiveRecord.store&#39; or, if your
          database supports it, use a structured column type like hstore or json.

    *Mike Dalessio*</description>
    <pubDate>Fri, 24 May 2024 06:34:42 +0000</pubDate>
    <author>Mike Dalessio</author>
    <content:encoded><![CDATA[<p>Improve <code>ActiveRecord::Store</code> to raise a descriptive exception if the column is not either<br />
structured (e.g., PostgreSQL +hstore+/+json+, or MySQL +json+) or declared serializable via<br />
<code>ActiveRecord.store</code>.</p>

<p>Previously, a <code>NoMethodError</code> would be raised when the accessor was read or written:</p>

<pre><code>NoMethodError: undefined method `accessor' for an instance of ActiveRecord::Type::Text
</code></pre>

<p>Now, a descriptive <code>ConfigurationError</code> is raised:</p>

<pre><code>ActiveRecord::ConfigurationError: the column 'metadata' has not been configured as a store.
  Please make sure the column is declared serializable via 'ActiveRecord.store' or, if your
  database supports it, use a structured column type like hstore or json.
</code></pre>

<p><em>Mike Dalessio</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Fix inference of association model on nested models with the same demodularized name.
</title>
    <link>https://github.com/rails/rails/issues/51720</link>
    <guid>https://github.com/rails/rails/issues/51720</guid>
    <description>*   Fix inference of association model on nested models with the same demodularized name.

    E.g. with the following setup:

    ```ruby
    class Nested::Post &lt; ApplicationRecord
      has_one :post, through: :other
    end
    ```

    Before, `#post` would infer the model as `Nested::Post`, but now it correctly infers `Post`.

    *Joshua Young*</description>
    <pubDate>Wed, 22 May 2024 23:46:14 +0000</pubDate>
    <author>Joshua Young</author>
    <content:encoded><![CDATA[<p>Fix inference of association model on nested models with the same demodularized name.</p>

<p>E.g. with the following setup:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Nested::Post</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_one</span> <span class="ss">:post</span><span class="p">,</span> <span class="ss">through: :other</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Before, <code>#post</code> would infer the model as <code>Nested::Post</code>, but now it correctly infers <code>Post</code>.</p>

<p><em>Joshua Young</em></p>
]]></content:encoded>
  </item>
  <item>
    <title>activerecord: Add public method for checking if a table is ignored by the schema cache.
</title>
    <link>https://github.com/rails/rails/issues/51878</link>
    <guid>https://github.com/rails/rails/issues/51878</guid>
    <description>*   Add public method for checking if a table is ignored by the schema cache.

    Previously, an application would need to reimplement `ignored_table?` from the schema cache class to check if a table was set to be ignored. This adds a public method to support this and updates the schema cache to use that directly.

    ```ruby
    ActiveRecord.schema_cache_ignored_tables = [&quot;developers&quot;]
    ActiveRecord.schema_cache_ignored_table?(&quot;developers&quot;)
    =&gt; true
    ```

    *Eileen M. Uchitelle*</description>
    <pubDate>Tue, 21 May 2024 19:33:51 +0000</pubDate>
    <author>eileencodes</author>
    <content:encoded><![CDATA[<p>Add public method for checking if a table is ignored by the schema cache.</p>

<p>Previously, an application would need to reimplement <code>ignored_table?</code> from the schema cache class to check if a table was set to be ignored. This adds a public method to support this and updates the schema cache to use that directly.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ActiveRecord</span><span class="p">.</span><span class="nf">schema_cache_ignored_tables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"developers"</span><span class="p">]</span>
<span class="no">ActiveRecord</span><span class="p">.</span><span class="nf">schema_cache_ignored_table?</span><span class="p">(</span><span class="s2">"developers"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kp">true</span>
</code></pre></div></div>

<p><em>Eileen M. Uchitelle</em></p>
]]></content:encoded>
  </item>
</channel>
</rss>



[
  {
    "message": "*   Fix `ActionDispatch::Executor` middleware to report errors handled by `ActionDispatch::ShowExceptions`.\n\n    In the default production environment, `ShowExceptions` rescue uncaught errors\n    and returns a response. Because if this the executor wouldn't report production\n    errors with the default Rails configuration.\n\n    *Jean Boussier*",
    "project": "actionpack",
    "date_merged": 1708114034000,
    "author": "Jean Boussier",
    "sha": "7ba394db49767c943ae4d16de9cc1f85d64c995d",
    "pr": "51050",
    "merge_sha": "052a097fda626e11c7ce229d453498674b46aa0a",
    "html": "<p>Fix <code>ActionDispatch::Executor</code> middleware to report errors handled by <code>ActionDispatch::ShowExceptions</code>.</p>\n\n<p>In the default production environment, <code>ShowExceptions</code> rescue uncaught errors<br />\nand returns a response. Because if this the executor wouldn’t report production<br />\nerrors with the default Rails configuration.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add `racc` as a dependency since it will become a bundled gem in Ruby 3.4.0\n\n    *Hartley McGuire*",
    "project": "actionpack",
    "date_merged": 1700731938000,
    "author": "Yasuo Honda",
    "sha": "3e24d65108e19a19a2bff7c01b7c373d66e548c4",
    "pr": "49722",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Add <code>racc</code> as a dependency since it will become a bundled gem in Ruby 3.4.0</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Include the HTTP Permissions-Policy on non-HTML Content-Types\n    [CVE-2024-28103]",
    "project": "actionpack",
    "date_merged": 1717524258000,
    "author": "Aaron Patterson",
    "sha": "f12d5aea897684bba583412cc9d249c9a6f67fdd",
    "pr": null,
    "merge_sha": "967b71d29aaa0daea33c5bab94481502c5fe082c",
    "html": "<p>Include the HTTP Permissions-Policy on non-HTML Content-Types<br />\n[CVE-2024-28103]</p>\n"
  },
  {
    "message": "*   Fix possible XSS vulnerability with the `translate` method in controllers\n\n    CVE-2024-26143",
    "project": "actionpack",
    "date_merged": 1708541473000,
    "author": "ooooooo_q",
    "sha": "4c83b331092a79d58e4adffe4be5f250fa5782cc",
    "pr": "48869",
    "merge_sha": "5bf5344521a6f305ca17e0004273322a0a26f50a",
    "html": "<p>Fix possible XSS vulnerability with the <code>translate</code> method in controllers</p>\n\n<p>CVE-2024-26143</p>\n"
  },
  {
    "message": "*   Fix `HostAuthorization` potentially displaying the value of the\n    X_FORWARDED_HOST header when the HTTP_HOST header is being blocked.\n\n    *Hartley McGuire*, *Daniel Schlosser*",
    "project": "actionpack",
    "date_merged": 1692724969000,
    "author": "Rafael Mendonça França",
    "sha": "de649fef59fdccc97db4bf8efcb333d12effe24c",
    "pr": "48941",
    "merge_sha": "2766c93b5c671f44433a63e84c7de33b74f0c3ac",
    "html": "<p>Fix <code>HostAuthorization</code> potentially displaying the value of the<br />\nX_FORWARDED_HOST header when the HTTP_HOST header is being blocked.</p>\n\n<p><em>Hartley McGuire</em>, <em>Daniel Schlosser</em></p>\n"
  },
  {
    "message": "*   Raise an exception if illegal characters are provide to redirect_to\n    [CVE-2023-28362]\n\n    *Zack Deveau*",
    "project": "actionpack",
    "date_merged": 1687815977000,
    "author": "Aaron Patterson",
    "sha": "93b9c74fdacd8a1e4089935bea1454a5fd7db85c",
    "pr": null,
    "merge_sha": "8e37f2bd4b70d6d84a1d86aa4766631e0f83be61",
    "html": "<p>Raise an exception if illegal characters are provide to redirect_to<br />\n[CVE-2023-28362]</p>\n\n<p><em>Zack Deveau</em></p>\n"
  },
  {
    "message": "*   Do not return CSP headers for 304 Not Modified responses.\n\n    *Tobias Kraze*",
    "project": "actionpack",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Do not return CSP headers for 304 Not Modified responses.</p>\n\n<p><em>Tobias Kraze</em></p>\n"
  },
  {
    "message": "*   Fix `EtagWithFlash` when there is no `Flash` middleware available.\n\n    *fatkodima*",
    "project": "actionpack",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix <code>EtagWithFlash</code> when there is no <code>Flash</code> middleware available.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix content-type header with `send_stream`.\n\n    *Elliot Crosby-McCullough*",
    "project": "actionpack",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix content-type header with <code>send_stream</code>.</p>\n\n<p><em>Elliot Crosby-McCullough</em></p>\n"
  },
  {
    "message": "*   Address Selenium `:capabilities` deprecation warning.\n\n    *Ron Shinall*",
    "project": "actionpack",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Address Selenium <code>:capabilities</code> deprecation warning.</p>\n\n<p><em>Ron Shinall</em></p>\n"
  },
  {
    "message": "*   Fix cookie domain for domain: all on two letter single level TLD.\n\n    *John Hawthorn*",
    "project": "actionpack",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix cookie domain for domain: all on two letter single level TLD.</p>\n\n<p><em>John Hawthorn</em></p>\n"
  },
  {
    "message": "*   Don't double log the `controller`, `action`, or `namespaced_controller` when using `ActiveRecord::QueryLog`\n\n    Previously if you set `config.active_record.query_log_tags` to an array that included\n    `:controller`, `:namespaced_controller`, or `:action`, that item would get logged twice.\n    This bug has been fixed.\n\n    *Alex Ghiculescu*",
    "project": "actionpack",
    "date_merged": 1672768035000,
    "author": "Alex Ghiculescu",
    "sha": "55cd9ae8d744ae5f2752b344c9b98eac90dfd093",
    "pr": "46738",
    "merge_sha": "baeb273d87ba97cbb0617129da4aeacb5de904a3",
    "html": "<p>Don’t double log the <code>controller</code>, <code>action</code>, or <code>namespaced_controller</code> when using <code>ActiveRecord::QueryLog</code></p>\n\n<p>Previously if you set <code>config.active_record.query_log_tags</code> to an array that included<br />\n<code>:controller</code>, <code>:namespaced_controller</code>, or <code>:action</code>, that item would get logged twice.<br />\nThis bug has been fixed.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Rescue `EOFError` exception from `rack` on a multipart request.\n\n    *Nikita Vasilevsky*",
    "project": "actionpack",
    "date_merged": 1663247880000,
    "author": "Rafael Mendonça França",
    "sha": "04269cebb748e87cc32e7685d76990b6d7109f70",
    "pr": "45833",
    "merge_sha": "93b2461afb1f6bbe7c511b025c026567ebbc4b97",
    "html": "<p>Rescue <code>EOFError</code> exception from <code>rack</code> on a multipart request.</p>\n\n<p><em>Nikita Vasilevsky</em></p>\n"
  },
  {
    "message": "*   Rescue `JSON::ParserError` in Cookies json deserializer to discards marshal dumps:\n\n    Without this change, if `action_dispatch.cookies_serializer` is set to `:json` and\n    the app tries to read a `:marshal` serialized cookie, it would error out which wouldn't\n    clear the cookie and force app users to manually clear it in their browser.\n\n    (See #45127 for original bug discussion)\n\n    *Nathan Bardoux*",
    "project": "actionpack",
    "date_merged": 1663247880000,
    "author": "Rafael Mendonça França",
    "sha": "d4d800ddf2e89abe0259585947df3647fba93cd5",
    "pr": "45956",
    "merge_sha": "93b2461afb1f6bbe7c511b025c026567ebbc4b97",
    "html": "<p>Rescue <code>JSON::ParserError</code> in Cookies json deserializer to discards marshal dumps:</p>\n\n<p>Without this change, if <code>action_dispatch.cookies_serializer</code> is set to <code>:json</code> and<br />\nthe app tries to read a <code>:marshal</code> serialized cookie, it would error out which wouldn’t<br />\nclear the cookie and force app users to manually clear it in their browser.</p>\n\n<p>(See #45127 for original bug discussion)</p>\n\n<p><em>Nathan Bardoux</em></p>\n"
  },
  {
    "message": "*   Fix `domain: :all` for two letter TLD\n\n    This fixes a compatibility issue introduced in our previous security\n    release when using `domain: :all` with a two letter but single level top\n    level domain domain (like `.ca`, rather than `.co.uk`).",
    "project": "actionpack",
    "date_merged": 1675818921000,
    "author": "John Hawthorn",
    "sha": "799b300274be9612aa3a1b69e8b8b86676f887dd",
    "pr": "47288",
    "merge_sha": "60124208a78b05c7b4fb4856c42c8bd9b2315229",
    "html": "<p>Fix <code>domain: :all</code> for two letter TLD</p>\n\n<p>This fixes a compatibility issue introduced in our previous security<br />\nrelease when using <code>domain: :all</code> with a two letter but single level top<br />\nlevel domain domain (like <code>.ca</code>, rather than <code>.co.uk</code>).</p>\n"
  },
  {
    "message": "*   Fix sec issue with _url_host_allowed?\n\n    Disallow certain strings from `_url_host_allowed?` to avoid a redirect\n    to malicious sites.\n\n    [CVE-2023-22797]",
    "project": "actionpack",
    "date_merged": 1674126985000,
    "author": "John Hawthorn",
    "sha": "e0bae280f1e3aa5e32d879a24ff8d846f81ecce4",
    "pr": "47050",
    "merge_sha": "9194bef66e9c17e808f97bc68e53eaaf7dd8288e",
    "html": "<p>Fix sec issue with _url_host_allowed?</p>\n\n<p>Disallow certain strings from <code>_url_host_allowed?</code> to avoid a redirect<br />\nto malicious sites.</p>\n\n<p>[CVE-2023-22797]</p>\n"
  },
  {
    "message": "*   Avoid regex backtracking on If-None-Match header\n\n    [CVE-2023-22795]",
    "project": "actionpack",
    "date_merged": 1674126985000,
    "author": "John Hawthorn",
    "sha": "e0bae280f1e3aa5e32d879a24ff8d846f81ecce4",
    "pr": "47050",
    "merge_sha": "9194bef66e9c17e808f97bc68e53eaaf7dd8288e",
    "html": "<p>Avoid regex backtracking on If-None-Match header</p>\n\n<p>[CVE-2023-22795]</p>\n"
  },
  {
    "message": "*   Use string#split instead of regex for domain parts\n\n    [CVE-2023-22792]",
    "project": "actionpack",
    "date_merged": 1674126985000,
    "author": "John Hawthorn",
    "sha": "e0bae280f1e3aa5e32d879a24ff8d846f81ecce4",
    "pr": "47050",
    "merge_sha": "9194bef66e9c17e808f97bc68e53eaaf7dd8288e",
    "html": "<p>Use string#split instead of regex for domain parts</p>\n\n<p>[CVE-2023-22792]</p>\n"
  },
  {
    "message": "*   Prevent `ActionDispatch::ServerTiming` from overwriting existing values in `Server-Timing`.\n\n    Previously, if another middleware down the chain set `Server-Timing` header,\n    it would overwritten by `ActionDispatch::ServerTiming`.\n\n    *Jakub Malinowski*",
    "project": "actionpack",
    "date_merged": 1659835824000,
    "author": "Jonathan Hefner",
    "sha": "290e68450266e51e23d642d9af31fc125ae6413c",
    "pr": "45615",
    "merge_sha": "53b04ca8a98224b3f44b40d6d7189e0db72373f0",
    "html": "<p>Prevent <code>ActionDispatch::ServerTiming</code> from overwriting existing values in <code>Server-Timing</code>.</p>\n\n<p>Previously, if another middleware down the chain set <code>Server-Timing</code> header,<br />\nit would overwritten by <code>ActionDispatch::ServerTiming</code>.</p>\n\n<p><em>Jakub Malinowski</em></p>\n"
  },
  {
    "message": "*   Allow relative redirects when `raise_on_open_redirects` is enabled.\n\n    *Tom Hughes*",
    "project": "actionpack",
    "date_merged": 1648066286000,
    "author": "Aaron Patterson",
    "sha": "2d61b34a2305eb2274b233ea9ba33b9700ffae9a",
    "pr": "44650",
    "merge_sha": "f0cfc60799c66047fdc9cc443bb957012cf1fbc8",
    "html": "<p>Allow relative redirects when <code>raise_on_open_redirects</code> is enabled.</p>\n\n<p><em>Tom Hughes</em></p>\n"
  },
  {
    "message": "*   Fix `authenticate_with_http_basic` to allow for missing password.\n\n    Before Rails 7.0 it was possible to handle basic authentication with only a username.\n\n    ```ruby\n    authenticate_with_http_basic do |token, _|\n      ApiClient.authenticate(token)\n    end\n    ```\n\n    This ability is restored.\n\n    *Jean Boussier*",
    "project": "actionpack",
    "date_merged": 1646631757000,
    "author": "Jean Boussier",
    "sha": "df70541bd90c57e8f9277910fd4f58f3d26792b0",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix <code>authenticate_with_http_basic</code> to allow for missing password.</p>\n\n<p>Before Rails 7.0 it was possible to handle basic authentication with only a username.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">authenticate_with_http_basic</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">token</span><span class=\"p\">,</span> <span class=\"n\">_</span><span class=\"o\">|</span>\n  <span class=\"no\">ApiClient</span><span class=\"p\">.</span><span class=\"nf\">authenticate</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"p\">)</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>This ability is restored.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix `content_security_policy` returning invalid directives.\n\n    Directives such as `self`, `unsafe-eval` and few others were not\n    single quoted when the directive was the result of calling a lambda\n    returning an array.\n\n    ```ruby\n    content_security_policy do |policy|\n      policy.frame_ancestors lambda { [:self, \"https://example.com\"] }\n    end\n    ```\n\n    With this fix the policy generated from above will now be valid.\n\n    *Edouard Chin*",
    "project": "actionpack",
    "date_merged": 1646631757000,
    "author": "Edouard CHIN",
    "sha": "a7f147dabdefbcff92a576dcccae7cfeb4a3baa9",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix <code>content_security_policy</code> returning invalid directives.</p>\n\n<p>Directives such as <code>self</code>, <code>unsafe-eval</code> and few others were not<br />\nsingle quoted when the directive was the result of calling a lambda<br />\nreturning an array.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">content_security_policy</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">policy</span><span class=\"o\">|</span>\n  <span class=\"n\">policy</span><span class=\"p\">.</span><span class=\"nf\">frame_ancestors</span> <span class=\"nb\">lambda</span> <span class=\"p\">{</span> <span class=\"p\">[</span><span class=\"ss\">:self</span><span class=\"p\">,</span> <span class=\"s2\">\"https://example.com\"</span><span class=\"p\">]</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>With this fix the policy generated from above will now be valid.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Fix `skip_forgery_protection` to run without raising an error if forgery\n    protection has not been enabled / `verify_authenticity_token` is not a\n    defined callback.\n\n    This fix prevents the Rails 7.0 Welcome Page (`/`) from raising an\n    `ArgumentError` if `default_protect_from_forgery` is false.\n\n    *Brad Trick*",
    "project": "actionpack",
    "date_merged": 1646631757000,
    "author": "Matthew Draper",
    "sha": "0ccfaa9723b0d7791848f846439272040a7f987b",
    "pr": "44537",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix <code>skip_forgery_protection</code> to run without raising an error if forgery<br />\nprotection has not been enabled / <code>verify_authenticity_token</code> is not a<br />\ndefined callback.</p>\n\n<p>This fix prevents the Rails 7.0 Welcome Page (<code>/</code>) from raising an<br />\n<code>ArgumentError</code> if <code>default_protect_from_forgery</code> is false.</p>\n\n<p><em>Brad Trick</em></p>\n"
  },
  {
    "message": "*   Fix `ActionController::Live` to copy the IsolatedExecutionState in the ephemeral thread.\n\n    Since its inception `ActionController::Live` has been copying thread local variables\n    to keep things such as `CurrentAttributes` set from middlewares working in the controller action.\n\n    With the introduction of `IsolatedExecutionState` in 7.0, some of that global state was lost in\n    `ActionController::Live` controllers.\n\n    *Jean Boussier*",
    "project": "actionpack",
    "date_merged": 1646631757000,
    "author": "Jean Boussier",
    "sha": "c120deac64b05bb5295829f033bd42a9795a295f",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix <code>ActionController::Live</code> to copy the IsolatedExecutionState in the ephemeral thread.</p>\n\n<p>Since its inception <code>ActionController::Live</code> has been copying thread local variables<br />\nto keep things such as <code>CurrentAttributes</code> set from middlewares working in the controller action.</p>\n\n<p>With the introduction of <code>IsolatedExecutionState</code> in 7.0, some of that global state was lost in<br />\n<code>ActionController::Live</code> controllers.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix setting `trailing_slash: true` in route definition.\n\n    ```ruby\n    get '/test' => \"test#index\", as: :test, trailing_slash: true\n\n    test_path() # => \"/test/\"\n    ```\n\n    *Jean Boussier*",
    "project": "actionpack",
    "date_merged": 1646631757000,
    "author": "Jean Boussier",
    "sha": "3b59b096da17e349899959d3152f80dd751f0cb7",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix setting <code>trailing_slash: true</code> in route definition.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">get</span> <span class=\"s1\">'/test'</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"test#index\"</span><span class=\"p\">,</span> <span class=\"ss\">as: :test</span><span class=\"p\">,</span> <span class=\"ss\">trailing_slash: </span><span class=\"kp\">true</span>\n\n<span class=\"n\">test_path</span><span class=\"p\">()</span> <span class=\"c1\"># =&gt; \"/test/\"</span>\n</code></pre></div></div>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Allow Content Security Policy DSL to generate for API responses.\n\n    *Tim Wade*",
    "project": "actionpack",
    "date_merged": 1651004099000,
    "author": "Aaron Patterson",
    "sha": "8198d7c4accad0b6ba956b9d59528534a289866b",
    "pr": "44635",
    "merge_sha": "c204039bf10191ed32b7cf75ef0275d3d0b12a6c",
    "html": "<p>Allow Content Security Policy DSL to generate for API responses.</p>\n\n<p><em>Tim Wade</em></p>\n"
  },
  {
    "message": "*   Under certain circumstances, the middleware isn't informed that the\n    response body has been fully closed which result in request state not\n    being fully reset before the next request\n\n    [CVE-2022-23633]",
    "project": "actionpack",
    "date_merged": 1644605608000,
    "author": "Aaron Patterson",
    "sha": "7791cd6f1a08858badbcb1c7bad4d2e2f01e0715",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Under certain circumstances, the middleware isn’t informed that the<br />\nresponse body has been fully closed which result in request state not<br />\nbeing fully reset before the next request</p>\n\n<p>[CVE-2022-23633]</p>\n"
  },
  {
    "message": "*   Fix `ActionController::Parameters` methods to keep the original logger context when creating a new copy\n    of the original object.\n\n    *Yutaka Kamei*",
    "project": "actionpack",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>ActionController::Parameters</code> methods to keep the original logger context when creating a new copy<br />\nof the original object.</p>\n\n<p><em>Yutaka Kamei</em></p>\n"
  },
  {
    "message": "*   Deprecate `Rails.application.config.action_controller.urlsafe_csrf_tokens`. This config is now always enabled.\n\n    *Étienne Barrié*",
    "project": "actionpack",
    "date_merged": 1639611095000,
    "author": "Rafael Mendonça França",
    "sha": "87cd7820f948b5a7cb0d13895992ff6c85ab07b1",
    "pr": "43817",
    "merge_sha": "bc91629df212c5723a7b7bcf5be50a331808235e",
    "html": "<p>Deprecate <code>Rails.application.config.action_controller.urlsafe_csrf_tokens</code>. This config is now always enabled.</p>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Instance variables set in requests in a `ActionController::TestCase` are now cleared before the next request\n\n    This means if you make multiple requests in the same test, instance variables set in the first request will\n    not persist into the second one. (It's not recommended to make multiple requests in the same test.)\n\n    *Alex Ghiculescu*",
    "project": "actionpack",
    "date_merged": 1639161431000,
    "author": "Jean Boussier",
    "sha": "b34b4afbbb5438dc086ed77203e2ce46797b89f9",
    "pr": "43735",
    "merge_sha": "85ad091cdb94d3cf84202c54a72a02a79eb5d3a2",
    "html": "<p>Instance variables set in requests in a <code>ActionController::TestCase</code> are now cleared before the next request</p>\n\n<p>This means if you make multiple requests in the same test, instance variables set in the first request will<br />\nnot persist into the second one. (It’s not recommended to make multiple requests in the same test.)</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix X_FORWARDED_HOST protection.  [CVE-2021-44528]",
    "project": "actionpack",
    "date_merged": 1639513460000,
    "author": "Aaron Patterson",
    "sha": "d1f05295edbcff0c523b6ad42d59306e6b7d2dd4",
    "pr": null,
    "merge_sha": "8132d7b1063614631f7f06a7223ca87f5a993b5e",
    "html": "<p>Fix X_FORWARDED_HOST protection.  [CVE-2021-44528]</p>\n"
  },
  {
    "message": "*   `Rails.application.executor` hooks can now be called around every request in a `ActionController::TestCase`\n\n    This helps to better simulate request or job local state being reset between requests and prevent state\n    leaking from one request to another.\n\n    To enable this, set `config.active_support.executor_around_test_case = true` (this is the default in Rails 7).\n\n    *Alex Ghiculescu*",
    "project": "actionpack",
    "date_merged": 1637972110000,
    "author": "Alex Ghiculescu",
    "sha": "5046d1cce90e56e3dc7f42cb394bbd5e740163c8",
    "pr": "43734",
    "merge_sha": "2a32c4b679a7fdc370d2f635c5285e4a4f161390",
    "html": "<p><code>Rails.application.executor</code> hooks can now be called around every request in a <code>ActionController::TestCase</code></p>\n\n<p>This helps to better simulate request or job local state being reset between requests and prevent state<br />\nleaking from one request to another.</p>\n\n<p>To enable this, set <code>config.active_support.executor_around_test_case = true</code> (this is the default in Rails 7).</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Consider onion services secure for cookies.\n\n    *Justin Tracey*",
    "project": "actionpack",
    "date_merged": 1637959319000,
    "author": "Justin Tracey",
    "sha": "5055ac29d6a7cce7bca6723650851e832b822f68",
    "pr": "41470",
    "merge_sha": "9d6f7681afd4c58e5d0a96d9d2ad0be63dded592",
    "html": "<p>Consider onion services secure for cookies.</p>\n\n<p><em>Justin Tracey</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Rails.config.action_view.raise_on_missing_translations`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "d4ad739454cbf4526b1edab2afbae60047721ef4",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>Rails.config.action_view.raise_on_missing_translations</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to passing a path to `fixture_file_upload` relative to `fixture_path`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "1f4a5414219fbc2052c54d11447770e1269c7d1f",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to passing a path to <code>fixture_file_upload</code> relative to <code>fixture_path</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionDispatch::SystemTestCase#host!`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "35645ed17fbc261eeef9ae52151cd1ec4b4a9755",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActionDispatch::SystemTestCase#host!</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Rails.config.action_dispatch.hosts_response_app`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "4f5989bf915305084501d05fea094691b51945bb",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>Rails.config.action_dispatch.hosts_response_app</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionDispatch::Response.return_only_media_type_on_content_type`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "073baba024952506c4802e5959409246f134b644",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActionDispatch::Response.return_only_media_type_on_content_type</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Raise `ActionController::Redirecting::UnsafeRedirectError` for unsafe `redirect_to` redirects.\n\n    This allows `rescue_from` to be used to add a default fallback route:\n\n    ```ruby\n    rescue_from ActionController::Redirecting::UnsafeRedirectError do\n      redirect_to root_url\n    end\n    ```\n\n    *Kasper Timm Hansen*, *Chris Oliver*",
    "project": "actionpack",
    "date_merged": 1636130428000,
    "author": "Kasper Timm Hansen",
    "sha": "c3758a71af949db849d5b7f176677653e4e4fae9",
    "pr": "41552",
    "merge_sha": "b0d14930458e9de0b68061b2bc341f87a973c2ba",
    "html": "<p>Raise <code>ActionController::Redirecting::UnsafeRedirectError</code> for unsafe <code>redirect_to</code> redirects.</p>\n\n<p>This allows <code>rescue_from</code> to be used to add a default fallback route:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">rescue_from</span> <span class=\"no\">ActionController</span><span class=\"o\">::</span><span class=\"no\">Redirecting</span><span class=\"o\">::</span><span class=\"no\">UnsafeRedirectError</span> <span class=\"k\">do</span>\n  <span class=\"n\">redirect_to</span> <span class=\"n\">root_url</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Kasper Timm Hansen</em>, <em>Chris Oliver</em></p>\n"
  },
  {
    "message": "*   Add `url_from` to verify a redirect location is internal.\n\n    Takes the open redirect protection from `redirect_to` so users can wrap a\n    param, and fall back to an alternate redirect URL when the param provided\n    one is unsafe.\n\n    ```ruby\n    def create\n      redirect_to url_from(params[:redirect_url]) || root_url\n    end\n    ```\n\n    *dmcge*, *Kasper Timm Hansen*",
    "project": "actionpack",
    "date_merged": 1636130428000,
    "author": "danmcge",
    "sha": "a2b3e3d52377e6eba74b7fc1dea425e99878dead",
    "pr": "41552",
    "merge_sha": "b0d14930458e9de0b68061b2bc341f87a973c2ba",
    "html": "<p>Add <code>url_from</code> to verify a redirect location is internal.</p>\n\n<p>Takes the open redirect protection from <code>redirect_to</code> so users can wrap a<br />\nparam, and fall back to an alternate redirect URL when the param provided<br />\none is unsafe.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">def</span> <span class=\"nf\">create</span>\n  <span class=\"n\">redirect_to</span> <span class=\"n\">url_from</span><span class=\"p\">(</span><span class=\"n\">params</span><span class=\"p\">[</span><span class=\"ss\">:redirect_url</span><span class=\"p\">])</span> <span class=\"o\">||</span> <span class=\"n\">root_url</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>dmcge</em>, <em>Kasper Timm Hansen</em></p>\n"
  },
  {
    "message": "*   Allow Capybara driver name overrides in `SystemTestCase::driven_by`\n\n    Allow users to prevent conflicts among drivers that use the same driver\n    type (selenium, poltergeist, webkit, rack test).\n\n    Fixes #42502\n\n    *Chris LaRose*",
    "project": "actionpack",
    "date_merged": 1634332967000,
    "author": "Chris LaRose",
    "sha": "64cecb673e1c4a33e9c80293bb9744ff77a8bb96",
    "pr": "42511",
    "merge_sha": "c51e320d372c1e9576ad4a87f6cb80c1c8f7cb8e",
    "html": "<p>Allow Capybara driver name overrides in <code>SystemTestCase::driven_by</code></p>\n\n<p>Allow users to prevent conflicts among drivers that use the same driver<br />\ntype (selenium, poltergeist, webkit, rack test).</p>\n\n<p>Fixes #42502</p>\n\n<p><em>Chris LaRose</em></p>\n"
  },
  {
    "message": "*   Allow multiline to be passed in routes when using wildcard segments.\n\n    Previously routes with newlines weren't detected when using wildcard segments, returning\n    a `No route matches` error.\n    After this change, routes with newlines are detected on wildcard segments. Example\n\n    ```ruby\n      draw do\n        get \"/wildcard/*wildcard_segment\", to: SimpleApp.new(\"foo#index\"), as: :wildcard\n      end\n\n      # After the change, the path matches.\n      assert_equal \"/wildcard/a%0Anewline\", url_helpers.wildcard_path(wildcard_segment: \"a\\nnewline\")\n    ```\n\n    Fixes #39103\n\n    *Ignacio Chiazzo*",
    "project": "actionpack",
    "date_merged": 1634237134000,
    "author": "ignacio-chiazzo",
    "sha": "1fb98c86daeb0351ec85eff9cca7e11e24c98770",
    "pr": "43461",
    "merge_sha": "ea1ca5d9ed30f42d8a6f570edc9353f9a09dd483",
    "html": "<p>Allow multiline to be passed in routes when using wildcard segments.</p>\n\n<p>Previously routes with newlines weren’t detected when using wildcard segments, returning<br />\na <code>No route matches</code> error.<br />\nAfter this change, routes with newlines are detected on wildcard segments. Example</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"n\">draw</span> <span class=\"k\">do</span>\n    <span class=\"n\">get</span> <span class=\"s2\">\"/wildcard/*wildcard_segment\"</span><span class=\"p\">,</span> <span class=\"ss\">to: </span><span class=\"no\">SimpleApp</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"s2\">\"foo#index\"</span><span class=\"p\">),</span> <span class=\"ss\">as: :wildcard</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"c1\"># After the change, the path matches.</span>\n  <span class=\"n\">assert_equal</span> <span class=\"s2\">\"/wildcard/a%0Anewline\"</span><span class=\"p\">,</span> <span class=\"n\">url_helpers</span><span class=\"p\">.</span><span class=\"nf\">wildcard_path</span><span class=\"p\">(</span><span class=\"ss\">wildcard_segment: </span><span class=\"s2\">\"a</span><span class=\"se\">\\n</span><span class=\"s2\">newline\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Fixes #39103</p>\n\n<p><em>Ignacio Chiazzo</em></p>\n"
  },
  {
    "message": "*   Treat html suffix in controller translation.\n\n    *Rui Onodera*, *Gavin Miller*",
    "project": "actionpack",
    "date_merged": 1634062761000,
    "author": "Rafael Mendonça França",
    "sha": "a5247bb90895f843c45fb095a4072e8ef30eaa4e",
    "pr": "43415",
    "merge_sha": "fee61e3abc878e4d4930a0be0accf8e4569009a8",
    "html": "<p>Treat html suffix in controller translation.</p>\n\n<p><em>Rui Onodera</em>, <em>Gavin Miller</em></p>\n"
  },
  {
    "message": "*   Allow permitting numeric params.\n\n    Previously it was impossible to permit different fields on numeric parameters.\n    After this change you can specify different fields for each numbered parameter.\n    For example params like,\n    ```ruby\n    book: {\n            authors_attributes: {\n              '0': { name: \"William Shakespeare\", age_of_death: \"52\" },\n              '1': { name: \"Unattributed Assistant\" },\n              '2': \"Not a hash\",\n              'new_record': { name: \"Some name\" }\n            }\n          }\n    ```\n\n    Before you could permit name on each author with,\n    `permit book: { authors_attributes: [ :name ] }`\n\n    After this change you can permit different keys on each numbered element,\n    `permit book: { authors_attributes: { '1': [ :name ], '0': [ :name, :age_of_death ] } }`\n\n    Fixes #41625\n\n    *Adam Hess*",
    "project": "actionpack",
    "date_merged": 1632767963000,
    "author": "HParker",
    "sha": "55811579aa0aa0da2e38affad7f2df55a77981d8",
    "pr": "43318",
    "merge_sha": "7753e244c5f1984d174aaf34f4b9cbe3d68bfbb3",
    "html": "<p>Allow permitting numeric params.</p>\n\n<p>Previously it was impossible to permit different fields on numeric parameters.<br />\nAfter this change you can specify different fields for each numbered parameter.<br />\nFor example params like,</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"ss\">book: </span><span class=\"p\">{</span>\n        <span class=\"ss\">authors_attributes: </span><span class=\"p\">{</span>\n          <span class=\"s1\">'0'</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"ss\">name: </span><span class=\"s2\">\"William Shakespeare\"</span><span class=\"p\">,</span> <span class=\"ss\">age_of_death: </span><span class=\"s2\">\"52\"</span> <span class=\"p\">},</span>\n          <span class=\"s1\">'1'</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"ss\">name: </span><span class=\"s2\">\"Unattributed Assistant\"</span> <span class=\"p\">},</span>\n          <span class=\"s1\">'2'</span><span class=\"p\">:</span> <span class=\"s2\">\"Not a hash\"</span><span class=\"p\">,</span>\n          <span class=\"s1\">'new_record'</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"ss\">name: </span><span class=\"s2\">\"Some name\"</span> <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Before you could permit name on each author with,<br />\n<code>permit book: { authors_attributes: [ :name ] }</code></p>\n\n<p>After this change you can permit different keys on each numbered element,<br />\n<code>permit book: { authors_attributes: { '1': [ :name ], '0': [ :name, :age_of_death ] } }</code></p>\n\n<p>Fixes #41625</p>\n\n<p><em>Adam Hess</em></p>\n"
  },
  {
    "message": "*   Update `HostAuthorization` middleware to render debug info only\n    when `config.consider_all_requests_local` is set to true.\n\n    Also, blocked host info is always logged with level `error`.\n\n    Fixes #42813\n\n    *Nikita Vyrko*",
    "project": "actionpack",
    "date_merged": 1632265180000,
    "author": "Nick Vyrko",
    "sha": "0d837f43e48c0a81d1e6c3476ec23ae141839ca3",
    "pr": "42813",
    "merge_sha": "860f59b5e1369a8062b15a6fd537bbec6156320c",
    "html": "<p>Update <code>HostAuthorization</code> middleware to render debug info only<br />\nwhen <code>config.consider_all_requests_local</code> is set to true.</p>\n\n<p>Also, blocked host info is always logged with level <code>error</code>.</p>\n\n<p>Fixes #42813</p>\n\n<p><em>Nikita Vyrko</em></p>\n"
  },
  {
    "message": "*  Add Server-Timing middleware\n\n   Server-Timing specification defines how the server can communicate to browsers performance metrics\n   about the request it is responding to.\n\n   The ServerTiming middleware is enabled by default on `development` environment by default using the\n   `config.server_timing` setting and set the relevant duration metrics in the `Server-Timing` header\n\n   The full specification for Server-Timing header can be found in: https://www.w3.org/TR/server-timing/#dfn-server-timing-header-field\n\n   *Sebastian Sogamoso*, *Guillermo Iguaran*",
    "project": "actionpack",
    "date_merged": 1632157900000,
    "author": "Guillermo Iguaran",
    "sha": "54707cb7a71fa3677cab35c139df6ca3ad685566",
    "pr": "42910",
    "merge_sha": "ae1c7a440a52e2e5494a45bb5befec04a500e325",
    "html": "<p>Add Server-Timing middleware</p>\n\n<p>Server-Timing specification defines how the server can communicate to browsers performance metrics<br />\nabout the request it is responding to.</p>\n\n<p>The ServerTiming middleware is enabled by default on <code>development</code> environment by default using the<br />\n<code>config.server_timing</code> setting and set the relevant duration metrics in the <code>Server-Timing</code> header</p>\n\n<p>The full specification for Server-Timing header can be found in: https://www.w3.org/TR/server-timing/#dfn-server-timing-header-field</p>\n\n<p><em>Sebastian Sogamoso</em>, <em>Guillermo Iguaran</em></p>\n"
  },
  {
    "message": "*   Use a static error message when raising `ActionDispatch::Http::Parameters::ParseError`\n    to avoid inadvertently logging the HTTP request body at the `fatal` level when it contains\n    malformed JSON.\n\n    Fixes #41145\n\n    *Aaron Lahey*",
    "project": "actionpack",
    "date_merged": 1630180515000,
    "author": "Aaron Lahey",
    "sha": "82fc62ca71fb37eec456d65dc1cb40f3d9151b9a",
    "pr": "43124",
    "merge_sha": "0a4410dace9a29ab0aa480cf55fda6ce9ea80480",
    "html": "<p>Use a static error message when raising <code>ActionDispatch::Http::Parameters::ParseError</code><br />\nto avoid inadvertently logging the HTTP request body at the <code>fatal</code> level when it contains<br />\nmalformed JSON.</p>\n\n<p>Fixes #41145</p>\n\n<p><em>Aaron Lahey</em></p>\n"
  },
  {
    "message": "*   Add `Middleware#delete!` to delete middleware or raise if not found.\n\n    `Middleware#delete!` works just like `Middleware#delete` but will\n    raise an error if the middleware isn't found.\n\n    *Alex Ghiculescu*, *Petrik de Heus*, *Junichi Sato*",
    "project": "actionpack",
    "date_merged": 1627497923000,
    "author": "Junichi Sato",
    "sha": "aff17a82f6a9ae7a512d149eff2121625a95a858",
    "pr": "42867",
    "merge_sha": "9d2a214e05fd2b938d4cb2c45bf343207dd90eb6",
    "html": "<p>Add <code>Middleware#delete!</code> to delete middleware or raise if not found.</p>\n\n<p><code>Middleware#delete!</code> works just like <code>Middleware#delete</code> but will<br />\nraise an error if the middleware isn’t found.</p>\n\n<p><em>Alex Ghiculescu</em>, <em>Petrik de Heus</em>, <em>Junichi Sato</em></p>\n"
  },
  {
    "message": "*   Raise error on unpermitted open redirects.\n\n    Add `allow_other_host` options to `redirect_to`.\n    Opt in to this behaviour with `ActionController::Base.raise_on_open_redirects = true`.\n\n    *Gannon McGibbon*",
    "project": "actionpack",
    "date_merged": 1626987276000,
    "author": "Gannon McGibbon",
    "sha": "5e93cff83599833380b4cb3d99c020b5efc7dd96",
    "pr": null,
    "merge_sha": "77e5f91f420a22c972d4abc78d2369555d4f56b6",
    "html": "<p>Raise error on unpermitted open redirects.</p>\n\n<p>Add <code>allow_other_host</code> options to <code>redirect_to</code>.<br />\nOpt in to this behaviour with <code>ActionController::Base.raise_on_open_redirects = true</code>.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Deprecate `poltergeist` and `webkit` (capybara-webkit) driver registration for system testing (they will be removed in Rails 7.1). Add `cuprite` instead.\n\n    [Poltergeist](https://github.com/teampoltergeist/poltergeist) and [capybara-webkit](https://github.com/thoughtbot/capybara-webkit) are already not maintained. These usage in Rails are removed for avoiding confusing users.\n\n    [Cuprite](https://github.com/rubycdp/cuprite) is a good alternative to Poltergeist. Some guide descriptions are replaced from Poltergeist to Cuprite.\n\n    *Yusuke Iwaki*",
    "project": "actionpack",
    "date_merged": 1626830098000,
    "author": "YusukeIwaki",
    "sha": "e489b2467b727549dd04dab09b6be7ec21026cd0",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Deprecate <code>poltergeist</code> and <code>webkit</code> (capybara-webkit) driver registration for system testing (they will be removed in Rails 7.1). Add <code>cuprite</code> instead.</p>\n\n<p><a href=\"https://github.com/teampoltergeist/poltergeist\">Poltergeist</a> and <a href=\"https://github.com/thoughtbot/capybara-webkit\">capybara-webkit</a> are already not maintained. These usage in Rails are removed for avoiding confusing users.</p>\n\n<p><a href=\"https://github.com/rubycdp/cuprite\">Cuprite</a> is a good alternative to Poltergeist. Some guide descriptions are replaced from Poltergeist to Cuprite.</p>\n\n<p><em>Yusuke Iwaki</em></p>\n"
  },
  {
    "message": "*   Exclude additional flash types from `ActionController::Base.action_methods`.\n\n    Ensures that additional flash types defined on ActionController::Base subclasses\n    are not listed as actions on that controller.\n\n        class MyController < ApplicationController\n          add_flash_types :hype\n        end\n\n        MyController.action_methods.include?('hype') # => false\n\n    *Gavin Morrice*",
    "project": "actionpack",
    "date_merged": 1626250507000,
    "author": "Bodacious",
    "sha": "39ab10164be42424ebdbebcb222af4c9d6f407ea",
    "pr": "42768",
    "merge_sha": "f6f250e54bfdb0b0cb14c72263977eef4cab5c20",
    "html": "<p>Exclude additional flash types from <code>ActionController::Base.action_methods</code>.</p>\n\n<p>Ensures that additional flash types defined on ActionController::Base subclasses<br />\nare not listed as actions on that controller.</p>\n\n<pre><code>class MyController &lt; ApplicationController\n  add_flash_types :hype\nend\n\nMyController.action_methods.include?('hype') # =&gt; false\n</code></pre>\n\n<p><em>Gavin Morrice</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "actionpack",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   Remove IE6-7-8 file download related hack/fix from ActionController::DataStreaming module.\n\n    Due to the age of those versions of IE this fix is no longer relevant, more importantly it creates an edge-case for unexpected Cache-Control headers.\n\n    *Tadas Sasnauskas*",
    "project": "actionpack",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Remove IE6-7-8 file download related hack/fix from ActionController::DataStreaming module.</p>\n\n<p>Due to the age of those versions of IE this fix is no longer relevant, more importantly it creates an edge-case for unexpected Cache-Control headers.</p>\n\n<p><em>Tadas Sasnauskas</em></p>\n"
  },
  {
    "message": "*   Configuration setting to skip logging an uncaught exception backtrace when the exception is\n    present in `rescued_responses`.\n\n    It may be too noisy to get all backtraces logged for applications that manage uncaught\n    exceptions via `rescued_responses` and `exceptions_app`.\n    `config.action_dispatch.log_rescued_responses` (defaults to `true`) can be set to `false` in\n    this case, so that only exceptions not found in `rescued_responses` will be logged.\n\n    *Alexander Azarov*, *Mike Dalessio*",
    "project": "actionpack",
    "date_merged": 1624592810000,
    "author": "Alexander Azarov",
    "sha": "dc2d9489304ffcf097b9a1fe70807ede21ce00ca",
    "pr": "42592",
    "merge_sha": "c2e42a26ecb08118bde6c0b8776bd255ed60f828",
    "html": "<p>Configuration setting to skip logging an uncaught exception backtrace when the exception is<br />\npresent in <code>rescued_responses</code>.</p>\n\n<p>It may be too noisy to get all backtraces logged for applications that manage uncaught<br />\nexceptions via <code>rescued_responses</code> and <code>exceptions_app</code>.<br />\n<code>config.action_dispatch.log_rescued_responses</code> (defaults to <code>true</code>) can be set to <code>false</code> in<br />\nthis case, so that only exceptions not found in <code>rescued_responses</code> will be logged.</p>\n\n<p><em>Alexander Azarov</em>, <em>Mike Dalessio</em></p>\n"
  },
  {
    "message": "*   Ignore file fixtures on `db:fixtures:load`.\n\n    *Kevin Sjöberg*",
    "project": "actionpack",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Ignore file fixtures on <code>db:fixtures:load</code>.</p>\n\n<p><em>Kevin Sjöberg</em></p>\n"
  },
  {
    "message": "*   Fix ActionController::Live controller test deadlocks by removing the body buffer size limit for tests.\n\n    *Dylan Thacker-Smith*",
    "project": "actionpack",
    "date_merged": 1624472989000,
    "author": "Dylan Thacker-Smith",
    "sha": "f6fb700f4c7c348ef0929a5f782470567d092fc7",
    "pr": "41609",
    "merge_sha": "3a98e7da62099e8fd538e796320aa72b25cb4e7f",
    "html": "<p>Fix ActionController::Live controller test deadlocks by removing the body buffer size limit for tests.</p>\n\n<p><em>Dylan Thacker-Smith</em></p>\n"
  },
  {
    "message": "*   New `ActionController::ConditionalGet#no_store` method to set HTTP cache control `no-store` directive.\n\n    *Tadas Sasnauskas*",
    "project": "actionpack",
    "date_merged": 1624472878000,
    "author": "Tadas Sasnauskas",
    "sha": "07da73429a5fb7918556d16c7cdc5ea9f23d4a56",
    "pr": "40324",
    "merge_sha": "cb52350f3829803b7408c230268224ef8b92daef",
    "html": "<p>New <code>ActionController::ConditionalGet#no_store</code> method to set HTTP cache control <code>no-store</code> directive.</p>\n\n<p><em>Tadas Sasnauskas</em></p>\n"
  },
  {
    "message": "*   Drop support for the `SERVER_ADDR` header.\n\n    Following up https://github.com/rack/rack/pull/1573 and https://github.com/rails/rails/pull/42349.\n\n    *Ricardo Díaz*",
    "project": "actionpack",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Drop support for the <code>SERVER_ADDR</code> header.</p>\n\n<p>Following up https://github.com/rack/rack/pull/1573 and https://github.com/rails/rails/pull/42349.</p>\n\n<p><em>Ricardo Díaz</em></p>\n"
  },
  {
    "message": "*   Set session options when initializing a basic session.\n\n    *Gannon McGibbon*",
    "project": "actionpack",
    "date_merged": 1622651421000,
    "author": "Gannon McGibbon",
    "sha": "5f4bb201bc8a342236221914522ca1f8476f272d",
    "pr": "42216",
    "merge_sha": "b9f48d5d5826add6e536722664290525eb8cc789",
    "html": "<p>Set session options when initializing a basic session.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Add `cache_control: {}` option to `fresh_when` and `stale?`.\n\n    Works as a shortcut to set `response.cache_control` with the above methods.\n\n    *Jacopo Beschi*",
    "project": "actionpack",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add <code>cache_control: {}</code> option to <code>fresh_when</code> and <code>stale?</code>.</p>\n\n<p>Works as a shortcut to set <code>response.cache_control</code> with the above methods.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Writing into a disabled session will now raise an error.\n\n    Previously when no session store was set, writing into the session would silently fail.\n\n    *Jean Boussier*",
    "project": "actionpack",
    "date_merged": 1621321176000,
    "author": "Jean Boussier",
    "sha": "c1c96a014049b2660ce3a89b3c1b7aef072ae922",
    "pr": "42231",
    "merge_sha": "9dc032acedee35237c629729aefeb24c22a96b31",
    "html": "<p>Writing into a disabled session will now raise an error.</p>\n\n<p>Previously when no session store was set, writing into the session would silently fail.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add support for 'require-trusted-types-for' and 'trusted-types' headers.\n\n    Fixes #42034.\n\n    *lfalcao*",
    "project": "actionpack",
    "date_merged": 1620464190000,
    "author": "gonzo",
    "sha": "0f7931572bb5273f71f26a4e92c34da599ec186b",
    "pr": "42126",
    "merge_sha": "523a526b0ec0303f2e53fe240f2054c63225d26e",
    "html": "<p>Add support for ‘require-trusted-types-for’ and ‘trusted-types’ headers.</p>\n\n<p>Fixes #42034.</p>\n\n<p><em>lfalcao</em></p>\n"
  },
  {
    "message": "*   Remove inline styles and address basic accessibility issues on rescue templates.\n\n    *Jacob Herrington*",
    "project": "actionpack",
    "date_merged": 1618151315000,
    "author": "John Bampton",
    "sha": "8f2c74046f0a7ef5ddf6721f8134fe25ce19e2ea",
    "pr": "41908",
    "merge_sha": "02811fe3433cf84e54edf42f169c41dc068732c7",
    "html": "<p>Remove inline styles and address basic accessibility issues on rescue templates.</p>\n\n<p><em>Jacob Herrington</em></p>\n"
  },
  {
    "message": "*   Add support for 'private, no-store' Cache-Control headers.\n\n    Previously, 'no-store' was exclusive; no other directives could be specified.\n\n    *Alex Smith*",
    "project": "actionpack",
    "date_merged": 1617632900000,
    "author": "Alex Smith",
    "sha": "06806586240221cf54a6288f0391d58958871095",
    "pr": "41735",
    "merge_sha": "b206e2f13d38160a135c08c172b41a0d8c64c289",
    "html": "<p>Add support for ‘private, no-store’ Cache-Control headers.</p>\n\n<p>Previously, ‘no-store’ was exclusive; no other directives could be specified.</p>\n\n<p><em>Alex Smith</em></p>\n"
  },
  {
    "message": "*   Expand payload of `unpermitted_parameters.action_controller` instrumentation to allow subscribers to\n    know which controller action received unpermitted parameters.\n\n    *bbuchalter*",
    "project": "actionpack",
    "date_merged": 1617302325000,
    "author": "Brian Buchalter",
    "sha": "6be9c498bccd8dbc99b4b451841fcf73c7061d48",
    "pr": "41809",
    "merge_sha": "3a32f447455dd3d67e65b29e4512685f6b139be4",
    "html": "<p>Expand payload of <code>unpermitted_parameters.action_controller</code> instrumentation to allow subscribers to<br />\nknow which controller action received unpermitted parameters.</p>\n\n<p><em>bbuchalter</em></p>\n"
  },
  {
    "message": "*   Add `ActionController::Live#send_stream` that makes it more convenient to send generated streams:\n\n    ```ruby\n    send_stream(filename: \"subscribers.csv\") do |stream|\n      stream.writeln \"email_address,updated_at\"\n\n      @subscribers.find_each do |subscriber|\n        stream.writeln [ subscriber.email_address, subscriber.updated_at ].join(\",\")\n      end\n    end\n    ```\n\n    *DHH*",
    "project": "actionpack",
    "date_merged": 1613691430000,
    "author": "David Heinemeier Hansson",
    "sha": "90049a41075de0864f20431b1065fb0421a4865c",
    "pr": "41488",
    "merge_sha": "bc9a4c51a7efba45dfaecca416d592ba1e0ca078",
    "html": "<p>Add <code>ActionController::Live#send_stream</code> that makes it more convenient to send generated streams:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">send_stream</span><span class=\"p\">(</span><span class=\"ss\">filename: </span><span class=\"s2\">\"subscribers.csv\"</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">stream</span><span class=\"o\">|</span>\n  <span class=\"n\">stream</span><span class=\"p\">.</span><span class=\"nf\">writeln</span> <span class=\"s2\">\"email_address,updated_at\"</span>\n\n  <span class=\"vi\">@subscribers</span><span class=\"p\">.</span><span class=\"nf\">find_each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">subscriber</span><span class=\"o\">|</span>\n    <span class=\"n\">stream</span><span class=\"p\">.</span><span class=\"nf\">writeln</span> <span class=\"p\">[</span> <span class=\"n\">subscriber</span><span class=\"p\">.</span><span class=\"nf\">email_address</span><span class=\"p\">,</span> <span class=\"n\">subscriber</span><span class=\"p\">.</span><span class=\"nf\">updated_at</span> <span class=\"p\">].</span><span class=\"nf\">join</span><span class=\"p\">(</span><span class=\"s2\">\",\"</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Add `ActionController::Live::Buffer#writeln` to write a line to the stream with a newline included.\n\n    *DHH*",
    "project": "actionpack",
    "date_merged": 1613840628000,
    "author": "David Heinemeier Hansson",
    "sha": "b90875ebd9fe9a4586b93af331c3f00e9dc911eb",
    "pr": "41501",
    "merge_sha": "146f0e78474cecfb3a25a089efe50c8685739428",
    "html": "<p>Add <code>ActionController::Live::Buffer#writeln</code> to write a line to the stream with a newline included.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   `ActionDispatch::Request#content_type` now returned Content-Type header as it is.\n\n    Previously, `ActionDispatch::Request#content_type` returned value does NOT contain charset part.\n    This behavior changed to returned Content-Type header containing charset part as it is.\n\n    If you want just MIME type, please use `ActionDispatch::Request#media_type` instead.\n\n    Before:\n\n    ```ruby\n    request = ActionDispatch::Request.new(\"CONTENT_TYPE\" => \"text/csv; header=present; charset=utf-16\", \"REQUEST_METHOD\" => \"GET\")\n    request.content_type #=> \"text/csv\"\n    ```\n\n    After:\n\n    ```ruby\n    request = ActionDispatch::Request.new(\"Content-Type\" => \"text/csv; header=present; charset=utf-16\", \"REQUEST_METHOD\" => \"GET\")\n    request.content_type #=> \"text/csv; header=present; charset=utf-16\"\n    request.media_type   #=> \"text/csv\"\n    ```\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1611763234000,
    "author": "Rafael Mendonça França",
    "sha": "840551307139324300b943901d84cbacba11862d",
    "pr": "41251",
    "merge_sha": "3921f247f379e17c38166de187170739cbe17de1",
    "html": "<p><code>ActionDispatch::Request#content_type</code> now returned Content-Type header as it is.</p>\n\n<p>Previously, <code>ActionDispatch::Request#content_type</code> returned value does NOT contain charset part.<br />\nThis behavior changed to returned Content-Type header containing charset part as it is.</p>\n\n<p>If you want just MIME type, please use <code>ActionDispatch::Request#media_type</code> instead.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">request</span> <span class=\"o\">=</span> <span class=\"no\">ActionDispatch</span><span class=\"o\">::</span><span class=\"no\">Request</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"s2\">\"CONTENT_TYPE\"</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"text/csv; header=present; charset=utf-16\"</span><span class=\"p\">,</span> <span class=\"s2\">\"REQUEST_METHOD\"</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"GET\"</span><span class=\"p\">)</span>\n<span class=\"n\">request</span><span class=\"p\">.</span><span class=\"nf\">content_type</span> <span class=\"c1\">#=&gt; \"text/csv\"</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">request</span> <span class=\"o\">=</span> <span class=\"no\">ActionDispatch</span><span class=\"o\">::</span><span class=\"no\">Request</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"s2\">\"Content-Type\"</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"text/csv; header=present; charset=utf-16\"</span><span class=\"p\">,</span> <span class=\"s2\">\"REQUEST_METHOD\"</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"GET\"</span><span class=\"p\">)</span>\n<span class=\"n\">request</span><span class=\"p\">.</span><span class=\"nf\">content_type</span> <span class=\"c1\">#=&gt; \"text/csv; header=present; charset=utf-16\"</span>\n<span class=\"n\">request</span><span class=\"p\">.</span><span class=\"nf\">media_type</span>   <span class=\"c1\">#=&gt; \"text/csv\"</span>\n</code></pre></div></div>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Change `ActionDispatch::Request#media_type` to return `nil` when the request don't have a `Content-Type` header.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1611763234000,
    "author": "Rafael Mendonça França",
    "sha": "a2efdf55775371a47a87e450d8f247a8cbd042d1",
    "pr": "41251",
    "merge_sha": "3921f247f379e17c38166de187170739cbe17de1",
    "html": "<p>Change <code>ActionDispatch::Request#media_type</code> to return <code>nil</code> when the request don’t have a <code>Content-Type</code> header.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix error in `ActionController::LogSubscriber` that would happen when throwing inside a controller action.\n\n    *Janko Marohnić*",
    "project": "actionpack",
    "date_merged": 1611479747000,
    "author": "Janko Marohnić",
    "sha": "53adf53bc52d83187d229e0153c98db193adce30",
    "pr": "41223",
    "merge_sha": "b32823a7ec0b46e67f795117b9e0ac08b60a5780",
    "html": "<p>Fix error in <code>ActionController::LogSubscriber</code> that would happen when throwing inside a controller action.</p>\n\n<p><em>Janko Marohnić</em></p>\n"
  },
  {
    "message": "*   Allow anything with `#to_str` (like `Addressable::URI`) as a `redirect_to` location.\n\n    *ojab*",
    "project": "actionpack",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow anything with <code>#to_str</code> (like <code>Addressable::URI</code>) as a <code>redirect_to</code> location.</p>\n\n<p><em>ojab</em></p>\n"
  },
  {
    "message": "*   Change the request method to a `GET` when passing failed requests down to `config.exceptions_app`.\n\n    *Alex Robbin*",
    "project": "actionpack",
    "date_merged": 1608170772000,
    "author": "Alex Robbin",
    "sha": "cb23580684e22dca00db3e3414d1a54f21491b47",
    "pr": "40834",
    "merge_sha": "7cce1df60a51d766ede6ff878ce40548b1d14b4c",
    "html": "<p>Change the request method to a <code>GET</code> when passing failed requests down to <code>config.exceptions_app</code>.</p>\n\n<p><em>Alex Robbin</em></p>\n"
  },
  {
    "message": "*   Deprecate the ability to assign a single value to `config.action_dispatch.trusted_proxies`\n    as `RemoteIp` middleware behaves inconsistently depending on whether this is configured\n    with a single value or an enumerable.\n\n    Fixes #40772.\n\n    *Christian Sutter*",
    "project": "actionpack",
    "date_merged": 1616567277000,
    "author": "Christian Sutter",
    "sha": "bdd49dc81f5cad7e0cabb8487cf255b3c9597c51",
    "pr": "40789",
    "merge_sha": "7702ce8243288265255d042c06fe1ca25e8c02ae",
    "html": "<p>Deprecate the ability to assign a single value to <code>config.action_dispatch.trusted_proxies</code><br />\nas <code>RemoteIp</code> middleware behaves inconsistently depending on whether this is configured<br />\nwith a single value or an enumerable.</p>\n\n<p>Fixes #40772.</p>\n\n<p><em>Christian Sutter</em></p>\n"
  },
  {
    "message": "*   Add `redirect_back_or_to(fallback_location, **)` as a more aesthetically pleasing version of `redirect_back fallback_location:, **`.\n    The old method name is retained without explicit deprecation.\n\n    *DHH*",
    "project": "actionpack",
    "date_merged": 1606244578000,
    "author": "David Heinemeier Hansson",
    "sha": "5636604b45032691e683f25094be388a276425f9",
    "pr": "40527",
    "merge_sha": "7706ae1569be716f06485eca818c42e73c0e75b4",
    "html": "<p>Add <code>redirect_back_or_to(fallback_location, **)</code> as a more aesthetically pleasing version of <code>redirect_back fallback_location:, **</code>.<br />\nThe old method name is retained without explicit deprecation.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveSupport::Notifications.publish_event` to preserve units.\n\n    This solves the incorrect reporting of time spent running Active Record\n    asynchronous queries (by a factor `1000`).\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1708114034000,
    "author": "Jean Boussier",
    "sha": "2d015a96d5a067d04a1fb8fc52294de7ea8ef9ce",
    "pr": "50779",
    "merge_sha": "052a097fda626e11c7ce229d453498674b46aa0a",
    "html": "<p>Fix <code>ActiveSupport::Notifications.publish_event</code> to preserve units.</p>\n\n<p>This solves the incorrect reporting of time spent running Active Record<br />\nasynchronous queries (by a factor <code>1000</code>).</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix ActiveSupport::Deprecation to handle blaming generated code\n\n    *Jean Boussier*, *fatkodima*",
    "project": "activesupport",
    "date_merged": 1700731938000,
    "author": "Jean Boussier",
    "sha": "0376f2238182abf575ea6ff00b9a1c1d74a5a43f",
    "pr": "50053",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix ActiveSupport::Deprecation to handle blaming generated code</p>\n\n<p><em>Jean Boussier</em>, <em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `#to_fs(:human_size)` to correctly work with negative numbers.\n\n    *Earlopain*",
    "project": "activesupport",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "a645b9fffa4b205bf487c8d0b778c0163add9a71",
    "pr": "49791",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix <code>#to_fs(:human_size)</code> to correctly work with negative numbers.</p>\n\n<p><em>Earlopain</em></p>\n"
  },
  {
    "message": "*   Add `bigdecimal` as Active Support dependency that is a bundled gem candidate for Ruby 3.4.\n\n    `bigdecimal` 3.1.4 or higher version will be installed.\n    Ruby 2.7 and 3.0 users who want `bigdecimal` version 2.0.0 or 3.0.0 behavior as a default gem,\n    pin the `bigdecimal` version in your application Gemfile.\n\n    *Koichi ITO*",
    "project": "activesupport",
    "date_merged": 1704311941000,
    "author": "Guillermo Iguaran",
    "sha": "874527f3bfc2069973c4f9d1117d23e598147e82",
    "pr": "49318",
    "merge_sha": "71e29aaa0ffecf13da37428f7cbae110cd104689",
    "html": "<p>Add <code>bigdecimal</code> as Active Support dependency that is a bundled gem candidate for Ruby 3.4.</p>\n\n<p><code>bigdecimal</code> 3.1.4 or higher version will be installed.<br />\nRuby 2.7 and 3.0 users who want <code>bigdecimal</code> version 2.0.0 or 3.0.0 behavior as a default gem,<br />\npin the <code>bigdecimal</code> version in your application Gemfile.</p>\n\n<p><em>Koichi ITO</em></p>\n"
  },
  {
    "message": "*   Add `drb`, `mutex_m` and `base64` that are bundled gem candidates for Ruby 3.4\n\n    *Yasuo Honda*",
    "project": "activesupport",
    "date_merged": 1700731938000,
    "author": "Yasuo Honda",
    "sha": "81699b52d2acff1840e3ace5e59412f4fa3934ab",
    "pr": "48907",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Add <code>drb</code>, <code>mutex_m</code> and <code>base64</code> that are bundled gem candidates for Ruby 3.4</p>\n\n<p><em>Yasuo Honda</em></p>\n"
  },
  {
    "message": "*   Fix `delete_matched` for file cache store to work with keys longer than the\n    max filename size.\n\n    *fatkodima* and *Jonathan Hefner*",
    "project": "activesupport",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "f630ca2f2a8acce020496ea0c3d3b32b8da0fa35",
    "pr": "49694",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix <code>delete_matched</code> for file cache store to work with keys longer than the<br />\nmax filename size.</p>\n\n<p><em>fatkodima</em> and <em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Fix MemoryStore to prevent race conditions when incrementing or decrementing.\n\n    *Pierre Jambet*",
    "project": "activesupport",
    "date_merged": 1696836340000,
    "author": "Pierre Jambet",
    "sha": "25b191b22151f898765af593ed18cf032123da9c",
    "pr": "49503",
    "merge_sha": "c31e81c03032fcb89ebdfc51ae9b22f96b8d6ed1",
    "html": "<p>Fix MemoryStore to prevent race conditions when incrementing or decrementing.</p>\n\n<p><em>Pierre Jambet</em></p>\n"
  },
  {
    "message": "*   Fix MemoryStore to preserve entries TTL when incrementing or decrementing\n\n    This is to be more consistent with how MemCachedStore and RedisCacheStore behaves.\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1696836340000,
    "author": "Jean Boussier",
    "sha": "c2fd5f6411287e466db952c26506bd3ed6cc22f9",
    "pr": "49503",
    "merge_sha": "c31e81c03032fcb89ebdfc51ae9b22f96b8d6ed1",
    "html": "<p>Fix MemoryStore to preserve entries TTL when incrementing or decrementing</p>\n\n<p>This is to be more consistent with how MemCachedStore and RedisCacheStore behaves.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix Range#overlaps? not taking empty ranges into account on Ruby < 3.3\n\n    *Nobuyoshi Nakada*, *Shouichi Kamiya*, *Hartley McGuire*",
    "project": "activesupport",
    "date_merged": 1695526467000,
    "author": "Guillermo Iguaran",
    "sha": "4cd7d8bd33f4eedaa68a6c4a3241b96a47c460fa",
    "pr": "49356",
    "merge_sha": "ad2ecb0b409eaece3a8f1800a8e1ae7ae8afcd1a",
    "html": "<p>Fix Range#overlaps? not taking empty ranges into account on Ruby &lt; 3.3</p>\n\n<p><em>Nobuyoshi Nakada</em>, <em>Shouichi Kamiya</em>, <em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix `TimeWithZone` still using deprecated `#to_s` when `ENV` or `config` to\n    disable it are set.\n\n    *Hartley McGuire*",
    "project": "activesupport",
    "date_merged": 1692997892000,
    "author": "Hartley McGuire",
    "sha": "7bf0e439da8d089a22ea5d144373435eed15ba96",
    "pr": "49038",
    "merge_sha": "729287fa46547618545e9af7d974a077148d059f",
    "html": "<p>Fix <code>TimeWithZone</code> still using deprecated <code>#to_s</code> when <code>ENV</code> or <code>config</code> to<br />\ndisable it are set.</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix CacheStore#write_multi when using a distributed Redis cache with a connection pool.\n\n    Fixes [#48938](https://github.com/rails/rails/issues/48938).\n\n    *Jonathan del Strother*",
    "project": "activesupport",
    "date_merged": 1692273875000,
    "author": "Jonathan del Strother",
    "sha": "bd60ccef8740aa70a4208f14840259bab5cb6625",
    "pr": "48952",
    "merge_sha": "20c3171efb686cfcfa6c0b237a024d140d3be4e0",
    "html": "<p>Fix CacheStore#write_multi when using a distributed Redis cache with a connection pool.</p>\n\n<p>Fixes <a href=\"https://github.com/rails/rails/issues/48938\">#48938</a>.</p>\n\n<p><em>Jonathan del Strother</em></p>\n"
  },
  {
    "message": "*   Use a temporary file for storing unencrypted files while editing\n\n    [CVE-2023-38037]",
    "project": "activesupport",
    "date_merged": 1692724969000,
    "author": "Aaron Patterson",
    "sha": "936587d49b3d490462c794b30fb672cef43e1bd0",
    "pr": null,
    "merge_sha": "2766c93b5c671f44433a63e84c7de33b74f0c3ac",
    "html": "<p>Use a temporary file for storing unencrypted files while editing</p>\n\n<p>[CVE-2023-38037]</p>\n"
  },
  {
    "message": "*   Fix `Cache::NullStore` with local caching for repeated reads.\n\n    *fatkodima*",
    "project": "activesupport",
    "date_merged": 1692006777000,
    "author": "Rafael Mendonça França",
    "sha": "5610cbacc5630d775a1a7be78ccb17e561908cba",
    "pr": "48937",
    "merge_sha": "a844773245e96de8a47d24df76747cdc9e4aa01f",
    "html": "<p>Fix <code>Cache::NullStore</code> with local caching for repeated reads.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `to_s` with no arguments not respecting custom `:default` formats\n\n    *Hartley McGuire*",
    "project": "activesupport",
    "date_merged": 1691092751000,
    "author": "Hartley McGuire",
    "sha": "7e9ffc2e137b649c6fd2ca1c580cdfffc9845b55",
    "pr": "48555",
    "merge_sha": "fc719ff7a606988589d5350be3ac824bc60cb4d4",
    "html": "<p>Fix <code>to_s</code> with no arguments not respecting custom <code>:default</code> formats</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveSupport::Inflector.humanize(nil)` raising ``NoMethodError: undefined method `end_with?' for nil:NilClass``.\n\n    *James Robinson*",
    "project": "activesupport",
    "date_merged": 1690930886000,
    "author": "Jean Boussier",
    "sha": "b18b9df65eb7d4e5dfa9a6982a8709c0c94b0b97",
    "pr": "48800",
    "merge_sha": "2e9f6a918eae414098c2c56c625c2ccbeeabe863",
    "html": "<p>Fix <code>ActiveSupport::Inflector.humanize(nil)</code> raising <code>NoMethodError: undefined method `end_with?' for nil:NilClass</code>.</p>\n\n<p><em>James Robinson</em></p>\n"
  },
  {
    "message": "*   Fix `Enumerable#sum` for `Enumerator#lazy`.\n\n    *fatkodima*, *Matthew Draper*, *Jonathan Hefner*",
    "project": "activesupport",
    "date_merged": 1689891892000,
    "author": "fatkodima",
    "sha": "b12fe80d17b2c7a2cc083d0c83ae3ed95765e6bd",
    "pr": "48720",
    "merge_sha": "83385cc7c3fd43e26adc9b3b658cad67c710e431",
    "html": "<p>Fix <code>Enumerable#sum</code> for <code>Enumerator#lazy</code>.</p>\n\n<p><em>fatkodima</em>, <em>Matthew Draper</em>, <em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Improve error message when EventedFileUpdateChecker is used without a\n    compatible version of the Listen gem\n\n    *Hartley McGuire*",
    "project": "activesupport",
    "date_merged": 1689782948000,
    "author": "Hartley McGuire",
    "sha": "e3f80f625945c689b5edc473c5132037c0c14952",
    "pr": "48762",
    "merge_sha": "c02b40ca2a8016594bc2449b9ce98037d4147422",
    "html": "<p>Improve error message when EventedFileUpdateChecker is used without a<br />\ncompatible version of the Listen gem</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix `EncryptedConfiguration` returning incorrect values for some `Hash`\n    methods\n\n    *Hartley McGuire*",
    "project": "activesupport",
    "date_merged": 1687418014000,
    "author": "Hartley McGuire",
    "sha": "21d1c69747c0b75a4fe357980c388cc75cd85d20",
    "pr": "48557",
    "merge_sha": "223148a2152786dce4f9a76e3ff942eb5ff30b9a",
    "html": "<p>Fix <code>EncryptedConfiguration</code> returning incorrect values for some <code>Hash</code><br />\nmethods</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix arguments being destructed `Enumerable#many?` with block.\n\n    *Andrew Novoselac*",
    "project": "activesupport",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix arguments being destructed <code>Enumerable#many?</code> with block.</p>\n\n<p><em>Andrew Novoselac</em></p>\n"
  },
  {
    "message": "*   Fix humanize for strings ending with id.\n\n    *fatkodima*",
    "project": "activesupport",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix humanize for strings ending with id.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fixes TimeWithZone ArgumentError.\n\n    *Niklas Häusele*",
    "project": "activesupport",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fixes TimeWithZone ArgumentError.</p>\n\n<p><em>Niklas Häusele</em></p>\n"
  },
  {
    "message": "*   Implement SafeBuffer#bytesplice\n\n    [CVE-2023-28120]",
    "project": "activesupport",
    "date_merged": 1678736093000,
    "author": "John Hawthorn",
    "sha": "c15ee6e7b5065db3c46afa1f025b8e45f443604e",
    "pr": null,
    "merge_sha": "98497a6cd34921f0ef33848af36b19281b6ee027",
    "html": "<p>Implement SafeBuffer#bytesplice</p>\n\n<p>[CVE-2023-28120]</p>\n"
  },
  {
    "message": "*   Avoid regex backtracking in Inflector.underscore\n\n    [CVE-2023-22796]",
    "project": "activesupport",
    "date_merged": 1674126985000,
    "author": "John Hawthorn",
    "sha": "e0bae280f1e3aa5e32d879a24ff8d846f81ecce4",
    "pr": "47050",
    "merge_sha": "9194bef66e9c17e808f97bc68e53eaaf7dd8288e",
    "html": "<p>Avoid regex backtracking in Inflector.underscore</p>\n\n<p>[CVE-2023-22796]</p>\n"
  },
  {
    "message": "*   Ensure `ActiveSupport::Testing::Isolation::Forking` closes pipes\n\n    Previously, `Forking.run_in_isolation` opened two ends of a pipe. The fork\n    process closed the read end, wrote to it, and then terminated (which\n    presumably closed the file descriptors on its end). The parent process\n    closed the write end, read from it, and returned, never closing the read\n    end.\n\n    This resulted in an accumulation of open file descriptors, which could\n    cause errors if the limit is reached.\n\n    *Sam Bostock*",
    "project": "activesupport",
    "date_merged": 1671784263000,
    "author": "Jonathan Hefner",
    "sha": "10cc75a771deb110581aa3841b76ceb2ef27abb7",
    "pr": "45667",
    "merge_sha": "83009f94e7539c7db89f83446b1478bdaec9d1a0",
    "html": "<p>Ensure <code>ActiveSupport::Testing::Isolation::Forking</code> closes pipes</p>\n\n<p>Previously, <code>Forking.run_in_isolation</code> opened two ends of a pipe. The fork<br />\nprocess closed the read end, wrote to it, and then terminated (which<br />\npresumably closed the file descriptors on its end). The parent process<br />\nclosed the write end, read from it, and returned, never closing the read<br />\nend.</p>\n\n<p>This resulted in an accumulation of open file descriptors, which could<br />\ncause errors if the limit is reached.</p>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   Redis cache store is now compatible with redis-rb 5.0.\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1661244211000,
    "author": "Jean Boussier",
    "sha": "a3bd3b5ec6448db4f7f30771a2b1aa519b6c21e9",
    "pr": "45873",
    "merge_sha": "dcf334503ce4171fead6ecdf6e2d738eab047310",
    "html": "<p>Redis cache store is now compatible with redis-rb 5.0.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix `NoMethodError` on custom `ActiveSupport::Deprecation` behavior.\n\n    `ActiveSupport::Deprecation.behavior=` was supposed to accept any object\n    that responds to `call`, but in fact its internal implementation assumed that\n    this object could respond to `arity`, so it was restricted to only `Proc` objects.\n\n    This change removes this `arity` restriction of custom behaviors.\n\n    *Ryo Nakamura*",
    "project": "activesupport",
    "date_merged": 1659835824000,
    "author": "Jonathan Hefner",
    "sha": "0b08cf518cf2329692ba76c8c2b45df0c4bcf83d",
    "pr": "45521",
    "merge_sha": "53b04ca8a98224b3f44b40d6d7189e0db72373f0",
    "html": "<p>Fix <code>NoMethodError</code> on custom <code>ActiveSupport::Deprecation</code> behavior.</p>\n\n<p><code>ActiveSupport::Deprecation.behavior=</code> was supposed to accept any object<br />\nthat responds to <code>call</code>, but in fact its internal implementation assumed that<br />\nthis object could respond to <code>arity</code>, so it was restricted to only <code>Proc</code> objects.</p>\n\n<p>This change removes this <code>arity</code> restriction of custom behaviors.</p>\n\n<p><em>Ryo Nakamura</em></p>\n"
  },
  {
    "message": "*   Fix and add protections for XSS in `ActionView::Helpers` and `ERB::Util`.\n\n    Add the method `ERB::Util.xml_name_escape` to escape dangerous characters\n    in names of tags and names of attributes, following the specification of XML.\n\n    *Álvaro Martín Fraguas*",
    "project": "activesupport",
    "date_merged": 1651004099000,
    "author": "Alvaro Martin Fraguas",
    "sha": "5c7dae5a410ff49fe4dcf30b97ee0f9148114b66",
    "pr": null,
    "merge_sha": "c204039bf10191ed32b7cf75ef0275d3d0b12a6c",
    "html": "<p>Fix and add protections for XSS in <code>ActionView::Helpers</code> and <code>ERB::Util</code>.</p>\n\n<p>Add the method <code>ERB::Util.xml_name_escape</code> to escape dangerous characters<br />\nin names of tags and names of attributes, following the specification of XML.</p>\n\n<p><em>Álvaro Martín Fraguas</em></p>\n"
  },
  {
    "message": "*   Fix Reloader method signature to work with the new Executor signature",
    "project": "activesupport",
    "date_merged": 1644608867000,
    "author": "Aaron Patterson",
    "sha": "4ff529bc6f7c8c9e155cacc9f7b81ffb7603223c",
    "pr": null,
    "merge_sha": "2583bf2e2b4a9666625b5a2fe4e6e2250defbb45",
    "html": "<p>Fix Reloader method signature to work with the new Executor signature</p>\n"
  },
  {
    "message": "*   Fix `ActiveSupport::EncryptedConfiguration` to be compatible with Psych 4\n\n    *Stephen Sugden*",
    "project": "activesupport",
    "date_merged": 1644336728000,
    "author": "Stephen Sugden",
    "sha": "8d7c054856d0b0845ce531ab08de27c7b36f1555",
    "pr": "44356",
    "merge_sha": "9f85a681cc74a5e0c6059044297ccf754b687764",
    "html": "<p>Fix <code>ActiveSupport::EncryptedConfiguration</code> to be compatible with Psych 4</p>\n\n<p><em>Stephen Sugden</em></p>\n"
  },
  {
    "message": "*   Improve `File.atomic_write` error handling.\n\n    *Daniel Pepper*",
    "project": "activesupport",
    "date_merged": 1642644472000,
    "author": "Daniel Pepper",
    "sha": "97259dec9301aff1e9b7bd08000141e10e0334e6",
    "pr": "44190",
    "merge_sha": "fbf3de0a051b8b10379dd02f1cce82fbb56c0586",
    "html": "<p>Improve <code>File.atomic_write</code> error handling.</p>\n\n<p><em>Daniel Pepper</em></p>\n"
  },
  {
    "message": "*   Fix `Class#descendants` and `DescendantsTracker#descendants` compatibility with Ruby 3.1.\n\n    [The native `Class#descendants` was reverted prior to Ruby 3.1 release](https://bugs.ruby-lang.org/issues/14394#note-33),\n    but `Class#subclasses` was kept, breaking the feature detection.\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1641577657000,
    "author": "Jean Boussier",
    "sha": "6d171b88f28f75a47067ce9eb1ff7b11161623f2",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>Class#descendants</code> and <code>DescendantsTracker#descendants</code> compatibility with Ruby 3.1.</p>\n\n<p><a href=\"https://bugs.ruby-lang.org/issues/14394#note-33\">The native <code>Class#descendants</code> was reverted prior to Ruby 3.1 release</a>,<br />\nbut <code>Class#subclasses</code> was kept, breaking the feature detection.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveSupport::Duration.build` to support negative values.\n\n    The algorithm to collect the `parts` of the `ActiveSupport::Duration`\n    ignored the sign of the `value` and accumulated incorrect part values. This\n    impacted `ActiveSupport::Duration#sum` (which is dependent on `parts`) but\n    not `ActiveSupport::Duration#eql?` (which is dependent on `value`).\n\n    *Caleb Buxton*, *Braden Staudacher*",
    "project": "activesupport",
    "date_merged": 1639513460000,
    "author": "Caleb Buxton",
    "sha": "80fda2aacb523c3656c0b95f0ebdc76b5b808a92",
    "pr": "43795",
    "merge_sha": "8132d7b1063614631f7f06a7223ca87f5a993b5e",
    "html": "<p>Fix <code>ActiveSupport::Duration.build</code> to support negative values.</p>\n\n<p>The algorithm to collect the <code>parts</code> of the <code>ActiveSupport::Duration</code><br />\nignored the sign of the <code>value</code> and accumulated incorrect part values. This<br />\nimpacted <code>ActiveSupport::Duration#sum</code> (which is dependent on <code>parts</code>) but<br />\nnot <code>ActiveSupport::Duration#eql?</code> (which is dependent on <code>value</code>).</p>\n\n<p><em>Caleb Buxton</em>, <em>Braden Staudacher</em></p>\n"
  },
  {
    "message": "*   Deprecate passing a format to `#to_s` in favor of `#to_formatted_s` in `Array`, `Range`, `Date`, `DateTime`, `Time`,\n    `BigDecimal`, `Float` and, `Integer`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "28297402f4b02e0981b67cc5f8b9d95720b29550",
    "pr": "43818",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Deprecate passing a format to <code>#to_s</code> in favor of <code>#to_formatted_s</code> in <code>Array</code>, <code>Range</code>, <code>Date</code>, <code>DateTime</code>, <code>Time</code>,<br />\n<code>BigDecimal</code>, <code>Float</code> and, <code>Integer</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Document `ActiveSupport::Testing::Deprecation`.\n\n    *Sam Bostock & Sam Jordan*",
    "project": "activesupport",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "0f47b24defc981add26c9e8c64158b277e55c36a",
    "pr": "43774",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Document <code>ActiveSupport::Testing::Deprecation</code>.</p>\n\n<p><em>Sam Bostock &amp; Sam Jordan</em></p>\n"
  },
  {
    "message": "*   Add `Pathname#existence`.\n\n    ```ruby\n    Pathname.new(\"file\").existence&.read\n    ```\n\n    *Timo Schilling*",
    "project": "activesupport",
    "date_merged": 1637873312000,
    "author": "Timo Schilling",
    "sha": "1a14bcb8cd3c9838a2d441180f5e99d34835c940",
    "pr": "43726",
    "merge_sha": "33157e21738cf058209631db5ab513244f1bcefb",
    "html": "<p>Add <code>Pathname#existence</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Pathname</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"s2\">\"file\"</span><span class=\"p\">).</span><span class=\"nf\">existence</span><span class=\"o\">&amp;</span><span class=\"p\">.</span><span class=\"nf\">read</span>\n</code></pre></div></div>\n\n<p><em>Timo Schilling</em></p>\n"
  },
  {
    "message": "*   Remove deprecate `ActiveSupport::Multibyte::Unicode.default_normalization_form`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "fd0ec3f4f6d778ad688382d8207f9c9bd1c6ec4a",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecate <code>ActiveSupport::Multibyte::Unicode.default_normalization_form</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to use `Range#include?` to check the inclusion of a value in\n    a date time range is deprecated.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "59eb7edb687c8b9cffc74288921b77da01971fb2",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated support to use <code>Range#include?</code> to check the inclusion of a value in<br />\na date time range is deprecated.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `URI.parser`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "93c35945cfd3594cafb08d941103cbd2723ee962",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>URI.parser</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `config.active_support.use_sha1_digests`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "82313145dfc767acb14dfc4f88122bc2689c6947",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>config.active_support.use_sha1_digests</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Invoking `Object#with_options` without a `&block` argument returns the\n    `ActiveSupport::OptionMerger` instance.\n\n    *Sean Doyle*",
    "project": "activesupport",
    "date_merged": 1637014743000,
    "author": "Sean Doyle",
    "sha": "8dc27b59c5266f9dd54ef08156028af5aead4a36",
    "pr": "42682",
    "merge_sha": "83ce6e31cec767770c73021b8a4f5c758c4f97f4",
    "html": "<p>Invoking <code>Object#with_options</code> without a <code>&amp;block</code> argument returns the<br />\n<code>ActiveSupport::OptionMerger</code> instance.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   `Rails.application.executor` hooks can now be called around every test\n\n    This helps to better simulate request or job local state being reset around tests and prevents state\n    leaking from one test to another.\n\n    However it requires the executor hooks executed in the test environment to be re-entrant.\n\n    To enable this, set `config.active_support.executor_around_test_case = true` (this is the default in Rails 7).\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1637972110000,
    "author": "Alex Ghiculescu",
    "sha": "5046d1cce90e56e3dc7f42cb394bbd5e740163c8",
    "pr": "43734",
    "merge_sha": "2a32c4b679a7fdc370d2f635c5285e4a4f161390",
    "html": "<p><code>Rails.application.executor</code> hooks can now be called around every test</p>\n\n<p>This helps to better simulate request or job local state being reset around tests and prevents state<br />\nleaking from one test to another.</p>\n\n<p>However it requires the executor hooks executed in the test environment to be re-entrant.</p>\n\n<p>To enable this, set <code>config.active_support.executor_around_test_case = true</code> (this is the default in Rails 7).</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::DescendantsTracker` now mostly delegate to `Class#descendants` on Ruby 3.1\n\n    Ruby now provides a fast `Class#descendants` making `ActiveSupport::DescendantsTracker` mostly useless.\n\n    As a result the following methods are deprecated:\n\n      - `ActiveSupport::DescendantsTracker.direct_descendants`\n      - `ActiveSupport::DescendantsTracker#direct_descendants`\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1635412468000,
    "author": "Jean Boussier",
    "sha": "ffae3bd8d69f9ed1ae185e960d7a38ec17118a4d",
    "pr": "43548",
    "merge_sha": "ed0ce4b8dba3151f6c906475f95998b5a35bbb71",
    "html": "<p><code>ActiveSupport::DescendantsTracker</code> now mostly delegate to <code>Class#descendants</code> on Ruby 3.1</p>\n\n<p>Ruby now provides a fast <code>Class#descendants</code> making <code>ActiveSupport::DescendantsTracker</code> mostly useless.</p>\n\n<p>As a result the following methods are deprecated:</p>\n\n<ul>\n  <li><code>ActiveSupport::DescendantsTracker.direct_descendants</code></li>\n  <li><code>ActiveSupport::DescendantsTracker#direct_descendants</code></li>\n</ul>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix the `Digest::UUID.uuid_from_hash` behavior for namespace IDs that are different from the ones defined on `Digest::UUID`.\n\n    The new behavior will be enabled by setting the\n    `config.active_support.use_rfc4122_namespaced_uuids` option to `true`\n    and is the default for new apps.\n\n    The old behavior is the default for upgraded apps and will output a\n    deprecation warning every time a value that is different than one of\n    the constants defined on the `Digest::UUID` extension is used as the\n    namespace ID.\n\n    *Alex Robbin*, *Erich Soares Machado*, *Eugene Kenny*",
    "project": "activesupport",
    "date_merged": 1635167359000,
    "author": "Erich Soares Machado",
    "sha": "cdf537ad0adb67fb92082e8bb553f27688965497",
    "pr": "37682",
    "merge_sha": "e5b814c529f0662fa6731344697997852ef30036",
    "html": "<p>Fix the <code>Digest::UUID.uuid_from_hash</code> behavior for namespace IDs that are different from the ones defined on <code>Digest::UUID</code>.</p>\n\n<p>The new behavior will be enabled by setting the<br />\n<code>config.active_support.use_rfc4122_namespaced_uuids</code> option to <code>true</code><br />\nand is the default for new apps.</p>\n\n<p>The old behavior is the default for upgraded apps and will output a<br />\ndeprecation warning every time a value that is different than one of<br />\nthe constants defined on the <code>Digest::UUID</code> extension is used as the<br />\nnamespace ID.</p>\n\n<p><em>Alex Robbin</em>, <em>Erich Soares Machado</em>, <em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Inflector::Inflections#clear(:acronyms)` is now supported,\n    and `inflector.clear` / `inflector.clear(:all)` also clears acronyms.\n\n    *Alex Ghiculescu*, *Oliver Peate*",
    "project": "activesupport",
    "date_merged": 1632175437000,
    "author": "Oli Peate",
    "sha": "a8ae85a33191a0f22669a3c13fbfaa12877af084",
    "pr": "42475",
    "merge_sha": "a76344ffc5a308e0ad6105fde921990f57fa0ea9",
    "html": "<p><code>ActiveSupport::Inflector::Inflections#clear(:acronyms)</code> is now supported,<br />\nand <code>inflector.clear</code> / <code>inflector.clear(:all)</code> also clears acronyms.</p>\n\n<p><em>Alex Ghiculescu</em>, <em>Oliver Peate</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Dependencies` no longer installs a `const_missing` hook. Before this, you could push to the autoload paths and have constants autoloaded. This feature, known as the `classic` autoloader, has been removed.\n\n    *Xavier Noria*",
    "project": "activesupport",
    "date_merged": 1630781829000,
    "author": "Xavier Noria",
    "sha": "d9fc52cc7bb626d46d84fcd0a226b33ddd3b8608",
    "pr": "43166",
    "merge_sha": "f967bce8a8d0abece8f74e16b67daace9c664ac3",
    "html": "<p><code>ActiveSupport::Dependencies</code> no longer installs a <code>const_missing</code> hook. Before this, you could push to the autoload paths and have constants autoloaded. This feature, known as the <code>classic</code> autoloader, has been removed.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Private internal classes of `ActiveSupport::Dependencies` have been deleted, like `ActiveSupport::Dependencies::Reference`, `ActiveSupport::Dependencies::Blamable`, and others.\n\n    *Xavier Noria*",
    "project": "activesupport",
    "date_merged": 1630781829000,
    "author": "Xavier Noria",
    "sha": "d9fc52cc7bb626d46d84fcd0a226b33ddd3b8608",
    "pr": "43166",
    "merge_sha": "f967bce8a8d0abece8f74e16b67daace9c664ac3",
    "html": "<p>Private internal classes of <code>ActiveSupport::Dependencies</code> have been deleted, like <code>ActiveSupport::Dependencies::Reference</code>, <code>ActiveSupport::Dependencies::Blamable</code>, and others.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   The private API of `ActiveSupport::Dependencies` has been deleted. That includes methods like `hook!`, `unhook!`, `depend_on`, `require_or_load`, `mechanism`, and many others.\n\n    *Xavier Noria*",
    "project": "activesupport",
    "date_merged": 1630781829000,
    "author": "Xavier Noria",
    "sha": "d9fc52cc7bb626d46d84fcd0a226b33ddd3b8608",
    "pr": "43166",
    "merge_sha": "f967bce8a8d0abece8f74e16b67daace9c664ac3",
    "html": "<p>The private API of <code>ActiveSupport::Dependencies</code> has been deleted. That includes methods like <code>hook!</code>, <code>unhook!</code>, <code>depend_on</code>, <code>require_or_load</code>, <code>mechanism</code>, and many others.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Improves the performance of `ActiveSupport::NumberHelper` formatters by avoiding the use of exceptions as flow control.\n\n    *Mike Dalessio*",
    "project": "activesupport",
    "date_merged": 1630781829000,
    "author": "Xavier Noria",
    "sha": "e0d77f124d1ef46af4cd24f63c169620ea48bfee",
    "pr": "43166",
    "merge_sha": "f967bce8a8d0abece8f74e16b67daace9c664ac3",
    "html": "<p>Improves the performance of <code>ActiveSupport::NumberHelper</code> formatters by avoiding the use of exceptions as flow control.</p>\n\n<p><em>Mike Dalessio</em></p>\n"
  },
  {
    "message": "*   Removed rescue block from `ActiveSupport::Cache::RedisCacheStore#handle_exception`\n\n    Previously, if you provided a `error_handler` to `redis_cache_store`, any errors thrown by\n    the error handler would be rescued and logged only. Removed the `rescue` clause from `handle_exception`\n    to allow these to be thrown.\n\n    *Nicholas A. Stuart*",
    "project": "activesupport",
    "date_merged": 1629905544000,
    "author": "Nicholas Stuart",
    "sha": "c83e690311e81e3a0150911409df231b91c9528d",
    "pr": "43086",
    "merge_sha": "6e9304a05da427abb70240141549ff885635a075",
    "html": "<p>Removed rescue block from <code>ActiveSupport::Cache::RedisCacheStore#handle_exception</code></p>\n\n<p>Previously, if you provided a <code>error_handler</code> to <code>redis_cache_store</code>, any errors thrown by<br />\nthe error handler would be rescued and logged only. Removed the <code>rescue</code> clause from <code>handle_exception</code><br />\nto allow these to be thrown.</p>\n\n<p><em>Nicholas A. Stuart</em></p>\n"
  },
  {
    "message": "*   Allow entirely opting out of deprecation warnings.\n\n    Previously if you did `app.config.active_support.deprecation = :silence`, some work would\n    still be done on each call to `ActiveSupport::Deprecation.warn`. In very hot paths, this could\n    cause performance issues.\n\n    Now, you can make `ActiveSupport::Deprecation.warn` a no-op:\n\n    ```ruby\n    config.active_support.report_deprecations = false\n    ```\n\n    This is the default in production for new apps. It is the equivalent to:\n\n    ```ruby\n    config.active_support.deprecation = :silence\n    config.active_support.disallowed_deprecation = :silence\n    ```\n\n    but will take a more optimised code path.\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1628814280000,
    "author": "Petrik de Heus",
    "sha": "68283345551d10eee260c3a74f1f8d069d1d8200",
    "pr": "42967",
    "merge_sha": "0965b67bf71b9ce02fdc25912ea0a9f90dba20ec",
    "html": "<p>Allow entirely opting out of deprecation warnings.</p>\n\n<p>Previously if you did <code>app.config.active_support.deprecation = :silence</code>, some work would<br />\nstill be done on each call to <code>ActiveSupport::Deprecation.warn</code>. In very hot paths, this could<br />\ncause performance issues.</p>\n\n<p>Now, you can make <code>ActiveSupport::Deprecation.warn</code> a no-op:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_support</span><span class=\"p\">.</span><span class=\"nf\">report_deprecations</span> <span class=\"o\">=</span> <span class=\"kp\">false</span>\n</code></pre></div></div>\n\n<p>This is the default in production for new apps. It is the equivalent to:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_support</span><span class=\"p\">.</span><span class=\"nf\">deprecation</span> <span class=\"o\">=</span> <span class=\"ss\">:silence</span>\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_support</span><span class=\"p\">.</span><span class=\"nf\">disallowed_deprecation</span> <span class=\"o\">=</span> <span class=\"ss\">:silence</span>\n</code></pre></div></div>\n\n<p>but will take a more optimised code path.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Faster tests by parallelizing only when overhead is justified by the number\n    of them.\n\n    Running tests in parallel adds overhead in terms of database\n    setup and fixture loading. Now, Rails will only parallelize test executions when\n    there are enough tests to make it worth it.\n\n    This threshold is 50 by default, and is configurable via config setting in\n    your test.rb:\n\n    ```ruby\n    config.active_support.test_parallelization_threshold = 100\n    ```\n\n    It's also configurable at the test case level:\n\n    ```ruby\n    class ActiveSupport::TestCase\n      parallelize threshold: 100\n    end\n    ```\n\n    *Jorge Manrubia*",
    "project": "activesupport",
    "date_merged": 1626461475000,
    "author": "Jorge Manrubia",
    "sha": "675d9ffb6eb544b527a19bd5d128fbd96cb5acda",
    "pr": "42789",
    "merge_sha": "4a906cbbbc68f41ab23d2510954336db63451acc",
    "html": "<p>Faster tests by parallelizing only when overhead is justified by the number<br />\nof them.</p>\n\n<p>Running tests in parallel adds overhead in terms of database<br />\nsetup and fixture loading. Now, Rails will only parallelize test executions when<br />\nthere are enough tests to make it worth it.</p>\n\n<p>This threshold is 50 by default, and is configurable via config setting in<br />\nyour test.rb:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_support</span><span class=\"p\">.</span><span class=\"nf\">test_parallelization_threshold</span> <span class=\"o\">=</span> <span class=\"mi\">100</span>\n</code></pre></div></div>\n\n<p>It’s also configurable at the test case level:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">ActiveSupport::TestCase</span>\n  <span class=\"n\">parallelize</span> <span class=\"ss\">threshold: </span><span class=\"mi\">100</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "activesupport",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   `TimeZone.iso8601` now accepts valid ordinal values similar to Ruby's `Date._iso8601` method.\n    A valid ordinal value will be converted to an instance of `TimeWithZone` using the `:year`\n    and `:yday` fragments returned from `Date._iso8601`.\n\n    ```ruby\n    twz = ActiveSupport::TimeZone[\"Eastern Time (US & Canada)\"].iso8601(\"21087\")\n    twz.to_a[0, 6] == [0, 0, 0, 28, 03, 2021]\n    ```\n\n    *Steve Laing*",
    "project": "activesupport",
    "date_merged": 1624904249000,
    "author": "Steve Laing",
    "sha": "21ca4a49ac2ecf272948ef0a490a33a6ad3c258c",
    "pr": "41779",
    "merge_sha": "21243aab93811ef6737951a68d3915f17b1d0280",
    "html": "<p><code>TimeZone.iso8601</code> now accepts valid ordinal values similar to Ruby’s <code>Date._iso8601</code> method.<br />\nA valid ordinal value will be converted to an instance of <code>TimeWithZone</code> using the <code>:year</code><br />\nand <code>:yday</code> fragments returned from <code>Date._iso8601</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">twz</span> <span class=\"o\">=</span> <span class=\"no\">ActiveSupport</span><span class=\"o\">::</span><span class=\"no\">TimeZone</span><span class=\"p\">[</span><span class=\"s2\">\"Eastern Time (US &amp; Canada)\"</span><span class=\"p\">].</span><span class=\"nf\">iso8601</span><span class=\"p\">(</span><span class=\"s2\">\"21087\"</span><span class=\"p\">)</span>\n<span class=\"n\">twz</span><span class=\"p\">.</span><span class=\"nf\">to_a</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">28</span><span class=\"p\">,</span> <span class=\"mo\">03</span><span class=\"p\">,</span> <span class=\"mi\">2021</span><span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p><em>Steve Laing</em></p>\n"
  },
  {
    "message": "*   `Time#change` and methods that call it (e.g. `Time#advance`) will now\n    return a `Time` with the timezone argument provided, if the caller was\n    initialized with a timezone argument.\n\n    Fixes [#42467](https://github.com/rails/rails/issues/42467).\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "a206aecedf6fb788d523ef67ba77133a60c66f4a",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p><code>Time#change</code> and methods that call it (e.g. <code>Time#advance</code>) will now<br />\nreturn a <code>Time</code> with the timezone argument provided, if the caller was<br />\ninitialized with a timezone argument.</p>\n\n<p>Fixes <a href=\"https://github.com/rails/rails/issues/42467\">#42467</a>.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Allow serializing any module or class to JSON by name.\n\n    *Tyler Rick*, *Zachary Scott*",
    "project": "activesupport",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow serializing any module or class to JSON by name.</p>\n\n<p><em>Tyler Rick</em>, <em>Zachary Scott</em></p>\n"
  },
  {
    "message": "*   Raise `ActiveSupport::EncryptedFile::MissingKeyError` when the\n    `RAILS_MASTER_KEY` environment variable is blank (e.g. `\"\"`).\n\n    *Sunny Ripert*",
    "project": "activesupport",
    "date_merged": 1623099575000,
    "author": "Sunny Ripert",
    "sha": "afdc2af9e243ad7cd7679dd5e138605d78173a7e",
    "pr": "42370",
    "merge_sha": "5c09cfd96fadd6080dd2e57ee761f2ccfdbc7d42",
    "html": "<p>Raise <code>ActiveSupport::EncryptedFile::MissingKeyError</code> when the<br />\n<code>RAILS_MASTER_KEY</code> environment variable is blank (e.g. <code>\"\"</code>).</p>\n\n<p><em>Sunny Ripert</em></p>\n"
  },
  {
    "message": "*   The `from:` option is added to `ActiveSupport::TestCase#assert_no_changes`.\n\n    It permits asserting on the initial value that is expected not to change.\n\n    ```ruby\n    assert_no_changes -> { Status.all_good? }, from: true do\n      post :create, params: { status: { ok: true } }\n    end\n    ```\n\n    *George Claghorn*",
    "project": "activesupport",
    "date_merged": 1621887957000,
    "author": "George Claghorn",
    "sha": "21aea0db553ae935858bb14e4f6b3c377bc2449d",
    "pr": "42277",
    "merge_sha": "42a71d142883d3f85858b3fcd4159d42d6e97712",
    "html": "<p>The <code>from:</code> option is added to <code>ActiveSupport::TestCase#assert_no_changes</code>.</p>\n\n<p>It permits asserting on the initial value that is expected not to change.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">assert_no_changes</span> <span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"no\">Status</span><span class=\"p\">.</span><span class=\"nf\">all_good?</span> <span class=\"p\">},</span> <span class=\"ss\">from: </span><span class=\"kp\">true</span> <span class=\"k\">do</span>\n  <span class=\"n\">post</span> <span class=\"ss\">:create</span><span class=\"p\">,</span> <span class=\"ss\">params: </span><span class=\"p\">{</span> <span class=\"ss\">status: </span><span class=\"p\">{</span> <span class=\"ss\">ok: </span><span class=\"kp\">true</span> <span class=\"p\">}</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Deprecate `ActiveSupport::SafeBuffer`'s incorrect implicit conversion of objects into string.\n\n    Except for a few methods like `String#%`, objects must implement `#to_str`\n    to be implicitly converted to a String in string operations. In some\n    circumstances `ActiveSupport::SafeBuffer` was incorrectly calling the\n    explicit conversion method (`#to_s`) on them. This behavior is now\n    deprecated.\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1620045207000,
    "author": "Jean Boussier",
    "sha": "147f207a57a03fc7a52040aa1f6878cf70ee0db7",
    "pr": "42123",
    "merge_sha": "e12b8d8130257863566837d009ab89b217105606",
    "html": "<p>Deprecate <code>ActiveSupport::SafeBuffer</code>’s incorrect implicit conversion of objects into string.</p>\n\n<p>Except for a few methods like <code>String#%</code>, objects must implement <code>#to_str</code><br />\nto be implicitly converted to a String in string operations. In some<br />\ncircumstances <code>ActiveSupport::SafeBuffer</code> was incorrectly calling the<br />\nexplicit conversion method (<code>#to_s</code>) on them. This behavior is now<br />\ndeprecated.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Allow nested access to keys on `Rails.application.credentials`.\n\n    Previously only top level keys in `credentials.yml.enc` could be accessed with method calls. Now any key can.\n\n    For example, given these secrets:\n\n    ```yml\n    aws:\n      access_key_id: 123\n      secret_access_key: 345\n    ```\n\n    `Rails.application.credentials.aws.access_key_id` will now return the same thing as\n    `Rails.application.credentials.aws[:access_key_id]`.\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow nested access to keys on <code>Rails.application.credentials</code>.</p>\n\n<p>Previously only top level keys in <code>credentials.yml.enc</code> could be accessed with method calls. Now any key can.</p>\n\n<p>For example, given these secrets:</p>\n\n<div class=\"language-yml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">aws</span><span class=\"pi\">:</span>\n  <span class=\"na\">access_key_id</span><span class=\"pi\">:</span> <span class=\"m\">123</span>\n  <span class=\"na\">secret_access_key</span><span class=\"pi\">:</span> <span class=\"m\">345</span>\n</code></pre></div></div>\n\n<p><code>Rails.application.credentials.aws.access_key_id</code> will now return the same thing as<br />\n<code>Rails.application.credentials.aws[:access_key_id]</code>.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Added a faster and more compact `ActiveSupport::Cache` serialization format.\n\n    It can be enabled with `config.active_support.cache_format_version = 7.0` or\n    `config.load_defaults 7.0`. Regardless of the configuration Active Support\n    7.0 can read cache entries serialized by Active Support 6.1 which allows to\n    upgrade without invalidating the cache. However Rails 6.1 can't read the\n    new format, so all readers must be upgraded before the new format is enabled.\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1619432096000,
    "author": "Jean Boussier",
    "sha": "fbf3bf8cac193d9660757d3f4ef4cbc04b17f455",
    "pr": "42076",
    "merge_sha": "0beae875eea321143ec4208df93e43fa3ebf39be",
    "html": "<p>Added a faster and more compact <code>ActiveSupport::Cache</code> serialization format.</p>\n\n<p>It can be enabled with <code>config.active_support.cache_format_version = 7.0</code> or<br />\n<code>config.load_defaults 7.0</code>. Regardless of the configuration Active Support<br />\n7.0 can read cache entries serialized by Active Support 6.1 which allows to<br />\nupgrade without invalidating the cache. However Rails 6.1 can’t read the<br />\nnew format, so all readers must be upgraded before the new format is enabled.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add `Enumerable#sole`, per `ActiveRecord::FinderMethods#sole`.  Returns the\n    sole item of the enumerable, raising if no items are found, or if more than\n    one is.\n\n    *Asherah Connor*",
    "project": "activesupport",
    "date_merged": 1618848503000,
    "author": "Asherah Connor",
    "sha": "2e14c53fc62cebe883bf3494294e29c54d666805",
    "pr": "40914",
    "merge_sha": "6ebd134a9afb1870f62ff74b96c7d92a94feca6d",
    "html": "<p>Add <code>Enumerable#sole</code>, per <code>ActiveRecord::FinderMethods#sole</code>.  Returns the<br />\nsole item of the enumerable, raising if no items are found, or if more than<br />\none is.</p>\n\n<p><em>Asherah Connor</em></p>\n"
  },
  {
    "message": "*   Freeze `ActiveSupport::Duration#parts` and remove writer methods.\n\n    Durations are meant to be value objects and should not be mutated.\n\n    *Andrew White*",
    "project": "activesupport",
    "date_merged": 1618303178000,
    "author": "Andrew White",
    "sha": "06b294a24cbe0a3760595f4e18ed516000107722",
    "pr": "41906",
    "merge_sha": "d75dc729228f0c9bf35f1f18c850e7fcd077044c",
    "html": "<p>Freeze <code>ActiveSupport::Duration#parts</code> and remove writer methods.</p>\n\n<p>Durations are meant to be value objects and should not be mutated.</p>\n\n<p><em>Andrew White</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveSupport::TimeZone#utc_to_local` with fractional seconds.\n\n    When `utc_to_local_returns_utc_offset_times` is false and the time\n    instance had fractional seconds the new UTC time instance was out by\n    a factor of 1,000,000 as the `Time.utc` constructor takes a usec\n    value and not a fractional second value.\n\n    *Andrew White*",
    "project": "activesupport",
    "date_merged": 1618302069000,
    "author": "Andrew White",
    "sha": "697edcb30f0b730e0230139b1290bd2a83f0155c",
    "pr": "41929",
    "merge_sha": "3145c588af13d3bddf4f0af7fa34b0c3e0eea5a3",
    "html": "<p>Fix <code>ActiveSupport::TimeZone#utc_to_local</code> with fractional seconds.</p>\n\n<p>When <code>utc_to_local_returns_utc_offset_times</code> is false and the time<br />\ninstance had fractional seconds the new UTC time instance was out by<br />\na factor of 1,000,000 as the <code>Time.utc</code> constructor takes a usec<br />\nvalue and not a fractional second value.</p>\n\n<p><em>Andrew White</em></p>\n"
  },
  {
    "message": "*   Add `expires_at` argument to `ActiveSupport::Cache` `write` and `fetch` to set a cache entry TTL as an absolute time.\n\n    ```ruby\n    Rails.cache.write(key, value, expires_at: Time.now.at_end_of_hour)\n    ```\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1617779402000,
    "author": "Jean Boussier",
    "sha": "9de17ac4a47cd3a6252dc0e9672805fb49ea5d03",
    "pr": "41831",
    "merge_sha": "fe8f47b42576603cc6ceafa4395b458b4977acdf",
    "html": "<p>Add <code>expires_at</code> argument to <code>ActiveSupport::Cache</code> <code>write</code> and <code>fetch</code> to set a cache entry TTL as an absolute time.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">cache</span><span class=\"p\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"ss\">expires_at: </span><span class=\"no\">Time</span><span class=\"p\">.</span><span class=\"nf\">now</span><span class=\"p\">.</span><span class=\"nf\">at_end_of_hour</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Deprecate `ActiveSupport::TimeWithZone.name` so that from Rails 7.1 it will use the default implementation.\n\n    *Andrew White*",
    "project": "activesupport",
    "date_merged": 1617630747000,
    "author": "Andrew White",
    "sha": "3f4b41a6f51590d4fcb11b0ed80518dbd71e48e4",
    "pr": "41835",
    "merge_sha": "725f8f4c8574fefa75acaa9626a823bffd6f2a83",
    "html": "<p>Deprecate <code>ActiveSupport::TimeWithZone.name</code> so that from Rails 7.1 it will use the default implementation.</p>\n\n<p><em>Andrew White</em></p>\n"
  },
  {
    "message": "*   Deprecates Rails custom `Enumerable#sum` and `Array#sum` in favor of Ruby's native implementation which\n    is considerably faster.\n\n    Ruby requires an initializer for non-numeric type as per examples below:\n\n    ```ruby\n    %w[foo bar].sum('')\n    # instead of %w[foo bar].sum\n\n    [[1, 2], [3, 4, 5]].sum([])\n    # instead of [[1, 2], [3, 4, 5]].sum\n    ```\n\n    *Alberto Mota*",
    "project": "activesupport",
    "date_merged": 1620465373000,
    "author": "Alberto Mota",
    "sha": "afa83350deef906ed01b7acb5da6e9285aab661f",
    "pr": "42080",
    "merge_sha": "1fd8a3f6db17268907a4fcde7c75131d582ad674",
    "html": "<p>Deprecates Rails custom <code>Enumerable#sum</code> and <code>Array#sum</code> in favor of Ruby’s native implementation which<br />\nis considerably faster.</p>\n\n<p>Ruby requires an initializer for non-numeric type as per examples below:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"sx\">%w[foo bar]</span><span class=\"p\">.</span><span class=\"nf\">sum</span><span class=\"p\">(</span><span class=\"s1\">''</span><span class=\"p\">)</span>\n<span class=\"c1\"># instead of %w[foo bar].sum</span>\n\n<span class=\"p\">[[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">]].</span><span class=\"nf\">sum</span><span class=\"p\">([])</span>\n<span class=\"c1\"># instead of [[1, 2], [3, 4, 5]].sum</span>\n</code></pre></div></div>\n\n<p><em>Alberto Mota</em></p>\n"
  },
  {
    "message": "*   Tests parallelization is now disabled when running individual files to prevent the setup overhead.\n\n    It can still be enforced if the environment variable `PARALLEL_WORKERS` is present and set to a value greater than 1.\n\n    *Ricardo Díaz*",
    "project": "activesupport",
    "date_merged": 1616504817000,
    "author": "Ricardo Díaz",
    "sha": "2327ebfdc6791ce95e6628884ec7b18b73e22bba",
    "pr": "41684",
    "merge_sha": "ad9e52066cde3a7e5a8c1171206c11d6922f2068",
    "html": "<p>Tests parallelization is now disabled when running individual files to prevent the setup overhead.</p>\n\n<p>It can still be enforced if the environment variable <code>PARALLEL_WORKERS</code> is present and set to a value greater than 1.</p>\n\n<p><em>Ricardo Díaz</em></p>\n"
  },
  {
    "message": "*   Fix proxying keyword arguments in `ActiveSupport::CurrentAttributes`.\n\n    *Marcin Kołodziej*",
    "project": "activesupport",
    "date_merged": 1614024001000,
    "author": "Marcin Kolodziej",
    "sha": "9d6b2b38fd786ef80ae05b55f02bc15eacaf318f",
    "pr": "41518",
    "merge_sha": "b9b218f2ab229a6515370d892aa2666ce52834ab",
    "html": "<p>Fix proxying keyword arguments in <code>ActiveSupport::CurrentAttributes</code>.</p>\n\n<p><em>Marcin Kołodziej</em></p>\n"
  },
  {
    "message": "*   Add `Enumerable#maximum` and `Enumerable#minimum` to easily calculate the maximum or minimum from extracted\n    elements of an enumerable.\n\n    ```ruby\n    payments = [Payment.new(5), Payment.new(15), Payment.new(10)]\n\n    payments.minimum(:price) # => 5\n    payments.maximum(:price) # => 15\n    ```\n\n    This also allows passing enumerables to `fresh_when` and `stale?` in Action Controller.\n    See PR [#41404](https://github.com/rails/rails/pull/41404) for an example.\n\n    *Ayrton De Craene*",
    "project": "activesupport",
    "date_merged": 1613161779000,
    "author": "Ayrton De Craene",
    "sha": "2526938b32da14fc2244e5bdc29da437afec6f4c",
    "pr": "41404",
    "merge_sha": "e0f95b44aeeadadffa790b2674fe66fc84147956",
    "html": "<p>Add <code>Enumerable#maximum</code> and <code>Enumerable#minimum</code> to easily calculate the maximum or minimum from extracted<br />\nelements of an enumerable.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">payments</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"no\">Payment</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">),</span> <span class=\"no\">Payment</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"mi\">15</span><span class=\"p\">),</span> <span class=\"no\">Payment</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)]</span>\n\n<span class=\"n\">payments</span><span class=\"p\">.</span><span class=\"nf\">minimum</span><span class=\"p\">(</span><span class=\"ss\">:price</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; 5</span>\n<span class=\"n\">payments</span><span class=\"p\">.</span><span class=\"nf\">maximum</span><span class=\"p\">(</span><span class=\"ss\">:price</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; 15</span>\n</code></pre></div></div>\n\n<p>This also allows passing enumerables to <code>fresh_when</code> and <code>stale?</code> in Action Controller.<br />\nSee PR <a href=\"https://github.com/rails/rails/pull/41404\">#41404</a> for an example.</p>\n\n<p><em>Ayrton De Craene</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Cache::MemCacheStore` now accepts an explicit `nil` for its `addresses` argument.\n\n    ```ruby\n    config.cache_store = :mem_cache_store, nil\n\n    # is now equivalent to\n\n    config.cache_store = :mem_cache_store\n\n    # and is also equivalent to\n\n    config.cache_store = :mem_cache_store, ENV[\"MEMCACHE_SERVERS\"] || \"localhost:11211\"\n\n    # which is the fallback behavior of Dalli\n    ```\n\n    This helps those migrating from `:dalli_store`, where an explicit `nil` was permitted.\n\n    *Michael Overmeyer*",
    "project": "activesupport",
    "date_merged": 1612904913000,
    "author": "Michael Overmeyer",
    "sha": "71963b1fc9a74ea792f88f5bfe2ec32a160dcc10",
    "pr": "41381",
    "merge_sha": "06e8d5c29fa9cce83cd99cefed2d135094584acd",
    "html": "<p><code>ActiveSupport::Cache::MemCacheStore</code> now accepts an explicit <code>nil</code> for its <code>addresses</code> argument.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span><span class=\"p\">,</span> <span class=\"kp\">nil</span>\n\n<span class=\"c1\"># is now equivalent to</span>\n\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span>\n\n<span class=\"c1\"># and is also equivalent to</span>\n\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span><span class=\"p\">,</span> <span class=\"no\">ENV</span><span class=\"p\">[</span><span class=\"s2\">\"MEMCACHE_SERVERS\"</span><span class=\"p\">]</span> <span class=\"o\">||</span> <span class=\"s2\">\"localhost:11211\"</span>\n\n<span class=\"c1\"># which is the fallback behavior of Dalli</span>\n</code></pre></div></div>\n\n<p>This helps those migrating from <code>:dalli_store</code>, where an explicit <code>nil</code> was permitted.</p>\n\n<p><em>Michael Overmeyer</em></p>\n"
  },
  {
    "message": "*   Add `Enumerable#in_order_of` to put an Enumerable in a certain order by a key.\n\n    *DHH*",
    "project": "activesupport",
    "date_merged": 1612544964000,
    "author": "David Heinemeier Hansson",
    "sha": "9cb09411e174ef7f71c6c986a50e5b839ebeab50",
    "pr": "41333",
    "merge_sha": "d7ff7646c15dc56275b711a56a9f811645d35326",
    "html": "<p>Add <code>Enumerable#in_order_of</code> to put an Enumerable in a certain order by a key.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Inflector.camelize` behaves expected when provided a symbol `:upper` or `:lower` argument. Matches\n    `String#camelize` behavior.\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1612292165000,
    "author": "Alex Ghiculescu",
    "sha": "cd3eac1df361a73a6c2b9cd9f4f2c026f44464c7",
    "pr": "41313",
    "merge_sha": "657238163e7303b9cd96a092b752c860fe1ff2a7",
    "html": "<p><code>ActiveSupport::Inflector.camelize</code> behaves expected when provided a symbol <code>:upper</code> or <code>:lower</code> argument. Matches<br />\n<code>String#camelize</code> behavior.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Raises an `ArgumentError` when the first argument of `ActiveSupport::Notification.subscribe` is\n    invalid.\n\n    *Vipul A M*",
    "project": "activesupport",
    "date_merged": 1609203919000,
    "author": "Rafael Mendonça França",
    "sha": "dbf6dbb147903bb1af497eb6c8da1cb9310aa435",
    "pr": "39626",
    "merge_sha": "cd019cd47c6c4f88ff64fa53e9a464a1ef6a908c",
    "html": "<p>Raises an <code>ArgumentError</code> when the first argument of <code>ActiveSupport::Notification.subscribe</code> is<br />\ninvalid.</p>\n\n<p><em>Vipul A M</em></p>\n"
  },
  {
    "message": "*   `HashWithIndifferentAccess#deep_transform_keys` now returns a `HashWithIndifferentAccess` instead of a `Hash`.\n\n    *Nathaniel Woodthorpe*",
    "project": "activesupport",
    "date_merged": 1606778217000,
    "author": "Nathaniel Woodthorpe",
    "sha": "f5e597638853e5550509347254889d50c738ea56",
    "pr": "40703",
    "merge_sha": "3446efc8bca2cb310aabc4b2e801598252344e0e",
    "html": "<p><code>HashWithIndifferentAccess#deep_transform_keys</code> now returns a <code>HashWithIndifferentAccess</code> instead of a <code>Hash</code>.</p>\n\n<p><em>Nathaniel Woodthorpe</em></p>\n"
  },
  {
    "message": "*   Consume dalli’s `cache_nils` configuration as `ActiveSupport::Cache`'s `skip_nil` when using `MemCacheStore`.\n\n    *Ritikesh G*",
    "project": "activesupport",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Consume dalli’s <code>cache_nils</code> configuration as <code>ActiveSupport::Cache</code>’s <code>skip_nil</code> when using <code>MemCacheStore</code>.</p>\n\n<p><em>Ritikesh G</em></p>\n"
  },
  {
    "message": "*   Add `RedisCacheStore#stats` method similar to `MemCacheStore#stats`. Calls `redis#info` internally.\n\n    *Ritikesh G*",
    "project": "activesupport",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add <code>RedisCacheStore#stats</code> method similar to <code>MemCacheStore#stats</code>. Calls <code>redis#info</code> internally.</p>\n\n<p><em>Ritikesh G</em></p>\n"
  },
  {
    "message": "*   Error.full_message now strips \":base\" from the message.\n\n    *zzak*",
    "project": "activemodel",
    "date_merged": 1691092751000,
    "author": "Rafael Mendonça França",
    "sha": "d52ac5c1f81e5eadcc942baf987374964e476e62",
    "pr": "48871",
    "merge_sha": "fc719ff7a606988589d5350be3ac824bc60cb4d4",
    "html": "<p>Error.full_message now strips “:base” from the message.</p>\n\n<p><em>zzak</em></p>\n"
  },
  {
    "message": "*   Add a load hook for `ActiveModel::Model` (named `active_model`) to match the load hook for\n    `ActiveRecord::Base` and allow for overriding aspects of the `ActiveModel::Model` class.",
    "project": "activemodel",
    "date_merged": 1691092751000,
    "author": "Rafael Mendonça França",
    "sha": "d52ac5c1f81e5eadcc942baf987374964e476e62",
    "pr": "48871",
    "merge_sha": "fc719ff7a606988589d5350be3ac824bc60cb4d4",
    "html": "<p>Add a load hook for <code>ActiveModel::Model</code> (named <code>active_model</code>) to match the load hook for<br />\n<code>ActiveRecord::Base</code> and allow for overriding aspects of the <code>ActiveModel::Model</code> class.</p>\n"
  },
  {
    "message": "*   Handle name clashes in attribute methods code generation cache.\n\n    When two distinct attribute methods would generate similar names,\n    the first implementation would be incorrectly re-used.\n\n    ```ruby\n    class A\n      attribute_method_suffix \"_changed?\"\n      define_attribute_methods :x\n    end\n\n    class B\n      attribute_method_suffix \"?\"\n      define_attribute_methods :x_changed\n    end\n    ```\n\n    *Jean Boussier*",
    "project": "activemodel",
    "date_merged": 1657647916000,
    "author": "Jean Boussier",
    "sha": "8e7b3b735e878bbdb1e9230afd9daadf06673056",
    "pr": null,
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>Handle name clashes in attribute methods code generation cache.</p>\n\n<p>When two distinct attribute methods would generate similar names,<br />\nthe first implementation would be incorrectly re-used.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">A</span>\n  <span class=\"n\">attribute_method_suffix</span> <span class=\"s2\">\"_changed?\"</span>\n  <span class=\"n\">define_attribute_methods</span> <span class=\"ss\">:x</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">B</span>\n  <span class=\"n\">attribute_method_suffix</span> <span class=\"s2\">\"?\"</span>\n  <span class=\"n\">define_attribute_methods</span> <span class=\"ss\">:x_changed</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Use different cache namespace for proxy calls\n\n    Models can currently have different attribute bodies for the same method\n    names, leading to conflicts. Adding a new namespace `:active_model_proxy`\n    fixes the issue.\n\n    *Chris Salzberg*",
    "project": "activemodel",
    "date_merged": 1644336728000,
    "author": "Chris Salzberg",
    "sha": "b861bd81c2d36113fb9c2d35fa56cdc273f3c8d6",
    "pr": "44356",
    "merge_sha": "9f85a681cc74a5e0c6059044297ccf754b687764",
    "html": "<p>Use different cache namespace for proxy calls</p>\n\n<p>Models can currently have different attribute bodies for the same method<br />\nnames, leading to conflicts. Adding a new namespace <code>:active_model_proxy</code><br />\nfixes the issue.</p>\n\n<p><em>Chris Salzberg</em></p>\n"
  },
  {
    "message": "*   Remove support to Marshal load Rails 5.x `ActiveModel::AttributeSet` format.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "1f3cfb272cfb27fbdac383698718373d5c456850",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove support to Marshal load Rails 5.x <code>ActiveModel::AttributeSet</code> format.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove support to Marshal and YAML load Rails 5.x error format.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "29967320899900e70921213ab67bf19ecdf7cbd8",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove support to Marshal and YAML load Rails 5.x error format.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to use `[]=` in `ActiveModel::Errors#messages`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "70dc990ad270c674dac4ff77b11037b24741b524",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to use <code>[]=</code> in <code>ActiveModel::Errors#messages</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to `delete` errors from `ActiveModel::Errors#messages`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "70dc990ad270c674dac4ff77b11037b24741b524",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to <code>delete</code> errors from <code>ActiveModel::Errors#messages</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to `clear` errors from `ActiveModel::Errors#messages`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "70dc990ad270c674dac4ff77b11037b24741b524",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to <code>clear</code> errors from <code>ActiveModel::Errors#messages</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support concat errors to `ActiveModel::Errors#messages`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "884c97fad02ccc061a7d34058709b32f6f6a6a14",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support concat errors to <code>ActiveModel::Errors#messages</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveModel::Errors#to_xml`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "73872c7220bfcbf74994529127f203af1391e01e",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActiveModel::Errors#to_xml</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveModel::Errors#keys`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "edc4e7dfb540c5d8693ccc5233701aefb4bb0c27",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActiveModel::Errors#keys</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveModel::Errors#values`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "6fed53b694dcb2f510a93ef10b275bc13534b97b",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActiveModel::Errors#values</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveModel::Errors#slice!`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "362e17e899bb87fc15955230a46f678f226da7aa",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActiveModel::Errors#slice!</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveModel::Errors#to_h`.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "a743656ae461d75478730a3f8a05d32f035e52d2",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActiveModel::Errors#to_h</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated enumeration of `ActiveModel::Errors` instances as a Hash.\n\n    *Rafael Mendonça França*",
    "project": "activemodel",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "05b18d26949d9be1705cbd69d8f1b03ce5e2c658",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated enumeration of <code>ActiveModel::Errors</code> instances as a Hash.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Clear secure password cache if password is set to `nil`\n\n    Before:\n\n       user.password = 'something'\n       user.password = nil\n\n       user.password # => 'something'\n\n    Now:\n\n       user.password = 'something'\n       user.password = nil\n\n       user.password # => nil\n\n    *Markus Doits*",
    "project": "activemodel",
    "date_merged": 1634248765000,
    "author": "Markus Doits",
    "sha": "9bd186a0e8aa5e40719134466c9d4676c4098ce5",
    "pr": "43378",
    "merge_sha": "3b5db8e8c951b9f8722a948f108f597ff7840eb5",
    "html": "<p>Clear secure password cache if password is set to <code>nil</code></p>\n\n<p>Before:</p>\n\n<p>user.password = ‘something’<br />\n   user.password = nil</p>\n\n<p>user.password # =&gt; ‘something’</p>\n\n<p>Now:</p>\n\n<p>user.password = ‘something’<br />\n   user.password = nil</p>\n\n<p>user.password # =&gt; nil</p>\n\n<p><em>Markus Doits</em></p>\n"
  },
  {
    "message": "*   Introduce `ActiveModel::API`.\n\n    Make `ActiveModel::API` the minimum API to talk with Action Pack and Action View.\n    This will allow adding more functionality to `ActiveModel::Model`.\n\n    *Petrik de Heus*, *Nathaniel Watts*",
    "project": "activemodel",
    "date_merged": 1631724828000,
    "author": "Petrik",
    "sha": "c477d95604e80e04d1aa8113a8236353235eb86a",
    "pr": "43223",
    "merge_sha": "ee2a3f2c7b6114cf9b07e0181a17b84b8452370c",
    "html": "<p>Introduce <code>ActiveModel::API</code>.</p>\n\n<p>Make <code>ActiveModel::API</code> the minimum API to talk with Action Pack and Action View.<br />\nThis will allow adding more functionality to <code>ActiveModel::Model</code>.</p>\n\n<p><em>Petrik de Heus</em>, <em>Nathaniel Watts</em></p>\n"
  },
  {
    "message": "*   Fix dirty check for Float::NaN and BigDecimal::NaN.\n\n    Float::NaN and BigDecimal::NaN in Ruby are [special values](https://bugs.ruby-lang.org/issues/1720)\n    and can't be compared with `==`.\n\n    *Marcelo Lauxen*",
    "project": "activemodel",
    "date_merged": 1626976835000,
    "author": "Marcelo Lauxen",
    "sha": "d1df4c100fee09efe85acb6663bfebcfa7036485",
    "pr": "42831",
    "merge_sha": "25d8c1ce45e8d0fa50c8b25fd1bed70ce4113b6e",
    "html": "<p>Fix dirty check for Float::NaN and BigDecimal::NaN.</p>\n\n<p>Float::NaN and BigDecimal::NaN in Ruby are <a href=\"https://bugs.ruby-lang.org/issues/1720\">special values</a><br />\nand can’t be compared with <code>==</code>.</p>\n\n<p><em>Marcelo Lauxen</em></p>\n"
  },
  {
    "message": "*   Fix `to_json` for `ActiveModel::Dirty` object.\n\n    Exclude `mutations_from_database` attribute from json as it lead to recursion.\n\n    *Anil Maurya*",
    "project": "activemodel",
    "date_merged": 1624558229000,
    "author": "Anil Kumar Maurya",
    "sha": "ab1a58281c9fc365c54de65236729a8889a3db55",
    "pr": "41521",
    "merge_sha": "637d386fbb53e5ab3caf4746893c1988d47c5d1d",
    "html": "<p>Fix <code>to_json</code> for <code>ActiveModel::Dirty</code> object.</p>\n\n<p>Exclude <code>mutations_from_database</code> attribute from json as it lead to recursion.</p>\n\n<p><em>Anil Maurya</em></p>\n"
  },
  {
    "message": "*   Add `ActiveModel::AttributeSet#values_for_database`.\n\n    Returns attributes with values for assignment to the database.\n\n    *Chris Salzberg*",
    "project": "activemodel",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add <code>ActiveModel::AttributeSet#values_for_database</code>.</p>\n\n<p>Returns attributes with values for assignment to the database.</p>\n\n<p><em>Chris Salzberg</em></p>\n"
  },
  {
    "message": "*   Fix delegation in ActiveModel::Type::Registry#lookup and ActiveModel::Type.lookup.\n\n    Passing a last positional argument `{}` would be incorrectly considered as keyword argument.\n\n    *Benoit Daloze*",
    "project": "activemodel",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Fix delegation in ActiveModel::Type::Registry#lookup and ActiveModel::Type.lookup.</p>\n\n<p>Passing a last positional argument <code>{}</code> would be incorrectly considered as keyword argument.</p>\n\n<p><em>Benoit Daloze</em></p>\n"
  },
  {
    "message": "*   Cache and re-use generated attribute methods.\n\n    Generated methods with identical implementations will now share their instruction sequences\n    leading to reduced memory retention, and slightly faster load time.\n\n    *Jean Boussier*",
    "project": "activemodel",
    "date_merged": 1620115833000,
    "author": "John Bampton",
    "sha": "6e85b6b86e59cf3e6216e823dda0e5e41ecbaeb9",
    "pr": "42132",
    "merge_sha": "daaa3b58688d092b4fc3505cf74fece034f61dbf",
    "html": "<p>Cache and re-use generated attribute methods.</p>\n\n<p>Generated methods with identical implementations will now share their instruction sequences<br />\nleading to reduced memory retention, and slightly faster load time.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add `in: range`  parameter to `numericality` validator.\n\n    *Michal Papis*",
    "project": "activemodel",
    "date_merged": 1609889735000,
    "author": "Michal Papis",
    "sha": "2486e887deac01988ba49932c16d345e2a6dd434",
    "pr": "41022",
    "merge_sha": "34ffa5149a921fc40bca602f7fe24c81310276bd",
    "html": "<p>Add <code>in: range</code>  parameter to <code>numericality</code> validator.</p>\n\n<p><em>Michal Papis</em></p>\n"
  },
  {
    "message": "*   Add `locale` argument to `ActiveModel::Name#initialize` to be used to generate the `singular`,\n   `plural`, `route_key` and `singular_route_key` values.\n\n    *Lukas Pokorny*",
    "project": "activemodel",
    "date_merged": 1609270154000,
    "author": "Rafael Mendonça França",
    "sha": "4740a2a02cbef9204677b17cebf5058248c6f97f",
    "pr": "40961",
    "merge_sha": "50073df569130573fbf54f0c081abad5a424b4e2",
    "html": "<p>Add <code>locale</code> argument to <code>ActiveModel::Name#initialize</code> to be used to generate the <code>singular</code>,<br />\n<code>plural</code>, <code>route_key</code> and <code>singular_route_key</code> values.</p>\n\n<p><em>Lukas Pokorny</em></p>\n"
  },
  {
    "message": "*   Make ActiveModel::Errors#inspect slimmer for readability\n\n    *lulalala*",
    "project": "activemodel",
    "date_merged": 1627023908000,
    "author": "lulalala",
    "sha": "1523838567606327fabf08c4b5aeacbca7b2201c",
    "pr": "42832",
    "merge_sha": "8512118f435e61b9e333a640572b93f7bc61a9ee",
    "html": "<p>Make ActiveModel::Errors#inspect slimmer for readability</p>\n\n<p><em>lulalala</em></p>\n"
  },
  {
    "message": "*   Preserve the serialized timezone when deserializing `ActiveSupport::TimeWithZone` arguments.\n\n    *Joshua Young*",
    "project": "activejob",
    "date_merged": 1702276018000,
    "author": "Jean Boussier",
    "sha": "731032e3a7bb930be37e9f363f55e05c4f4e9dc7",
    "pr": "50240",
    "merge_sha": "8af810e013a49c5c3c266c22e681af78281279f5",
    "html": "<p>Preserve the serialized timezone when deserializing <code>ActiveSupport::TimeWithZone</code> arguments.</p>\n\n<p><em>Joshua Young</em></p>\n"
  },
  {
    "message": "*   Fix Active Job log message to correctly report a job failed to enqueue\n    when the adapter raises an `ActiveJob::EnqueueError`.\n\n    *Ben Sheldon*",
    "project": "activejob",
    "date_merged": 1693935313000,
    "author": "Ryuta Kamizono",
    "sha": "ac441031b2a26260a9205ce4140df2c04c8301bb",
    "pr": "47865",
    "merge_sha": "39eddbdf8a55b73df857242585dcf547f538e50e",
    "html": "<p>Fix Active Job log message to correctly report a job failed to enqueue<br />\nwhen the adapter raises an <code>ActiveJob::EnqueueError</code>.</p>\n\n<p><em>Ben Sheldon</em></p>\n"
  },
  {
    "message": "*   Fix error Active Job passed class with `permitted?`.\n\n    *Alex Baldwin*",
    "project": "activejob",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix error Active Job passed class with <code>permitted?</code>.</p>\n\n<p><em>Alex Baldwin</em></p>\n"
  },
  {
    "message": "*   Make delayed job `display_name` failsafe.\n\n    *codez*",
    "project": "activejob",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Make delayed job <code>display_name</code> failsafe.</p>\n\n<p><em>codez</em></p>\n"
  },
  {
    "message": "*   Don't double log the `job` when using `ActiveRecord::QueryLog`\n\n    Previously if you set `config.active_record.query_log_tags` to an array that included\n    `:job`, the job name would get logged twice. This bug has been fixed.\n\n    *Alex Ghiculescu*",
    "project": "activejob",
    "date_merged": 1672768035000,
    "author": "Alex Ghiculescu",
    "sha": "55cd9ae8d744ae5f2752b344c9b98eac90dfd093",
    "pr": "46738",
    "merge_sha": "baeb273d87ba97cbb0617129da4aeacb5de904a3",
    "html": "<p>Don’t double log the <code>job</code> when using <code>ActiveRecord::QueryLog</code></p>\n\n<p>Previously if you set <code>config.active_record.query_log_tags</code> to an array that included<br />\n<code>:job</code>, the job name would get logged twice. This bug has been fixed.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Update `ActiveJob::QueueAdapters::QueAdapter` to remove deprecation warning.\n\n    Remove a deprecation warning introduced in que 1.2 to prepare for changes in\n    que 2.0 necessary for Ruby 3 compatibility.\n\n    *Damir Zekic* and *Adis Hasovic*",
    "project": "activejob",
    "date_merged": 1661840013000,
    "author": "Ryuta Kamizono",
    "sha": "fd68a838eadc38501e26537d2e4ed524d2214a0c",
    "pr": "45903",
    "merge_sha": "76df62d3dd12a54a75051a05b338ab0b4cfc2c89",
    "html": "<p>Update <code>ActiveJob::QueueAdapters::QueAdapter</code> to remove deprecation warning.</p>\n\n<p>Remove a deprecation warning introduced in que 1.2 to prepare for changes in<br />\nque 2.0 necessary for Ruby 3 compatibility.</p>\n\n<p><em>Damir Zekic</em> and <em>Adis Hasovic</em></p>\n"
  },
  {
    "message": "*   Add missing `bigdecimal` require in `ActiveJob::Arguments`\n\n    Could cause `uninitialized constant ActiveJob::Arguments::BigDecimal (NameError)`\n    when loading Active Job in isolation.\n\n    *Jean Boussier*",
    "project": "activejob",
    "date_merged": 1646631757000,
    "author": "Jean Boussier",
    "sha": "05ccf03263c9a7a30d62d89e64d2ef9c82c857d9",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Add missing <code>bigdecimal</code> require in <code>ActiveJob::Arguments</code></p>\n\n<p>Could cause <code>uninitialized constant ActiveJob::Arguments::BigDecimal (NameError)</code><br />\nwhen loading Active Job in isolation.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Allow testing `discard_on/retry_on ActiveJob::DeserializationError`\n\n    Previously in `perform_enqueued_jobs`, `deserialize_arguments_if_needed`\n    was called before calling `perform_now`. When a record no longer exists\n    and is serialized using GlobalID this led to raising\n    an `ActiveJob::DeserializationError` before reaching `perform_now` call.\n    This behaviour makes difficult testing the job `discard_on/retry_on` logic.\n\n    Now `deserialize_arguments_if_needed` call is postponed to when `perform_now`\n    is called.\n\n    Example:\n\n    ```ruby\n    class UpdateUserJob < ActiveJob::Base\n      discard_on ActiveJob::DeserializationError\n\n      def perform(user)\n        # ...\n      end\n    end\n\n    # In the test\n    User.destroy_all\n    assert_nothing_raised do\n      perform_enqueued_jobs only: UpdateUserJob\n    end\n    ```\n\n    *Jacopo Beschi*",
    "project": "activejob",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "4004ad745f6ff9d4829136afa69b9fc82f1005e5",
    "pr": "43066",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Allow testing <code>discard_on/retry_on ActiveJob::DeserializationError</code></p>\n\n<p>Previously in <code>perform_enqueued_jobs</code>, <code>deserialize_arguments_if_needed</code><br />\nwas called before calling <code>perform_now</code>. When a record no longer exists<br />\nand is serialized using GlobalID this led to raising<br />\nan <code>ActiveJob::DeserializationError</code> before reaching <code>perform_now</code> call.<br />\nThis behaviour makes difficult testing the job <code>discard_on/retry_on</code> logic.</p>\n\n<p>Now <code>deserialize_arguments_if_needed</code> call is postponed to when <code>perform_now</code><br />\nis called.</p>\n\n<p>Example:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">UpdateUserJob</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveJob</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">discard_on</span> <span class=\"no\">ActiveJob</span><span class=\"o\">::</span><span class=\"no\">DeserializationError</span>\n\n  <span class=\"k\">def</span> <span class=\"nf\">perform</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">)</span>\n    <span class=\"c1\"># ...</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># In the test</span>\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">destroy_all</span>\n<span class=\"n\">assert_nothing_raised</span> <span class=\"k\">do</span>\n  <span class=\"n\">perform_enqueued_jobs</span> <span class=\"ss\">only: </span><span class=\"no\">UpdateUserJob</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `:return_false_on_aborted_enqueue` option.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "7c788e9175d323c2fd931058f67dd8df18d2f5c5",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecated <code>:return_false_on_aborted_enqueue</code> option.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Deprecated `Rails.config.active_job.skip_after_callbacks_if_terminated`.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "10bd5e59c3291bb2034869e97cca30634a559afb",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Deprecated <code>Rails.config.active_job.skip_after_callbacks_if_terminated</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Removed deprecated behavior that was not halting `after_enqueue`/`after_perform` callbacks when a\n    previous callback was halted with `throw :abort`.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "10bd5e59c3291bb2034869e97cca30634a559afb",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Removed deprecated behavior that was not halting <code>after_enqueue</code>/<code>after_perform</code> callbacks when a<br />\nprevious callback was halted with <code>throw :abort</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Raise an `SerializationError` in `Serializer::ModuleSerializer`\n    if the module name is not present.\n\n    *Veerpal Brar*",
    "project": "activejob",
    "date_merged": 1634142767000,
    "author": "Veerpal Brar",
    "sha": "0f259e702d0793fa066e5c60fe56cc74440a4d3f",
    "pr": "43436",
    "merge_sha": "279337d894992fdce5e42d04444a5d275afe3355",
    "html": "<p>Raise an <code>SerializationError</code> in <code>Serializer::ModuleSerializer</code><br />\nif the module name is not present.</p>\n\n<p><em>Veerpal Brar</em></p>\n"
  },
  {
    "message": "*   Allow a job to retry indefinitely\n\n    The `attempts` parameter of the `retry_on` method now accepts the\n    symbol reference `:unlimited` in addition to a specific number of retry\n    attempts to allow a developer to specify that a job should retry\n    forever until it succeeds.\n\n        class MyJob < ActiveJob::Base\n          retry_on(AlwaysRetryException, attempts: :unlimited)\n\n          # the actual job code\n        end\n\n    *Daniel Morton*",
    "project": "activejob",
    "date_merged": 1627518341000,
    "author": "Daniel Morton",
    "sha": "94ccd5410d84313be48dc949fdf1d185c98a9d7f",
    "pr": "41761",
    "merge_sha": "f24d10c2856cbb2cb1b1a81b1b957b23495b42cb",
    "html": "<p>Allow a job to retry indefinitely</p>\n\n<p>The <code>attempts</code> parameter of the <code>retry_on</code> method now accepts the<br />\nsymbol reference <code>:unlimited</code> in addition to a specific number of retry<br />\nattempts to allow a developer to specify that a job should retry<br />\nforever until it succeeds.</p>\n\n<pre><code>class MyJob &lt; ActiveJob::Base\n  retry_on(AlwaysRetryException, attempts: :unlimited)\n\n  # the actual job code\nend\n</code></pre>\n\n<p><em>Daniel Morton</em></p>\n"
  },
  {
    "message": "*   Added possibility to check on `:priority` in test helper methods\n    `assert_enqueued_with` and `assert_performed_with`.\n\n    *Wojciech Wnętrzak*",
    "project": "activejob",
    "date_merged": 1626336854000,
    "author": "Wojciech Wnętrzak",
    "sha": "e2db5f205a34b908f0c446e2080f9258450bce0b",
    "pr": "41127",
    "merge_sha": "ebebb9d2bc47cea79128c50149964346e62472b9",
    "html": "<p>Added possibility to check on <code>:priority</code> in test helper methods<br />\n<code>assert_enqueued_with</code> and <code>assert_performed_with</code>.</p>\n\n<p><em>Wojciech Wnętrzak</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "activejob",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   Add a Serializer for the Range class.\n\n    This should allow things like `MyJob.perform_later(range: 1..100)`.",
    "project": "activejob",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add a Serializer for the Range class.</p>\n\n<p>This should allow things like <code>MyJob.perform_later(range: 1..100)</code>.</p>\n"
  },
  {
    "message": "*   Communicate enqueue failures to callers of `perform_later`.\n\n    `perform_later` can now optionally take a block which will execute after\n    the adapter attempts to enqueue the job. The block will receive the job\n    instance as an argument even if the enqueue was not successful.\n    Additionally, `ActiveJob` adapters now have the ability to raise an\n    `ActiveJob::EnqueueError` which will be caught and stored in the job\n    instance so code attempting to enqueue jobs can inspect any raised\n    `EnqueueError` using the block.\n\n        MyJob.perform_later do |job|\n          unless job.successfully_enqueued?\n            if job.enqueue_error&.message == \"Redis was unavailable\"\n              # invoke some code that will retry the job after a delay\n            end\n          end\n        end\n\n    *Daniel Morton*",
    "project": "activejob",
    "date_merged": 1612563800000,
    "author": "Daniel Morton",
    "sha": "ee60ce5606cda9e17b76406aea004b9250bf3655",
    "pr": "41191",
    "merge_sha": "2828d6b955ad732d05d0509420679331baf3950b",
    "html": "<p>Communicate enqueue failures to callers of <code>perform_later</code>.</p>\n\n<p><code>perform_later</code> can now optionally take a block which will execute after<br />\nthe adapter attempts to enqueue the job. The block will receive the job<br />\ninstance as an argument even if the enqueue was not successful.<br />\nAdditionally, <code>ActiveJob</code> adapters now have the ability to raise an<br />\n<code>ActiveJob::EnqueueError</code> which will be caught and stored in the job<br />\ninstance so code attempting to enqueue jobs can inspect any raised<br />\n<code>EnqueueError</code> using the block.</p>\n\n<pre><code>MyJob.perform_later do |job|\n  unless job.successfully_enqueued?\n    if job.enqueue_error&amp;.message == \"Redis was unavailable\"\n      # invoke some code that will retry the job after a delay\n    end\n  end\nend\n</code></pre>\n\n<p><em>Daniel Morton</em></p>\n"
  },
  {
    "message": "*   Don't log rescuable exceptions defined with `rescue_from`.\n\n    *Hu Hailin*",
    "project": "activejob",
    "date_merged": 1612236019000,
    "author": "Rafael Mendonça França",
    "sha": "efa64bb295abbd72705619e8eb8745d16fae6684",
    "pr": "40927",
    "merge_sha": "56bcb839c4a6ed9a9f8908ef93bb676b750b7f23",
    "html": "<p>Don’t log rescuable exceptions defined with <code>rescue_from</code>.</p>\n\n<p><em>Hu Hailin</em></p>\n"
  },
  {
    "message": "*   Allow `rescue_from` to rescue all exceptions.\n\n    *Adrianna Chang*, *Étienne Barrié*",
    "project": "activejob",
    "date_merged": 1611600337000,
    "author": "Étienne Barrié",
    "sha": "142ae54e54ac81a0f62eaa43c3c280307cf2127a",
    "pr": "41214",
    "merge_sha": "cdcee5cb3a65b7a1e80c05375cb161e1966d21b5",
    "html": "<p>Allow <code>rescue_from</code> to rescue all exceptions.</p>\n\n<p><em>Adrianna Chang</em>, <em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Omit `webdrivers` gem dependency from `Gemfile` template\n\n    *Sean Doyle*",
    "project": "railties",
    "date_merged": 1692997892000,
    "author": "R.R",
    "sha": "f9175dbf20938f744c5081d199250db15e520e9f",
    "pr": "48973",
    "merge_sha": "729287fa46547618545e9af7d974a077148d059f",
    "html": "<p>Omit <code>webdrivers</code> gem dependency from <code>Gemfile</code> template</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Update default scaffold templates to set 303 (See Other) as status code\n    on redirect for the update action for XHR requests other than GET or POST\n    to avoid issues (e.g browsers trying to follow the redirect using the\n    original request method resulting in double PATCH/PUT)\n\n    *Guillermo Iguaran*",
    "project": "railties",
    "date_merged": 1688293260000,
    "author": "Guillermo Iguaran",
    "sha": "5d1ad8702572e3e41eabc575a3581886d5f69d33",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Update default scaffold templates to set 303 (See Other) as status code<br />\non redirect for the update action for XHR requests other than GET or POST<br />\nto avoid issues (e.g browsers trying to follow the redirect using the<br />\noriginal request method resulting in double PATCH/PUT)</p>\n\n<p><em>Guillermo Iguaran</em></p>\n"
  },
  {
    "message": "*   Avoid escaping paths when editing credentials.\n\n    *Jonathan Hefner*",
    "project": "railties",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Avoid escaping paths when editing credentials.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Add puma app server to Gemfile in order to start test/dummy.\n\n    *Donapieppo*",
    "project": "railties",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Add puma app server to Gemfile in order to start test/dummy.</p>\n\n<p><em>Donapieppo</em></p>\n"
  },
  {
    "message": "*   Rails console now disables `IRB`'s autocompletion feature in production by default.\n\n    Setting `IRB_USE_AUTOCOMPLETE=true` can override this default.\n\n    *Stan Lo*",
    "project": "railties",
    "date_merged": 1671784263000,
    "author": "Eileen M. Uchitelle",
    "sha": "cc125a0f9a894baa4e33f92995086897bf09da9d",
    "pr": "46656",
    "merge_sha": "83009f94e7539c7db89f83446b1478bdaec9d1a0",
    "html": "<p>Rails console now disables <code>IRB</code>’s autocompletion feature in production by default.</p>\n\n<p>Setting <code>IRB_USE_AUTOCOMPLETE=true</code> can override this default.</p>\n\n<p><em>Stan Lo</em></p>\n"
  },
  {
    "message": "*   Send 303 See Other status code back for the destroy action on newly generated\n    scaffold controllers.\n\n    *Tony Drake*",
    "project": "railties",
    "date_merged": 1666704102000,
    "author": "Jonathan Hefner",
    "sha": "5bebef36ade9103b1e4ebcfdafcf0c7361f75c45",
    "pr": "45383",
    "merge_sha": "76b16d338b47f58b864764eac0521905dba274cc",
    "html": "<p>Send 303 See Other status code back for the destroy action on newly generated<br />\nscaffold controllers.</p>\n\n<p><em>Tony Drake</em></p>\n"
  },
  {
    "message": "*   `config.allow_concurrency = false` now use a `Monitor` instead of a `Mutex`\n\n    This allows to enable `config.active_support.executor_around_test_case` even\n    when `config.allow_concurrency` is disabled.\n\n    *Jean Boussier*",
    "project": "railties",
    "date_merged": 1661244211000,
    "author": "Jean Boussier",
    "sha": "f1bae2b9253f227cd5cb03ef73d39ad7ac3e9909",
    "pr": "45857",
    "merge_sha": "dcf334503ce4171fead6ecdf6e2d738eab047310",
    "html": "<p><code>config.allow_concurrency = false</code> now use a <code>Monitor</code> instead of a <code>Mutex</code></p>\n\n<p>This allows to enable <code>config.active_support.executor_around_test_case</code> even<br />\nwhen <code>config.allow_concurrency</code> is disabled.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Skip Active Storage and Action Mailer if Active Job is skipped.\n\n    *Étienne Barrié*",
    "project": "railties",
    "date_merged": 1656027602000,
    "author": "Eileen M. Uchitelle",
    "sha": "6cda7694098703bc4a3c06328d0c00b46a8a2c42",
    "pr": "45354",
    "merge_sha": "575f20c891ffc621564d4d5f28cbc129cdda41bd",
    "html": "<p>Skip Active Storage and Action Mailer if Active Job is skipped.</p>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Correctly check if frameworks are disabled when running app:update.\n\n    *Étienne Barrié* and *Paulo Barros*",
    "project": "railties",
    "date_merged": 1656027602000,
    "author": "Eileen M. Uchitelle",
    "sha": "018fa5afe3de70f66d276977df3244eb1b8b5a68",
    "pr": "45351",
    "merge_sha": "575f20c891ffc621564d4d5f28cbc129cdda41bd",
    "html": "<p>Correctly check if frameworks are disabled when running app:update.</p>\n\n<p><em>Étienne Barrié</em> and <em>Paulo Barros</em></p>\n"
  },
  {
    "message": "*   Fixed `config.active_support.cache_format_version` never being applied.\n\n    Rails 7.0 shipped with a new serializer for Rails.cache, but the associated config\n    wasn't working properly. Note that even after this fix, it can only be applied from\n    the `application.rb` file.\n\n    *Alex Ghiculescu*",
    "project": "railties",
    "date_merged": 1654715957000,
    "author": "Alex Ghiculescu",
    "sha": "cb1a753d91f6092c26a2a130229369666172563d",
    "pr": "45304",
    "merge_sha": "270a2ddd6b70a1d188650afe48dddd025c4e605a",
    "html": "<p>Fixed <code>config.active_support.cache_format_version</code> never being applied.</p>\n\n<p>Rails 7.0 shipped with a new serializer for Rails.cache, but the associated config<br />\nwasn’t working properly. Note that even after this fix, it can only be applied from<br />\nthe <code>application.rb</code> file.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   If reloading and eager loading are both enabled, after a reload Rails eager loads again the application code.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1651004099000,
    "author": "Xavier Noria",
    "sha": "9971f77463a154dcb6cdb5625a3b8073fef9ec42",
    "pr": null,
    "merge_sha": "c204039bf10191ed32b7cf75ef0275d3d0b12a6c",
    "html": "<p>If reloading and eager loading are both enabled, after a reload Rails eager loads again the application code.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Use `controller_class_path` in `Rails::Generators::NamedBase#route_url`\n\n    The `route_url` method now returns the correct path when generating\n    a namespaced controller with a top-level model using `--model-name`.\n\n    Previously, when running this command:\n\n    ``` sh\n    bin/rails generate scaffold_controller Admin/Post --model-name Post\n    ```\n\n    the comments above the controller action would look like:\n\n    ``` ruby\n    # GET /posts\n    def index\n      @posts = Post.all\n    end\n    ```\n\n    afterwards, they now look like this:\n\n    ``` ruby\n    # GET /admin/posts\n    def index\n      @posts = Post.all\n    end\n    ```\n\n    Fixes #44662.\n\n    *Andrew White*",
    "project": "railties",
    "date_merged": 1648066286000,
    "author": "Aaron Patterson",
    "sha": "42e7e410e0b3685f126799753a227cc72542fbe0",
    "pr": "44670",
    "merge_sha": "f0cfc60799c66047fdc9cc443bb957012cf1fbc8",
    "html": "<p>Use <code>controller_class_path</code> in <code>Rails::Generators::NamedBase#route_url</code></p>\n\n<p>The <code>route_url</code> method now returns the correct path when generating<br />\na namespaced controller with a top-level model using <code>--model-name</code>.</p>\n\n<p>Previously, when running this command:</p>\n\n<div class=\"language-sh highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>bin/rails generate scaffold_controller Admin/Post <span class=\"nt\">--model-name</span> Post\n</code></pre></div></div>\n\n<p>the comments above the controller action would look like:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># GET /posts</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span>\n  <span class=\"vi\">@posts</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">all</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>afterwards, they now look like this:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># GET /admin/posts</span>\n<span class=\"k\">def</span> <span class=\"nf\">index</span>\n  <span class=\"vi\">@posts</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">all</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Fixes #44662.</p>\n\n<p><em>Andrew White</em></p>\n"
  },
  {
    "message": "*   Prevent duplicate entries in plugin Gemfile.\n\n    *Jonathan Hefner*",
    "project": "railties",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Prevent duplicate entries in plugin Gemfile.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Fix asset pipeline errors for plugin dummy apps.\n\n    *Jonathan Hefner*",
    "project": "railties",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix asset pipeline errors for plugin dummy apps.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Fix generated route revocation.\n\n    *Jonathan Hefner*",
    "project": "railties",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix generated route revocation.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Addresses an issue in which Sidekiq jobs could not reload certain\n    namespaces.\n\n    See [fxn/zeitwerk#198](https://github.com/fxn/zeitwerk/issues/198) for\n    details.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1641577657000,
    "author": "Xavier Noria",
    "sha": "0af593b61c26e52a48080d36bb01736794dc7912",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Addresses an issue in which Sidekiq jobs could not reload certain<br />\nnamespaces.</p>\n\n<p>See <a href=\"https://github.com/fxn/zeitwerk/issues/198\">fxn/zeitwerk#198</a> for<br />\ndetails.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Fix plugin generator to a plugin that pass all the tests.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix plugin generator to a plugin that pass all the tests.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Allow localhost with a port by default in development\n\n    [Fixes: #43864]",
    "project": "railties",
    "date_merged": 1639523203000,
    "author": "Aaron Patterson",
    "sha": "040a84bf051fae0fdaab3383da3a1f356ab4087d",
    "pr": "43868",
    "merge_sha": "797ac0c3fdf37edce025c713987cfbee562c8993",
    "html": "<p>Allow localhost with a port by default in development</p>\n\n<p>[Fixes: #43864]</p>\n"
  },
  {
    "message": "*   Remove deprecated `config` in `dbconsole`.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "fdb0b29ad9e25965f506e340ea59b33815927378",
    "pr": "43818",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Remove deprecated <code>config</code> in <code>dbconsole</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Change default `X-XSS-Protection` header to disable XSS auditor\n\n    This header has been deprecated and the XSS auditor it triggered\n    has been removed from all major modern browsers (in favour of\n    Content Security Policy) that implemented this header to begin with\n    (Firefox never did).\n\n    [OWASP](https://owasp.org/www-project-secure-headers/#x-xss-protection)\n    suggests setting this header to '0' to disable the default behaviour\n    on old browsers as it can introduce additional security issues.\n\n    Added the new behaviour as a framework default from Rails 7.0.\n\n    *Christian Sutter*",
    "project": "railties",
    "date_merged": 1637868429000,
    "author": "Christian Sutter",
    "sha": "1f4714c3f798df227222f531141880b8e1b4170a",
    "pr": "41769",
    "merge_sha": "481343ed91a66a112f7d929a73214f42ffb38dfc",
    "html": "<p>Change default <code>X-XSS-Protection</code> header to disable XSS auditor</p>\n\n<p>This header has been deprecated and the XSS auditor it triggered<br />\nhas been removed from all major modern browsers (in favour of<br />\nContent Security Policy) that implemented this header to begin with<br />\n(Firefox never did).</p>\n\n<p><a href=\"https://owasp.org/www-project-secure-headers/#x-xss-protection\">OWASP</a><br />\nsuggests setting this header to ‘0’ to disable the default behaviour<br />\non old browsers as it can introduce additional security issues.</p>\n\n<p>Added the new behaviour as a framework default from Rails 7.0.</p>\n\n<p><em>Christian Sutter</em></p>\n"
  },
  {
    "message": "*   Scaffolds now use date_field, time_field and datetime_field instead of\n    date_select, time_select and datetime_select; thus providing native date/time pickers.\n\n    *Martijn Lafeber*",
    "project": "railties",
    "date_merged": 1634333015000,
    "author": "Martijn Lafeber",
    "sha": "a64dd2ae1d918f1dee690d5d1469c72fed09febe",
    "pr": "43458",
    "merge_sha": "4b2bb79de078e87e2f7639ca086c4c47f53a40a4",
    "html": "<p>Scaffolds now use date_field, time_field and datetime_field instead of<br />\ndate_select, time_select and datetime_select; thus providing native date/time pickers.</p>\n\n<p><em>Martijn Lafeber</em></p>\n"
  },
  {
    "message": "*   Fix a regression in which autoload paths were initialized too late.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1633443725000,
    "author": "Xavier Noria",
    "sha": "fe4377098b3800c3998f0583549a414b99b72b19",
    "pr": "43358",
    "merge_sha": "0a8c4dc0e0cc8874230b88ed4bbe72f68d947fab",
    "html": "<p>Fix a regression in which autoload paths were initialized too late.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Fix activestorage dependency in the npm package.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1631779990000,
    "author": "Rafael Mendonça França",
    "sha": "d177551c30e550a67fef76bfb612ac57abaec525",
    "pr": "43225",
    "merge_sha": "4bbdad500cc6438141c668d5d8b8ad2534a46b5b",
    "html": "<p>Fix activestorage dependency in the npm package.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   New and upgraded Rails apps no longer generate `config/initializers/application_controller_renderer.rb`\n    or `config/initializers/cookies_serializer.rb`\n\n    The default value for `cookies_serializer` (`:json`) has been moved to `config.load_defaults(\"7.0\")`.\n    The new framework defaults file can be used to upgrade the serializer.\n\n    *Alex Ghiculescu*",
    "project": "railties",
    "date_merged": 1631740754000,
    "author": "Alex Ghiculescu",
    "sha": "de238125ef0baab1d1af0f27f61fc700f9e18e55",
    "pr": "42538",
    "merge_sha": "ba57ad52453ef52b242af609d86be5705afde2fe",
    "html": "<p>New and upgraded Rails apps no longer generate <code>config/initializers/application_controller_renderer.rb</code><br />\nor <code>config/initializers/cookies_serializer.rb</code></p>\n\n<p>The default value for <code>cookies_serializer</code> (<code>:json</code>) has been moved to <code>config.load_defaults(\"7.0\")</code>.<br />\nThe new framework defaults file can be used to upgrade the serializer.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   New applications get a dependency on the new `debug` gem, replacing `byebug`.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1631116200000,
    "author": "Xavier Noria",
    "sha": "89801b2a435bd7f11a202a25e262c2ffbae46259",
    "pr": "43187",
    "merge_sha": "24956f2e5fdbc43ff5e073a8f5c4d7f710d359e5",
    "html": "<p>New applications get a dependency on the new <code>debug</code> gem, replacing <code>byebug</code>.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Add SSL support for postgresql in `bin/rails dbconsole`.\n\n    Fixes #43114.\n\n    *Michael Bayucot*",
    "project": "railties",
    "date_merged": 1630286027000,
    "author": "Michael Bayucot",
    "sha": "9f57debbd04093f75d116a7ddcccd8d76de39063",
    "pr": "43118",
    "merge_sha": "d0b0c1caa6b824e975f2fe2811f266f1a8f16d15",
    "html": "<p>Add SSL support for postgresql in <code>bin/rails dbconsole</code>.</p>\n\n<p>Fixes #43114.</p>\n\n<p><em>Michael Bayucot</em></p>\n"
  },
  {
    "message": "*   Add support for comments above gem declaration in Rails application templates, e.g. `gem(\"nokogiri\", comment: \"For XML\")`.\n\n    *Linas Juškevičius*",
    "project": "railties",
    "date_merged": 1630286027000,
    "author": "Guillermo Iguaran",
    "sha": "b71a9ccce04ac08e159d4a21de91a8d76f13d8d0",
    "pr": "43118",
    "merge_sha": "d0b0c1caa6b824e975f2fe2811f266f1a8f16d15",
    "html": "<p>Add support for comments above gem declaration in Rails application templates, e.g. <code>gem(\"nokogiri\", comment: \"For XML\")</code>.</p>\n\n<p><em>Linas Juškevičius</em></p>\n"
  },
  {
    "message": "*   The setter `config.autoloader=` has been deleted. `zeitwerk` is the only\n    available autoloading mode.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1630052493000,
    "author": "Xavier Noria",
    "sha": "dc047f71b824bfbf4a8e16e2445994d91359d9a2",
    "pr": "43097",
    "merge_sha": "4eeca2af40c0853a9909414d6db3c44780d021f7",
    "html": "<p>The setter <code>config.autoloader=</code> has been deleted. <code>zeitwerk</code> is the only<br />\navailable autoloading mode.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   `config.autoload_once_paths` can be configured in the body of the\n    application class defined in `config/application.rb` or in the configuration\n    for environments in `config/environments/*`.\n\n    Similarly, engines can configure that collection in the class body of the\n    engine class or in the configuration for environments.\n\n    After that, the collection is frozen, and you can autoload from those paths.\n    They are managed by the `Rails.autoloaders.once` autoloader, which does not\n    reload, only autoloads/eager loads.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1630052493000,
    "author": "Xavier Noria",
    "sha": "dc047f71b824bfbf4a8e16e2445994d91359d9a2",
    "pr": "43097",
    "merge_sha": "4eeca2af40c0853a9909414d6db3c44780d021f7",
    "html": "<p><code>config.autoload_once_paths</code> can be configured in the body of the<br />\napplication class defined in <code>config/application.rb</code> or in the configuration<br />\nfor environments in <code>config/environments/*</code>.</p>\n\n<p>Similarly, engines can configure that collection in the class body of the<br />\nengine class or in the configuration for environments.</p>\n\n<p>After that, the collection is frozen, and you can autoload from those paths.<br />\nThey are managed by the <code>Rails.autoloaders.once</code> autoloader, which does not<br />\nreload, only autoloads/eager loads.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   During initialization, you cannot autoload reloadable classes or modules\n    like application models, unless they are wrapped in a `to_prepare` block.\n    For example, from `config/initializers/*`, or in application, engines, or\n    railties initializers.\n\n    Please check the [autoloading\n    guide](https://guides.rubyonrails.org/v7.0/autoloading_and_reloading_constants.html#autoloading-when-the-application-boots)\n    for details.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1630052493000,
    "author": "Xavier Noria",
    "sha": "dc047f71b824bfbf4a8e16e2445994d91359d9a2",
    "pr": "43097",
    "merge_sha": "4eeca2af40c0853a9909414d6db3c44780d021f7",
    "html": "<p>During initialization, you cannot autoload reloadable classes or modules<br />\nlike application models, unless they are wrapped in a <code>to_prepare</code> block.<br />\nFor example, from <code>config/initializers/*</code>, or in application, engines, or<br />\nrailties initializers.</p>\n\n<p>Please check the <a href=\"https://guides.rubyonrails.org/v7.0/autoloading_and_reloading_constants.html#autoloading-when-the-application-boots\">autoloading<br />\nguide</a><br />\nfor details.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   While they are allowed to have elements in common, it is no longer required\n    that `config.autoload_once_paths` is a subset of `config.autoload_paths`.\n    The former are managed by the `once` autoloader. The `main` autoloader\n    manages the latter minus the former.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1630052493000,
    "author": "Xavier Noria",
    "sha": "dc047f71b824bfbf4a8e16e2445994d91359d9a2",
    "pr": "43097",
    "merge_sha": "4eeca2af40c0853a9909414d6db3c44780d021f7",
    "html": "<p>While they are allowed to have elements in common, it is no longer required<br />\nthat <code>config.autoload_once_paths</code> is a subset of <code>config.autoload_paths</code>.<br />\nThe former are managed by the <code>once</code> autoloader. The <code>main</code> autoloader<br />\nmanages the latter minus the former.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Show Rake task description if command is run with `-h`.\n\n    Adding `-h` (or `--help`) to a Rails command that's a Rake task now outputs\n    the task description instead of the general Rake help.\n\n    *Petrik de Heus*",
    "project": "railties",
    "date_merged": 1630256258000,
    "author": "Xavier Noria",
    "sha": "0c9f6b7f889eae7351b087dc4e549f6e82604638",
    "pr": "43089",
    "merge_sha": "0d31319562fe9fa0f9a9efe33bdd0b7b781714de",
    "html": "<p>Show Rake task description if command is run with <code>-h</code>.</p>\n\n<p>Adding <code>-h</code> (or <code>--help</code>) to a Rails command that’s a Rake task now outputs<br />\nthe task description instead of the general Rake help.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   Add missing `plugin new` command to help.\n\n    *Petrik de Heus",
    "project": "railties",
    "date_merged": 1627518341000,
    "author": "Petrik de Heus",
    "sha": "db947c2917a95c0a4f7202fc5668aaec9808d7ac",
    "pr": "41457",
    "merge_sha": "f24d10c2856cbb2cb1b1a81b1b957b23495b42cb",
    "html": "<p>Add missing <code>plugin new</code> command to help.</p>\n\n<p>*Petrik de Heus</p>\n"
  },
  {
    "message": "*   Fix `config_for` error when there's only a shared root array.\n\n    *Loïc Delmaire*",
    "project": "railties",
    "date_merged": 1625668373000,
    "author": "Zachary Scott",
    "sha": "7373b5819a348b550af17e9a2cc8bb12de27942d",
    "pr": "42720",
    "merge_sha": "28fbdfc8db1ff76f6a5cf021526a142937278737",
    "html": "<p>Fix <code>config_for</code> error when there’s only a shared root array.</p>\n\n<p><em>Loïc Delmaire</em></p>\n"
  },
  {
    "message": "*   Raise an error in generators if an index type is invalid.\n\n    *Petrik de Heus*",
    "project": "railties",
    "date_merged": 1625493473000,
    "author": "Petrik",
    "sha": "76f9b7531f7c643f7dca42260080d15aea87a718",
    "pr": "42694",
    "merge_sha": "398561bfbb7d156a141918df20b2fc622a94975d",
    "html": "<p>Raise an error in generators if an index type is invalid.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   `package.json` now uses a strict version constraint for Rails JavaScript packages on new Rails apps.\n\n    *Zachary Scott*, *Alex Ghiculescu*",
    "project": "railties",
    "date_merged": 1623294544000,
    "author": "Zachary Scott",
    "sha": "96d50dcf9a182bd7a41eb2dd8d46448aabfd17a6",
    "pr": "42263",
    "merge_sha": "f10d814140cd48612d90ca2e4839abab567ce2df",
    "html": "<p><code>package.json</code> now uses a strict version constraint for Rails JavaScript packages on new Rails apps.</p>\n\n<p><em>Zachary Scott</em>, <em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Modified scaffold generator template so that running\n    `rails g scaffold Author` no longer generates tests called \"creating\n    a Author\", \"updating a Author\", and \"destroying a Author\".\n\n    Fixes #40744.\n\n    *Michael Duchemin*",
    "project": "railties",
    "date_merged": 1623195148000,
    "author": "Michael Duchemin",
    "sha": "9fee1f36dccb7771aaa972ed5fea1504fe1eac1f",
    "pr": "40745",
    "merge_sha": "babc9eae9d69ca101c75e2ae6fdba02f11080fee",
    "html": "<p>Modified scaffold generator template so that running<br />\n<code>rails g scaffold Author</code> no longer generates tests called “creating<br />\na Author”, “updating a Author”, and “destroying a Author”.</p>\n\n<p>Fixes #40744.</p>\n\n<p><em>Michael Duchemin</em></p>\n"
  },
  {
    "message": "*   Raise an error in generators if a field type is invalid.\n\n    *Petrik de Heus*",
    "project": "railties",
    "date_merged": 1622306709000,
    "author": "Petrik",
    "sha": "d163fcd6208c9b0507746888c7fb4a6f934303ce",
    "pr": "42311",
    "merge_sha": "4f53cb3b8752f0c39c6766a07fb98fe030ebe467",
    "html": "<p>Raise an error in generators if a field type is invalid.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   `bin/rails tmp:clear` deletes also files and directories in `tmp/storage`.\n\n    *George Claghorn*",
    "project": "railties",
    "date_merged": 1622306709000,
    "author": "Xavier Noria",
    "sha": "d5a89c28413a6dc86f784f0d4e503bb9ead3f163",
    "pr": "42311",
    "merge_sha": "4f53cb3b8752f0c39c6766a07fb98fe030ebe467",
    "html": "<p><code>bin/rails tmp:clear</code> deletes also files and directories in <code>tmp/storage</code>.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Fix compatibility with `psych >= 4`.\n\n    Starting in Psych 4.0.0 `YAML.load` behaves like `YAML.safe_load`. To preserve compatibility\n    `Rails.application.config_for` now uses `YAML.unsafe_load` if available.\n\n    *Jean Boussier*",
    "project": "railties",
    "date_merged": 1621427633000,
    "author": "Jean Boussier",
    "sha": "1e56b1d1152e8ab74203db30625116844614cc78",
    "pr": "42257",
    "merge_sha": "c453a5fa88e89bc0bc8efde3b397f2464712bb49",
    "html": "<p>Fix compatibility with <code>psych &gt;= 4</code>.</p>\n\n<p>Starting in Psych 4.0.0 <code>YAML.load</code> behaves like <code>YAML.safe_load</code>. To preserve compatibility<br />\n<code>Rails.application.config_for</code> now uses <code>YAML.unsafe_load</code> if available.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Allow loading nested locales in engines.\n\n    *Gannon McGibbon*",
    "project": "railties",
    "date_merged": 1619044544000,
    "author": "Gannon McGibbon",
    "sha": "cc557db0e29ab3f86964abb1d9e7e6459b7884e9",
    "pr": "41872",
    "merge_sha": "7578e6f141e3c24fc6a1208e189eb1958d0b304f",
    "html": "<p>Allow loading nested locales in engines.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Ensure `Rails.application.config_for` always cast hashes to `ActiveSupport::OrderedOptions`.\n\n    *Jean Boussier*",
    "project": "railties",
    "date_merged": 1619019991000,
    "author": "Jean Boussier",
    "sha": "3fe0ab52dff018ed940ad45885c9d90208eb3cac",
    "pr": "42038",
    "merge_sha": "cde95c83a9eb6c7b30a24a8469b764f0815dfc67",
    "html": "<p>Ensure <code>Rails.application.config_for</code> always cast hashes to <code>ActiveSupport::OrderedOptions</code>.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Remove `Rack::Runtime` from the default middleware stack and deprecate\n    referencing it in middleware operations without adding it back.\n\n    *Hartley McGuire*",
    "project": "railties",
    "date_merged": 1630256258000,
    "author": "Xavier Noria",
    "sha": "0c9f6b7f889eae7351b087dc4e549f6e82604638",
    "pr": "43089",
    "merge_sha": "0d31319562fe9fa0f9a9efe33bdd0b7b781714de",
    "html": "<p>Remove <code>Rack::Runtime</code> from the default middleware stack and deprecate<br />\nreferencing it in middleware operations without adding it back.</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Allow adding additional authorized hosts in development via `ENV['RAILS_DEVELOPMENT_HOSTS']`.\n\n    *Josh Abernathy*, *Debbie Milburn*",
    "project": "railties",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow adding additional authorized hosts in development via <code>ENV['RAILS_DEVELOPMENT_HOSTS']</code>.</p>\n\n<p><em>Josh Abernathy</em>, <em>Debbie Milburn</em></p>\n"
  },
  {
    "message": "*   Add app concern and test keepfiles to generated engine plugins.\n\n    *Gannon McGibbon*",
    "project": "railties",
    "date_merged": 1615267292000,
    "author": "Gannon McGibbon",
    "sha": "bf57e7ff9d7cc4b12bec4a62f66ada8f08e46c2b",
    "pr": "41565",
    "merge_sha": "603eb247a1869c820ca81d74bbd9b48578e38de0",
    "html": "<p>Add app concern and test keepfiles to generated engine plugins.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Stop generating a license for in-app plugins.\n\n    *Gannon McGibbon*",
    "project": "railties",
    "date_merged": 1614626327000,
    "author": "Gannon McGibbon",
    "sha": "9790ae9567c295d13041dd1a338394634415cc0f",
    "pr": "41563",
    "merge_sha": "35e9812dfcb030d4c986532e7672ad8f8f95286f",
    "html": "<p>Stop generating a license for in-app plugins.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   `rails app:update` no longer prompts you to overwrite files that are generally modified in the\n    course of developing a Rails app. See [#41083](https://github.com/rails/rails/pull/41083) for\n    the full list of changes.\n\n    *Alex Ghiculescu*",
    "project": "railties",
    "date_merged": 1612900953000,
    "author": "Alex Ghiculescu",
    "sha": "1d1c9f9fe7a129be2aa35b4cb2090052c661d8d2",
    "pr": "41083",
    "merge_sha": "a57c6eee6db189c9821744eff19639262d48c841",
    "html": "<p><code>rails app:update</code> no longer prompts you to overwrite files that are generally modified in the<br />\ncourse of developing a Rails app. See <a href=\"https://github.com/rails/rails/pull/41083\">#41083</a> for<br />\nthe full list of changes.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Change default branch for new Rails projects and plugins to `main`.\n\n    *Prateek Choudhary*",
    "project": "railties",
    "date_merged": 1612723567000,
    "author": "Ryuta Kamizono",
    "sha": "978308ac8757f12560fcb35e46515500dd33371b",
    "pr": "41359",
    "merge_sha": "a33334ada13426fc9b817a85ebbd5fb9ae2aaabb",
    "html": "<p>Change default branch for new Rails projects and plugins to <code>main</code>.</p>\n\n<p><em>Prateek Choudhary</em></p>\n"
  },
  {
    "message": "*   The new method `Rails.benchmark` gives you a quick way to measure and log the execution time taken by a block:\n\n        def test_expensive_stuff\n          Rails.benchmark(\"test_expensive_stuff\") { ... }\n        end\n\n    This functionality was available in some contexts only before.\n\n    *Simon Perepelitsa*",
    "project": "railties",
    "date_merged": 1630256258000,
    "author": "Xavier Noria",
    "sha": "0c9f6b7f889eae7351b087dc4e549f6e82604638",
    "pr": "43089",
    "merge_sha": "0d31319562fe9fa0f9a9efe33bdd0b7b781714de",
    "html": "<p>The new method <code>Rails.benchmark</code> gives you a quick way to measure and log the execution time taken by a block:</p>\n\n<pre><code>def test_expensive_stuff\n  Rails.benchmark(\"test_expensive_stuff\") { ... }\nend\n</code></pre>\n\n<p>This functionality was available in some contexts only before.</p>\n\n<p><em>Simon Perepelitsa</em></p>\n"
  },
  {
    "message": "*   Applications generated with `--skip-sprockets` no longer get `app/assets/config/manifest.js` and `app/assets/stylesheets/application.css`.\n\n    *Cindy Gao*",
    "project": "railties",
    "date_merged": 1630256258000,
    "author": "Xavier Noria",
    "sha": "0c9f6b7f889eae7351b087dc4e549f6e82604638",
    "pr": "43089",
    "merge_sha": "0d31319562fe9fa0f9a9efe33bdd0b7b781714de",
    "html": "<p>Applications generated with <code>--skip-sprockets</code> no longer get <code>app/assets/config/manifest.js</code> and <code>app/assets/stylesheets/application.css</code>.</p>\n\n<p><em>Cindy Gao</em></p>\n"
  },
  {
    "message": "*   Add support for stylesheets and ERB views to `rails stats`.\n\n    *Joel Hawksley*",
    "project": "railties",
    "date_merged": 1606153202000,
    "author": "Joel Hawksley",
    "sha": "7cdf4020a6d92266a55b982d8df218bf74166b53",
    "pr": "40597",
    "merge_sha": "4e17c7b07e52d40c421b63f70f2695388ff6b6f2",
    "html": "<p>Add support for stylesheets and ERB views to <code>rails stats</code>.</p>\n\n<p><em>Joel Hawksley</em></p>\n"
  },
  {
    "message": "*   Allow appended root routes to take precedence over internal welcome controller.\n\n    *Gannon McGibbon*",
    "project": "railties",
    "date_merged": 1604963966000,
    "author": "Gannon McGibbon",
    "sha": "91247a02c61830a425681d99e426a257055a7a91",
    "pr": "39980",
    "merge_sha": "47a4201d8dc181cab6b75cd9ffe48f339b01e3ea",
    "html": "<p>Allow appended root routes to take precedence over internal welcome controller.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Fix Action Cable Redis configuration with sentinels.\n\n    *Dmitriy Ivliev*",
    "project": "actioncable",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix Action Cable Redis configuration with sentinels.</p>\n\n<p><em>Dmitriy Ivliev</em></p>\n"
  },
  {
    "message": "*   Restore Action Cable Redis pub/sub listener on connection failure.\n\n    *Vladimir Dementyev*",
    "project": "actioncable",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Restore Action Cable Redis pub/sub listener on connection failure.</p>\n\n<p><em>Vladimir Dementyev</em></p>\n"
  },
  {
    "message": "*   The Redis adapter is now compatible with redis-rb 5.0\n\n    Compatibility with redis-rb 3.x was dropped.\n\n    *Jean Boussier*",
    "project": "actioncable",
    "date_merged": 1661244211000,
    "author": "Jean Boussier",
    "sha": "a3bd3b5ec6448db4f7f30771a2b1aa519b6c21e9",
    "pr": "45873",
    "merge_sha": "dcf334503ce4171fead6ecdf6e2d738eab047310",
    "html": "<p>The Redis adapter is now compatible with redis-rb 5.0</p>\n\n<p>Compatibility with redis-rb 3.x was dropped.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   The Action Cable server is now mounted with `anchor: true`.\n\n    This means that routes that also start with `/cable` will no longer clash with Action Cable.\n\n    *Alex Ghiculescu*",
    "project": "actioncable",
    "date_merged": 1657647916000,
    "author": "Rafael Mendonça França",
    "sha": "beb78617a71d14a5131ec2e10dec54ebcd2d151c",
    "pr": "45490",
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>The Action Cable server is now mounted with <code>anchor: true</code>.</p>\n\n<p>This means that routes that also start with <code>/cable</code> will no longer clash with Action Cable.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   The Action Cable client now ensures successful channel subscriptions:\n\n    * The client maintains a set of pending subscriptions until either\n      the server confirms the subscription or the channel is torn down.\n    * Rectifies the race condition where an unsubscribe is rapidly followed\n      by a subscribe (on the same channel identifier) and the requests are\n      handled out of order by the ActionCable server, thereby ignoring the\n      subscribe command.\n\n    *Daniel Spinosa*",
    "project": "actioncable",
    "date_merged": 1632750801000,
    "author": "Dan Spinosa",
    "sha": "6d7c12274eb73267ff102c27440c671953018365",
    "pr": "41581",
    "merge_sha": "c7b86bc7e01d42a851819c13c273d94882119da5",
    "html": "<p>The Action Cable client now ensures successful channel subscriptions:</p>\n\n<ul>\n  <li>The client maintains a set of pending subscriptions until either<br />\nthe server confirms the subscription or the channel is torn down.</li>\n  <li>Rectifies the race condition where an unsubscribe is rapidly followed<br />\nby a subscribe (on the same channel identifier) and the requests are<br />\nhandled out of order by the ActionCable server, thereby ignoring the<br />\nsubscribe command.</li>\n</ul>\n\n<p><em>Daniel Spinosa</em></p>\n"
  },
  {
    "message": "*   Compile ESM package that can be used directly in the browser as actioncable.esm.js.\n\n    *DHH*",
    "project": "actioncable",
    "date_merged": 1628311365000,
    "author": "David Heinemeier Hansson",
    "sha": "4a23cb3415eac03d76623112576559a722d1f23d",
    "pr": "42856",
    "merge_sha": "9576a4c77f1da1642a83c37985f66c36082094e2",
    "html": "<p>Compile ESM package that can be used directly in the browser as actioncable.esm.js.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Move action_cable.js to actioncable.js to match naming convention used for other Rails frameworks, and use JS console to communicate the deprecation.\n\n    *DHH*",
    "project": "actioncable",
    "date_merged": 1628311365000,
    "author": "David Heinemeier Hansson",
    "sha": "4a23cb3415eac03d76623112576559a722d1f23d",
    "pr": "42856",
    "merge_sha": "9576a4c77f1da1642a83c37985f66c36082094e2",
    "html": "<p>Move action_cable.js to actioncable.js to match naming convention used for other Rails frameworks, and use JS console to communicate the deprecation.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Stop transpiling the UMD package generated as actioncable.js and drop the IE11 testing that relied on that.\n\n    *DHH*",
    "project": "actioncable",
    "date_merged": 1628311365000,
    "author": "David Heinemeier Hansson",
    "sha": "4a23cb3415eac03d76623112576559a722d1f23d",
    "pr": "42856",
    "merge_sha": "9576a4c77f1da1642a83c37985f66c36082094e2",
    "html": "<p>Stop transpiling the UMD package generated as actioncable.js and drop the IE11 testing that relied on that.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Truncate broadcast logging messages.\n\n    *J Smith*",
    "project": "actioncable",
    "date_merged": 1625766195000,
    "author": "J Smith",
    "sha": "460735e03f2ad10055df8402db9a6c67fa222b7c",
    "pr": "42726",
    "merge_sha": "de8d345323a4a93e99e7ae4c43fbf339a7c20aa1",
    "html": "<p>Truncate broadcast logging messages.</p>\n\n<p><em>J Smith</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "actioncable",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   The Action Cable client now includes safeguards to prevent a \"thundering\n    herd\" of client reconnects after server connectivity loss:\n\n    * The client will wait a random amount between 1x and 3x of the stale\n      threshold after the server's last ping before making the first\n      reconnection attempt.\n    * Subsequent reconnection attempts now use exponential backoff instead of\n      logarithmic backoff.  To allow the delay between reconnection attempts to\n      increase slowly at first, the default exponentiation base is < 2.\n    * Random jitter is applied to each delay between reconnection attempts.\n\n    *Jonathan Hefner*",
    "project": "actioncable",
    "date_merged": 1612333296000,
    "author": "Jonathan Hefner",
    "sha": "cc9a9e8503f2df41aee556f4e5e6b397048338fb",
    "pr": "40229",
    "merge_sha": "d30dad4bc1039c80648f39c5171b146f8dd8abd6",
    "html": "<p>The Action Cable client now includes safeguards to prevent a “thundering<br />\nherd” of client reconnects after server connectivity loss:</p>\n\n<ul>\n  <li>The client will wait a random amount between 1x and 3x of the stale<br />\nthreshold after the server’s last ping before making the first<br />\nreconnection attempt.</li>\n  <li>Subsequent reconnection attempts now use exponential backoff instead of<br />\nlogarithmic backoff.  To allow the delay between reconnection attempts to<br />\nincrease slowly at first, the default exponentiation base is &lt; 2.</li>\n  <li>Random jitter is applied to each delay between reconnection attempts.</li>\n</ul>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   The autoloading guide documents a use case for autoloading reloadable constants in `after_initialize`.\n\n    *Xavier Noria*",
    "project": "guides",
    "date_merged": 1651004099000,
    "author": "Xavier Noria",
    "sha": "3a3bce1bd472ca9fe3e8019e46d02f337e15b14e",
    "pr": null,
    "merge_sha": "c204039bf10191ed32b7cf75ef0275d3d0b12a6c",
    "html": "<p>The autoloading guide documents a use case for autoloading reloadable constants in <code>after_initialize</code>.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   The Classic to Zeitwerk HOWTO guide has a new section about the undocumented `before_remove_const`.\n\n    *Xavier Noria*",
    "project": "guides",
    "date_merged": 1648066286000,
    "author": "Xavier Noria",
    "sha": "ed75c4c5483841a4d0f80f1fd2e77bbe4a56ec37",
    "pr": "44752",
    "merge_sha": "f0cfc60799c66047fdc9cc443bb957012cf1fbc8",
    "html": "<p>The Classic to Zeitwerk HOWTO guide has a new section about the undocumented <code>before_remove_const</code>.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   The autoloading guide for `zeitwerk` mode has been revised.\n\n    *Xavier Noria*",
    "project": "guides",
    "date_merged": 1630052493000,
    "author": "Xavier Noria",
    "sha": "be6956954407181a363c95938eff6f5f2d550105",
    "pr": "43097",
    "merge_sha": "4eeca2af40c0853a9909414d6db3c44780d021f7",
    "html": "<p>The autoloading guide for <code>zeitwerk</code> mode has been revised.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   The autoloading guide for `classic` mode has been deleted.\n\n    *Xavier Noria*",
    "project": "guides",
    "date_merged": 1630052493000,
    "author": "Xavier Noria",
    "sha": "be6956954407181a363c95938eff6f5f2d550105",
    "pr": "43097",
    "merge_sha": "4eeca2af40c0853a9909414d6db3c44780d021f7",
    "html": "<p>The autoloading guide for <code>classic</code> mode has been deleted.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Fix vendored trix.css to be correct file.\n\n    *Hartley McGuire*",
    "project": "actiontext",
    "date_merged": 1715975750000,
    "author": "Rafael Mendonça França",
    "sha": "83e6a75b6a2d58a90f553301005f037074498e57",
    "pr": "51851",
    "merge_sha": "891f7933f097640d4a5f9fefcdcff8854053b60a",
    "html": "<p>Fix vendored trix.css to be correct file.</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Upgrade Trix to 1.3.2 to fix [CVE-2024-34341](https://github.com/basecamp/trix/security/advisories/GHSA-qjqp-xr96-cj99).\n\n    *Rafael Mendonça França*",
    "project": "actiontext",
    "date_merged": 1715886273000,
    "author": "Rafael Mendonça França",
    "sha": "07e6c88cc4defe6f6b8d28e79eb13a518e15b14c",
    "pr": null,
    "merge_sha": "3a994e2a27c7dabe2ede1b7f9131b421446e3a11",
    "html": "<p>Upgrade Trix to 1.3.2 to fix <a href=\"https://github.com/basecamp/trix/security/advisories/GHSA-qjqp-xr96-cj99\">CVE-2024-34341</a>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix `ActionText::Attachable#as_json`.\n\n    *Alexandre Ruban*",
    "project": "actiontext",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix <code>ActionText::Attachable#as_json</code>.</p>\n\n<p><em>Alexandre Ruban</em></p>\n"
  },
  {
    "message": "*   Fix an issue with how nested lists were displayed when converting to plain text\n\n    *Matt Swanson*",
    "project": "actiontext",
    "date_merged": 1634059227000,
    "author": "matt swanson",
    "sha": "0b1f83d0bcffadde1afd495efe6044387ff98072",
    "pr": "37976",
    "merge_sha": "5e2ce5cdc2a0ba56a67910f1ac22ed83d6e9b0c6",
    "html": "<p>Fix an issue with how nested lists were displayed when converting to plain text</p>\n\n<p><em>Matt Swanson</em></p>\n"
  },
  {
    "message": "*   Allow passing in a custom `direct_upload_url` or `blob_url_template` to `rich_text_area_tag`.\n\n    *Lucas Mansur*",
    "project": "actiontext",
    "date_merged": 1632175196000,
    "author": "Rafael Mendonça França",
    "sha": "49bc29a8fbbc420510578033688c10b4c611e0e2",
    "pr": "43267",
    "merge_sha": "7e738a55870bce1f2781a8f359ebccbb6d8edccf",
    "html": "<p>Allow passing in a custom <code>direct_upload_url</code> or <code>blob_url_template</code> to <code>rich_text_area_tag</code>.</p>\n\n<p><em>Lucas Mansur</em></p>\n"
  },
  {
    "message": "*   Make the Action Text + Trix JavaScript and CSS available through the asset pipeline.\n\n    *DHH*",
    "project": "actiontext",
    "date_merged": 1627371395000,
    "author": "David Heinemeier Hansson",
    "sha": "9c73d4aeab112a921798f8e1acd595af498ed64a",
    "pr": "42857",
    "merge_sha": "cca3911c16c8ca055f223cc4acee5f529c6803fa",
    "html": "<p>Make the Action Text + Trix JavaScript and CSS available through the asset pipeline.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "actiontext",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   Add support for passing `form:` option to `rich_text_area_tag` and\n    `rich_text_area` helpers to specify the `<input type=\"hidden\" form=\"...\">`\n    value.\n\n    *Sean Doyle*",
    "project": "actiontext",
    "date_merged": 1619432096000,
    "author": "Sean Doyle",
    "sha": "68bb2650d59a7aaff57cbaf9bb0dd65782c89489",
    "pr": "42076",
    "merge_sha": "0beae875eea321143ec4208df93e43fa3ebf39be",
    "html": "<p>Add support for passing <code>form:</code> option to <code>rich_text_area_tag</code> and<br />\n<code>rich_text_area</code> helpers to specify the <code>&lt;input type=\"hidden\" form=\"...\"&gt;</code><br />\nvalue.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Add `config.action_text.attachment_tag_name`, to specify the HTML tag that contains attachments.\n\n    *Mark VanLandingham*",
    "project": "actiontext",
    "date_merged": 1614983957000,
    "author": "Mark VanLandingham",
    "sha": "bece535c9855d8b1f099ea7a9dd66e2c94157094",
    "pr": "41564",
    "merge_sha": "ec4e71e49a0e89339b42825c5ef0b71a3a02315f",
    "html": "<p>Add <code>config.action_text.attachment_tag_name</code>, to specify the HTML tag that contains attachments.</p>\n\n<p><em>Mark VanLandingham</em></p>\n"
  },
  {
    "message": "*   Expose how we render the HTML _surrounding_ rich text content as an\n    extensible `layouts/action_view/contents/_content.html.erb` template to\n    encourage user-land customizations, while retaining private API control over how\n    the rich text itself is rendered by `action_text/contents/_content.html.erb`\n    partial.\n\n    *Sean Doyle*",
    "project": "actiontext",
    "date_merged": 1609291493000,
    "author": "Sean Doyle",
    "sha": "3500571b439fcdcaaf29c63e4bc082a121a20612",
    "pr": "40308",
    "merge_sha": "f58b7250aea9d1dd235dabbbf7e89d519c38de27",
    "html": "<p>Expose how we render the HTML <em>surrounding</em> rich text content as an<br />\nextensible <code>layouts/action_view/contents/_content.html.erb</code> template to<br />\nencourage user-land customizations, while retaining private API control over how<br />\nthe rich text itself is rendered by <code>action_text/contents/_content.html.erb</code><br />\npartial.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Add `with_all_rich_text` method to eager load all rich text associations on a model at once.\n\n    *Matt Swanson*, *DHH*",
    "project": "actiontext",
    "date_merged": 1609269600000,
    "author": "Ryuta Kamizono",
    "sha": "401ce9dd3d68bb550c92d40c31dc4c4e564eb6b9",
    "pr": "40961",
    "merge_sha": "67a1cb6c193ff1a00f1fef4270566162b255a60e",
    "html": "<p>Add <code>with_all_rich_text</code> method to eager load all rich text associations on a model at once.</p>\n\n<p><em>Matt Swanson</em>, <em>DHH</em></p>\n"
  },
  {
    "message": "*   Fix an issue that could cause database connection leaks\n\n    If Active Record successfully connected to the database, but then failed\n    to read the server informations, the connection would be leaked until the\n    Ruby garbage collector triggers.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1718702101000,
    "author": "Jean Boussier",
    "sha": "67c59158784ce1d4763591ffe3836d9c6797e0a2",
    "pr": "52143",
    "merge_sha": "d0523fc2c99ffc9899e012fb4c753a7e02b5b974",
    "html": "<p>Fix an issue that could cause database connection leaks</p>\n\n<p>If Active Record successfully connected to the database, but then failed<br />\nto read the server informations, the connection would be leaked until the<br />\nRuby garbage collector triggers.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix single quote escapes on default generated MySQL columns\n\n    MySQL 5.7.5+ supports generated columns, which can be used to create a column that is computed from an expression.\n\n    Previously, the schema dump would output a string with double escapes for generated columns with single quotes in the default expression.\n\n    This would result in issues when importing the schema on a fresh instance of a MySQL database.\n\n    Now, the string will not be escaped and will be valid Ruby upon importing of the schema.\n\n    *Yash Kapadia*",
    "project": "activerecord",
    "date_merged": 1708114034000,
    "author": "Jean Boussier",
    "sha": "d12a4765ce53f23b726158418e825742b622adc2",
    "pr": "50733",
    "merge_sha": "052a097fda626e11c7ce229d453498674b46aa0a",
    "html": "<p>Fix single quote escapes on default generated MySQL columns</p>\n\n<p>MySQL 5.7.5+ supports generated columns, which can be used to create a column that is computed from an expression.</p>\n\n<p>Previously, the schema dump would output a string with double escapes for generated columns with single quotes in the default expression.</p>\n\n<p>This would result in issues when importing the schema on a fresh instance of a MySQL database.</p>\n\n<p>Now, the string will not be escaped and will be valid Ruby upon importing of the schema.</p>\n\n<p><em>Yash Kapadia</em></p>\n"
  },
  {
    "message": "*   Fix `Relation#transaction` to not apply a default scope\n\n    The method was incorrectly setting a default scope around its block:\n\n    ```ruby\n    Post.where(published: true).transaction do\n      Post.count # SELECT COUNT(*) FROM posts WHERE published = FALSE;\n    end\n    ```\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1704272213000,
    "author": "Jean Boussier",
    "sha": "c82fa92cea80e8a0b0f2b9eeab9e7af1408982ba",
    "pr": "50395",
    "merge_sha": "65f5aee4760e1f977b5ed61118057bb803169fcb",
    "html": "<p>Fix <code>Relation#transaction</code> to not apply a default scope</p>\n\n<p>The method was incorrectly setting a default scope around its block:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">published: </span><span class=\"kp\">true</span><span class=\"p\">).</span><span class=\"nf\">transaction</span> <span class=\"k\">do</span>\n  <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">count</span> <span class=\"c1\"># SELECT COUNT(*) FROM posts WHERE published = FALSE;</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix renaming primary key index when renaming a table with a UUID primary key\n    in PostgreSQL.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "34f10c9c67845a4d755f533e47098f8c76146632",
    "pr": "49998",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix renaming primary key index when renaming a table with a UUID primary key<br />\nin PostgreSQL.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `where(field: values)` queries when `field` is a serialized attribute\n    (for example, when `field` uses `ActiveRecord::Base.serialize` or is a JSON\n    column).\n\n    *João Alves*",
    "project": "activerecord",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "8f721336a524febab8cfe7c1a38e4a804d9b3db6",
    "pr": "49050",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix <code>where(field: values)</code> queries when <code>field</code> is a serialized attribute<br />\n(for example, when <code>field</code> uses <code>ActiveRecord::Base.serialize</code> or is a JSON<br />\ncolumn).</p>\n\n<p><em>João Alves</em></p>\n"
  },
  {
    "message": "*   Don't mark Float::INFINITY as changed when reassigning it\n\n    When saving a record with a float infinite value, it shouldn't mark as changed\n\n    *Maicol Bentancor*",
    "project": "activerecord",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "5337ac7fa57fef6a3a70b9cd03f9782f60cc0f35",
    "pr": "49904",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Don’t mark Float::INFINITY as changed when reassigning it</p>\n\n<p>When saving a record with a float infinite value, it shouldn’t mark as changed</p>\n\n<p><em>Maicol Bentancor</em></p>\n"
  },
  {
    "message": "*   `ActiveRecord::Base.table_name` now returns `nil` instead of raising\n    \"undefined method `abstract_class?` for Object:Class\".\n\n    *a5-stable*",
    "project": "activerecord",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "5e0165a3352ffc8ee3accbbd6f2046786deff2f5",
    "pr": "49911",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p><code>ActiveRecord::Base.table_name</code> now returns <code>nil</code> instead of raising<br />\n“undefined method <code>abstract_class?</code> for Object:Class”.</p>\n\n<p><em>a5-stable</em></p>\n"
  },
  {
    "message": "*   Fix upserting for custom `:on_duplicate` and `:unique_by` consisting of all\n    inserts keys.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "edcde0d9f1c1e6eb7ed49cdaa3a4301bf75adf49",
    "pr": "49870",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix upserting for custom <code>:on_duplicate</code> and <code>:unique_by</code> consisting of all<br />\ninserts keys.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `NoMethodError` when casting a PostgreSQL `money` value that uses a\n    comma as its radix point and has no leading currency symbol.  For example,\n    when casting `\"3,50\"`.\n\n    *Andreas Reischuck* and *Jonathan Hefner*",
    "project": "activerecord",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "5dbcdbb5dd91e81e4929afe540fdc04e795ff11e",
    "pr": "49779",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix <code>NoMethodError</code> when casting a PostgreSQL <code>money</code> value that uses a<br />\ncomma as its radix point and has no leading currency symbol.  For example,<br />\nwhen casting <code>\"3,50\"</code>.</p>\n\n<p><em>Andreas Reischuck</em> and <em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Fix duplicate quoting for check constraint expressions in schema dump when using MySQL\n\n    A check constraint with an expression, that already contains quotes, lead to an invalid schema\n    dump with the mysql2 adapter.\n\n    Fixes #42424.\n\n    *Felix Tscheulin*",
    "project": "activerecord",
    "date_merged": 1696836340000,
    "author": "Rafael Mendonça França",
    "sha": "3d916859050f93b23bcde66a4c0421cd9bca6b3c",
    "pr": "42429",
    "merge_sha": "c31e81c03032fcb89ebdfc51ae9b22f96b8d6ed1",
    "html": "<p>Fix duplicate quoting for check constraint expressions in schema dump when using MySQL</p>\n\n<p>A check constraint with an expression, that already contains quotes, lead to an invalid schema<br />\ndump with the mysql2 adapter.</p>\n\n<p>Fixes #42424.</p>\n\n<p><em>Felix Tscheulin</em></p>\n"
  },
  {
    "message": "*   Fix `change_column` not setting `precision: 6` on `datetime` columns when\n    using 7.0+ Migrations and SQLite.\n\n    *Hartley McGuire*",
    "project": "activerecord",
    "date_merged": 1693935313000,
    "author": "Hartley McGuire",
    "sha": "8db97a70460a42b12b61a3fe4cd57f26d3f95a3d",
    "pr": "49121",
    "merge_sha": "39eddbdf8a55b73df857242585dcf547f538e50e",
    "html": "<p>Fix <code>change_column</code> not setting <code>precision: 6</code> on <code>datetime</code> columns when<br />\nusing 7.0+ Migrations and SQLite.</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix unscope is not working in specific case\n\n    Before:\n    ```ruby\n    Post.where(id: 1...3).unscope(where: :id).to_sql # \"SELECT `posts`.* FROM `posts` WHERE `posts`.`id` >= 1 AND `posts`.`id` < 3\"\n\n    ```\n\n    After:\n    ```ruby\n    Post.where(id: 1...3).unscope(where: :id).to_sql # \"SELECT `posts`.* FROM `posts`\"\n    ```\n\n    Fixes #48094.\n\n    *Kazuya Hatanaka*",
    "project": "activerecord",
    "date_merged": 1693935313000,
    "author": "Ryuta Kamizono",
    "sha": "ce754652ceba676d21306c76204a206012cfef62",
    "pr": "48095",
    "merge_sha": "39eddbdf8a55b73df857242585dcf547f538e50e",
    "html": "<p>Fix unscope is not working in specific case</p>\n\n<p>Before:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"mi\">1</span><span class=\"o\">...</span><span class=\"mi\">3</span><span class=\"p\">).</span><span class=\"nf\">unscope</span><span class=\"p\">(</span><span class=\"ss\">where: :id</span><span class=\"p\">).</span><span class=\"nf\">to_sql</span> <span class=\"c1\"># \"SELECT `posts`.* FROM `posts` WHERE `posts`.`id` &gt;= 1 AND `posts`.`id` &lt; 3\"</span>\n\n</code></pre></div></div>\n\n<p>After:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"mi\">1</span><span class=\"o\">...</span><span class=\"mi\">3</span><span class=\"p\">).</span><span class=\"nf\">unscope</span><span class=\"p\">(</span><span class=\"ss\">where: :id</span><span class=\"p\">).</span><span class=\"nf\">to_sql</span> <span class=\"c1\"># \"SELECT `posts`.* FROM `posts`\"</span>\n</code></pre></div></div>\n\n<p>Fixes #48094.</p>\n\n<p><em>Kazuya Hatanaka</em></p>\n"
  },
  {
    "message": "*   Fix associations to a STI model including a `class_name` parameter\n\n    ```ruby\n    class Product < ApplicationRecord\n      has_many :requests, as: :requestable, class_name: \"ProductRequest\", dependent: :destroy\n    end\n\n    # STI tables\n    class Request < ApplicationRecord\n      belongs_to :requestable, polymorphic: true\n\n      validate :request_type, presence: true\n    end\n\n    class ProductRequest < Request\n      belongs_to :user\n    end\n    ```\n\n    Accessing such association would lead to:\n\n    ```\n    table_metadata.rb:22:in `has_column?': undefined method `key?' for nil:NilClass (NoMethodError)\n    ```\n\n    *Romain Filinto*",
    "project": "activerecord",
    "date_merged": 1693788877000,
    "author": "Jean Boussier",
    "sha": "c1150f47b72d7ee2a74623fa3a800acac736d120",
    "pr": "49101",
    "merge_sha": "47892f9dfa7b70d71d624764e61c0eaebcfbb471",
    "html": "<p>Fix associations to a STI model including a <code>class_name</code> parameter</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Product</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:requests</span><span class=\"p\">,</span> <span class=\"ss\">as: :requestable</span><span class=\"p\">,</span> <span class=\"ss\">class_name: </span><span class=\"s2\">\"ProductRequest\"</span><span class=\"p\">,</span> <span class=\"ss\">dependent: :destroy</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># STI tables</span>\n<span class=\"k\">class</span> <span class=\"nc\">Request</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">belongs_to</span> <span class=\"ss\">:requestable</span><span class=\"p\">,</span> <span class=\"ss\">polymorphic: </span><span class=\"kp\">true</span>\n\n  <span class=\"n\">validate</span> <span class=\"ss\">:request_type</span><span class=\"p\">,</span> <span class=\"ss\">presence: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">ProductRequest</span> <span class=\"o\">&lt;</span> <span class=\"no\">Request</span>\n  <span class=\"n\">belongs_to</span> <span class=\"ss\">:user</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Accessing such association would lead to:</p>\n\n<pre><code>table_metadata.rb:22:in `has_column?': undefined method `key?' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p><em>Romain Filinto</em></p>\n"
  },
  {
    "message": "*   Fix `change_table` setting datetime precision for 6.1 Migrations\n\n    *Hartley McGuire*",
    "project": "activerecord",
    "date_merged": 1692817206000,
    "author": "Hartley McGuire",
    "sha": "6155ad6ce92b9b406b9e9ac1f1cf65198a3032f6",
    "pr": "49011",
    "merge_sha": "740c400097e0522df82a3a5836673ddd89e3b46d",
    "html": "<p>Fix <code>change_table</code> setting datetime precision for 6.1 Migrations</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix change_column setting datetime precision for 6.1 Migrations\n\n    *Hartley McGuire*",
    "project": "activerecord",
    "date_merged": 1692748857000,
    "author": "Hartley McGuire",
    "sha": "e1d3430ac4d2f6641b40d20696e1babaab52611a",
    "pr": "49006",
    "merge_sha": "e478dcac6171736a5cda91ed9ba82288132906b5",
    "html": "<p>Fix change_column setting datetime precision for 6.1 Migrations</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Restores functionality to the missing method when using enums and fixes.\n\n    *paulreece*",
    "project": "activerecord",
    "date_merged": 1692006777000,
    "author": "Rafael Mendonça França",
    "sha": "5610cbacc5630d775a1a7be78ccb17e561908cba",
    "pr": "48937",
    "merge_sha": "a844773245e96de8a47d24df76747cdc9e4aa01f",
    "html": "<p>Restores functionality to the missing method when using enums and fixes.</p>\n\n<p><em>paulreece</em></p>\n"
  },
  {
    "message": "*   Fix `StatementCache::Substitute` with serialized type.\n\n    *ywenc*",
    "project": "activerecord",
    "date_merged": 1692006777000,
    "author": "Rafael Mendonça França",
    "sha": "5610cbacc5630d775a1a7be78ccb17e561908cba",
    "pr": "48937",
    "merge_sha": "a844773245e96de8a47d24df76747cdc9e4aa01f",
    "html": "<p>Fix <code>StatementCache::Substitute</code> with serialized type.</p>\n\n<p><em>ywenc</em></p>\n"
  },
  {
    "message": "*   Fix `:db_runtime` on notification payload when application have multiple databases.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1692006777000,
    "author": "Rafael Mendonça França",
    "sha": "5610cbacc5630d775a1a7be78ccb17e561908cba",
    "pr": "48937",
    "merge_sha": "a844773245e96de8a47d24df76747cdc9e4aa01f",
    "html": "<p>Fix <code>:db_runtime</code> on notification payload when application have multiple databases.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Correctly dump check constraints for MySQL 8.0.16+.\n\n    *Steve Hill*",
    "project": "activerecord",
    "date_merged": 1692006777000,
    "author": "Rafael Mendonça França",
    "sha": "5610cbacc5630d775a1a7be78ccb17e561908cba",
    "pr": "48937",
    "merge_sha": "a844773245e96de8a47d24df76747cdc9e4aa01f",
    "html": "<p>Correctly dump check constraints for MySQL 8.0.16+.</p>\n\n<p><em>Steve Hill</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::QueryMethods#in_order_of` to include `nil`s, to match the\n    behavior of `Enumerable#in_order_of`.\n\n    For example, `Post.in_order_of(:title, [nil, \"foo\"])` will now include posts\n    with `nil` titles, the same as `Post.all.to_a.in_order_of(:title, [nil, \"foo\"])`.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1691181708000,
    "author": "fatkodima",
    "sha": "d25e34d19960f01118dc5d2ab78feea523d0be9f",
    "pr": "48886",
    "merge_sha": "fabd0b5827a3af1f189d726fbc7669f9fbdeef5e",
    "html": "<p>Fix <code>ActiveRecord::QueryMethods#in_order_of</code> to include <code>nil</code>s, to match the<br />\nbehavior of <code>Enumerable#in_order_of</code>.</p>\n\n<p>For example, <code>Post.in_order_of(:title, [nil, \"foo\"])</code> will now include posts<br />\nwith <code>nil</code> titles, the same as <code>Post.all.to_a.in_order_of(:title, [nil, \"foo\"])</code>.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Revert \"Fix autosave associations with validations added on `:base` of the associated objects.\"\n\n    This change intended to remove the :base attribute from the message,\n    but broke many assumptions which key these errors were stored.\n\n    *zzak*",
    "project": "activerecord",
    "date_merged": 1691092751000,
    "author": "Rafael Mendonça França",
    "sha": "d52ac5c1f81e5eadcc942baf987374964e476e62",
    "pr": "48871",
    "merge_sha": "fc719ff7a606988589d5350be3ac824bc60cb4d4",
    "html": "<p>Revert “Fix autosave associations with validations added on <code>:base</code> of the associated objects.”</p>\n\n<p>This change intended to remove the :base attribute from the message,<br />\nbut broke many assumptions which key these errors were stored.</p>\n\n<p><em>zzak</em></p>\n"
  },
  {
    "message": "*   Fix `#previously_new_record?` to return true for destroyed records.\n\n    Before, if a record was created and then destroyed, `#previously_new_record?` would return true.\n    Now, any UPDATE or DELETE to a record is considered a change, and will result in `#previously_new_record?`\n    returning false.\n\n    *Adrianna Chang*",
    "project": "activerecord",
    "date_merged": 1691092751000,
    "author": "Eileen M. Uchitelle",
    "sha": "6318c00ff8b49d7dee7749e22ff8f1dcbafdab68",
    "pr": "48796",
    "merge_sha": "fc719ff7a606988589d5350be3ac824bc60cb4d4",
    "html": "<p>Fix <code>#previously_new_record?</code> to return true for destroyed records.</p>\n\n<p>Before, if a record was created and then destroyed, <code>#previously_new_record?</code> would return true.<br />\nNow, any UPDATE or DELETE to a record is considered a change, and will result in <code>#previously_new_record?</code><br />\nreturning false.</p>\n\n<p><em>Adrianna Chang</em></p>\n"
  },
  {
    "message": "*   Revert breaking changes to `has_one` relationship deleting the old record before the new one is validated.\n\n    *zzak*",
    "project": "activerecord",
    "date_merged": 1690930886000,
    "author": "zzak",
    "sha": "8aeffd3db81a49c7539d8298b6a8c5ec310cafb3",
    "pr": "48425",
    "merge_sha": "2e9f6a918eae414098c2c56c625c2ccbeeabe863",
    "html": "<p>Revert breaking changes to <code>has_one</code> relationship deleting the old record before the new one is validated.</p>\n\n<p><em>zzak</em></p>\n"
  },
  {
    "message": "*   Fix support for Active Record instances being uses in queries.\n\n    As of `7.0.5`, query arguments were deep duped to avoid mutations impacting\n    the query cache, but this had the adverse effect to clearing the primary key when\n    the query argument contained an `ActiveRecord::Base` instance.\n\n    This broke the `noticed` gem.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1689609396000,
    "author": "Jean Boussier",
    "sha": "704cac833ae9c663d85d674f2b7764b7dd2ab62d",
    "pr": "48730",
    "merge_sha": "cc6d8789256295ba10048fa4632f9a7dbad60a5d",
    "html": "<p>Fix support for Active Record instances being uses in queries.</p>\n\n<p>As of <code>7.0.5</code>, query arguments were deep duped to avoid mutations impacting<br />\nthe query cache, but this had the adverse effect to clearing the primary key when<br />\nthe query argument contained an <code>ActiveRecord::Base</code> instance.</p>\n\n<p>This broke the <code>noticed</code> gem.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix autosave associations with validations added on `:base` of the associated objects.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix autosave associations with validations added on <code>:base</code> of the associated objects.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix result with anonymous PostgreSQL columns of different type from json.\n\n    *Oleksandr Avoiants*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix result with anonymous PostgreSQL columns of different type from json.</p>\n\n<p><em>Oleksandr Avoiants</em></p>\n"
  },
  {
    "message": "*   Preserve timestamp when setting an `ActiveSupport::TimeWithZone` value to `timestamptz` attribute.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Preserve timestamp when setting an <code>ActiveSupport::TimeWithZone</code> value to <code>timestamptz</code> attribute.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix assignment into an `has_one` relationship deleting the old record before the new one is validated.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1690930886000,
    "author": "zzak",
    "sha": "8aeffd3db81a49c7539d8298b6a8c5ec310cafb3",
    "pr": "48425",
    "merge_sha": "2e9f6a918eae414098c2c56c625c2ccbeeabe863",
    "html": "<p>Fix assignment into an <code>has_one</code> relationship deleting the old record before the new one is validated.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix where on association with has_one/has_many polymorphic relations.\n\n    Before:\n    ```ruby\n    Treasure.where(price_estimates: PriceEstimate.all)\n    #=> SELECT (...) WHERE \"treasures\".\"id\" IN (SELECT \"price_estimates\".\"estimate_of_id\" FROM \"price_estimates\")\n    ```\n\n    Later:\n    ```ruby\n    Treasure.where(price_estimates: PriceEstimate.all)\n    #=> SELECT (...) WHERE \"treasures\".\"id\" IN (SELECT \"price_estimates\".\"estimate_of_id\" FROM \"price_estimates\" WHERE \"price_estimates\".\"estimate_of_type\" = 'Treasure')\n    ```\n\n    *Lázaro Nixon*",
    "project": "activerecord",
    "date_merged": 1685692679000,
    "author": "Jean Boussier",
    "sha": "39d24699700abd6b7cc74f9085d29fe26a97457a",
    "pr": "48362",
    "merge_sha": "91f512819b1d0797532fbce2d221b51a5e2347ef",
    "html": "<p>Fix where on association with has_one/has_many polymorphic relations.</p>\n\n<p>Before:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Treasure</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">price_estimates: </span><span class=\"no\">PriceEstimate</span><span class=\"p\">.</span><span class=\"nf\">all</span><span class=\"p\">)</span>\n<span class=\"c1\">#=&gt; SELECT (...) WHERE \"treasures\".\"id\" IN (SELECT \"price_estimates\".\"estimate_of_id\" FROM \"price_estimates\")</span>\n</code></pre></div></div>\n\n<p>Later:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Treasure</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">price_estimates: </span><span class=\"no\">PriceEstimate</span><span class=\"p\">.</span><span class=\"nf\">all</span><span class=\"p\">)</span>\n<span class=\"c1\">#=&gt; SELECT (...) WHERE \"treasures\".\"id\" IN (SELECT \"price_estimates\".\"estimate_of_id\" FROM \"price_estimates\" WHERE \"price_estimates\".\"estimate_of_type\" = 'Treasure')</span>\n</code></pre></div></div>\n\n<p><em>Lázaro Nixon</em></p>\n"
  },
  {
    "message": "*   Fix decrementing counter caches on optimistically locked record deletion\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685691481000,
    "author": "Jean Boussier",
    "sha": "f8d07544adcdbddbab0492d0e5e9250a5eb6feec",
    "pr": "48342",
    "merge_sha": "326fac4ef1f34080d3cedcf3c51166ad19a78489",
    "html": "<p>Fix decrementing counter caches on optimistically locked record deletion</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Ensure binary-destined values have binary encoding during type cast.\n\n    *Matthew Draper*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Ensure binary-destined values have binary encoding during type cast.</p>\n\n<p><em>Matthew Draper</em></p>\n"
  },
  {
    "message": "*   Preserve existing column default functions when altering table in SQLite.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Preserve existing column default functions when altering table in SQLite.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Remove table alias added when using `where.missing` or `where.associated`.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Remove table alias added when using <code>where.missing</code> or <code>where.associated</code>.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `Enumerable#in_order_of` to only flatten first level to preserve nesting.\n\n    *Miha Rekar*",
    "project": "activerecord",
    "date_merged": 1688293260000,
    "author": "Rafael Mendonça França",
    "sha": "4aa24463e88fc7a99d67332365ee28d25510c63b",
    "pr": "48625",
    "merge_sha": "3ac9d18d52a327ac2efd6a33cfdb9501e8007ccc",
    "html": "<p>Fix <code>Enumerable#in_order_of</code> to only flatten first level to preserve nesting.</p>\n\n<p><em>Miha Rekar</em></p>\n"
  },
  {
    "message": "*   Type cast `#attribute_changed?` `:from` and `:to` options.\n\n    *Andrew Novoselac*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Type cast <code>#attribute_changed?</code> <code>:from</code> and <code>:to</code> options.</p>\n\n<p><em>Andrew Novoselac</em></p>\n"
  },
  {
    "message": "*   Fix `index_exists?` when column is an array.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix <code>index_exists?</code> when column is an array.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Handle `Date` objects for PostgreSQL `timestamptz` columns.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Handle <code>Date</code> objects for PostgreSQL <code>timestamptz</code> columns.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix collation for changing column to non-string.\n\n    *Hartley McGuire*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix collation for changing column to non-string.</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Map through subtype in `PostgreSQL::OID::Array`.\n\n    *Jonathan Hefner*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Map through subtype in <code>PostgreSQL::OID::Array</code>.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Store correct environment in `internal_metadata` when run rails `db:prepare`.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Store correct environment in <code>internal_metadata</code> when run rails <code>db:prepare</code>.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Make sure `ActiveRecord::Relation#sum` works with objects that implement `#coerce` without deprecation.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Make sure <code>ActiveRecord::Relation#sum</code> works with objects that implement <code>#coerce</code> without deprecation.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix retrieving foreign keys referencing tables named like keywords in PostgreSQL and MySQL.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix retrieving foreign keys referencing tables named like keywords in PostgreSQL and MySQL.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Support UUIDs in Disable Joins.\n\n    *Samuel Cochran*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Support UUIDs in Disable Joins.</p>\n\n<p><em>Samuel Cochran</em></p>\n"
  },
  {
    "message": "*   Fix Active Record's explain for queries starting with comments.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix Active Record’s explain for queries starting with comments.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix incorrectly preloading through association records when middle association has been loaded.\n\n    *Joshua Young*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix incorrectly preloading through association records when middle association has been loaded.</p>\n\n<p><em>Joshua Young</em></p>\n"
  },
  {
    "message": "*   Fix where.missing and where.associated for parent/child associations.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix where.missing and where.associated for parent/child associations.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix Enumerable#in_order_of to preserve duplicates.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix Enumerable#in_order_of to preserve duplicates.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix autoincrement on primary key for mysql.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix autoincrement on primary key for mysql.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Restore ability to redefine column in `create_table` for Rails 5.2 migrations.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Restore ability to redefine column in <code>create_table</code> for Rails 5.2 migrations.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix schema cache dumping of virtual columns.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix schema cache dumping of virtual columns.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix Active Record grouped calculations on joined tables on column present in both tables.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix Active Record grouped calculations on joined tables on column present in both tables.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix mutation detection for serialized attributes backed by binary columns.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Jean Boussier",
    "sha": "46e797e57880c6a2a7cb85de1716a3a3d61f9bb6",
    "pr": "48274",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix mutation detection for serialized attributes backed by binary columns.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix a bug where using groups and counts with long table names would return incorrect results.\n\n    *Shota Toguchi*, *Yusaku Ono*",
    "project": "activerecord",
    "date_merged": 1666704102000,
    "author": "Ryuta Kamizono",
    "sha": "a6d0f80d3af575482d826301d947e43fc3c5c649",
    "pr": "46287",
    "merge_sha": "76b16d338b47f58b864764eac0521905dba274cc",
    "html": "<p>Fix a bug where using groups and counts with long table names would return incorrect results.</p>\n\n<p><em>Shota Toguchi</em>, <em>Yusaku Ono</em></p>\n"
  },
  {
    "message": "*   Fix erroneous nil default precision on virtual datetime columns.\n\n    Prior to this change, virtual datetime columns did not have the same\n    default precision as regular datetime columns, resulting in the following\n    being erroneously equivalent:\n\n        t.virtual :name, type: datetime,                 as: \"expression\"\n        t.virtual :name, type: datetime, precision: nil, as: \"expression\"\n\n    This change fixes the default precision lookup, so virtual and regular\n    datetime column default precisions match.\n\n    *Sam Bostock*",
    "project": "activerecord",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "682898f07f0779e91117d331470b4847d699a65e",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Fix erroneous nil default precision on virtual datetime columns.</p>\n\n<p>Prior to this change, virtual datetime columns did not have the same<br />\ndefault precision as regular datetime columns, resulting in the following<br />\nbeing erroneously equivalent:</p>\n\n<pre><code>t.virtual :name, type: datetime,                 as: \"expression\"\nt.virtual :name, type: datetime, precision: nil, as: \"expression\"\n</code></pre>\n\n<p>This change fixes the default precision lookup, so virtual and regular<br />\ndatetime column default precisions match.</p>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   Fix a case where the query cache can return wrong values. See #46044\n\n    *Aaron Patterson*",
    "project": "activerecord",
    "date_merged": 1666704102000,
    "author": "Jean Boussier",
    "sha": "213972e1ef8b50d5a930fed52780846f674eb808",
    "pr": "46048",
    "merge_sha": "76b16d338b47f58b864764eac0521905dba274cc",
    "html": "<p>Fix a case where the query cache can return wrong values. See #46044</p>\n\n<p><em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   Make sanitize_as_sql_comment more strict\n\n    Though this method was likely never meant to take user input, it was\n    attempting sanitization. That sanitization could be bypassed with\n    carefully crafted input.\n\n    This commit makes the sanitization more robust by replacing any\n    occurrences of \"/*\" or \"*/\" with \"/ *\" or \"* /\". It also performs a\n    first pass to remove one surrounding comment to avoid compatibility\n    issues for users relying on the existing removal.\n\n    This also clarifies in the documentation of annotate that it should not\n    be provided user input.\n\n    [CVE-2023-22794]",
    "project": "activerecord",
    "date_merged": 1674126985000,
    "author": "John Hawthorn",
    "sha": "e0bae280f1e3aa5e32d879a24ff8d846f81ecce4",
    "pr": "47050",
    "merge_sha": "9194bef66e9c17e808f97bc68e53eaaf7dd8288e",
    "html": "<p>Make sanitize_as_sql_comment more strict</p>\n\n<p>Though this method was likely never meant to take user input, it was<br />\nattempting sanitization. That sanitization could be bypassed with<br />\ncarefully crafted input.</p>\n\n<p>This commit makes the sanitization more robust by replacing any<br />\noccurrences of “/<em>” or “</em>/” with “/ <em>” or “</em> /”. It also performs a<br />\nfirst pass to remove one surrounding comment to avoid compatibility<br />\nissues for users relying on the existing removal.</p>\n\n<p>This also clarifies in the documentation of annotate that it should not<br />\nbe provided user input.</p>\n\n<p>[CVE-2023-22794]</p>\n"
  },
  {
    "message": "*   Added integer width check to PostgreSQL::Quoting\n\n    Given a value outside the range for a 64bit signed integer type\n    PostgreSQL will treat the column type as numeric. Comparing\n    integer values against numeric values can result in a slow\n    sequential scan.\n\n    This behavior is configurable via\n    ActiveRecord::Base.raise_int_wider_than_64bit which defaults to true.\n\n    [CVE-2022-44566]",
    "project": "activerecord",
    "date_merged": 1674126985000,
    "author": "John Hawthorn",
    "sha": "e0bae280f1e3aa5e32d879a24ff8d846f81ecce4",
    "pr": "47050",
    "merge_sha": "9194bef66e9c17e808f97bc68e53eaaf7dd8288e",
    "html": "<p>Added integer width check to PostgreSQL::Quoting</p>\n\n<p>Given a value outside the range for a 64bit signed integer type<br />\nPostgreSQL will treat the column type as numeric. Comparing<br />\ninteger values against numeric values can result in a slow<br />\nsequential scan.</p>\n\n<p>This behavior is configurable via<br />\nActiveRecord::Base.raise_int_wider_than_64bit which defaults to true.</p>\n\n<p>[CVE-2022-44566]</p>\n"
  },
  {
    "message": "*   Symbol is allowed by default for YAML columns\n\n    *Étienne Barrié*",
    "project": "activerecord",
    "date_merged": 1663247880000,
    "author": "John Hawthorn",
    "sha": "8015c2c2cf5c8718449677570f372ceb01318a32",
    "pr": "46040",
    "merge_sha": "93b2461afb1f6bbe7c511b025c026567ebbc4b97",
    "html": "<p>Symbol is allowed by default for YAML columns</p>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::Store` to serialize as a regular Hash\n\n    Previously it would serialize as an `ActiveSupport::HashWithIndifferentAccess`\n    which is wasteful and cause problem with YAML safe_load.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1659835824000,
    "author": "Jean Boussier",
    "sha": "4987ca0f553c763a2ad00b0554999f847edf7c4e",
    "pr": "45591",
    "merge_sha": "53b04ca8a98224b3f44b40d6d7189e0db72373f0",
    "html": "<p>Fix <code>ActiveRecord::Store</code> to serialize as a regular Hash</p>\n\n<p>Previously it would serialize as an <code>ActiveSupport::HashWithIndifferentAccess</code><br />\nwhich is wasteful and cause problem with YAML safe_load.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add `timestamptz` as a time zone aware type for PostgreSQL\n\n    This is required for correctly parsing `timestamp with time zone` values in your database.\n\n    If you don't want this, you can opt out by adding this initializer:\n\n    ```ruby\n    ActiveRecord::Base.time_zone_aware_types -= [:timestamptz]\n    ```\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1657647916000,
    "author": "Yasuo Honda",
    "sha": "4cd5709e2fc8899c24fc1b205d6f5bbdddfc29e1",
    "pr": "44601",
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>Add <code>timestamptz</code> as a time zone aware type for PostgreSQL</p>\n\n<p>This is required for correctly parsing <code>timestamp with time zone</code> values in your database.</p>\n\n<p>If you don’t want this, you can opt out by adding this initializer:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">time_zone_aware_types</span> <span class=\"o\">-=</span> <span class=\"p\">[</span><span class=\"ss\">:timestamptz</span><span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix supporting timezone awareness for `tsrange` and `tstzrange` array columns.\n\n    ```ruby\n    # In database migrations\n    add_column :shops, :open_hours, :tsrange, array: true\n    # In app config\n    ActiveRecord::Base.time_zone_aware_types += [:tsrange]\n    # In the code times are properly converted to app time zone\n    Shop.create!(open_hours: [Time.current..8.hour.from_now])\n    ```\n\n    *Wojciech Wnętrzak*",
    "project": "activerecord",
    "date_merged": 1657647916000,
    "author": "Yasuo Honda",
    "sha": "0aec70ce000de1dd942937f048b784ce4cac0758",
    "pr": "45348",
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>Fix supporting timezone awareness for <code>tsrange</code> and <code>tstzrange</code> array columns.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># In database migrations</span>\n<span class=\"n\">add_column</span> <span class=\"ss\">:shops</span><span class=\"p\">,</span> <span class=\"ss\">:open_hours</span><span class=\"p\">,</span> <span class=\"ss\">:tsrange</span><span class=\"p\">,</span> <span class=\"ss\">array: </span><span class=\"kp\">true</span>\n<span class=\"c1\"># In app config</span>\n<span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">time_zone_aware_types</span> <span class=\"o\">+=</span> <span class=\"p\">[</span><span class=\"ss\">:tsrange</span><span class=\"p\">]</span>\n<span class=\"c1\"># In the code times are properly converted to app time zone</span>\n<span class=\"no\">Shop</span><span class=\"p\">.</span><span class=\"nf\">create!</span><span class=\"p\">(</span><span class=\"ss\">open_hours: </span><span class=\"p\">[</span><span class=\"no\">Time</span><span class=\"p\">.</span><span class=\"nf\">current</span><span class=\"o\">..</span><span class=\"mi\">8</span><span class=\"p\">.</span><span class=\"nf\">hour</span><span class=\"p\">.</span><span class=\"nf\">from_now</span><span class=\"p\">])</span>\n</code></pre></div></div>\n\n<p><em>Wojciech Wnętrzak</em></p>\n"
  },
  {
    "message": "*   Resolve issue where a relation cache_version could be left stale.\n\n    Previously, when `reset` was called on a relation object it did not reset the cache_versions\n    ivar. This led to a confusing situation where despite having the correct data the relation\n    still reported a stale cache_version.\n\n    Usage:\n\n    ```ruby\n    developers = Developer.all\n    developers.cache_version\n\n    Developer.update_all(updated_at: Time.now.utc + 1.second)\n\n    developers.cache_version # Stale cache_version\n    developers.reset\n    developers.cache_version # Returns the current correct cache_version\n    ```\n\n    Fixes #45341.\n\n    *Austen Madden*",
    "project": "activerecord",
    "date_merged": 1657647916000,
    "author": "Jonathan Hefner",
    "sha": "a5d733840bd2075cbd610408576825dc15ad90e0",
    "pr": "45342",
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>Resolve issue where a relation cache_version could be left stale.</p>\n\n<p>Previously, when <code>reset</code> was called on a relation object it did not reset the cache_versions<br />\nivar. This led to a confusing situation where despite having the correct data the relation<br />\nstill reported a stale cache_version.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">developers</span> <span class=\"o\">=</span> <span class=\"no\">Developer</span><span class=\"p\">.</span><span class=\"nf\">all</span>\n<span class=\"n\">developers</span><span class=\"p\">.</span><span class=\"nf\">cache_version</span>\n\n<span class=\"no\">Developer</span><span class=\"p\">.</span><span class=\"nf\">update_all</span><span class=\"p\">(</span><span class=\"ss\">updated_at: </span><span class=\"no\">Time</span><span class=\"p\">.</span><span class=\"nf\">now</span><span class=\"p\">.</span><span class=\"nf\">utc</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"nf\">second</span><span class=\"p\">)</span>\n\n<span class=\"n\">developers</span><span class=\"p\">.</span><span class=\"nf\">cache_version</span> <span class=\"c1\"># Stale cache_version</span>\n<span class=\"n\">developers</span><span class=\"p\">.</span><span class=\"nf\">reset</span>\n<span class=\"n\">developers</span><span class=\"p\">.</span><span class=\"nf\">cache_version</span> <span class=\"c1\"># Returns the current correct cache_version</span>\n</code></pre></div></div>\n\n<p>Fixes #45341.</p>\n\n<p><em>Austen Madden</em></p>\n"
  },
  {
    "message": "*   Fix `load_async` when called on an association proxy.\n\n    Calling `load_async` directly an association would schedule\n    a query but never use it.\n\n    ```ruby\n    comments = post.comments.load_async # schedule a query\n    comments.to_a # perform an entirely new sync query\n    ```\n\n    Now it does use the async query, however note that it doesn't\n    cause the association to be loaded.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1656027602000,
    "author": "Jean Boussier",
    "sha": "ee7b4dd51cb9a32887ea9b66feaf118a7cf9c6a8",
    "pr": "45444",
    "merge_sha": "575f20c891ffc621564d4d5f28cbc129cdda41bd",
    "html": "<p>Fix <code>load_async</code> when called on an association proxy.</p>\n\n<p>Calling <code>load_async</code> directly an association would schedule<br />\na query but never use it.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">comments</span> <span class=\"o\">=</span> <span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">comments</span><span class=\"p\">.</span><span class=\"nf\">load_async</span> <span class=\"c1\"># schedule a query</span>\n<span class=\"n\">comments</span><span class=\"p\">.</span><span class=\"nf\">to_a</span> <span class=\"c1\"># perform an entirely new sync query</span>\n</code></pre></div></div>\n\n<p>Now it does use the async query, however note that it doesn’t<br />\ncause the association to be loaded.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix eager loading for models without primary keys.\n\n    *Anmol Chopra*, *Matt Lawrence*, and *Jonathan Hefner*",
    "project": "activerecord",
    "date_merged": 1656027602000,
    "author": "Jonathan Hefner",
    "sha": "c89e8e00e9c77b3c2ef4211f256e13c0b9eb87f8",
    "pr": "43402",
    "merge_sha": "575f20c891ffc621564d4d5f28cbc129cdda41bd",
    "html": "<p>Fix eager loading for models without primary keys.</p>\n\n<p><em>Anmol Chopra</em>, <em>Matt Lawrence</em>, and <em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   `rails db:schema:{dump,load}` now checks `ENV[\"SCHEMA_FORMAT\"]` before config\n\n    Since `rails db:structure:{dump,load}` was deprecated there wasn't a simple\n    way to dump a schema to both SQL and Ruby formats. You can now do this with\n    an environment variable. For example:\n\n    ```\n    SCHEMA_FORMAT=sql rake db:schema:dump\n    ```\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1656027602000,
    "author": "Eileen M. Uchitelle",
    "sha": "ccc8618f76f4a86975bac6fe6f4e35a6596b809b",
    "pr": "44834",
    "merge_sha": "575f20c891ffc621564d4d5f28cbc129cdda41bd",
    "html": "<p><code>rails db:schema:{dump,load}</code> now checks <code>ENV[\"SCHEMA_FORMAT\"]</code> before config</p>\n\n<p>Since <code>rails db:structure:{dump,load}</code> was deprecated there wasn’t a simple<br />\nway to dump a schema to both SQL and Ruby formats. You can now do this with<br />\nan environment variable. For example:</p>\n\n<pre><code>SCHEMA_FORMAT=sql rake db:schema:dump\n</code></pre>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix Hstore deserialize regression.\n\n    *edsharp*",
    "project": "activerecord",
    "date_merged": 1654715957000,
    "author": "Ed Sharp",
    "sha": "5b6bc8f5cf81e52ab81f1e295f7202c42dec1efb",
    "pr": "45304",
    "merge_sha": "270a2ddd6b70a1d188650afe48dddd025c4e605a",
    "html": "<p>Fix Hstore deserialize regression.</p>\n\n<p><em>edsharp</em></p>\n"
  },
  {
    "message": "*   Change ActiveRecord::Coders::YAMLColumn default to safe_load\n\n    This adds two new configuration options The configuration options are as\n    follows:\n\n    * `config.active_record.use_yaml_unsafe_load`\n\n    When set to true, this configuration option tells Rails to use the old\n    \"unsafe\" YAML loading strategy, maintaining the existing behavior but leaving\n    the possible escalation vulnerability in place.  Setting this option to true\n    is *not* recommended, but can aid in upgrading.\n\n    * `config.active_record.yaml_column_permitted_classes`\n\n    The \"safe YAML\" loading method does not allow all classes to be deserialized\n    by default.  This option allows you to specify classes deemed \"safe\" in your\n    application.  For example, if your application uses Symbol and Time in\n    serialized data, you can add Symbol and Time to the allowed list as follows:\n\n    ```\n    config.active_record.yaml_column_permitted_classes = [Symbol, Date, Time]\n    ```\n\n    [CVE-2022-32224]",
    "project": "activerecord",
    "date_merged": 1657647916000,
    "author": "Aaron Patterson",
    "sha": "0c68c1f71a3ab6fbd4a9878746fa94ddfe07a0f7",
    "pr": null,
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>Change ActiveRecord::Coders::YAMLColumn default to safe_load</p>\n\n<p>This adds two new configuration options The configuration options are as<br />\nfollows:</p>\n\n<ul>\n  <li><code>config.active_record.use_yaml_unsafe_load</code></li>\n</ul>\n\n<p>When set to true, this configuration option tells Rails to use the old<br />\n“unsafe” YAML loading strategy, maintaining the existing behavior but leaving<br />\nthe possible escalation vulnerability in place.  Setting this option to true<br />\nis <em>not</em> recommended, but can aid in upgrading.</p>\n\n<ul>\n  <li><code>config.active_record.yaml_column_permitted_classes</code></li>\n</ul>\n\n<p>The “safe YAML” loading method does not allow all classes to be deserialized<br />\nby default.  This option allows you to specify classes deemed “safe” in your<br />\napplication.  For example, if your application uses Symbol and Time in<br />\nserialized data, you can add Symbol and Time to the allowed list as follows:</p>\n\n<pre><code>config.active_record.yaml_column_permitted_classes = [Symbol, Date, Time]\n</code></pre>\n\n<p>[CVE-2022-32224]</p>\n"
  },
  {
    "message": "*   Some internal housekeeping on reloads could break custom `respond_to?`\n    methods in class objects that referenced reloadable constants. See\n    [#44125](https://github.com/rails/rails/issues/44125) for details.\n\n    *Xavier Noria*",
    "project": "activerecord",
    "date_merged": 1648066286000,
    "author": "Xavier Noria",
    "sha": "bac7f244dd3ba96b9585d620892cf815466c793d",
    "pr": "44752",
    "merge_sha": "f0cfc60799c66047fdc9cc443bb957012cf1fbc8",
    "html": "<p>Some internal housekeeping on reloads could break custom <code>respond_to?</code><br />\nmethods in class objects that referenced reloadable constants. See<br />\n<a href=\"https://github.com/rails/rails/issues/44125\">#44125</a> for details.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Fixed MariaDB default function support.\n\n    Defaults would be written wrong in \"db/schema.rb\" and not work correctly\n    if using `db:schema:load`. Further more the function name would be\n    added as string content when saving new records.\n\n    *kaspernj*",
    "project": "activerecord",
    "date_merged": 1648066286000,
    "author": "Jean Boussier",
    "sha": "9569c417c4e6838bfbb7a8e74e1f459379cd3bd0",
    "pr": "44654",
    "merge_sha": "f0cfc60799c66047fdc9cc443bb957012cf1fbc8",
    "html": "<p>Fixed MariaDB default function support.</p>\n\n<p>Defaults would be written wrong in “db/schema.rb” and not work correctly<br />\nif using <code>db:schema:load</code>. Further more the function name would be<br />\nadded as string content when saving new records.</p>\n\n<p><em>kaspernj</em></p>\n"
  },
  {
    "message": "*   Fix `remove_foreign_key` with `:if_exists` option when foreign key actually exists.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1648066286000,
    "author": "Eileen M. Uchitelle",
    "sha": "dd494f199f70db1641d9cbfeeafeb9e79fdaea9b",
    "pr": "44637",
    "merge_sha": "f0cfc60799c66047fdc9cc443bb957012cf1fbc8",
    "html": "<p>Fix <code>remove_foreign_key</code> with <code>:if_exists</code> option when foreign key actually exists.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Remove `--no-comments` flag in structure dumps for PostgreSQL\n\n    This broke some apps that used custom schema comments. If you don't want\n    comments in your structure dump, you can use:\n\n    ```ruby\n    ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags = ['--no-comments']\n    ```\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1646762084000,
    "author": "Rafael Mendonça França",
    "sha": "53b9ecf1cc9e3906fafd8537ed25415d01765b93",
    "pr": "44633",
    "merge_sha": "e1c01ba9d7158002353758f320a326c57f6125b7",
    "html": "<p>Remove <code>--no-comments</code> flag in structure dumps for PostgreSQL</p>\n\n<p>This broke some apps that used custom schema comments. If you don’t want<br />\ncomments in your structure dump, you can use:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Tasks</span><span class=\"o\">::</span><span class=\"no\">DatabaseTasks</span><span class=\"p\">.</span><span class=\"nf\">structure_dump_flags</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'--no-comments'</span><span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Use the model name as a prefix when filtering encrypted attributes from logs.\n\n    For example, when encrypting `Person#name` it will add `person.name` as a filter\n    parameter, instead of just `name`. This prevents unintended filtering of parameters\n    with a matching name in other models.\n\n    *Jorge Manrubia*",
    "project": "activerecord",
    "date_merged": 1646631757000,
    "author": "Rafael Mendonça França",
    "sha": "51fbf21b0fdce595ff660d4d2fb1f30496efd3b9",
    "pr": "44361",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Use the model name as a prefix when filtering encrypted attributes from logs.</p>\n\n<p>For example, when encrypting <code>Person#name</code> it will add <code>person.name</code> as a filter<br />\nparameter, instead of just <code>name</code>. This prevents unintended filtering of parameters<br />\nwith a matching name in other models.</p>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   Fix quoting of `ActiveSupport::Duration` and `Rational` numbers in the MySQL adapter.\n\n    *Kevin McPhillips*",
    "project": "activerecord",
    "date_merged": 1646631757000,
    "author": "Rafael Mendonça França",
    "sha": "d43fea7c0f8b15faa561fc3abfffc3cf21fec366",
    "pr": "44404",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix quoting of <code>ActiveSupport::Duration</code> and <code>Rational</code> numbers in the MySQL adapter.</p>\n\n<p><em>Kevin McPhillips</em></p>\n"
  },
  {
    "message": "*   Fix `change_column_comment` to preserve column's AUTO_INCREMENT in the MySQL adapter\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1646631757000,
    "author": "Rafael Mendonça França",
    "sha": "4d1e1e28720bf884c72274384c43381512943500",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Fix <code>change_column_comment</code> to preserve column’s AUTO_INCREMENT in the MySQL adapter</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `PG.connect` keyword arguments deprecation warning on ruby 2.7.\n\n    *Nikita Vasilevsky*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix <code>PG.connect</code> keyword arguments deprecation warning on ruby 2.7.</p>\n\n<p><em>Nikita Vasilevsky</em></p>\n"
  },
  {
    "message": "*   Fix the ability to exclude encryption params from being autofiltered.\n\n    *Mark Gangl*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix the ability to exclude encryption params from being autofiltered.</p>\n\n<p><em>Mark Gangl</em></p>\n"
  },
  {
    "message": "*   Dump the precision for datetime columns following the new defaults.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Dump the precision for datetime columns following the new defaults.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Make sure encrypted attributes are not being filtered twice.\n\n    *Nikita Vasilevsky*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Make sure encrypted attributes are not being filtered twice.</p>\n\n<p><em>Nikita Vasilevsky</em></p>\n"
  },
  {
    "message": "*   Dump the database schema containing the current Rails version.\n\n    Since https://github.com/rails/rails/pull/42297, Rails now generate datetime columns\n    with a default precision of 6. This means that users upgrading to Rails 7.0 from 6.1,\n    when loading the database schema, would get the new precision value, which would not match\n    the production schema.\n\n    To avoid this the schema dumper will generate the new format which will include the Rails\n    version and will look like this:\n\n    ```\n    ActiveRecord::Schema[7.0].define\n    ```\n\n    When upgrading from Rails 6.1 to Rails 7.0, you can run the `rails app:update` task that will\n    set the current schema version to 6.1.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Dump the database schema containing the current Rails version.</p>\n\n<p>Since https://github.com/rails/rails/pull/42297, Rails now generate datetime columns<br />\nwith a default precision of 6. This means that users upgrading to Rails 7.0 from 6.1,<br />\nwhen loading the database schema, would get the new precision value, which would not match<br />\nthe production schema.</p>\n\n<p>To avoid this the schema dumper will generate the new format which will include the Rails<br />\nversion and will look like this:</p>\n\n<pre><code>ActiveRecord::Schema[7.0].define\n</code></pre>\n\n<p>When upgrading from Rails 6.1 to Rails 7.0, you can run the <code>rails app:update</code> task that will<br />\nset the current schema version to 6.1.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix parsing expression for PostgreSQL generated column.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix parsing expression for PostgreSQL generated column.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `Mysql2::Error: Commands out of sync; you can't run this command now`\n    when bulk-inserting fixtures that exceed `max_allowed_packet` configuration.\n\n    *Nikita Vasilevsky*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix <code>Mysql2::Error: Commands out of sync; you can't run this command now</code><br />\nwhen bulk-inserting fixtures that exceed <code>max_allowed_packet</code> configuration.</p>\n\n<p><em>Nikita Vasilevsky</em></p>\n"
  },
  {
    "message": "*   Fix error when saving an association with a relation named `record`.\n\n    *Dorian Marié*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix error when saving an association with a relation named <code>record</code>.</p>\n\n<p><em>Dorian Marié</em></p>\n"
  },
  {
    "message": "*   Fix `MySQL::SchemaDumper` behavior about datetime precision value.\n\n    *y0t4*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix <code>MySQL::SchemaDumper</code> behavior about datetime precision value.</p>\n\n<p><em>y0t4</em></p>\n"
  },
  {
    "message": "*   Improve associated with no reflection error.\n\n    *Nikolai*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Improve associated with no reflection error.</p>\n\n<p><em>Nikolai</em></p>\n"
  },
  {
    "message": "*   Fix PG.connect keyword arguments deprecation warning on ruby 2.7.\n\n    Fixes #44307.\n\n    *Nikita Vasilevsky*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix PG.connect keyword arguments deprecation warning on ruby 2.7.</p>\n\n<p>Fixes #44307.</p>\n\n<p><em>Nikita Vasilevsky</em></p>\n"
  },
  {
    "message": "*   Fix passing options to `check_constraint` from `change_table`.\n\n    *Frederick Cheung*",
    "project": "activerecord",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix passing options to <code>check_constraint</code> from <code>change_table</code>.</p>\n\n<p><em>Frederick Cheung</em></p>\n"
  },
  {
    "message": "*   Change `QueryMethods#in_order_of` to drop records not listed in values.\n\n    `in_order_of` now filters down to the values provided, to match the behavior of the `Enumerable` version.\n\n    *Kevin Newton*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "d2268d649d3dfc84b14e52a47475bea580655208",
    "pr": "44097",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Change <code>QueryMethods#in_order_of</code> to drop records not listed in values.</p>\n\n<p><code>in_order_of</code> now filters down to the values provided, to match the behavior of the <code>Enumerable</code> version.</p>\n\n<p><em>Kevin Newton</em></p>\n"
  },
  {
    "message": "*   Allow named expression indexes to be revertible.\n\n    Previously, the following code would raise an error in a reversible migration executed while rolling back, due to the index name not being used in the index removal.\n\n    ```ruby\n    add_index(:settings, \"(data->'property')\", using: :gin, name: :index_settings_data_property)\n    ```\n\n    Fixes #43331.\n\n    *Oliver Günther*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Ryuta Kamizono",
    "sha": "e9ffa9ac54796491af2e5e0dc6469776817ef3a8",
    "pr": "43333",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Allow named expression indexes to be revertible.</p>\n\n<p>Previously, the following code would raise an error in a reversible migration executed while rolling back, due to the index name not being used in the index removal.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">add_index</span><span class=\"p\">(</span><span class=\"ss\">:settings</span><span class=\"p\">,</span> <span class=\"s2\">\"(data-&gt;'property')\"</span><span class=\"p\">,</span> <span class=\"ss\">using: :gin</span><span class=\"p\">,</span> <span class=\"ss\">name: :index_settings_data_property</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Fixes #43331.</p>\n\n<p><em>Oliver Günther</em></p>\n"
  },
  {
    "message": "*   Better error messages when association name is invalid in the argument of `ActiveRecord::QueryMethods::WhereChain#missing`.\n\n    *ykpythemind*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Better error messages when association name is invalid in the argument of <code>ActiveRecord::QueryMethods::WhereChain#missing</code>.</p>\n\n<p><em>ykpythemind</em></p>\n"
  },
  {
    "message": "*   Fix ordered migrations for single db in multi db environment.\n\n    *Himanshu*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix ordered migrations for single db in multi db environment.</p>\n\n<p><em>Himanshu</em></p>\n"
  },
  {
    "message": "*   Extract `on update CURRENT_TIMESTAMP` for mysql2 adapter.\n\n    *Kazuhiro Masuda*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Extract <code>on update CURRENT_TIMESTAMP</code> for mysql2 adapter.</p>\n\n<p><em>Kazuhiro Masuda</em></p>\n"
  },
  {
    "message": "*   Fix incorrect argument in PostgreSQL structure dump tasks.\n\n    Updating the `--no-comment` argument added in Rails 7 to the correct `--no-comments` argument.\n\n    *Alex Dent*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Eugene Kenny",
    "sha": "c837883cfcf880ac7a96223545b0cf4fac2986e0",
    "pr": "44028",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix incorrect argument in PostgreSQL structure dump tasks.</p>\n\n<p>Updating the <code>--no-comment</code> argument added in Rails 7 to the correct <code>--no-comments</code> argument.</p>\n\n<p><em>Alex Dent</em></p>\n"
  },
  {
    "message": "*   Fix schema dumping column default SQL values for sqlite3.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix schema dumping column default SQL values for sqlite3.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Correctly parse complex check constraint expressions for PostgreSQL.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Correctly parse complex check constraint expressions for PostgreSQL.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Fix `timestamptz` attributes on PostgreSQL handle blank inputs.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>timestamptz</code> attributes on PostgreSQL handle blank inputs.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix migration compatibility to create SQLite references/belongs_to column as integer when migration version is 6.0.\n\n    Reference/belongs_to in migrations with version 6.0 were creating columns as\n    bigint instead of integer for the SQLite Adapter.\n\n    *Marcelo Lauxen*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "dc45a0c84cd5e4f3f160767b49f2092a1014d08e",
    "pr": "43295",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix migration compatibility to create SQLite references/belongs_to column as integer when migration version is 6.0.</p>\n\n<p>Reference/belongs_to in migrations with version 6.0 were creating columns as<br />\nbigint instead of integer for the SQLite Adapter.</p>\n\n<p><em>Marcelo Lauxen</em></p>\n"
  },
  {
    "message": "*   Fix joining through a polymorphic association.\n\n    *Alexandre Ruban*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix joining through a polymorphic association.</p>\n\n<p><em>Alexandre Ruban</em></p>\n"
  },
  {
    "message": "*   Fix `QueryMethods#in_order_of` to handle empty order list.\n\n    ```ruby\n    Post.in_order_of(:id, []).to_a\n    ```\n\n    Also more explicitly set the column as secondary order, so that any other\n    value is still ordered.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "99ccebe45e4ad947cd8c27e989c6e777f61f8dce",
    "pr": "43916",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>QueryMethods#in_order_of</code> to handle empty order list.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">in_order_of</span><span class=\"p\">(</span><span class=\"ss\">:id</span><span class=\"p\">,</span> <span class=\"p\">[]).</span><span class=\"nf\">to_a</span>\n</code></pre></div></div>\n\n<p>Also more explicitly set the column as secondary order, so that any other<br />\nvalue is still ordered.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix `rails dbconsole` for 3-tier config.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>rails dbconsole</code> for 3-tier config.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Fix quoting of column aliases generated by calculation methods.\n\n    Since the alias is derived from the table name, we can't assume the result\n    is a valid identifier.\n\n    ```ruby\n    class Test < ActiveRecord::Base\n      self.table_name = '1abc'\n    end\n    Test.group(:id).count\n    # syntax error at or near \"1\" (ActiveRecord::StatementInvalid)\n    # LINE 1: SELECT COUNT(*) AS count_all, \"1abc\".\"id\" AS 1abc_id FROM \"1...\n    ```\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1641577657000,
    "author": "Jean Boussier",
    "sha": "a554097c0f0129f14f817207e5f178dff77c31de",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix quoting of column aliases generated by calculation methods.</p>\n\n<p>Since the alias is derived from the table name, we can’t assume the result<br />\nis a valid identifier.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Test</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"nf\">table_name</span> <span class=\"o\">=</span> <span class=\"s1\">'1abc'</span>\n<span class=\"k\">end</span>\n<span class=\"no\">Test</span><span class=\"p\">.</span><span class=\"nf\">group</span><span class=\"p\">(</span><span class=\"ss\">:id</span><span class=\"p\">).</span><span class=\"nf\">count</span>\n<span class=\"c1\"># syntax error at or near \"1\" (ActiveRecord::StatementInvalid)</span>\n<span class=\"c1\"># LINE 1: SELECT COUNT(*) AS count_all, \"1abc\".\"id\" AS 1abc_id FROM \"1...</span>\n</code></pre></div></div>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Better handle SQL queries with invalid encoding.\n\n    ```ruby\n    Post.create(name: \"broken \\xC8 UTF-8\")\n    ```\n\n    Would cause all adapters to fail in a non controlled way in the code\n    responsible to detect write queries.\n\n    The query is now properly passed to the database connection, which might or might\n    not be able to handle it, but will either succeed or failed in a more correct way.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1639161431000,
    "author": "Richard Macklin",
    "sha": "8f277ace31b240b2115f17561483f96076c07da9",
    "pr": "43834",
    "merge_sha": "85ad091cdb94d3cf84202c54a72a02a79eb5d3a2",
    "html": "<p>Better handle SQL queries with invalid encoding.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">(</span><span class=\"ss\">name: </span><span class=\"s2\">\"broken </span><span class=\"se\">\\xC8</span><span class=\"s2\"> UTF-8\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Would cause all adapters to fail in a non controlled way in the code<br />\nresponsible to detect write queries.</p>\n\n<p>The query is now properly passed to the database connection, which might or might<br />\nnot be able to handle it, but will either succeed or failed in a more correct way.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Move database and shard selection config options to a generator.\n\n    Rather than generating the config options in `production.rb` when applications are created, applications can now run a generator to create an initializer and uncomment / update options as needed. All multi-db configuration can be implemented in this initializer.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1639057135000,
    "author": "Eileen M. Uchitelle",
    "sha": "b09ed216e2bc868917fded52869565d46244eb91",
    "pr": "43796",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Move database and shard selection config options to a generator.</p>\n\n<p>Rather than generating the config options in <code>production.rb</code> when applications are created, applications can now run a generator to create an initializer and uncomment / update options as needed. All multi-db configuration can be implemented in this initializer.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::DatabaseConfigurations::DatabaseConfig#spec_name`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "25c4cf82cdb90ad26df96412c25d25e3eda20eb5",
    "pr": "43818",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Remove deprecated <code>ActiveRecord::DatabaseConfigurations::DatabaseConfig#spec_name</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Connection#in_clause_length`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "25c4cf82cdb90ad26df96412c25d25e3eda20eb5",
    "pr": "43818",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Remove deprecated <code>ActiveRecord::Connection#in_clause_length</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Connection#allowed_index_name_length`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "126319ec3d62b8d0d86bec0c88c3555007f9d4b6",
    "pr": "43818",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Remove deprecated <code>ActiveRecord::Connection#allowed_index_name_length</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Base#remove_connection`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1639057135000,
    "author": "Rafael Mendonça França",
    "sha": "60e9fd6106027296b4409e9028e0ed6c50091f33",
    "pr": "43818",
    "merge_sha": "28e9625246e7a1365d771db21d8a6b266fb0e475",
    "html": "<p>Remove deprecated <code>ActiveRecord::Base#remove_connection</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Load STI Models in fixtures\n\n    Data from Fixtures now loads based on the specific class for models with\n    Single Table Inheritance. This affects enums defined in subclasses, previously\n    the value of these fields was not parsed and remained `nil`\n\n    *Andres Howard*",
    "project": "activerecord",
    "date_merged": 1637875388000,
    "author": "Andres Howard",
    "sha": "7b741457e5618d6d7cd229554bbf9e67fc7c00ff",
    "pr": "43136",
    "merge_sha": "b261869af0902274bb321fdb475da7db20f39282",
    "html": "<p>Load STI Models in fixtures</p>\n\n<p>Data from Fixtures now loads based on the specific class for models with<br />\nSingle Table Inheritance. This affects enums defined in subclasses, previously<br />\nthe value of these fields was not parsed and remained <code>nil</code></p>\n\n<p><em>Andres Howard</em></p>\n"
  },
  {
    "message": "*   `#authenticate` returns false when the password is blank instead of raising an error.\n\n    *Muhammad Muhammad Ibrahim*",
    "project": "activerecord",
    "date_merged": 1637868429000,
    "author": "Rafael Mendonça França",
    "sha": "5cb2d3d4a8687a2e0502f1a039c4cc7cf3179ce9",
    "pr": "43284",
    "merge_sha": "481343ed91a66a112f7d929a73214f42ffb38dfc",
    "html": "<p><code>#authenticate</code> returns false when the password is blank instead of raising an error.</p>\n\n<p><em>Muhammad Muhammad Ibrahim</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::QueryMethods#in_order_of` behavior for integer enums.\n\n    `ActiveRecord::QueryMethods#in_order_of` didn't work as expected for enums stored as integers in the database when passing an array of strings or symbols as the order argument. This unexpected behavior occurred because the string or symbol values were not casted to match the integers in the database.\n\n    The following example now works as expected:\n\n    ```ruby\n    class Book < ApplicationRecord\n      enum status: [:proposed, :written, :published]\n    end\n\n    Book.in_order_of(:status, %w[written published proposed])\n    ```\n\n    *Alexandre Ruban*",
    "project": "activerecord",
    "date_merged": 1637866782000,
    "author": "Rafael Mendonça França",
    "sha": "395ea07419e12c78c8e03d37bd412606c33d9045",
    "pr": "43322",
    "merge_sha": "902e829914f36478bc486fbb0d724923a889f449",
    "html": "<p>Fix <code>ActiveRecord::QueryMethods#in_order_of</code> behavior for integer enums.</p>\n\n<p><code>ActiveRecord::QueryMethods#in_order_of</code> didn’t work as expected for enums stored as integers in the database when passing an array of strings or symbols as the order argument. This unexpected behavior occurred because the string or symbol values were not casted to match the integers in the database.</p>\n\n<p>The following example now works as expected:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">status: </span><span class=\"p\">[</span><span class=\"ss\">:proposed</span><span class=\"p\">,</span> <span class=\"ss\">:written</span><span class=\"p\">,</span> <span class=\"ss\">:published</span><span class=\"p\">]</span>\n<span class=\"k\">end</span>\n\n<span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">in_order_of</span><span class=\"p\">(</span><span class=\"ss\">:status</span><span class=\"p\">,</span> <span class=\"sx\">%w[written published proposed]</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Alexandre Ruban</em></p>\n"
  },
  {
    "message": "*   Ignore persisted in-memory records when merging target lists.\n\n    *Kevin Sjöberg*",
    "project": "activerecord",
    "date_merged": 1637865627000,
    "author": "Kevin Sjöberg",
    "sha": "4d5aed9b7ae9108078101ab958989a8e2c92a759",
    "pr": "43517",
    "merge_sha": "060ae8cbb163f537dc13297c2c02bf6dc3c3a136",
    "html": "<p>Ignore persisted in-memory records when merging target lists.</p>\n\n<p><em>Kevin Sjöberg</em></p>\n"
  },
  {
    "message": "*   Add a new option `:update_only` to `upsert_all` to configure the list of columns to update in case of conflict.\n\n    Before, you could only customize the update SQL sentence via `:on_duplicate`. There is now a new option `:update_only` that lets you provide a list of columns to update in case of conflict:\n\n    ```ruby\n    Commodity.upsert_all(\n      [\n        { id: 2, name: \"Copper\", price: 4.84 },\n        { id: 4, name: \"Gold\", price: 1380.87 },\n        { id: 6, name: \"Aluminium\", price: 0.35 }\n      ],\n      update_only: [:price] # Only prices will be updated\n    )\n    ```\n\n    *Jorge Manrubia*",
    "project": "activerecord",
    "date_merged": 1637841529000,
    "author": "Jorge Manrubia",
    "sha": "d133cc40ffefcb8ed41f1c66b0fb111e4cd5f4f2",
    "pr": "43722",
    "merge_sha": "d0b53aa90dcb37b2283d1ea9c0d25bf1c2e7a90d",
    "html": "<p>Add a new option <code>:update_only</code> to <code>upsert_all</code> to configure the list of columns to update in case of conflict.</p>\n\n<p>Before, you could only customize the update SQL sentence via <code>:on_duplicate</code>. There is now a new option <code>:update_only</code> that lets you provide a list of columns to update in case of conflict:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Commodity</span><span class=\"p\">.</span><span class=\"nf\">upsert_all</span><span class=\"p\">(</span>\n  <span class=\"p\">[</span>\n    <span class=\"p\">{</span> <span class=\"ss\">id: </span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"s2\">\"Copper\"</span><span class=\"p\">,</span> <span class=\"ss\">price: </span><span class=\"mf\">4.84</span> <span class=\"p\">},</span>\n    <span class=\"p\">{</span> <span class=\"ss\">id: </span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"s2\">\"Gold\"</span><span class=\"p\">,</span> <span class=\"ss\">price: </span><span class=\"mf\">1380.87</span> <span class=\"p\">},</span>\n    <span class=\"p\">{</span> <span class=\"ss\">id: </span><span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"s2\">\"Aluminium\"</span><span class=\"p\">,</span> <span class=\"ss\">price: </span><span class=\"mf\">0.35</span> <span class=\"p\">}</span>\n  <span class=\"p\">],</span>\n  <span class=\"ss\">update_only: </span><span class=\"p\">[</span><span class=\"ss\">:price</span><span class=\"p\">]</span> <span class=\"c1\"># Only prices will be updated</span>\n<span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Result#map!` and `ActiveRecord::Result#collect!`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "485d3e96d020efafaac8fc1c9f83d51b3ac6de25",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecated <code>ActiveRecord::Result#map!</code> and <code>ActiveRecord::Result#collect!</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Base.configurations.to_h`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "190f006e78fcf2d5f4e4565f2d25b12545f12dde",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecated <code>ActiveRecord::Base.configurations.to_h</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Base.configurations.default_hash`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "73605a253e17a72c2f9969d72df7d9be60949d08",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecated <code>ActiveRecord::Base.configurations.default_hash</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Base.arel_attribute`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "eeb9c78951cfcaf16c599778fe5c34e00d504673",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecated <code>ActiveRecord::Base.arel_attribute</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Base.connection_config`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637364101000,
    "author": "Rafael Mendonça França",
    "sha": "54ddb3be31b3baeeb68f855e1525f4fd58fc257d",
    "pr": "43675",
    "merge_sha": "f47204802ae2e212a238276492584b7607c513f1",
    "html": "<p>Remove deprecated <code>ActiveRecord::Base.connection_config</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Filter attributes in SQL logs\n\n    Previously, SQL queries in logs containing `ActiveRecord::Base.filter_attributes` were not filtered.\n\n    Now, the filter attributes will be masked `[FILTERED]` in the logs when `prepared_statement` is enabled.\n\n    ```\n    # Before:\n      Foo Load (0.2ms)  SELECT \"foos\".* FROM \"foos\" WHERE \"foos\".\"passw\" = ? LIMIT ?  [[\"passw\", \"hello\"], [\"LIMIT\", 1]]\n\n    # After:\n      Foo Load (0.5ms)  SELECT \"foos\".* FROM \"foos\" WHERE \"foos\".\"passw\" = ? LIMIT ?  [[\"passw\", \"[FILTERED]\"], [\"LIMIT\", 1]]\n    ```\n\n    *Aishwarya Subramanian*",
    "project": "activerecord",
    "date_merged": 1637362398000,
    "author": "Aishwarya Subramanian",
    "sha": "17c7607167a9294edc64cec43ef32778eb2bd677",
    "pr": "42006",
    "merge_sha": "bef825e3cb214edacbcfa2d7f438065e50ebb323",
    "html": "<p>Filter attributes in SQL logs</p>\n\n<p>Previously, SQL queries in logs containing <code>ActiveRecord::Base.filter_attributes</code> were not filtered.</p>\n\n<p>Now, the filter attributes will be masked <code>[FILTERED]</code> in the logs when <code>prepared_statement</code> is enabled.</p>\n\n<pre><code># Before:\n  Foo Load (0.2ms)  SELECT \"foos\".* FROM \"foos\" WHERE \"foos\".\"passw\" = ? LIMIT ?  [[\"passw\", \"hello\"], [\"LIMIT\", 1]]\n\n# After:\n  Foo Load (0.5ms)  SELECT \"foos\".* FROM \"foos\" WHERE \"foos\".\"passw\" = ? LIMIT ?  [[\"passw\", \"[FILTERED]\"], [\"LIMIT\", 1]]\n</code></pre>\n\n<p><em>Aishwarya Subramanian</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Tasks::DatabaseTasks.spec`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "71f61b13e13ea083eadc6ef2072068c1cd5bb9a1",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>Tasks::DatabaseTasks.spec</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Tasks::DatabaseTasks.current_config`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "71f61b13e13ea083eadc6ef2072068c1cd5bb9a1",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>Tasks::DatabaseTasks.current_config</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Deprecate `Tasks::DatabaseTasks.schema_file_type`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "71f61b13e13ea083eadc6ef2072068c1cd5bb9a1",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Deprecate <code>Tasks::DatabaseTasks.schema_file_type</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Tasks::DatabaseTasks.dump_filename`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "71f61b13e13ea083eadc6ef2072068c1cd5bb9a1",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>Tasks::DatabaseTasks.dump_filename</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Tasks::DatabaseTasks.schema_file`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "71f61b13e13ea083eadc6ef2072068c1cd5bb9a1",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>Tasks::DatabaseTasks.schema_file</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `environment` and `name` arguments from `Tasks::DatabaseTasks.schema_up_to_date?`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "9828cc76d15e20de0bf81388800f9c5c1353541f",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>environment</code> and <code>name</code> arguments from <code>Tasks::DatabaseTasks.schema_up_to_date?</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Merging conditions on the same column no longer maintain both conditions,\n    and will be consistently replaced by the latter condition.\n\n    ```ruby\n    # Rails 6.1 (IN clause is replaced by merger side equality condition)\n    Author.where(id: [david.id, mary.id]).merge(Author.where(id: bob)) # => [bob]\n    # Rails 6.1 (both conflict conditions exists, deprecated)\n    Author.where(id: david.id..mary.id).merge(Author.where(id: bob)) # => []\n    # Rails 6.1 with rewhere to migrate to Rails 7.0's behavior\n    Author.where(id: david.id..mary.id).merge(Author.where(id: bob), rewhere: true) # => [bob]\n    # Rails 7.0 (same behavior with IN clause, mergee side condition is consistently replaced)\n    Author.where(id: [david.id, mary.id]).merge(Author.where(id: bob)) # => [bob]\n    Author.where(id: david.id..mary.id).merge(Author.where(id: bob)) # => [bob]\n    ```\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "515aa1ea4ed6fc744636d5c3495e44b88057dcf6",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Merging conditions on the same column no longer maintain both conditions,<br />\nand will be consistently replaced by the latter condition.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Rails 6.1 (IN clause is replaced by merger side equality condition)</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">,</span> <span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">]).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n<span class=\"c1\"># Rails 6.1 (both conflict conditions exists, deprecated)</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; []</span>\n<span class=\"c1\"># Rails 6.1 with rewhere to migrate to Rails 7.0's behavior</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">),</span> <span class=\"ss\">rewhere: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [bob]</span>\n<span class=\"c1\"># Rails 7.0 (same behavior with IN clause, mergee side condition is consistently replaced)</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">,</span> <span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">]).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n</code></pre></div></div>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to `Model.reorder(nil).first` to search using non-deterministic order.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "773eeec6ab2397894fb66b7dca2b84bd0d182d7e",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated support to <code>Model.reorder(nil).first</code> to search using non-deterministic order.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated rake tasks:\n\n    * `db:schema:load_if_ruby`\n    * `db:structure:dump`\n    * `db:structure:load`\n    * `db:structure:load_if_sql`\n    * `db:structure:dump:#{name}`\n    * `db:structure:load:#{name}`\n    * `db:test:load_structure`\n    * `db:test:load_structure:#{name}`\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "cf269d51fbc4758cb6ae0110c6c151546c0889d9",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated rake tasks:</p>\n\n<ul>\n  <li><code>db:schema:load_if_ruby</code></li>\n  <li><code>db:structure:dump</code></li>\n  <li><code>db:structure:load</code></li>\n  <li><code>db:structure:load_if_sql</code></li>\n  <li><code>db:structure:dump:#{name}</code></li>\n  <li><code>db:structure:load:#{name}</code></li>\n  <li><code>db:test:load_structure</code></li>\n  <li><code>db:test:load_structure:#{name}</code></li>\n</ul>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `DatabaseConfig#config` method.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "7b9d4d2d8a6a7e2bb489343e83e7aa24dbcd2c7e",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Remove deprecated <code>DatabaseConfig#config</code> method.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Rollback transactions when the block returns earlier than expected.\n\n    Before this change, when a transaction block returned early, the transaction would be committed.\n\n    The problem is that timeouts triggered inside the transaction block was also making the incomplete transaction\n    to be committed, so in order to avoid this mistake, the transaction block is rolled back.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637360333000,
    "author": "Rafael Mendonça França",
    "sha": "15aa4200e083e0229553ddb53b7280cc12ccbf92",
    "pr": "43421",
    "merge_sha": "269f6722c3228ec92756a62bb0ffcc3d43817337",
    "html": "<p>Rollback transactions when the block returns earlier than expected.</p>\n\n<p>Before this change, when a transaction block returned early, the transaction would be committed.</p>\n\n<p>The problem is that timeouts triggered inside the transaction block was also making the incomplete transaction<br />\nto be committed, so in order to avoid this mistake, the transaction block is rolled back.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Add middleware for automatic shard swapping.\n\n    Provides a basic middleware to perform automatic shard swapping. Applications will provide a resolver which will determine for an individual request which shard should be used. Example:\n\n    ```ruby\n    config.active_record.shard_resolver = ->(request) {\n      subdomain = request.subdomain\n      tenant = Tenant.find_by_subdomain!(subdomain)\n      tenant.shard\n    }\n    ```\n\n    See guides for more details.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1637244467000,
    "author": "eileencodes",
    "sha": "6f02a2aec9b8147db07e89fa2855592ac8edcddc",
    "pr": "43665",
    "merge_sha": "2c96efb5132b44ff5fabf9f1702dd1210d38c1e0",
    "html": "<p>Add middleware for automatic shard swapping.</p>\n\n<p>Provides a basic middleware to perform automatic shard swapping. Applications will provide a resolver which will determine for an individual request which shard should be used. Example:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">shard_resolver</span> <span class=\"o\">=</span> <span class=\"o\">-&gt;</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"n\">subdomain</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"p\">.</span><span class=\"nf\">subdomain</span>\n  <span class=\"n\">tenant</span> <span class=\"o\">=</span> <span class=\"no\">Tenant</span><span class=\"p\">.</span><span class=\"nf\">find_by_subdomain!</span><span class=\"p\">(</span><span class=\"n\">subdomain</span><span class=\"p\">)</span>\n  <span class=\"n\">tenant</span><span class=\"p\">.</span><span class=\"nf\">shard</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>See guides for more details.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to pass a column to `type_cast`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "2d821ef0c5356d860eba2d2341b4db71b67f6594",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to pass a column to <code>type_cast</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to type cast to database values `ActiveRecord::Base` objects.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "21c8e5c4ee8b5b01f1d824edc5bb44b08c77db6b",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to type cast to database values <code>ActiveRecord::Base</code> objects.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to quote `ActiveRecord::Base` objects.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "8311df47a6dde2500d706fe0cd549b2568573fb8",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to quote <code>ActiveRecord::Base</code> objects.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecacated support to resolve connection using `\"primary\"` as connection specification name.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "5952493e503e5410ce031a66ceb3bd0ca73da6b4",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecacated support to resolve connection using <code>\"primary\"</code> as connection specification name.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecation warning when using `:interval` column is used in PostgreSQL database.\n\n    Now, interval columns will return `ActiveSupport::Duration` objects instead of strings.\n\n    To keep the old behavior, you can add this line to your model:\n\n    ```ruby\n    attribute :column, :string\n    ```\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "0792661e55333cd2a065c18e3ef6b3e783d65ee1",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecation warning when using <code>:interval</code> column is used in PostgreSQL database.</p>\n\n<p>Now, interval columns will return <code>ActiveSupport::Duration</code> objects instead of strings.</p>\n\n<p>To keep the old behavior, you can add this line to your model:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">attribute</span> <span class=\"ss\">:column</span><span class=\"p\">,</span> <span class=\"ss\">:string</span>\n</code></pre></div></div>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to YAML load `ActiveRecord::Base` instance in the Rails 4.2 and 4.1 formats.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "415709a76e77abd87d11e23c8dedca837ac8dd76",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated support to YAML load <code>ActiveRecord::Base</code> instance in the Rails 4.2 and 4.1 formats.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated option `:spec_name` in the `configs_for` method.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "99b54b6ded9ada788507f2d6e4ebb6dd63638fe4",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated option <code>:spec_name</code> in the <code>configs_for</code> method.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated  `ActiveRecord::Base.allow_unsafe_raw_sql`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "5eddf5e9b469b537f3019f8fbfeeb73df094dfbe",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated  <code>ActiveRecord::Base.allow_unsafe_raw_sql</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix regression bug that caused ignoring additional conditions for preloading has_many-through relations.\n\n    Fixes #43132\n\n    *Alexander Pauly*",
    "project": "activerecord",
    "date_merged": 1636388691000,
    "author": "Alex Pauly",
    "sha": "017f727014d99045b749e147fa9baa51190c4f0c",
    "pr": "43132",
    "merge_sha": "396b22d3b6e602061f07a96539148bfb38cead9d",
    "html": "<p>Fix regression bug that caused ignoring additional conditions for preloading has_many-through relations.</p>\n\n<p>Fixes #43132</p>\n\n<p><em>Alexander Pauly</em></p>\n"
  },
  {
    "message": "*   Fix `has_many` inversing recursion on models with recursive associations.\n\n    *Gannon McGibbon*",
    "project": "activerecord",
    "date_merged": 1636130428000,
    "author": "Gannon McGibbon",
    "sha": "a77f81cfeb642ce16c01a39ff12088e6a6106456",
    "pr": "41552",
    "merge_sha": "b0d14930458e9de0b68061b2bc341f87a973c2ba",
    "html": "<p>Fix <code>has_many</code> inversing recursion on models with recursive associations.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Add `accepts_nested_attributes_for` support for `delegated_type`\n\n    ```ruby\n    class Entry < ApplicationRecord\n      delegated_type :entryable, types: %w[ Message Comment ]\n      accepts_nested_attributes_for :entryable\n    end\n\n    entry = Entry.create(entryable_type: 'Message', entryable_attributes: { content: 'Hello world' })\n    # => #<Entry:0x00>\n    # id: 1\n    # entryable_id: 1,\n    # entryable_type: 'Message'\n    # ...>\n\n    entry.entryable\n    # => #<Message:0x01>\n    # id: 1\n    # content: 'Hello world'\n    # ...>\n    ```\n\n    Previously it would raise an error:\n\n    ```ruby\n    Entry.create(entryable_type: 'Message', entryable_attributes: { content: 'Hello world' })\n    # ArgumentError: Cannot build association `entryable'. Are you trying to build a polymorphic one-to-one association?\n    ```\n\n    *Sjors Baltus*",
    "project": "activerecord",
    "date_merged": 1636297268000,
    "author": "Robin Dupret",
    "sha": "ac1d5f09e6d12679b80774872d9919cab6c34c3a",
    "pr": "43607",
    "merge_sha": "016f6c850c0c1d510c5fdc96b3366fc208781583",
    "html": "<p>Add <code>accepts_nested_attributes_for</code> support for <code>delegated_type</code></p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Entry</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">delegated_type</span> <span class=\"ss\">:entryable</span><span class=\"p\">,</span> <span class=\"ss\">types: </span><span class=\"sx\">%w[ Message Comment ]</span>\n  <span class=\"n\">accepts_nested_attributes_for</span> <span class=\"ss\">:entryable</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">entry</span> <span class=\"o\">=</span> <span class=\"no\">Entry</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">(</span><span class=\"ss\">entryable_type: </span><span class=\"s1\">'Message'</span><span class=\"p\">,</span> <span class=\"ss\">entryable_attributes: </span><span class=\"p\">{</span> <span class=\"ss\">content: </span><span class=\"s1\">'Hello world'</span> <span class=\"p\">})</span>\n<span class=\"c1\"># =&gt; #&lt;Entry:0x00&gt;</span>\n<span class=\"c1\"># id: 1</span>\n<span class=\"c1\"># entryable_id: 1,</span>\n<span class=\"c1\"># entryable_type: 'Message'</span>\n<span class=\"c1\"># ...&gt;</span>\n\n<span class=\"n\">entry</span><span class=\"p\">.</span><span class=\"nf\">entryable</span>\n<span class=\"c1\"># =&gt; #&lt;Message:0x01&gt;</span>\n<span class=\"c1\"># id: 1</span>\n<span class=\"c1\"># content: 'Hello world'</span>\n<span class=\"c1\"># ...&gt;</span>\n</code></pre></div></div>\n\n<p>Previously it would raise an error:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Entry</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">(</span><span class=\"ss\">entryable_type: </span><span class=\"s1\">'Message'</span><span class=\"p\">,</span> <span class=\"ss\">entryable_attributes: </span><span class=\"p\">{</span> <span class=\"ss\">content: </span><span class=\"s1\">'Hello world'</span> <span class=\"p\">})</span>\n<span class=\"c1\"># ArgumentError: Cannot build association `entryable'. Are you trying to build a polymorphic one-to-one association?</span>\n</code></pre></div></div>\n\n<p><em>Sjors Baltus</em></p>\n"
  },
  {
    "message": "*   Use subquery for DELETE with GROUP_BY and HAVING clauses.\n\n    Prior to this change, deletes with GROUP_BY and HAVING were returning an error.\n\n    After this change, GROUP_BY and HAVING are valid clauses in DELETE queries, generating the following query:\n\n    ```sql\n    DELETE FROM \"posts\" WHERE \"posts\".\"id\" IN (\n        SELECT \"posts\".\"id\" FROM \"posts\" INNER JOIN \"comments\" ON \"comments\".\"post_id\" = \"posts\".\"id\" GROUP BY \"posts\".\"id\" HAVING (count(comments.id) >= 2))\n    )  [[\"flagged\", \"t\"]]\n    ```\n\n    *Ignacio Chiazzo Cardarello*",
    "project": "activerecord",
    "date_merged": 1635818280000,
    "author": "ignacio chiazzo",
    "sha": "989d53ba3b3b43d3b1a179a146be9244e1c2537e",
    "pr": "43580",
    "merge_sha": "f314bae561f7d1d8ff7606ee417fcf0bc55d5ab0",
    "html": "<p>Use subquery for DELETE with GROUP_BY and HAVING clauses.</p>\n\n<p>Prior to this change, deletes with GROUP_BY and HAVING were returning an error.</p>\n\n<p>After this change, GROUP_BY and HAVING are valid clauses in DELETE queries, generating the following query:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">DELETE</span> <span class=\"k\">FROM</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">WHERE</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">IN</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">FROM</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"nv\">\"comments\"</span> <span class=\"k\">ON</span> <span class=\"nv\">\"comments\"</span><span class=\"p\">.</span><span class=\"nv\">\"post_id\"</span> <span class=\"o\">=</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">HAVING</span> <span class=\"p\">(</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"n\">comments</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">)</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"p\">)</span>  <span class=\"p\">[[</span><span class=\"nv\">\"flagged\"</span><span class=\"p\">,</span> <span class=\"nv\">\"t\"</span><span class=\"p\">]]</span>\n</code></pre></div></div>\n\n<p><em>Ignacio Chiazzo Cardarello</em></p>\n"
  },
  {
    "message": "*   Use subquery for UPDATE with GROUP_BY and HAVING clauses.\n\n    Prior to this change, updates with GROUP_BY and HAVING were being ignored, generating a SQL like this:\n\n    ```sql\n    UPDATE \"posts\" SET \"flagged\" = ? WHERE \"posts\".\"id\" IN (\n        SELECT \"posts\".\"id\" FROM \"posts\" INNER JOIN \"comments\" ON \"comments\".\"post_id\" = \"posts\".\"id\"\n    )  [[\"flagged\", \"t\"]]\n    ```\n\n    After this change, GROUP_BY and HAVING clauses are used as a subquery in updates, like this:\n\n    ```sql\n    UPDATE \"posts\" SET \"flagged\" = ? WHERE \"posts\".\"id\" IN (\n        SELECT \"posts\".\"id\" FROM \"posts\" INNER JOIN \"comments\" ON \"comments\".\"post_id\" = \"posts\".\"id\"\n        GROUP BY posts.id HAVING (count(comments.id) >= 2)\n    )  [[\"flagged\", \"t\"]]\n    ```\n\n    *Ignacio Chiazzo Cardarello*",
    "project": "activerecord",
    "date_merged": 1635808240000,
    "author": "ignacio chiazzo",
    "sha": "4acb6660e265fd40b38e301fbd15909574d6a59e",
    "pr": "43465",
    "merge_sha": "86e5c93792ba1434142e3c45d26849d90399de5c",
    "html": "<p>Use subquery for UPDATE with GROUP_BY and HAVING clauses.</p>\n\n<p>Prior to this change, updates with GROUP_BY and HAVING were being ignored, generating a SQL like this:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">UPDATE</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">SET</span> <span class=\"nv\">\"flagged\"</span> <span class=\"o\">=</span> <span class=\"o\">?</span> <span class=\"k\">WHERE</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">IN</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">FROM</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"nv\">\"comments\"</span> <span class=\"k\">ON</span> <span class=\"nv\">\"comments\"</span><span class=\"p\">.</span><span class=\"nv\">\"post_id\"</span> <span class=\"o\">=</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span>\n<span class=\"p\">)</span>  <span class=\"p\">[[</span><span class=\"nv\">\"flagged\"</span><span class=\"p\">,</span> <span class=\"nv\">\"t\"</span><span class=\"p\">]]</span>\n</code></pre></div></div>\n\n<p>After this change, GROUP_BY and HAVING clauses are used as a subquery in updates, like this:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">UPDATE</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">SET</span> <span class=\"nv\">\"flagged\"</span> <span class=\"o\">=</span> <span class=\"o\">?</span> <span class=\"k\">WHERE</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">IN</span> <span class=\"p\">(</span>\n    <span class=\"k\">SELECT</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">FROM</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">INNER</span> <span class=\"k\">JOIN</span> <span class=\"nv\">\"comments\"</span> <span class=\"k\">ON</span> <span class=\"nv\">\"comments\"</span><span class=\"p\">.</span><span class=\"nv\">\"post_id\"</span> <span class=\"o\">=</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span>\n    <span class=\"k\">GROUP</span> <span class=\"k\">BY</span> <span class=\"n\">posts</span><span class=\"p\">.</span><span class=\"n\">id</span> <span class=\"k\">HAVING</span> <span class=\"p\">(</span><span class=\"k\">count</span><span class=\"p\">(</span><span class=\"n\">comments</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">)</span> <span class=\"o\">&gt;=</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>  <span class=\"p\">[[</span><span class=\"nv\">\"flagged\"</span><span class=\"p\">,</span> <span class=\"nv\">\"t\"</span><span class=\"p\">]]</span>\n</code></pre></div></div>\n\n<p><em>Ignacio Chiazzo Cardarello</em></p>\n"
  },
  {
    "message": "*   Add support for setting the filename of the schema or structure dump in the database config.\n\n    Applications may now set their the filename or path of the schema / structure dump file in their database configuration.\n\n    ```yaml\n    production:\n      primary:\n        database: my_db\n        schema_dump: my_schema_dump_filename.rb\n      animals:\n        database: animals_db\n        schema_dump: false\n    ```\n\n    The filename set in `schema_dump` will be used by the application. If set to `false` the schema will not be dumped. The database tasks are responsible for adding the database directory to the filename. If a full path is provided, the Rails tasks will use that instead of `ActiveRecord::DatabaseTasks.db_dir`.\n\n    *Eileen M. Uchitelle*, *Ryan Kerr*",
    "project": "activerecord",
    "date_merged": 1635258386000,
    "author": "eileencodes",
    "sha": "059d64b874ef8092cca3bc4a7dad06ebd6eeb8ff",
    "pr": "43530",
    "merge_sha": "6e83d065ae3722e384d005adf3d4a01487fb89fd",
    "html": "<p>Add support for setting the filename of the schema or structure dump in the database config.</p>\n\n<p>Applications may now set their the filename or path of the schema / structure dump file in their database configuration.</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">production</span><span class=\"pi\">:</span>\n  <span class=\"na\">primary</span><span class=\"pi\">:</span>\n    <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">my_db</span>\n    <span class=\"na\">schema_dump</span><span class=\"pi\">:</span> <span class=\"s\">my_schema_dump_filename.rb</span>\n  <span class=\"na\">animals</span><span class=\"pi\">:</span>\n    <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">animals_db</span>\n    <span class=\"na\">schema_dump</span><span class=\"pi\">:</span> <span class=\"no\">false</span>\n</code></pre></div></div>\n\n<p>The filename set in <code>schema_dump</code> will be used by the application. If set to <code>false</code> the schema will not be dumped. The database tasks are responsible for adding the database directory to the filename. If a full path is provided, the Rails tasks will use that instead of <code>ActiveRecord::DatabaseTasks.db_dir</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>Ryan Kerr</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Base.prohibit_shard_swapping` to prevent attempts to change the shard within a block.\n\n    *John Crepezzi*, *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1634660044000,
    "author": "John Crepezzi",
    "sha": "32e2a8ef944fb4ae85275ec97d92101e909f8bc4",
    "pr": "43485",
    "merge_sha": "5b33d467055c825e88f946d5bca234d678c279e7",
    "html": "<p>Add <code>ActiveRecord::Base.prohibit_shard_swapping</code> to prevent attempts to change the shard within a block.</p>\n\n<p><em>John Crepezzi</em>, <em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Filter unchanged attributes with default function from insert query when `partial_inserts` is disabled.\n\n    *Akshay Birajdar*, *Jacopo Beschi*",
    "project": "activerecord",
    "date_merged": 1634568213000,
    "author": "Akshay Birajdar",
    "sha": "a630ed54dc7905b3ea4ced3cbe45f6cbaf199dae",
    "pr": "43296",
    "merge_sha": "e7b050daa49e4262b26d948f670589b2da37ca18",
    "html": "<p>Filter unchanged attributes with default function from insert query when <code>partial_inserts</code> is disabled.</p>\n\n<p><em>Akshay Birajdar</em>, <em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Add support for FILTER clause (SQL:2003) to Arel.\n\n    Currently supported by PostgreSQL 9.4+ and SQLite 3.30+.\n\n    *Andrey Novikov*",
    "project": "activerecord",
    "date_merged": 1634246447000,
    "author": "Rafael Mendonça França",
    "sha": "21c6c225a3f668842e8a4c175f29b9466df4aaa9",
    "pr": "40491",
    "merge_sha": "6acaebd38100ef7b7e7355acabaee372a9652678",
    "html": "<p>Add support for FILTER clause (SQL:2003) to Arel.</p>\n\n<p>Currently supported by PostgreSQL 9.4+ and SQLite 3.30+.</p>\n\n<p><em>Andrey Novikov</em></p>\n"
  },
  {
    "message": "*   Automatically set timestamps on record creation during bulk insert/upsert\n\n    Prior to this change, only updates during an upsert operation (e.g. `upsert_all`) would touch timestamps (`updated_{at,on}`). Now, record creations also touch timestamp columns (`{created,updated}_{at,on}`).\n\n    This behaviour is controlled by the `<model>.record_timestamps` config, matching the behaviour of `create`, `update`, etc. It can also be overridden by using the `record_timestamps:` keyword argument.\n\n    Note that this means `upsert_all` on models with `record_timestamps = false` will no longer touch `updated_{at,on}` automatically.\n\n    *Sam Bostock*",
    "project": "activerecord",
    "date_merged": 1634148304000,
    "author": "Sam Bostock",
    "sha": "39023225d5010f6c93d545dad5f1decce6a8de73",
    "pr": "43446",
    "merge_sha": "eb1f7cca3bdb3c4e3350e15d8d060ec6a205aa88",
    "html": "<p>Automatically set timestamps on record creation during bulk insert/upsert</p>\n\n<p>Prior to this change, only updates during an upsert operation (e.g. <code>upsert_all</code>) would touch timestamps (<code>updated_{at,on}</code>). Now, record creations also touch timestamp columns (<code>{created,updated}_{at,on}</code>).</p>\n\n<p>This behaviour is controlled by the <code>&lt;model&gt;.record_timestamps</code> config, matching the behaviour of <code>create</code>, <code>update</code>, etc. It can also be overridden by using the <code>record_timestamps:</code> keyword argument.</p>\n\n<p>Note that this means <code>upsert_all</code> on models with <code>record_timestamps = false</code> will no longer touch <code>updated_{at,on}</code> automatically.</p>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   Don't require `role` when passing `shard` to `connected_to`.\n\n    `connected_to` can now be called with a `shard` only. Note that `role` is still inherited if `connected_to` calls are nested.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1633553766000,
    "author": "eileencodes",
    "sha": "d71e484f1e5dc5408029c64c71874e357a50bd62",
    "pr": "43391",
    "merge_sha": "ab3c1c6e5ee3e995661b75e12d8de801f682cd7f",
    "html": "<p>Don’t require <code>role</code> when passing <code>shard</code> to <code>connected_to</code>.</p>\n\n<p><code>connected_to</code> can now be called with a <code>shard</code> only. Note that <code>role</code> is still inherited if <code>connected_to</code> calls are nested.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Add option to lazily load the schema cache on the connection.\n\n    Previously, the only way to load the schema cache in Active Record was through the Railtie on boot. This option provides the ability to load the schema cache on the connection after it's been established. Loading the cache lazily on the connection can be beneficial for Rails applications that use multiple databases because it will load the cache at the time the connection is established. Currently Railties doesn't have access to the connections before boot.\n\n    To use the cache, set `config.active_record.lazily_load_schema_cache = true` in your application configuration. In addition a `schema_cache_path` should be set in your database configuration if you don't want to use the default \"db/schema_cache.yml\" path.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1633463120000,
    "author": "eileencodes",
    "sha": "d38578afbf072fc5ce660b536e2d3747a2e3ead5",
    "pr": "43372",
    "merge_sha": "10c0b5939f8d7f3959990dd4eeb59f0b864147df",
    "html": "<p>Add option to lazily load the schema cache on the connection.</p>\n\n<p>Previously, the only way to load the schema cache in Active Record was through the Railtie on boot. This option provides the ability to load the schema cache on the connection after it’s been established. Loading the cache lazily on the connection can be beneficial for Rails applications that use multiple databases because it will load the cache at the time the connection is established. Currently Railties doesn’t have access to the connections before boot.</p>\n\n<p>To use the cache, set <code>config.active_record.lazily_load_schema_cache = true</code> in your application configuration. In addition a <code>schema_cache_path</code> should be set in your database configuration if you don’t want to use the default “db/schema_cache.yml” path.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Allow automatic `inverse_of` detection for associations with scopes.\n\n    Automatic `inverse_of` detection now works for associations with scopes. For\n    example, the `comments` association here now automatically detects\n    `inverse_of: :post`, so we don't need to pass that option:\n\n    ```ruby\n    class Post < ActiveRecord::Base\n      has_many :comments, -> { visible }\n    end\n\n    class Comment < ActiveRecord::Base\n      belongs_to :post\n    end\n    ```\n\n    Note that the automatic detection still won't work if the inverse\n    association has a scope. In this example a scope on the `post` association\n    would still prevent Rails from finding the inverse for the `comments`\n    association.\n\n    This will be the default for new apps in Rails 7. To opt in:\n\n    ```ruby\n    config.active_record.automatic_scope_inversing = true\n    ```\n\n    *Daniel Colson*, *Chris Bloom*",
    "project": "activerecord",
    "date_merged": 1633443725000,
    "author": "Daniel Colson",
    "sha": "518b9a301fe0d55c3ee1d01b86f2b83d71422a02",
    "pr": "43358",
    "merge_sha": "0a8c4dc0e0cc8874230b88ed4bbe72f68d947fab",
    "html": "<p>Allow automatic <code>inverse_of</code> detection for associations with scopes.</p>\n\n<p>Automatic <code>inverse_of</code> detection now works for associations with scopes. For<br />\nexample, the <code>comments</code> association here now automatically detects<br />\n<code>inverse_of: :post</code>, so we don’t need to pass that option:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Post</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:comments</span><span class=\"p\">,</span> <span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"n\">visible</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Comment</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">belongs_to</span> <span class=\"ss\">:post</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Note that the automatic detection still won’t work if the inverse<br />\nassociation has a scope. In this example a scope on the <code>post</code> association<br />\nwould still prevent Rails from finding the inverse for the <code>comments</code><br />\nassociation.</p>\n\n<p>This will be the default for new apps in Rails 7. To opt in:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">automatic_scope_inversing</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p><em>Daniel Colson</em>, <em>Chris Bloom</em></p>\n"
  },
  {
    "message": "*   Accept optional transaction args to `ActiveRecord::Locking::Pessimistic#with_lock`\n\n    `#with_lock` now accepts transaction options like `requires_new:`,\n    `isolation:`, and `joinable:`\n\n    *John Mileham*",
    "project": "activerecord",
    "date_merged": 1632438490000,
    "author": "John Mileham",
    "sha": "b5e670a9ddbf0d3efb59dfc616dba0078a230d61",
    "pr": "43224",
    "merge_sha": "78e7a7f6b78fd5559b5e7595a3792a8bfb7106d9",
    "html": "<p>Accept optional transaction args to <code>ActiveRecord::Locking::Pessimistic#with_lock</code></p>\n\n<p><code>#with_lock</code> now accepts transaction options like <code>requires_new:</code>,<br />\n<code>isolation:</code>, and <code>joinable:</code></p>\n\n<p><em>John Mileham</em></p>\n"
  },
  {
    "message": "*   Adds support for deferrable foreign key constraints in PostgreSQL.\n\n    By default, foreign key constraints in PostgreSQL are checked after each statement. This works for most use cases,\n    but becomes a major limitation when creating related records before the parent record is inserted into the database.\n    One example of this is looking up / creating a person via one or more unique alias.\n\n    ```ruby\n    Person.transaction do\n      alias = Alias\n        .create_with(user_id: SecureRandom.uuid)\n        .create_or_find_by(name: \"DHH\")\n\n      person = Person\n        .create_with(name: \"David Heinemeier Hansson\")\n        .create_or_find_by(id: alias.user_id)\n    end\n    ```\n\n    Using the default behavior, the transaction would fail when executing the first `INSERT` statement.\n\n    By passing the `:deferrable` option to the `add_foreign_key` statement in migrations, it's possible to defer this\n    check.\n\n    ```ruby\n    add_foreign_key :aliases, :person, deferrable: true\n    ```\n\n    Passing `deferrable: true` doesn't change the default behavior, but allows manually deferring the check using\n    `SET CONSTRAINTS ALL DEFERRED` within a transaction. This will cause the foreign keys to be checked after the\n    transaction.\n\n    It's also possible to adjust the default behavior from an immediate check (after the statement), to a deferred check\n    (after the transaction):\n\n    ```ruby\n    add_foreign_key :aliases, :person, deferrable: :deferred\n    ```\n\n    *Benedikt Deicke*",
    "project": "activerecord",
    "date_merged": 1632350596000,
    "author": "Benedikt Deicke",
    "sha": "25aa5c4bebf977504bd74e0d121b4964fd464cc8",
    "pr": "41487",
    "merge_sha": "6d42731ded6727b0aa2a2ff8782f6bdbd4dc17f8",
    "html": "<p>Adds support for deferrable foreign key constraints in PostgreSQL.</p>\n\n<p>By default, foreign key constraints in PostgreSQL are checked after each statement. This works for most use cases,<br />\nbut becomes a major limitation when creating related records before the parent record is inserted into the database.<br />\nOne example of this is looking up / creating a person via one or more unique alias.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Person</span><span class=\"p\">.</span><span class=\"nf\">transaction</span> <span class=\"k\">do</span>\n  <span class=\"k\">alias</span> <span class=\"o\">=</span> <span class=\"no\">Alias</span>\n    <span class=\"p\">.</span><span class=\"nf\">create_with</span><span class=\"p\">(</span><span class=\"ss\">user_id: </span><span class=\"no\">SecureRandom</span><span class=\"p\">.</span><span class=\"nf\">uuid</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nf\">create_or_find_by</span><span class=\"p\">(</span><span class=\"ss\">name: </span><span class=\"s2\">\"DHH\"</span><span class=\"p\">)</span>\n\n  <span class=\"n\">person</span> <span class=\"o\">=</span> <span class=\"no\">Person</span>\n    <span class=\"p\">.</span><span class=\"nf\">create_with</span><span class=\"p\">(</span><span class=\"ss\">name: </span><span class=\"s2\">\"David Heinemeier Hansson\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nf\">create_or_find_by</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"k\">alias</span><span class=\"p\">.</span><span class=\"nf\">user_id</span><span class=\"p\">)</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Using the default behavior, the transaction would fail when executing the first <code>INSERT</code> statement.</p>\n\n<p>By passing the <code>:deferrable</code> option to the <code>add_foreign_key</code> statement in migrations, it’s possible to defer this<br />\ncheck.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">add_foreign_key</span> <span class=\"ss\">:aliases</span><span class=\"p\">,</span> <span class=\"ss\">:person</span><span class=\"p\">,</span> <span class=\"ss\">deferrable: </span><span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p>Passing <code>deferrable: true</code> doesn’t change the default behavior, but allows manually deferring the check using<br />\n<code>SET CONSTRAINTS ALL DEFERRED</code> within a transaction. This will cause the foreign keys to be checked after the<br />\ntransaction.</p>\n\n<p>It’s also possible to adjust the default behavior from an immediate check (after the statement), to a deferred check<br />\n(after the transaction):</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">add_foreign_key</span> <span class=\"ss\">:aliases</span><span class=\"p\">,</span> <span class=\"ss\">:person</span><span class=\"p\">,</span> <span class=\"ss\">deferrable: :deferred</span>\n</code></pre></div></div>\n\n<p><em>Benedikt Deicke</em></p>\n"
  },
  {
    "message": "*   Allow configuring Postgres password through the socket URL.\n\n    For example:\n    ```ruby\n    ActiveRecord::DatabaseConfigurations::UrlConfig.new(\n      :production, :production, 'postgres:///?user=user&password=secret&dbname=app', {}\n    ).configuration_hash\n    ```\n\n    will now return,\n\n    ```ruby\n    { :user=>\"user\", :password=>\"secret\", :dbname=>\"app\", :adapter=>\"postgresql\" }\n    ```\n\n    *Abeid Ahmed*",
    "project": "activerecord",
    "date_merged": 1632349252000,
    "author": "Rafael Mendonça França",
    "sha": "b2db4c78a42d4d92ceecbf19790a126d8fb646b9",
    "pr": "42840",
    "merge_sha": "aa449a89df67526e43787f3cadc15319c4911413",
    "html": "<p>Allow configuring Postgres password through the socket URL.</p>\n\n<p>For example:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">DatabaseConfigurations</span><span class=\"o\">::</span><span class=\"no\">UrlConfig</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span>\n  <span class=\"ss\">:production</span><span class=\"p\">,</span> <span class=\"ss\">:production</span><span class=\"p\">,</span> <span class=\"s1\">'postgres:///?user=user&amp;password=secret&amp;dbname=app'</span><span class=\"p\">,</span> <span class=\"p\">{}</span>\n<span class=\"p\">).</span><span class=\"nf\">configuration_hash</span>\n</code></pre></div></div>\n\n<p>will now return,</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"p\">{</span> <span class=\"ss\">:user</span><span class=\"o\">=&gt;</span><span class=\"s2\">\"user\"</span><span class=\"p\">,</span> <span class=\"ss\">:password</span><span class=\"o\">=&gt;</span><span class=\"s2\">\"secret\"</span><span class=\"p\">,</span> <span class=\"ss\">:dbname</span><span class=\"o\">=&gt;</span><span class=\"s2\">\"app\"</span><span class=\"p\">,</span> <span class=\"ss\">:adapter</span><span class=\"o\">=&gt;</span><span class=\"s2\">\"postgresql\"</span> <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p><em>Abeid Ahmed</em></p>\n"
  },
  {
    "message": "*   PostgreSQL: support custom enum types\n\n    In migrations, use `create_enum` to add a new enum type, and `t.enum` to add a column.\n\n    ```ruby\n    def up\n      create_enum :mood, [\"happy\", \"sad\"]\n\n      change_table :cats do |t|\n        t.enum :current_mood, enum_type: \"mood\", default: \"happy\", null: false\n      end\n    end\n    ```\n\n    Enums will be presented correctly in `schema.rb`. Note that this is only supported by\n    the PostgreSQL adapter.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1632347297000,
    "author": "Alex Ghiculescu",
    "sha": "4eef348584087c81f1e32ad971baf632b0149cd4",
    "pr": "41469",
    "merge_sha": "31b4824744cfe26b8a5a360d2a169efdbca6c122",
    "html": "<p>PostgreSQL: support custom enum types</p>\n\n<p>In migrations, use <code>create_enum</code> to add a new enum type, and <code>t.enum</code> to add a column.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">def</span> <span class=\"nf\">up</span>\n  <span class=\"n\">create_enum</span> <span class=\"ss\">:mood</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s2\">\"happy\"</span><span class=\"p\">,</span> <span class=\"s2\">\"sad\"</span><span class=\"p\">]</span>\n\n  <span class=\"n\">change_table</span> <span class=\"ss\">:cats</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n    <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">enum</span> <span class=\"ss\">:current_mood</span><span class=\"p\">,</span> <span class=\"ss\">enum_type: </span><span class=\"s2\">\"mood\"</span><span class=\"p\">,</span> <span class=\"ss\">default: </span><span class=\"s2\">\"happy\"</span><span class=\"p\">,</span> <span class=\"ss\">null: </span><span class=\"kp\">false</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Enums will be presented correctly in <code>schema.rb</code>. Note that this is only supported by<br />\nthe PostgreSQL adapter.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Avoid COMMENT statements in PostgreSQL structure dumps\n\n    COMMENT statements are now omitted from the output of `db:structure:dump` when using PostgreSQL >= 11.\n    This allows loading the dump without a pgsql superuser account.\n\n    Fixes #36816, #43107.\n\n    *Janosch Müller*",
    "project": "activerecord",
    "date_merged": 1639161431000,
    "author": "Richard Macklin",
    "sha": "8f277ace31b240b2115f17561483f96076c07da9",
    "pr": "43834",
    "merge_sha": "85ad091cdb94d3cf84202c54a72a02a79eb5d3a2",
    "html": "<p>Avoid COMMENT statements in PostgreSQL structure dumps</p>\n\n<p>COMMENT statements are now omitted from the output of <code>db:structure:dump</code> when using PostgreSQL &gt;= 11.<br />\nThis allows loading the dump without a pgsql superuser account.</p>\n\n<p>Fixes #36816, #43107.</p>\n\n<p><em>Janosch Müller</em></p>\n"
  },
  {
    "message": "*   Add support for generated columns in PostgreSQL adapter\n\n    Generated columns are supported since version 12.0 of PostgreSQL. This adds\n    support of those to the PostgreSQL adapter.\n\n    ```ruby\n    create_table :users do |t|\n      t.string :name\n      t.virtual :name_upcased, type: :string, as: 'upper(name)', stored: true\n    end\n    ```\n\n    *Michał Begejowicz*",
    "project": "activerecord",
    "date_merged": 1631801073000,
    "author": "Michał Begejowicz",
    "sha": "2cf41d7a5eb2f3d09b14673d91a91c5de04d2c9e",
    "pr": "41856",
    "merge_sha": "e1a09e6e805611b14cf1c95d8d5bc442f26c9881",
    "html": "<p>Add support for generated columns in PostgreSQL adapter</p>\n\n<p>Generated columns are supported since version 12.0 of PostgreSQL. This adds<br />\nsupport of those to the PostgreSQL adapter.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">create_table</span> <span class=\"ss\">:users</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n  <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">string</span> <span class=\"ss\">:name</span>\n  <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">virtual</span> <span class=\"ss\">:name_upcased</span><span class=\"p\">,</span> <span class=\"ss\">type: :string</span><span class=\"p\">,</span> <span class=\"ss\">as: </span><span class=\"s1\">'upper(name)'</span><span class=\"p\">,</span> <span class=\"ss\">stored: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Michał Begejowicz</em></p>\n"
  },
  {
    "message": "*   Remove warning when overwriting existing scopes\n\n    Removes the following unnecessary warning message that appeared when overwriting existing scopes\n\n    ```\n    Creating scope :my_scope_name. Overwriting existing method \"MyClass.my_scope_name\" when overwriting existing scopes\n    ```\n\n     *Weston Ganger*",
    "project": "activerecord",
    "date_merged": 1631721806000,
    "author": "Weston Ganger",
    "sha": "0e8432e97404edf5a259374e6aa0cf47ce009273",
    "pr": "43204",
    "merge_sha": "f832fa58d38fb0747c9ce60903b1a01e65f1c332",
    "html": "<p>Remove warning when overwriting existing scopes</p>\n\n<p>Removes the following unnecessary warning message that appeared when overwriting existing scopes</p>\n\n<pre><code>Creating scope :my_scope_name. Overwriting existing method \"MyClass.my_scope_name\" when overwriting existing scopes\n</code></pre>\n\n<p><em>Weston Ganger</em></p>\n"
  },
  {
    "message": "*   Use full precision for `updated_at` in `insert_all`/`upsert_all`\n\n    `CURRENT_TIMESTAMP` provides differing precision depending on the database,\n    and not all databases support explicitly specifying additional precision.\n\n    Instead, we delegate to the new `connection.high_precision_current_timestamp`\n    for the SQL to produce a high precision timestamp on the current database.\n\n    Fixes #42992\n\n    *Sam Bostock*",
    "project": "activerecord",
    "date_merged": 1631647273000,
    "author": "Sam Bostock",
    "sha": "213c4c5b50be5e3205eb78a4caed25bb154c2e51",
    "pr": "42993",
    "merge_sha": "0b5c7210af13021aab488adea76cec04a0c218fc",
    "html": "<p>Use full precision for <code>updated_at</code> in <code>insert_all</code>/<code>upsert_all</code></p>\n\n<p><code>CURRENT_TIMESTAMP</code> provides differing precision depending on the database,<br />\nand not all databases support explicitly specifying additional precision.</p>\n\n<p>Instead, we delegate to the new <code>connection.high_precision_current_timestamp</code><br />\nfor the SQL to produce a high precision timestamp on the current database.</p>\n\n<p>Fixes #42992</p>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   Add ssl support for postgresql database tasks\n\n    Add `PGSSLMODE`, `PGSSLCERT`, `PGSSLKEY` and `PGSSLROOTCERT` to pg_env from database config\n    when running postgresql database tasks.\n\n    ```yaml\n    # config/database.yml\n\n    production:\n      sslmode: verify-full\n      sslcert: client.crt\n      sslkey: client.key\n      sslrootcert: ca.crt\n    ```\n\n    Environment variables\n\n    ```\n    PGSSLMODE=verify-full\n    PGSSLCERT=client.crt\n    PGSSLKEY=client.key\n    PGSSLROOTCERT=ca.crt\n    ```\n\n    Fixes #42994\n\n    *Michael Bayucot*",
    "project": "activerecord",
    "date_merged": 1639161431000,
    "author": "Richard Macklin",
    "sha": "8f277ace31b240b2115f17561483f96076c07da9",
    "pr": "43834",
    "merge_sha": "85ad091cdb94d3cf84202c54a72a02a79eb5d3a2",
    "html": "<p>Add ssl support for postgresql database tasks</p>\n\n<p>Add <code>PGSSLMODE</code>, <code>PGSSLCERT</code>, <code>PGSSLKEY</code> and <code>PGSSLROOTCERT</code> to pg_env from database config<br />\nwhen running postgresql database tasks.</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/database.yml</span>\n\n<span class=\"na\">production</span><span class=\"pi\">:</span>\n  <span class=\"na\">sslmode</span><span class=\"pi\">:</span> <span class=\"s\">verify-full</span>\n  <span class=\"na\">sslcert</span><span class=\"pi\">:</span> <span class=\"s\">client.crt</span>\n  <span class=\"na\">sslkey</span><span class=\"pi\">:</span> <span class=\"s\">client.key</span>\n  <span class=\"na\">sslrootcert</span><span class=\"pi\">:</span> <span class=\"s\">ca.crt</span>\n</code></pre></div></div>\n\n<p>Environment variables</p>\n\n<pre><code>PGSSLMODE=verify-full\nPGSSLCERT=client.crt\nPGSSLKEY=client.key\nPGSSLROOTCERT=ca.crt\n</code></pre>\n\n<p>Fixes #42994</p>\n\n<p><em>Michael Bayucot</em></p>\n"
  },
  {
    "message": "*   Avoid scoping update callbacks in `ActiveRecord::Relation#update!`.\n\n    Making it consistent with how scoping is applied only to the query in `ActiveRecord::Relation#update`\n    and not also to the callbacks from the update itself.\n\n    *Dylan Thacker-Smith*",
    "project": "activerecord",
    "date_merged": 1631208454000,
    "author": "Dylan Thacker-Smith",
    "sha": "de7ca905381d21e91b1f3398bb3008ab5eedf0ae",
    "pr": "43192",
    "merge_sha": "cf99be46c9aec7fe4576da7fc667c4d3994470d2",
    "html": "<p>Avoid scoping update callbacks in <code>ActiveRecord::Relation#update!</code>.</p>\n\n<p>Making it consistent with how scoping is applied only to the query in <code>ActiveRecord::Relation#update</code><br />\nand not also to the callbacks from the update itself.</p>\n\n<p><em>Dylan Thacker-Smith</em></p>\n"
  },
  {
    "message": "*   Fix 2 cases that inferred polymorphic class from the association's `foreign_type`\n    using `String#constantize` instead of the model's `polymorphic_class_for`.\n\n    When updating a polymorphic association, the old `foreign_type` was not inferred correctly when:\n    1. `touch`ing the previously associated record\n    2. updating the previously associated record's `counter_cache`\n\n    *Jimmy Bourassa*",
    "project": "activerecord",
    "date_merged": 1630996303000,
    "author": "Jimmy Bourassa",
    "sha": "2ea5ff9e13b9c5d0d5d25b2441efa81a2de2a262",
    "pr": "43148",
    "merge_sha": "061bf3156fb90ac6b8ec255dfa39492cf22d7b13",
    "html": "<p>Fix 2 cases that inferred polymorphic class from the association’s <code>foreign_type</code><br />\nusing <code>String#constantize</code> instead of the model’s <code>polymorphic_class_for</code>.</p>\n\n<p>When updating a polymorphic association, the old <code>foreign_type</code> was not inferred correctly when:</p>\n<ol>\n  <li><code>touch</code>ing the previously associated record</li>\n  <li>updating the previously associated record’s <code>counter_cache</code></li>\n</ol>\n\n<p><em>Jimmy Bourassa</em></p>\n"
  },
  {
    "message": "*   Add config option for ignoring tables when dumping the schema cache.\n\n    Applications can now be configured to ignore certain tables when dumping the schema cache.\n\n    The configuration option can table an array of tables:\n\n    ```ruby\n    config.active_record.schema_cache_ignored_tables = [\"ignored_table\", \"another_ignored_table\"]\n    ```\n\n    Or a regex:\n\n    ```ruby\n    config.active_record.schema_cache_ignored_tables = [/^_/]\n    ```\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1630010911000,
    "author": "eileencodes",
    "sha": "e3b4a462f7c0737258ee1c055126904c941cb424",
    "pr": "43075",
    "merge_sha": "b5fcf15383f946ecd49730e349c604b3a45c4ece",
    "html": "<p>Add config option for ignoring tables when dumping the schema cache.</p>\n\n<p>Applications can now be configured to ignore certain tables when dumping the schema cache.</p>\n\n<p>The configuration option can table an array of tables:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">schema_cache_ignored_tables</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"ignored_table\"</span><span class=\"p\">,</span> <span class=\"s2\">\"another_ignored_table\"</span><span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p>Or a regex:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">schema_cache_ignored_tables</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"sr\">/^_/</span><span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Make schema cache methods return consistent results.\n\n    Previously the schema cache methods `primary_keys`, `columns`, `columns_hash`, and `indexes`\n    would behave differently than one another when a table didn't exist and differently across\n    database adapters. This change unifies the behavior so each method behaves the same regardless\n    of adapter.\n\n    The behavior now is:\n\n    `columns`: (unchanged) raises a db error if the table does not exist.\n    `columns_hash`: (unchanged) raises a db error if the table does not exist.\n    `primary_keys`: (unchanged) returns `nil` if the table does not exist.\n    `indexes`: (changed for mysql2) returns `[]` if the table does not exist.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1630003612000,
    "author": "eileencodes",
    "sha": "e323e68a750c8dbc3b7ef156c99c3924c38a84c0",
    "pr": "43105",
    "merge_sha": "6c173357efc33df1a530ac5e3247ceebd50715d7",
    "html": "<p>Make schema cache methods return consistent results.</p>\n\n<p>Previously the schema cache methods <code>primary_keys</code>, <code>columns</code>, <code>columns_hash</code>, and <code>indexes</code><br />\nwould behave differently than one another when a table didn’t exist and differently across<br />\ndatabase adapters. This change unifies the behavior so each method behaves the same regardless<br />\nof adapter.</p>\n\n<p>The behavior now is:</p>\n\n<p><code>columns</code>: (unchanged) raises a db error if the table does not exist.<br />\n<code>columns_hash</code>: (unchanged) raises a db error if the table does not exist.<br />\n<code>primary_keys</code>: (unchanged) returns <code>nil</code> if the table does not exist.<br />\n<code>indexes</code>: (changed for mysql2) returns <code>[]</code> if the table does not exist.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Reestablish connection to previous database after after running `db:schema:load:name`\n\n    After running `db:schema:load:name` the previous connection is restored.\n\n    *Jacopo Beschi*",
    "project": "activerecord",
    "date_merged": 1629724802000,
    "author": "Jacopo",
    "sha": "718c71e05199bdaa1d601784ef8d5fde9041ba6a",
    "pr": "43050",
    "merge_sha": "a81aeb63a007ede2fe606c50539417dada9030c7",
    "html": "<p>Reestablish connection to previous database after after running <code>db:schema:load:name</code></p>\n\n<p>After running <code>db:schema:load:name</code> the previous connection is restored.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Add database config option `database_tasks`\n\n    If you would like to connect to an external database without any database\n    management tasks such as schema management, migrations, seeds, etc. you can set\n    the per database config option `database_tasks: false`\n\n    ```yaml\n    # config/database.yml\n\n    production:\n      primary:\n        database: my_database\n        adapter: mysql2\n      animals:\n        database: my_animals_database\n        adapter: mysql2\n        database_tasks: false\n    ```\n\n    *Weston Ganger*",
    "project": "activerecord",
    "date_merged": 1629142169000,
    "author": "Weston Ganger",
    "sha": "a77dd104ea9557d26d311d17a8b53c8ab7d7f8a8",
    "pr": "42794",
    "merge_sha": "86aeadc481a0ffff8d08845da17a81ec0f29000f",
    "html": "<p>Add database config option <code>database_tasks</code></p>\n\n<p>If you would like to connect to an external database without any database<br />\nmanagement tasks such as schema management, migrations, seeds, etc. you can set<br />\nthe per database config option <code>database_tasks: false</code></p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/database.yml</span>\n\n<span class=\"na\">production</span><span class=\"pi\">:</span>\n  <span class=\"na\">primary</span><span class=\"pi\">:</span>\n    <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">my_database</span>\n    <span class=\"na\">adapter</span><span class=\"pi\">:</span> <span class=\"s\">mysql2</span>\n  <span class=\"na\">animals</span><span class=\"pi\">:</span>\n    <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">my_animals_database</span>\n    <span class=\"na\">adapter</span><span class=\"pi\">:</span> <span class=\"s\">mysql2</span>\n    <span class=\"na\">database_tasks</span><span class=\"pi\">:</span> <span class=\"no\">false</span>\n</code></pre></div></div>\n\n<p><em>Weston Ganger</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::InternalMetadata` to not be broken by `config.active_record.record_timestamps = false`\n\n    Since the model always create the timestamp columns, it has to set them, otherwise it breaks\n    various DB management tasks.\n\n    Fixes #42983",
    "project": "activerecord",
    "date_merged": 1628686568000,
    "author": "Jean Boussier",
    "sha": "6fce5576ea20f432ce3a9be1bd814e1eaef63a33",
    "pr": "42995",
    "merge_sha": "ea2c5ec0b9c3211b4155b5ca70be0f2b067160ea",
    "html": "<p>Fix <code>ActiveRecord::InternalMetadata</code> to not be broken by <code>config.active_record.record_timestamps = false</code></p>\n\n<p>Since the model always create the timestamp columns, it has to set them, otherwise it breaks<br />\nvarious DB management tasks.</p>\n\n<p>Fixes #42983</p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::QueryLogs`.\n\n    Configurable tags can be automatically added to all SQL queries generated by Active Record.\n\n    ```ruby\n    # config/application.rb\n    module MyApp\n      class Application < Rails::Application\n        config.active_record.query_log_tags_enabled = true\n      end\n    end\n    ```\n\n    By default the application, controller and action details are added to the query tags:\n\n    ```ruby\n    class BooksController < ApplicationController\n      def index\n        @books = Book.all\n      end\n    end\n    ```\n\n    ```ruby\n    GET /books\n    # SELECT * FROM books /*application:MyApp;controller:books;action:index*/\n    ```\n\n    Custom tags containing static values and Procs can be defined in the application configuration:\n\n    ```ruby\n    config.active_record.query_log_tags = [\n      :application,\n      :controller,\n      :action,\n      {\n        custom_static: \"foo\",\n        custom_dynamic: -> { Time.now }\n      }\n    ]\n    ```\n\n    *Keeran Raj Hawoldar*, *Eileen M. Uchitelle*, *Kasper Timm Hansen*",
    "project": "activerecord",
    "date_merged": 1628519917000,
    "author": "Keeran Raj Hawoldar",
    "sha": "2408615154d039264810edbe628f4fc06d8cdc45",
    "pr": "42240",
    "merge_sha": "5422751be2864678ae4e16c68563476c050f22fe",
    "html": "<p>Add <code>ActiveRecord::QueryLogs</code>.</p>\n\n<p>Configurable tags can be automatically added to all SQL queries generated by Active Record.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/application.rb</span>\n<span class=\"k\">module</span> <span class=\"nn\">MyApp</span>\n  <span class=\"k\">class</span> <span class=\"nc\">Application</span> <span class=\"o\">&lt;</span> <span class=\"no\">Rails</span><span class=\"o\">::</span><span class=\"no\">Application</span>\n    <span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">query_log_tags_enabled</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>By default the application, controller and action details are added to the query tags:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">BooksController</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationController</span>\n  <span class=\"k\">def</span> <span class=\"nf\">index</span>\n    <span class=\"vi\">@books</span> <span class=\"o\">=</span> <span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">all</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">GET</span> <span class=\"sr\">/books\n# SELECT * FROM books /</span><span class=\"o\">*</span><span class=\"n\">application</span><span class=\"ss\">:MyApp</span><span class=\"p\">;</span><span class=\"n\">controller</span><span class=\"ss\">:books</span><span class=\"p\">;</span><span class=\"n\">action</span><span class=\"ss\">:index</span><span class=\"o\">*</span><span class=\"sr\">/\n</span></code></pre></div></div>\n\n<p>Custom tags containing static values and Procs can be defined in the application configuration:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">query_log_tags</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n  <span class=\"ss\">:application</span><span class=\"p\">,</span>\n  <span class=\"ss\">:controller</span><span class=\"p\">,</span>\n  <span class=\"ss\">:action</span><span class=\"p\">,</span>\n  <span class=\"p\">{</span>\n    <span class=\"ss\">custom_static: </span><span class=\"s2\">\"foo\"</span><span class=\"p\">,</span>\n    <span class=\"ss\">custom_dynamic: </span><span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"no\">Time</span><span class=\"p\">.</span><span class=\"nf\">now</span> <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">]</span>\n</code></pre></div></div>\n\n<p><em>Keeran Raj Hawoldar</em>, <em>Eileen M. Uchitelle</em>, <em>Kasper Timm Hansen</em></p>\n"
  },
  {
    "message": "*   Added support for multiple databases to `rails db:setup` and `rails db:reset`.\n\n    *Ryan Hall*",
    "project": "activerecord",
    "date_merged": 1628511700000,
    "author": "Ryan Hall",
    "sha": "0a296be9e1ad5bfb38eeb5b4b0bb8148422bedba",
    "pr": "42938",
    "merge_sha": "843c0a3fcde18011d9360762b07e0ab11910ec73",
    "html": "<p>Added support for multiple databases to <code>rails db:setup</code> and <code>rails db:reset</code>.</p>\n\n<p><em>Ryan Hall</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Relation#structurally_compatible?`.\n\n    Adds a query method by which a user can tell if the relation that they're\n    about to use for `#or` or `#and` is structurally compatible with the\n    receiver.\n\n    *Kevin Newton*",
    "project": "activerecord",
    "date_merged": 1628091422000,
    "author": "Kevin Newton",
    "sha": "d31071a5a2dba4690416287158fff6ddeb010c1d",
    "pr": "41841",
    "merge_sha": "21f9db1a4261263834ecadd4d9dc1043736288ff",
    "html": "<p>Add <code>ActiveRecord::Relation#structurally_compatible?</code>.</p>\n\n<p>Adds a query method by which a user can tell if the relation that they’re<br />\nabout to use for <code>#or</code> or <code>#and</code> is structurally compatible with the<br />\nreceiver.</p>\n\n<p><em>Kevin Newton</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::QueryMethods#in_order_of`.\n\n    This allows you to specify an explicit order that you'd like records\n    returned in based on a SQL expression. By default, this will be accomplished\n    using a case statement, as in:\n\n    ```ruby\n    Post.in_order_of(:id, [3, 5, 1])\n    ```\n\n    will generate the SQL:\n\n    ```sql\n    SELECT \"posts\".* FROM \"posts\" ORDER BY CASE \"posts\".\"id\" WHEN 3 THEN 1 WHEN 5 THEN 2 WHEN 1 THEN 3 ELSE 4 END ASC\n    ```\n\n    However, because this functionality is built into MySQL in the form of the\n    `FIELD` function, that connection adapter will generate the following SQL\n    instead:\n\n    ```sql\n    SELECT \"posts\".* FROM \"posts\" ORDER BY FIELD(\"posts\".\"id\", 1, 5, 3) DESC\n    ```\n\n    *Kevin Newton*",
    "project": "activerecord",
    "date_merged": 1628090227000,
    "author": "Kevin Newton",
    "sha": "459ca2258c26aac2adfe0adfae4f195673a5ef85",
    "pr": "42061",
    "merge_sha": "14540a50a08d8918b29fbd5b04a11df3a0e520ad",
    "html": "<p>Add <code>ActiveRecord::QueryMethods#in_order_of</code>.</p>\n\n<p>This allows you to specify an explicit order that you’d like records<br />\nreturned in based on a SQL expression. By default, this will be accomplished<br />\nusing a case statement, as in:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">in_order_of</span><span class=\"p\">(</span><span class=\"ss\">:id</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">])</span>\n</code></pre></div></div>\n\n<p>will generate the SQL:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">SELECT</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"k\">CASE</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span> <span class=\"k\">WHEN</span> <span class=\"mi\">3</span> <span class=\"k\">THEN</span> <span class=\"mi\">1</span> <span class=\"k\">WHEN</span> <span class=\"mi\">5</span> <span class=\"k\">THEN</span> <span class=\"mi\">2</span> <span class=\"k\">WHEN</span> <span class=\"mi\">1</span> <span class=\"k\">THEN</span> <span class=\"mi\">3</span> <span class=\"k\">ELSE</span> <span class=\"mi\">4</span> <span class=\"k\">END</span> <span class=\"k\">ASC</span>\n</code></pre></div></div>\n\n<p>However, because this functionality is built into MySQL in the form of the<br />\n<code>FIELD</code> function, that connection adapter will generate the following SQL<br />\ninstead:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">SELECT</span> <span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"nv\">\"posts\"</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">FIELD</span><span class=\"p\">(</span><span class=\"nv\">\"posts\"</span><span class=\"p\">.</span><span class=\"nv\">\"id\"</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"k\">DESC</span>\n</code></pre></div></div>\n\n<p><em>Kevin Newton</em></p>\n"
  },
  {
    "message": "*   Fix `eager_loading?` when ordering with `Symbol`.\n\n    `eager_loading?` is triggered correctly when using `order` with symbols.\n\n    ```ruby\n    scope = Post.includes(:comments).order(:\"comments.label\")\n    => true\n    ```\n\n    *Jacopo Beschi*",
    "project": "activerecord",
    "date_merged": 1628814280000,
    "author": "Petrik de Heus",
    "sha": "68283345551d10eee260c3a74f1f8d069d1d8200",
    "pr": "42967",
    "merge_sha": "0965b67bf71b9ce02fdc25912ea0a9f90dba20ec",
    "html": "<p>Fix <code>eager_loading?</code> when ordering with <code>Symbol</code>.</p>\n\n<p><code>eager_loading?</code> is triggered correctly when using <code>order</code> with symbols.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">scope</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"ss\">:comments</span><span class=\"p\">).</span><span class=\"nf\">order</span><span class=\"p\">(</span><span class=\"ss\">:\"comments.label\"</span><span class=\"p\">)</span>\n<span class=\"o\">=&gt;</span> <span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Two change tracking methods are added for `belongs_to` associations.\n\n    The `association_changed?` method (assuming an association named `:association`) returns true\n    if a different associated object has been assigned and the foreign key will be updated in the\n    next save.\n\n    The `association_previously_changed?` method returns true if the previous save updated the\n    association to reference a different associated object.\n\n    *George Claghorn*",
    "project": "activerecord",
    "date_merged": 1626746194000,
    "author": "George Claghorn",
    "sha": "fc3acf2e8dcf01f077664f98ad0c0e52539c27e2",
    "pr": "42751",
    "merge_sha": "a6223bbc72a6ba3de7233368f7409ad089b7dc02",
    "html": "<p>Two change tracking methods are added for <code>belongs_to</code> associations.</p>\n\n<p>The <code>association_changed?</code> method (assuming an association named <code>:association</code>) returns true<br />\nif a different associated object has been assigned and the foreign key will be updated in the<br />\nnext save.</p>\n\n<p>The <code>association_previously_changed?</code> method returns true if the previous save updated the<br />\nassociation to reference a different associated object.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Add option to disable schema dump per-database.\n\n    Dumping the schema is on by default for all databases in an application. To turn it off for a\n    specific database, use the `schema_dump` option:\n\n    ```yaml\n    # config/database.yml\n\n    production:\n      schema_dump: false\n    ```\n\n    *Luis Vasconcellos*, *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add option to disable schema dump per-database.</p>\n\n<p>Dumping the schema is on by default for all databases in an application. To turn it off for a<br />\nspecific database, use the <code>schema_dump</code> option:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/database.yml</span>\n\n<span class=\"na\">production</span><span class=\"pi\">:</span>\n  <span class=\"na\">schema_dump</span><span class=\"pi\">:</span> <span class=\"no\">false</span>\n</code></pre></div></div>\n\n<p><em>Luis Vasconcellos</em>, <em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Fix `eager_loading?` when ordering with `Hash` syntax.\n\n    `eager_loading?` is triggered correctly when using `order` with hash syntax\n    on an outer table.\n\n    ```ruby\n    Post.includes(:comments).order({ \"comments.label\": :ASC }).eager_loading?\n    # => true\n    ```\n\n    *Jacopo Beschi*",
    "project": "activerecord",
    "date_merged": 1628814280000,
    "author": "Petrik de Heus",
    "sha": "68283345551d10eee260c3a74f1f8d069d1d8200",
    "pr": "42967",
    "merge_sha": "0965b67bf71b9ce02fdc25912ea0a9f90dba20ec",
    "html": "<p>Fix <code>eager_loading?</code> when ordering with <code>Hash</code> syntax.</p>\n\n<p><code>eager_loading?</code> is triggered correctly when using <code>order</code> with hash syntax<br />\non an outer table.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"ss\">:comments</span><span class=\"p\">).</span><span class=\"nf\">order</span><span class=\"p\">({</span> <span class=\"s2\">\"comments.label\"</span><span class=\"p\">:</span> <span class=\"ss\">:ASC</span> <span class=\"p\">}).</span><span class=\"nf\">eager_loading?</span>\n<span class=\"c1\"># =&gt; true</span>\n</code></pre></div></div>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Move the forcing of clear text encoding to the `ActiveRecord::Encryption::Encryptor`.\n\n    Fixes #42699.\n\n    *J Smith*",
    "project": "activerecord",
    "date_merged": 1626280850000,
    "author": "J Smith",
    "sha": "35e88cd6d90d1be3116870ffb8e5e12faadbb79b",
    "pr": "42778",
    "merge_sha": "7127105ccacfaf8da6df493b583a19cd56c46ab3",
    "html": "<p>Move the forcing of clear text encoding to the <code>ActiveRecord::Encryption::Encryptor</code>.</p>\n\n<p>Fixes #42699.</p>\n\n<p><em>J Smith</em></p>\n"
  },
  {
    "message": "*   `partial_inserts` is now disabled by default in new apps.\n\n    This will be the default for new apps in Rails 7. To opt in:\n\n    ```ruby\n    config.active_record.partial_inserts = true\n    ```\n\n    If a migration removes the default value of a column, this option\n    would cause old processes to no longer be able to create new records.\n\n    If you need to remove a column, you should first use `ignored_columns`\n    to stop using it.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1626167070000,
    "author": "Jean Boussier",
    "sha": "91082730cc8ec7eb3d7f5fb44e8484cc62227c21",
    "pr": "42769",
    "merge_sha": "a2cb0b23b7233371d8a2e0f843885dae330da2b7",
    "html": "<p><code>partial_inserts</code> is now disabled by default in new apps.</p>\n\n<p>This will be the default for new apps in Rails 7. To opt in:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">partial_inserts</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p>If a migration removes the default value of a column, this option<br />\nwould cause old processes to no longer be able to create new records.</p>\n\n<p>If you need to remove a column, you should first use <code>ignored_columns</code><br />\nto stop using it.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Rails can now verify foreign keys after loading fixtures in tests.\n\n    This will be the default for new apps in Rails 7. To opt in:\n\n    ```ruby\n    config.active_record.verify_foreign_keys_for_fixtures = true\n    ```\n\n    Tests will not run if there is a foreign key constraint violation in your fixture data.\n\n    The feature is supported by SQLite and PostgreSQL, other adapters can also add support for it.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1626156163000,
    "author": "Alex Ghiculescu",
    "sha": "32ff2c2bf3e0d55d58c919298ee0084fe394b939",
    "pr": "42674",
    "merge_sha": "bd720c979158a2665a87ddd00d14392d254e15bb",
    "html": "<p>Rails can now verify foreign keys after loading fixtures in tests.</p>\n\n<p>This will be the default for new apps in Rails 7. To opt in:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">verify_foreign_keys_for_fixtures</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p>Tests will not run if there is a foreign key constraint violation in your fixture data.</p>\n\n<p>The feature is supported by SQLite and PostgreSQL, other adapters can also add support for it.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Clear cached `has_one` association after setting `belongs_to` association to `nil`.\n\n    After setting a `belongs_to` relation to `nil` and updating an unrelated attribute on the owner,\n    the owner should still return `nil` on the `has_one` relation.\n\n    Fixes #42597.\n\n    *Michiel de Mare*",
    "project": "activerecord",
    "date_merged": 1625295534000,
    "author": "Michiel de Mare",
    "sha": "484303d69843192a7421b2c3f46fd38f619b04b1",
    "pr": "42601",
    "merge_sha": "ccb66572b1f21c414bc3c3f845b16b1e8fb35fb8",
    "html": "<p>Clear cached <code>has_one</code> association after setting <code>belongs_to</code> association to <code>nil</code>.</p>\n\n<p>After setting a <code>belongs_to</code> relation to <code>nil</code> and updating an unrelated attribute on the owner,<br />\nthe owner should still return <code>nil</code> on the <code>has_one</code> relation.</p>\n\n<p>Fixes #42597.</p>\n\n<p><em>Michiel de Mare</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "activerecord",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   Adds support for `if_not_exists` to `add_foreign_key` and `if_exists` to `remove_foreign_key`.\n\n    Applications can set their migrations to ignore exceptions raised when adding a foreign key\n    that already exists or when removing a foreign key that does not exist.\n\n    Example Usage:\n\n    ```ruby\n    class AddAuthorsForeignKeyToArticles < ActiveRecord::Migration[7.0]\n      def change\n        add_foreign_key :articles, :authors, if_not_exists: true\n      end\n    end\n    ```\n\n    ```ruby\n    class RemoveAuthorsForeignKeyFromArticles < ActiveRecord::Migration[7.0]\n      def change\n        remove_foreign_key :articles, :authors, if_exists: true\n      end\n    end\n    ```\n\n    *Roberto Miranda*",
    "project": "activerecord",
    "date_merged": 1624817566000,
    "author": "Roberto Miranda",
    "sha": "63c2efaa16236d26865bbf5d8771ab8f8e37920d",
    "pr": "42616",
    "merge_sha": "7c77698263fd083b630f00c1578141972cf6f795",
    "html": "<p>Adds support for <code>if_not_exists</code> to <code>add_foreign_key</code> and <code>if_exists</code> to <code>remove_foreign_key</code>.</p>\n\n<p>Applications can set their migrations to ignore exceptions raised when adding a foreign key<br />\nthat already exists or when removing a foreign key that does not exist.</p>\n\n<p>Example Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">AddAuthorsForeignKeyToArticles</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Migration</span><span class=\"p\">[</span><span class=\"mf\">7.0</span><span class=\"p\">]</span>\n  <span class=\"k\">def</span> <span class=\"nf\">change</span>\n    <span class=\"n\">add_foreign_key</span> <span class=\"ss\">:articles</span><span class=\"p\">,</span> <span class=\"ss\">:authors</span><span class=\"p\">,</span> <span class=\"ss\">if_not_exists: </span><span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">RemoveAuthorsForeignKeyFromArticles</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Migration</span><span class=\"p\">[</span><span class=\"mf\">7.0</span><span class=\"p\">]</span>\n  <span class=\"k\">def</span> <span class=\"nf\">change</span>\n    <span class=\"n\">remove_foreign_key</span> <span class=\"ss\">:articles</span><span class=\"p\">,</span> <span class=\"ss\">:authors</span><span class=\"p\">,</span> <span class=\"ss\">if_exists: </span><span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Roberto Miranda</em></p>\n"
  },
  {
    "message": "*   Prevent polluting ENV during postgresql structure dump/load.\n\n    Some configuration parameters were provided to pg_dump / psql via\n    environment variables which persisted beyond the command being run, and may\n    have caused subsequent commands and connections to fail. Tasks running\n    across multiple postgresql databases like `rails db:test:prepare` may have\n    been affected.\n\n    *Samuel Cochran*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Prevent polluting ENV during postgresql structure dump/load.</p>\n\n<p>Some configuration parameters were provided to pg_dump / psql via<br />\nenvironment variables which persisted beyond the command being run, and may<br />\nhave caused subsequent commands and connections to fail. Tasks running<br />\nacross multiple postgresql databases like <code>rails db:test:prepare</code> may have<br />\nbeen affected.</p>\n\n<p><em>Samuel Cochran</em></p>\n"
  },
  {
    "message": "*   Set precision 6 by default for `datetime` columns.\n\n    By default, datetime columns will have microseconds precision instead of seconds precision.\n\n    *Roberto Miranda*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Set precision 6 by default for <code>datetime</code> columns.</p>\n\n<p>By default, datetime columns will have microseconds precision instead of seconds precision.</p>\n\n<p><em>Roberto Miranda</em></p>\n"
  },
  {
    "message": "*   Allow preloading of associations with instance dependent scopes.\n\n    *John Hawthorn*, *John Crepezzi*, *Adam Hess*, *Eileen M. Uchitelle*, *Dinah Shi*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow preloading of associations with instance dependent scopes.</p>\n\n<p><em>John Hawthorn</em>, <em>John Crepezzi</em>, <em>Adam Hess</em>, <em>Eileen M. Uchitelle</em>, <em>Dinah Shi</em></p>\n"
  },
  {
    "message": "*   Do not try to rollback transactions that failed due to a `ActiveRecord::TransactionRollbackError`.\n\n    *Jamie McCarthy*",
    "project": "activerecord",
    "date_merged": 1623950858000,
    "author": "Rafael Mendonça França",
    "sha": "115d4a3994a92abc5010ad074d44e68c24debc21",
    "pr": "30922",
    "merge_sha": "7eeab35c42ca5a4a633cf69bac46b3c798639c32",
    "html": "<p>Do not try to rollback transactions that failed due to a <code>ActiveRecord::TransactionRollbackError</code>.</p>\n\n<p><em>Jamie McCarthy</em></p>\n"
  },
  {
    "message": "*   Active Record Encryption will now encode values as UTF-8 when using deterministic\n    encryption. The encoding is part of the encrypted payload, so different encodings for\n    different values result in different ciphertexts. This can break unique constraints and\n    queries.\n\n    The new behavior is configurable via `active_record.encryption.forced_encoding_for_deterministic_encryption`\n    that is `Encoding::UTF_8` by default. It can be disabled by setting it to `nil`.\n\n    *Jorge Manrubia*",
    "project": "activerecord",
    "date_merged": 1623926078000,
    "author": "Jorge Manrubia",
    "sha": "abfd2cc7a6eab91c558a30f7376c1b994055b2f4",
    "pr": "42491",
    "merge_sha": "0ea82ee99ef1e7e91bf2aea150c5bdb153954cb2",
    "html": "<p>Active Record Encryption will now encode values as UTF-8 when using deterministic<br />\nencryption. The encoding is part of the encrypted payload, so different encodings for<br />\ndifferent values result in different ciphertexts. This can break unique constraints and<br />\nqueries.</p>\n\n<p>The new behavior is configurable via <code>active_record.encryption.forced_encoding_for_deterministic_encryption</code><br />\nthat is <code>Encoding::UTF_8</code> by default. It can be disabled by setting it to <code>nil</code>.</p>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   The MySQL adapter now cast numbers and booleans bind parameters to string for safety reasons.\n\n    When comparing a string and a number in a query, MySQL converts the string to a number. So for\n    instance `\"foo\" = 0`, will implicitly cast `\"foo\"` to `0` and will evaluate to `TRUE` which can\n    lead to security vulnerabilities.\n\n    Active Record already protect against that vulnerability when it knows the type of the column\n    being compared, however until now it was still vulnerable when using bind parameters:\n\n    ```ruby\n    User.where(\"login_token = ?\", 0).first\n    ```\n\n    Would perform:\n\n    ```sql\n    SELECT * FROM `users` WHERE `login_token` = 0 LIMIT 1;\n    ```\n\n    Now it will perform:\n\n    ```sql\n    SELECT * FROM `users` WHERE `login_token` = '0' LIMIT 1;\n    ```\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1626179618000,
    "author": "alkeshghorpade",
    "sha": "a6ce872ec6a63085586a29ce9231567be6fbcacf",
    "pr": "42772",
    "merge_sha": "75d6ea3c99f3bc0eb7104b46db2a285c064893a2",
    "html": "<p>The MySQL adapter now cast numbers and booleans bind parameters to string for safety reasons.</p>\n\n<p>When comparing a string and a number in a query, MySQL converts the string to a number. So for<br />\ninstance <code>\"foo\" = 0</code>, will implicitly cast <code>\"foo\"</code> to <code>0</code> and will evaluate to <code>TRUE</code> which can<br />\nlead to security vulnerabilities.</p>\n\n<p>Active Record already protect against that vulnerability when it knows the type of the column<br />\nbeing compared, however until now it was still vulnerable when using bind parameters:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"s2\">\"login_token = ?\"</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">).</span><span class=\"nf\">first</span>\n</code></pre></div></div>\n\n<p>Would perform:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"nv\">`users`</span> <span class=\"k\">WHERE</span> <span class=\"nv\">`login_token`</span> <span class=\"o\">=</span> <span class=\"mi\">0</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>Now it will perform:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"nv\">`users`</span> <span class=\"k\">WHERE</span> <span class=\"nv\">`login_token`</span> <span class=\"o\">=</span> <span class=\"s1\">'0'</span> <span class=\"k\">LIMIT</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fixture configurations (`_fixture`) are now strictly validated.\n\n    If an error will be raised if that entry contains unknown keys while previously it\n    would silently have no effects.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1623759085000,
    "author": "Jean Boussier",
    "sha": "fccbcd65747984a04a23fe7903c8216705d933c7",
    "pr": "42490",
    "merge_sha": "c35a9e234869202000212bc9e6682be1bcf7bb44",
    "html": "<p>Fixture configurations (<code>_fixture</code>) are now strictly validated.</p>\n\n<p>If an error will be raised if that entry contains unknown keys while previously it<br />\nwould silently have no effects.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Base.update!` that works like `ActiveRecord::Base.update` but raises exceptions.\n\n    This allows for the same behavior as the instance method `#update!` at a class level.\n\n    ```ruby\n    Person.update!(:all, state: \"confirmed\")\n    ```\n\n    *Dorian Marié*",
    "project": "activerecord",
    "date_merged": 1623328667000,
    "author": "Zachary Scott",
    "sha": "50dce5dea417b355990ed8bbcc40971b76769b01",
    "pr": "42423",
    "merge_sha": "4a85239c3eab25bc16310a121b20d381ac5c6bc1",
    "html": "<p>Add <code>ActiveRecord::Base.update!</code> that works like <code>ActiveRecord::Base.update</code> but raises exceptions.</p>\n\n<p>This allows for the same behavior as the instance method <code>#update!</code> at a class level.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Person</span><span class=\"p\">.</span><span class=\"nf\">update!</span><span class=\"p\">(</span><span class=\"ss\">:all</span><span class=\"p\">,</span> <span class=\"ss\">state: </span><span class=\"s2\">\"confirmed\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Dorian Marié</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Base#attributes_for_database`.\n\n    Returns attributes with values for assignment to the database.\n\n    *Chris Salzberg*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add <code>ActiveRecord::Base#attributes_for_database</code>.</p>\n\n<p>Returns attributes with values for assignment to the database.</p>\n\n<p><em>Chris Salzberg</em></p>\n"
  },
  {
    "message": "*   Use an empty query to check if the PostgreSQL connection is still active.\n\n    An empty query is faster than `SELECT 1`.\n\n    *Heinrich Lee Yu*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Use an empty query to check if the PostgreSQL connection is still active.</p>\n\n<p>An empty query is faster than <code>SELECT 1</code>.</p>\n\n<p><em>Heinrich Lee Yu</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Base#previously_persisted?`.\n\n    Returns `true` if the object has been previously persisted but now it has been deleted.",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add <code>ActiveRecord::Base#previously_persisted?</code>.</p>\n\n<p>Returns <code>true</code> if the object has been previously persisted but now it has been deleted.</p>\n"
  },
  {
    "message": "*   Deprecate `partial_writes` in favor of `partial_inserts` and `partial_updates`.\n\n    This allows to have a different behavior on update and create.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1622706363000,
    "author": "Jean Boussier",
    "sha": "125987e35d7298c80d3be7ec39714b81c90f52a6",
    "pr": "42355",
    "merge_sha": "d3f4db9e95a475822c02b29241a5d07cbcff6fd5",
    "html": "<p>Deprecate <code>partial_writes</code> in favor of <code>partial_inserts</code> and <code>partial_updates</code>.</p>\n\n<p>This allows to have a different behavior on update and create.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix compatibility with `psych >= 4`.\n\n    Starting in Psych 4.0.0 `YAML.load` behaves like `YAML.safe_load`. To preserve compatibility,\n    Active Record's schema cache loader and `YAMLColumn` now uses `YAML.unsafe_load` if available.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1621427633000,
    "author": "Jean Boussier",
    "sha": "1e56b1d1152e8ab74203db30625116844614cc78",
    "pr": "42257",
    "merge_sha": "c453a5fa88e89bc0bc8efde3b397f2464712bb49",
    "html": "<p>Fix compatibility with <code>psych &gt;= 4</code>.</p>\n\n<p>Starting in Psych 4.0.0 <code>YAML.load</code> behaves like <code>YAML.safe_load</code>. To preserve compatibility,<br />\nActive Record’s schema cache loader and <code>YAMLColumn</code> now uses <code>YAML.unsafe_load</code> if available.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   `ActiveRecord::Base.logger` is now a `class_attribute`.\n\n    This means it can no longer be accessed directly through `@@logger`, and that setting `logger =`\n    on a subclass won't change the parent's logger.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1621420103000,
    "author": "Jean Boussier",
    "sha": "dcc2530af74cf6355a9206bb1d0b084a734fae3e",
    "pr": "42237",
    "merge_sha": "811f7471d1e641c3c97ac16be5950395290053f4",
    "html": "<p><code>ActiveRecord::Base.logger</code> is now a <code>class_attribute</code>.</p>\n\n<p>This means it can no longer be accessed directly through <code>@@logger</code>, and that setting <code>logger =</code><br />\non a subclass won’t change the parent’s logger.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add `.asc.nulls_first` for all databases. Unfortunately MySQL still doesn't like `nulls_last`.\n\n    *Keenan Brock*",
    "project": "activerecord",
    "date_merged": 1621392317000,
    "author": "Keenan Brock",
    "sha": "b775f0cbdc58653638f3a47daba3b71646d77536",
    "pr": "42245",
    "merge_sha": "9614d0bdc8c211b5da4471367399a713de9d38a9",
    "html": "<p>Add <code>.asc.nulls_first</code> for all databases. Unfortunately MySQL still doesn’t like <code>nulls_last</code>.</p>\n\n<p><em>Keenan Brock</em></p>\n"
  },
  {
    "message": "*   Improve performance of `one?` and `many?` by limiting the generated count query to 2 results.\n\n    *Gonzalo Riestra*",
    "project": "activerecord",
    "date_merged": 1620931860000,
    "author": "Gonzalo Riestra",
    "sha": "b3caf0c99aea48f6738777f722863159058ec3be",
    "pr": "42143",
    "merge_sha": "67de5727ed2dfbf0c46b1effb672cf09b5aac8e6",
    "html": "<p>Improve performance of <code>one?</code> and <code>many?</code> by limiting the generated count query to 2 results.</p>\n\n<p><em>Gonzalo Riestra</em></p>\n"
  },
  {
    "message": "*   Don't check type when using `if_not_exists` on `add_column`.\n\n    Previously, if a migration called `add_column` with the `if_not_exists` option set to true\n    the `column_exists?` check would look for a column with the same name and type as the migration.\n\n    Recently it was discovered that the type passed to the migration is not always the same type\n    as the column after migration. For example a column set to `:mediumblob` in the migration will\n    be casted to `binary` when calling `column.type`. Since there is no straightforward way to cast\n    the type to the database type without running the migration, we opted to drop the type check from\n    `add_column`. This means that migrations adding a duplicate column with a different type will no\n    longer raise an error.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1620917187000,
    "author": "eileencodes",
    "sha": "da2c6eff74fda1636446ea1566ee4f8ac9300a50",
    "pr": "42212",
    "merge_sha": "e2b09c52ca48b85b00e956bd520a695d59426495",
    "html": "<p>Don’t check type when using <code>if_not_exists</code> on <code>add_column</code>.</p>\n\n<p>Previously, if a migration called <code>add_column</code> with the <code>if_not_exists</code> option set to true<br />\nthe <code>column_exists?</code> check would look for a column with the same name and type as the migration.</p>\n\n<p>Recently it was discovered that the type passed to the migration is not always the same type<br />\nas the column after migration. For example a column set to <code>:mediumblob</code> in the migration will<br />\nbe casted to <code>binary</code> when calling <code>column.type</code>. Since there is no straightforward way to cast<br />\nthe type to the database type without running the migration, we opted to drop the type check from<br />\n<code>add_column</code>. This means that migrations adding a duplicate column with a different type will no<br />\nlonger raise an error.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Log a warning message when running SQLite in production.\n\n    Using SQLite in production ENV is generally discouraged. SQLite is also the default adapter\n    in a new Rails application.\n    For the above reasons log a warning message when running SQLite in production.\n\n    The warning can be disabled by setting `config.active_record.sqlite3_production_warning=false`.\n\n    *Jacopo Beschi*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Log a warning message when running SQLite in production.</p>\n\n<p>Using SQLite in production ENV is generally discouraged. SQLite is also the default adapter<br />\nin a new Rails application.<br />\nFor the above reasons log a warning message when running SQLite in production.</p>\n\n<p>The warning can be disabled by setting <code>config.active_record.sqlite3_production_warning=false</code>.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Add option to disable joins for `has_one` associations.\n\n    In a multiple database application, associations can't join across\n    databases. When set, this option instructs Rails to generate 2 or\n    more queries rather than generating joins for `has_one` associations.\n\n    Set the option on a has one through association:\n\n    ```ruby\n    class Person\n      has_one :dog\n      has_one :veterinarian, through: :dog, disable_joins: true\n    end\n    ```\n\n    Then instead of generating join SQL, two queries are used for `@person.veterinarian`:\n\n    ```\n    SELECT \"dogs\".\"id\" FROM \"dogs\" WHERE \"dogs\".\"person_id\" = ?  [[\"person_id\", 1]]\n    SELECT \"veterinarians\".* FROM \"veterinarians\" WHERE \"veterinarians\".\"dog_id\" = ?  [[\"dog_id\", 1]]\n    ```\n\n    *Sarah Vessels*, *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1620393676000,
    "author": "Sarah Vessels",
    "sha": "f7d7a22d018c26181c9eb4254f50a77a7ece17e6",
    "pr": "42079",
    "merge_sha": "226f22e8433eb9bd781e4063a2e6d4f4ace2d093",
    "html": "<p>Add option to disable joins for <code>has_one</code> associations.</p>\n\n<p>In a multiple database application, associations can’t join across<br />\ndatabases. When set, this option instructs Rails to generate 2 or<br />\nmore queries rather than generating joins for <code>has_one</code> associations.</p>\n\n<p>Set the option on a has one through association:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Person</span>\n  <span class=\"n\">has_one</span> <span class=\"ss\">:dog</span>\n  <span class=\"n\">has_one</span> <span class=\"ss\">:veterinarian</span><span class=\"p\">,</span> <span class=\"ss\">through: :dog</span><span class=\"p\">,</span> <span class=\"ss\">disable_joins: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Then instead of generating join SQL, two queries are used for <code>@person.veterinarian</code>:</p>\n\n<pre><code>SELECT \"dogs\".\"id\" FROM \"dogs\" WHERE \"dogs\".\"person_id\" = ?  [[\"person_id\", 1]]\nSELECT \"veterinarians\".* FROM \"veterinarians\" WHERE \"veterinarians\".\"dog_id\" = ?  [[\"dog_id\", 1]]\n</code></pre>\n\n<p><em>Sarah Vessels</em>, <em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   `Arel::Visitors::Dot` now renders a complete set of properties when visiting\n    `Arel::Nodes::SelectCore`, `SelectStatement`, `InsertStatement`, `UpdateStatement`, and\n    `DeleteStatement`, which fixes #42026. Previously, some properties were omitted.\n\n    *Mike Dalessio*",
    "project": "activerecord",
    "date_merged": 1620060086000,
    "author": "Mike Dalessio",
    "sha": "d478b0f9071506e911d1beb32f5aa3d0ef16364f",
    "pr": "42128",
    "merge_sha": "ced1da9c8dd8cf3ef89273017d2e4385f25147cc",
    "html": "<p><code>Arel::Visitors::Dot</code> now renders a complete set of properties when visiting<br />\n<code>Arel::Nodes::SelectCore</code>, <code>SelectStatement</code>, <code>InsertStatement</code>, <code>UpdateStatement</code>, and<br />\n<code>DeleteStatement</code>, which fixes #42026. Previously, some properties were omitted.</p>\n\n<p><em>Mike Dalessio</em></p>\n"
  },
  {
    "message": "*   `Arel::Visitors::Dot` now supports `Arel::Nodes::Bin`, `Case`, `CurrentRow`, `Distinct`,\n    `DistinctOn`, `Else`, `Except`, `InfixOperation`, `Intersect`, `Lock`, `NotRegexp`, `Quoted`,\n    `Regexp`, `UnaryOperation`, `Union`, `UnionAll`, `When`, and `With`. Previously, these node\n    types caused an exception to be raised by `Arel::Visitors::Dot#accept`.\n\n    *Mike Dalessio*",
    "project": "activerecord",
    "date_merged": 1620060086000,
    "author": "Mike Dalessio",
    "sha": "c4fc11a3b26a5efdf16d9c701f8e8e5358b55773",
    "pr": "42128",
    "merge_sha": "ced1da9c8dd8cf3ef89273017d2e4385f25147cc",
    "html": "<p><code>Arel::Visitors::Dot</code> now supports <code>Arel::Nodes::Bin</code>, <code>Case</code>, <code>CurrentRow</code>, <code>Distinct</code>,<br />\n<code>DistinctOn</code>, <code>Else</code>, <code>Except</code>, <code>InfixOperation</code>, <code>Intersect</code>, <code>Lock</code>, <code>NotRegexp</code>, <code>Quoted</code>,<br />\n<code>Regexp</code>, <code>UnaryOperation</code>, <code>Union</code>, <code>UnionAll</code>, <code>When</code>, and <code>With</code>. Previously, these node<br />\ntypes caused an exception to be raised by <code>Arel::Visitors::Dot#accept</code>.</p>\n\n<p><em>Mike Dalessio</em></p>\n"
  },
  {
    "message": "*   Optimize `remove_columns` to use a single SQL statement.\n\n    ```ruby\n    remove_columns :my_table, :col_one, :col_two\n    ```\n\n    Now results in the following SQL:\n\n    ```sql\n    ALTER TABLE \"my_table\" DROP COLUMN \"col_one\", DROP COLUMN \"col_two\"\n    ```\n\n    *Jon Dufresne*",
    "project": "activerecord",
    "date_merged": 1619829714000,
    "author": "Jon Dufresne",
    "sha": "bff3523242d3fcdc7a069ff86863e08d01537674",
    "pr": "42075",
    "merge_sha": "f64acb9a4ba0dcc96080c1eca80257fc3cff710e",
    "html": "<p>Optimize <code>remove_columns</code> to use a single SQL statement.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">remove_columns</span> <span class=\"ss\">:my_table</span><span class=\"p\">,</span> <span class=\"ss\">:col_one</span><span class=\"p\">,</span> <span class=\"ss\">:col_two</span>\n</code></pre></div></div>\n\n<p>Now results in the following SQL:</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">ALTER</span> <span class=\"k\">TABLE</span> <span class=\"nv\">\"my_table\"</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"nv\">\"col_one\"</span><span class=\"p\">,</span> <span class=\"k\">DROP</span> <span class=\"k\">COLUMN</span> <span class=\"nv\">\"col_two\"</span>\n</code></pre></div></div>\n\n<p><em>Jon Dufresne</em></p>\n"
  },
  {
    "message": "*   Ensure `has_one` autosave association callbacks get called once.\n\n    Change the `has_one` autosave callback to be non cyclic as well.\n    By doing this the autosave callback are made more consistent for\n    all 3 cases: `has_many`, `has_one`, and `belongs_to`.\n\n    *Petrik de Heus*",
    "project": "activerecord",
    "date_merged": 1618908705000,
    "author": "Ryuta Kamizono",
    "sha": "f02a136f899f732db49138b1a27950b102230d04",
    "pr": "41990",
    "merge_sha": "5d7b86b698a26f45aa83974a27e04d5a20891c53",
    "html": "<p>Ensure <code>has_one</code> autosave association callbacks get called once.</p>\n\n<p>Change the <code>has_one</code> autosave callback to be non cyclic as well.<br />\nBy doing this the autosave callback are made more consistent for<br />\nall 3 cases: <code>has_many</code>, <code>has_one</code>, and <code>belongs_to</code>.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   Add option to disable joins for associations.\n\n    In a multiple database application, associations can't join across\n    databases. When set, this option instructs Rails to generate 2 or\n    more queries rather than generating joins for associations.\n\n    Set the option on a has many through association:\n\n    ```ruby\n    class Dog\n      has_many :treats, through: :humans, disable_joins: true\n      has_many :humans\n    end\n    ```\n\n    Then instead of generating join SQL, two queries are used for `@dog.treats`:\n\n    ```\n    SELECT \"humans\".\"id\" FROM \"humans\" WHERE \"humans\".\"dog_id\" = ?  [[\"dog_id\", 1]]\n    SELECT \"treats\".* FROM \"treats\" WHERE \"treats\".\"human_id\" IN (?, ?, ?)  [[\"human_id\", 1], [\"human_id\", 2], [\"human_id\", 3]]\n    ```\n\n    *Eileen M. Uchitelle*, *Aaron Patterson*, *Lee Quarella*",
    "project": "activerecord",
    "date_merged": 1618848503000,
    "author": "eileencodes",
    "sha": "de6b4efa3e86727f3bd2f2e7982c0902efd19e1a",
    "pr": "41937",
    "merge_sha": "6ebd134a9afb1870f62ff74b96c7d92a94feca6d",
    "html": "<p>Add option to disable joins for associations.</p>\n\n<p>In a multiple database application, associations can’t join across<br />\ndatabases. When set, this option instructs Rails to generate 2 or<br />\nmore queries rather than generating joins for associations.</p>\n\n<p>Set the option on a has many through association:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Dog</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:treats</span><span class=\"p\">,</span> <span class=\"ss\">through: :humans</span><span class=\"p\">,</span> <span class=\"ss\">disable_joins: </span><span class=\"kp\">true</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:humans</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Then instead of generating join SQL, two queries are used for <code>@dog.treats</code>:</p>\n\n<pre><code>SELECT \"humans\".\"id\" FROM \"humans\" WHERE \"humans\".\"dog_id\" = ?  [[\"dog_id\", 1]]\nSELECT \"treats\".* FROM \"treats\" WHERE \"treats\".\"human_id\" IN (?, ?, ?)  [[\"human_id\", 1], [\"human_id\", 2], [\"human_id\", 3]]\n</code></pre>\n\n<p><em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em>, <em>Lee Quarella</em></p>\n"
  },
  {
    "message": "*   Add setting for enumerating column names in SELECT statements.\n\n    Adding a column to a PostgreSQL database, for example, while the application is running can\n    change the result of wildcard `SELECT *` queries, which invalidates the result\n    of cached prepared statements and raises a `PreparedStatementCacheExpired` error.\n\n    When enabled, Active Record will avoid wildcards and always include column names\n    in `SELECT` queries, which will return consistent results and avoid prepared\n    statement errors.\n\n    Before:\n\n    ```ruby\n    Book.limit(5)\n    # SELECT * FROM books LIMIT 5\n    ```\n\n    After:\n\n    ```ruby\n    # config/application.rb\n    module MyApp\n      class Application < Rails::Application\n        config.active_record.enumerate_columns_in_select_statements = true\n      end\n    end\n\n    # or, configure per-model\n    class Book < ApplicationRecord\n      self.enumerate_columns_in_select_statements = true\n    end\n    ```\n\n    ```ruby\n    Book.limit(5)\n    # SELECT id, author_id, name, format, status, language, etc FROM books LIMIT 5\n    ```\n\n    *Matt Duszynski*",
    "project": "activerecord",
    "date_merged": 1618529321000,
    "author": "Matt Duszynski",
    "sha": "726abeaab4342ae26438ea583f02c91104062d41",
    "pr": "41718",
    "merge_sha": "7ce853ecb03868eea3078891ba6b3d5da760c510",
    "html": "<p>Add setting for enumerating column names in SELECT statements.</p>\n\n<p>Adding a column to a PostgreSQL database, for example, while the application is running can<br />\nchange the result of wildcard <code>SELECT *</code> queries, which invalidates the result<br />\nof cached prepared statements and raises a <code>PreparedStatementCacheExpired</code> error.</p>\n\n<p>When enabled, Active Record will avoid wildcards and always include column names<br />\nin <code>SELECT</code> queries, which will return consistent results and avoid prepared<br />\nstatement errors.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">limit</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"c1\"># SELECT * FROM books LIMIT 5</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/application.rb</span>\n<span class=\"k\">module</span> <span class=\"nn\">MyApp</span>\n  <span class=\"k\">class</span> <span class=\"nc\">Application</span> <span class=\"o\">&lt;</span> <span class=\"no\">Rails</span><span class=\"o\">::</span><span class=\"no\">Application</span>\n    <span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_record</span><span class=\"p\">.</span><span class=\"nf\">enumerate_columns_in_select_statements</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># or, configure per-model</span>\n<span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"nf\">enumerate_columns_in_select_statements</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">limit</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"c1\"># SELECT id, author_id, name, format, status, language, etc FROM books LIMIT 5</span>\n</code></pre></div></div>\n\n<p><em>Matt Duszynski</em></p>\n"
  },
  {
    "message": "*   Allow passing SQL as `on_duplicate` value to `#upsert_all` to make it possible to use raw SQL to update columns on conflict:\n\n    ```ruby\n    Book.upsert_all(\n      [{ id: 1, status: 1 }, { id: 2, status: 1 }],\n      on_duplicate: Arel.sql(\"status = GREATEST(books.status, EXCLUDED.status)\")\n    )\n    ```\n\n    *Vladimir Dementyev*",
    "project": "activerecord",
    "date_merged": 1618255792000,
    "author": "Vladimir Dementyev",
    "sha": "4bef82217cd6a63cc10fe7beb16298e935babb5f",
    "pr": "41933",
    "merge_sha": "b171b842da8a4221d327ba94a187d8914f661bd4",
    "html": "<p>Allow passing SQL as <code>on_duplicate</code> value to <code>#upsert_all</code> to make it possible to use raw SQL to update columns on conflict:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">upsert_all</span><span class=\"p\">(</span>\n  <span class=\"p\">[{</span> <span class=\"ss\">id: </span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ss\">status: </span><span class=\"mi\">1</span> <span class=\"p\">},</span> <span class=\"p\">{</span> <span class=\"ss\">id: </span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"ss\">status: </span><span class=\"mi\">1</span> <span class=\"p\">}],</span>\n  <span class=\"ss\">on_duplicate: </span><span class=\"no\">Arel</span><span class=\"p\">.</span><span class=\"nf\">sql</span><span class=\"p\">(</span><span class=\"s2\">\"status = GREATEST(books.status, EXCLUDED.status)\"</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Vladimir Dementyev</em></p>\n"
  },
  {
    "message": "*   Allow passing SQL as `returning` statement to `#upsert_all`:\n\n    ```ruby\n    Article.insert_all(\n      [\n        { title: \"Article 1\", slug: \"article-1\", published: false },\n        { title: \"Article 2\", slug: \"article-2\", published: false }\n      ],\n      returning: Arel.sql(\"id, (xmax = '0') as inserted, name as new_name\")\n    )\n    ```\n\n    *Vladimir Dementyev*",
    "project": "activerecord",
    "date_merged": 1618255792000,
    "author": "Vladimir Dementyev",
    "sha": "4bef82217cd6a63cc10fe7beb16298e935babb5f",
    "pr": "41933",
    "merge_sha": "b171b842da8a4221d327ba94a187d8914f661bd4",
    "html": "<p>Allow passing SQL as <code>returning</code> statement to <code>#upsert_all</code>:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Article</span><span class=\"p\">.</span><span class=\"nf\">insert_all</span><span class=\"p\">(</span>\n  <span class=\"p\">[</span>\n    <span class=\"p\">{</span> <span class=\"ss\">title: </span><span class=\"s2\">\"Article 1\"</span><span class=\"p\">,</span> <span class=\"ss\">slug: </span><span class=\"s2\">\"article-1\"</span><span class=\"p\">,</span> <span class=\"ss\">published: </span><span class=\"kp\">false</span> <span class=\"p\">},</span>\n    <span class=\"p\">{</span> <span class=\"ss\">title: </span><span class=\"s2\">\"Article 2\"</span><span class=\"p\">,</span> <span class=\"ss\">slug: </span><span class=\"s2\">\"article-2\"</span><span class=\"p\">,</span> <span class=\"ss\">published: </span><span class=\"kp\">false</span> <span class=\"p\">}</span>\n  <span class=\"p\">],</span>\n  <span class=\"ss\">returning: </span><span class=\"no\">Arel</span><span class=\"p\">.</span><span class=\"nf\">sql</span><span class=\"p\">(</span><span class=\"s2\">\"id, (xmax = '0') as inserted, name as new_name\"</span><span class=\"p\">)</span>\n<span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Vladimir Dementyev</em></p>\n"
  },
  {
    "message": "*   Deprecate `legacy_connection_handling`.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1617752317000,
    "author": "eileencodes",
    "sha": "634bf89df316059675fcb059482f04f8e6c09afa",
    "pr": "41859",
    "merge_sha": "564a26d134ca586fcb4be6a2c86f05ddce4c3f6e",
    "html": "<p>Deprecate <code>legacy_connection_handling</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Add attribute encryption support.\n\n    Encrypted attributes are declared at the model level. These\n    are regular Active Record attributes backed by a column with\n    the same name. The system will transparently encrypt these\n    attributes before saving them into the database and will\n    decrypt them when retrieving their values.\n\n\n    ```ruby\n    class Person < ApplicationRecord\n      encrypts :name\n      encrypts :email_address, deterministic: true\n    end\n    ```\n\n    You can learn more in the [Active Record Encryption\n    guide](https://edgeguides.rubyonrails.org/active_record_encryption.html).\n\n    *Jorge Manrubia*",
    "project": "activerecord",
    "date_merged": 1617486537000,
    "author": "Jorge Manrubia",
    "sha": "224c9b34cb4fdc6989707f6e18e0a156e0864257",
    "pr": "41833",
    "merge_sha": "208635574a7eb0774f0b28c0001156747d9f20d7",
    "html": "<p>Add attribute encryption support.</p>\n\n<p>Encrypted attributes are declared at the model level. These<br />\nare regular Active Record attributes backed by a column with<br />\nthe same name. The system will transparently encrypt these<br />\nattributes before saving them into the database and will<br />\ndecrypt them when retrieving their values.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Person</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">encrypts</span> <span class=\"ss\">:name</span>\n  <span class=\"n\">encrypts</span> <span class=\"ss\">:email_address</span><span class=\"p\">,</span> <span class=\"ss\">deterministic: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>You can learn more in the <a href=\"https://edgeguides.rubyonrails.org/active_record_encryption.html\">Active Record Encryption<br />\nguide</a>.</p>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   Changed Arel predications `contains` and `overlaps` to use\n    `quoted_node` so that PostgreSQL arrays are quoted properly.\n\n    *Bradley Priest*",
    "project": "activerecord",
    "date_merged": 1616919228000,
    "author": "Andrew White",
    "sha": "7699f12dae3829eb443a29426e7255a61636380c",
    "pr": "41640",
    "merge_sha": "bad93fe2a127fbc623c00fe52ca02638ba3e9b90",
    "html": "<p>Changed Arel predications <code>contains</code> and <code>overlaps</code> to use<br />\n<code>quoted_node</code> so that PostgreSQL arrays are quoted properly.</p>\n\n<p><em>Bradley Priest</em></p>\n"
  },
  {
    "message": "*   Add mode argument to record level `strict_loading!`.\n\n    This argument can be used when enabling strict loading for a single record\n    to specify that we only want to raise on n plus one queries.\n\n    ```ruby\n    developer.strict_loading!(mode: :n_plus_one_only)\n\n    developer.projects.to_a # Does not raise\n    developer.projects.first.client # Raises StrictLoadingViolationError\n    ```\n\n    Previously, enabling strict loading would cause any lazily loaded\n    association to raise an error. Using `n_plus_one_only` mode allows us to\n    lazily load belongs_to, has_many, and other associations that are fetched\n    through a single query.\n\n    *Dinah Shi*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add mode argument to record level <code>strict_loading!</code>.</p>\n\n<p>This argument can be used when enabling strict loading for a single record<br />\nto specify that we only want to raise on n plus one queries.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">developer</span><span class=\"p\">.</span><span class=\"nf\">strict_loading!</span><span class=\"p\">(</span><span class=\"ss\">mode: :n_plus_one_only</span><span class=\"p\">)</span>\n\n<span class=\"n\">developer</span><span class=\"p\">.</span><span class=\"nf\">projects</span><span class=\"p\">.</span><span class=\"nf\">to_a</span> <span class=\"c1\"># Does not raise</span>\n<span class=\"n\">developer</span><span class=\"p\">.</span><span class=\"nf\">projects</span><span class=\"p\">.</span><span class=\"nf\">first</span><span class=\"p\">.</span><span class=\"nf\">client</span> <span class=\"c1\"># Raises StrictLoadingViolationError</span>\n</code></pre></div></div>\n\n<p>Previously, enabling strict loading would cause any lazily loaded<br />\nassociation to raise an error. Using <code>n_plus_one_only</code> mode allows us to<br />\nlazily load belongs_to, has_many, and other associations that are fetched<br />\nthrough a single query.</p>\n\n<p><em>Dinah Shi</em></p>\n"
  },
  {
    "message": "*   Fix Float::INFINITY assignment to datetime column with postgresql adapter.\n\n    Before:\n\n    ```ruby\n    # With this config\n    ActiveRecord::Base.time_zone_aware_attributes = true\n\n    # and the following schema:\n    create_table \"postgresql_infinities\" do |t|\n      t.datetime \"datetime\"\n    end\n\n    # This test fails\n    record = PostgresqlInfinity.create!(datetime: Float::INFINITY)\n    assert_equal Float::INFINITY, record.datetime # record.datetime gets nil\n    ```\n\n    After this commit, `record.datetime` gets `Float::INFINITY` as expected.\n\n    *Shunichi Ikegami*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Fix Float::INFINITY assignment to datetime column with postgresql adapter.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># With this config</span>\n<span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">time_zone_aware_attributes</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n\n<span class=\"c1\"># and the following schema:</span>\n<span class=\"n\">create_table</span> <span class=\"s2\">\"postgresql_infinities\"</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n  <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">datetime</span> <span class=\"s2\">\"datetime\"</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># This test fails</span>\n<span class=\"n\">record</span> <span class=\"o\">=</span> <span class=\"no\">PostgresqlInfinity</span><span class=\"p\">.</span><span class=\"nf\">create!</span><span class=\"p\">(</span><span class=\"ss\">datetime: </span><span class=\"no\">Float</span><span class=\"o\">::</span><span class=\"no\">INFINITY</span><span class=\"p\">)</span>\n<span class=\"n\">assert_equal</span> <span class=\"no\">Float</span><span class=\"o\">::</span><span class=\"no\">INFINITY</span><span class=\"p\">,</span> <span class=\"n\">record</span><span class=\"p\">.</span><span class=\"nf\">datetime</span> <span class=\"c1\"># record.datetime gets nil</span>\n</code></pre></div></div>\n\n<p>After this commit, <code>record.datetime</code> gets <code>Float::INFINITY</code> as expected.</p>\n\n<p><em>Shunichi Ikegami</em></p>\n"
  },
  {
    "message": "*   Type cast enum values by the original attribute type.\n\n    The notable thing about this change is that unknown labels will no longer match 0 on MySQL.\n\n    ```ruby\n    class Book < ActiveRecord::Base\n      enum :status, { proposed: 0, written: 1, published: 2 }\n    end\n    ```\n\n    Before:\n\n    ```ruby\n    # SELECT `books`.* FROM `books` WHERE `books`.`status` = 'prohibited' LIMIT 1\n    Book.find_by(status: :prohibited)\n    # => #<Book id: 1, status: \"proposed\", ...> (for mysql2 adapter)\n    # => ActiveRecord::StatementInvalid: PG::InvalidTextRepresentation: ERROR:  invalid input syntax for type integer: \"prohibited\" (for postgresql adapter)\n    # => nil (for sqlite3 adapter)\n    ```\n\n    After:\n\n    ```ruby\n    # SELECT `books`.* FROM `books` WHERE `books`.`status` IS NULL LIMIT 1\n    Book.find_by(status: :prohibited)\n    # => nil (for all adapters)\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1615191214000,
    "author": "Ryuta Kamizono",
    "sha": "b68f095478fc5aaa0f77963e13d36c09e129ed60",
    "pr": "41599",
    "merge_sha": "90d0b42bd8206e942597b64163837287caf7119d",
    "html": "<p>Type cast enum values by the original attribute type.</p>\n\n<p>The notable thing about this change is that unknown labels will no longer match 0 on MySQL.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">:status</span><span class=\"p\">,</span> <span class=\"p\">{</span> <span class=\"ss\">proposed: </span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"ss\">written: </span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ss\">published: </span><span class=\"mi\">2</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># SELECT `books`.* FROM `books` WHERE `books`.`status` = 'prohibited' LIMIT 1</span>\n<span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">find_by</span><span class=\"p\">(</span><span class=\"ss\">status: :prohibited</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt; #&lt;Book id: 1, status: \"proposed\", ...&gt; (for mysql2 adapter)</span>\n<span class=\"c1\"># =&gt; ActiveRecord::StatementInvalid: PG::InvalidTextRepresentation: ERROR:  invalid input syntax for type integer: \"prohibited\" (for postgresql adapter)</span>\n<span class=\"c1\"># =&gt; nil (for sqlite3 adapter)</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># SELECT `books`.* FROM `books` WHERE `books`.`status` IS NULL LIMIT 1</span>\n<span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">find_by</span><span class=\"p\">(</span><span class=\"ss\">status: :prohibited</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt; nil (for all adapters)</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fixtures for `has_many :through` associations now load timestamps on join tables.\n\n    Given this fixture:\n\n    ```yml\n    ### monkeys.yml\n    george:\n      name: George the Monkey\n      fruits: apple\n\n    ### fruits.yml\n    apple:\n      name: apple\n    ```\n\n    If the join table (`fruit_monkeys`) contains `created_at` or `updated_at` columns,\n    these will now be populated when loading the fixture. Previously, fixture loading\n    would crash if these columns were required, and leave them as null otherwise.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Fixtures for <code>has_many :through</code> associations now load timestamps on join tables.</p>\n\n<p>Given this fixture:</p>\n\n<div class=\"language-yml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">### monkeys.yml</span>\n<span class=\"na\">george</span><span class=\"pi\">:</span>\n  <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">George the Monkey</span>\n  <span class=\"na\">fruits</span><span class=\"pi\">:</span> <span class=\"s\">apple</span>\n\n<span class=\"c1\">### fruits.yml</span>\n<span class=\"na\">apple</span><span class=\"pi\">:</span>\n  <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">apple</span>\n</code></pre></div></div>\n\n<p>If the join table (<code>fruit_monkeys</code>) contains <code>created_at</code> or <code>updated_at</code> columns,<br />\nthese will now be populated when loading the fixture. Previously, fixture loading<br />\nwould crash if these columns were required, and leave them as null otherwise.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Allow applications to configure the thread pool for async queries.\n\n    Some applications may want one thread pool per database whereas others want to use\n    a single global thread pool for all queries. By default, Rails will set `async_query_executor`\n    to `nil` which will not initialize any executor. If `load_async` is called and no executor\n    has been configured, the query will be executed in the foreground.\n\n    To create one thread pool for all database connections to use applications can set\n    `config.active_record.async_query_executor` to `:global_thread_pool` and optionally define\n    `config.active_record.global_executor_concurrency`. This defaults to 4. For applications that want\n    to have a thread pool for each database connection, `config.active_record.async_query_executor` can\n    be set to `:multi_thread_pool`. The configuration for each thread pool is set in the database\n    configuration.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow applications to configure the thread pool for async queries.</p>\n\n<p>Some applications may want one thread pool per database whereas others want to use<br />\na single global thread pool for all queries. By default, Rails will set <code>async_query_executor</code><br />\nto <code>nil</code> which will not initialize any executor. If <code>load_async</code> is called and no executor<br />\nhas been configured, the query will be executed in the foreground.</p>\n\n<p>To create one thread pool for all database connections to use applications can set<br />\n<code>config.active_record.async_query_executor</code> to <code>:global_thread_pool</code> and optionally define<br />\n<code>config.active_record.global_executor_concurrency</code>. This defaults to 4. For applications that want<br />\nto have a thread pool for each database connection, <code>config.active_record.async_query_executor</code> can<br />\nbe set to <code>:multi_thread_pool</code>. The configuration for each thread pool is set in the database<br />\nconfiguration.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Allow new syntax for `enum` to avoid leading `_` from reserved options.\n\n    Before:\n\n    ```ruby\n    class Book < ActiveRecord::Base\n      enum status: [ :proposed, :written ], _prefix: true, _scopes: false\n      enum cover: [ :hard, :soft ], _suffix: true, _default: :hard\n    end\n    ```\n\n    After:\n\n    ```ruby\n    class Book < ActiveRecord::Base\n      enum :status, [ :proposed, :written ], prefix: true, scopes: false\n      enum :cover, [ :hard, :soft ], suffix: true, default: :hard\n    end\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1613714506000,
    "author": "Ryuta Kamizono",
    "sha": "0618d2d84a501aea93c898aec504ff9a0e09d6f2",
    "pr": "41328",
    "merge_sha": "ee7cf8cf7569ef87079c48ee81c867eae5e24ed4",
    "html": "<p>Allow new syntax for <code>enum</code> to avoid leading <code>_</code> from reserved options.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">status: </span><span class=\"p\">[</span> <span class=\"ss\">:proposed</span><span class=\"p\">,</span> <span class=\"ss\">:written</span> <span class=\"p\">],</span> <span class=\"ss\">_prefix: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">_scopes: </span><span class=\"kp\">false</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">cover: </span><span class=\"p\">[</span> <span class=\"ss\">:hard</span><span class=\"p\">,</span> <span class=\"ss\">:soft</span> <span class=\"p\">],</span> <span class=\"ss\">_suffix: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">_default: :hard</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">:status</span><span class=\"p\">,</span> <span class=\"p\">[</span> <span class=\"ss\">:proposed</span><span class=\"p\">,</span> <span class=\"ss\">:written</span> <span class=\"p\">],</span> <span class=\"ss\">prefix: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">scopes: </span><span class=\"kp\">false</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">:cover</span><span class=\"p\">,</span> <span class=\"p\">[</span> <span class=\"ss\">:hard</span><span class=\"p\">,</span> <span class=\"ss\">:soft</span> <span class=\"p\">],</span> <span class=\"ss\">suffix: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">default: :hard</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Relation#load_async`.\n\n    This method schedules the query to be performed asynchronously from a thread pool.\n\n    If the result is accessed before a background thread had the opportunity to perform\n    the query, it will be performed in the foreground.\n\n    This is useful for queries that can be performed long enough before their result will be\n    needed, or for controllers which need to perform several independent queries.\n\n    ```ruby\n    def index\n      @categories = Category.some_complex_scope.load_async\n      @posts = Post.some_complex_scope.load_async\n    end\n    ```\n\n    Active Record logs will also include timing info for the duration of how long\n    the main thread had to wait to access the result. This timing is useful to know\n    whether or not it's worth to load the query asynchronously.\n\n    ```\n    DEBUG -- :   Category Load (62.1ms)  SELECT * FROM `categories` LIMIT 50\n    DEBUG -- :   ASYNC Post Load (64ms) (db time 126.1ms)  SELECT * FROM `posts` LIMIT 100\n    ```\n\n    The duration in the first set of parens is how long the main thread was blocked\n    waiting for the results, and the second set of parens with \"db time\" is how long\n    the entire query took to execute.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1613506559000,
    "author": "Jean Boussier",
    "sha": "2a90104989b9f1653337d08871610d394b2d626d",
    "pr": "41372",
    "merge_sha": "48effc7587d059a39c8ab02514ad948849a25627",
    "html": "<p>Add <code>ActiveRecord::Relation#load_async</code>.</p>\n\n<p>This method schedules the query to be performed asynchronously from a thread pool.</p>\n\n<p>If the result is accessed before a background thread had the opportunity to perform<br />\nthe query, it will be performed in the foreground.</p>\n\n<p>This is useful for queries that can be performed long enough before their result will be<br />\nneeded, or for controllers which need to perform several independent queries.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">def</span> <span class=\"nf\">index</span>\n  <span class=\"vi\">@categories</span> <span class=\"o\">=</span> <span class=\"no\">Category</span><span class=\"p\">.</span><span class=\"nf\">some_complex_scope</span><span class=\"p\">.</span><span class=\"nf\">load_async</span>\n  <span class=\"vi\">@posts</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">some_complex_scope</span><span class=\"p\">.</span><span class=\"nf\">load_async</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Active Record logs will also include timing info for the duration of how long<br />\nthe main thread had to wait to access the result. This timing is useful to know<br />\nwhether or not it’s worth to load the query asynchronously.</p>\n\n<pre><code>DEBUG -- :   Category Load (62.1ms)  SELECT * FROM `categories` LIMIT 50\nDEBUG -- :   ASYNC Post Load (64ms) (db time 126.1ms)  SELECT * FROM `posts` LIMIT 100\n</code></pre>\n\n<p>The duration in the first set of parens is how long the main thread was blocked<br />\nwaiting for the results, and the second set of parens with “db time” is how long<br />\nthe entire query took to execute.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Implemented `ActiveRecord::Relation#excluding` method.\n\n    This method excludes the specified record (or collection of records) from\n    the resulting relation:\n\n    ```ruby\n    Post.excluding(post)\n    Post.excluding(post_one, post_two)\n    ```\n\n    Also works on associations:\n\n    ```ruby\n    post.comments.excluding(comment)\n    post.comments.excluding(comment_one, comment_two)\n    ```\n\n    This is short-hand for `Post.where.not(id: post.id)` (for a single record)\n    and `Post.where.not(id: [post_one.id, post_two.id])` (for a collection).\n\n    *Glen Crawford*",
    "project": "activerecord",
    "date_merged": 1613484047000,
    "author": "Glen Crawford",
    "sha": "690fdbb2b96b08f53e9de99bb42e79a634f623ee",
    "pr": "41439",
    "merge_sha": "d79f3b2a37a1e7dededefd5b0d6822f0d4f5a037",
    "html": "<p>Implemented <code>ActiveRecord::Relation#excluding</code> method.</p>\n\n<p>This method excludes the specified record (or collection of records) from<br />\nthe resulting relation:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">excluding</span><span class=\"p\">(</span><span class=\"n\">post</span><span class=\"p\">)</span>\n<span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">excluding</span><span class=\"p\">(</span><span class=\"n\">post_one</span><span class=\"p\">,</span> <span class=\"n\">post_two</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Also works on associations:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">comments</span><span class=\"p\">.</span><span class=\"nf\">excluding</span><span class=\"p\">(</span><span class=\"n\">comment</span><span class=\"p\">)</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">comments</span><span class=\"p\">.</span><span class=\"nf\">excluding</span><span class=\"p\">(</span><span class=\"n\">comment_one</span><span class=\"p\">,</span> <span class=\"n\">comment_two</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>This is short-hand for <code>Post.where.not(id: post.id)</code> (for a single record)<br />\nand <code>Post.where.not(id: [post_one.id, post_two.id])</code> (for a collection).</p>\n\n<p><em>Glen Crawford</em></p>\n"
  },
  {
    "message": "*   Skip optimised #exist? query when #include? is called on a relation\n    with a having clause.\n\n    Relations that have aliased select values AND a having clause that\n    references an aliased select value would generate an error when\n    #include? was called, due to an optimisation that would generate\n    call #exists? on the relation instead, which effectively alters\n    the select values of the query (and thus removes the aliased select\n    values), but leaves the having clause intact. Because the having\n    clause is then referencing an aliased column that is no longer\n    present in the simplified query, an ActiveRecord::InvalidStatement\n    error was raised.\n\n    A sample query affected by this problem:\n\n    ```ruby\n    Author.select('COUNT(*) as total_posts', 'authors.*')\n          .joins(:posts)\n          .group(:id)\n          .having('total_posts > 2')\n          .include?(Author.first)\n    ```\n\n    This change adds an addition check to the condition that skips the\n    simplified #exists? query, which simply checks for the presence of\n    a having clause.\n\n    Fixes #41417.\n\n    *Michael Smart*",
    "project": "activerecord",
    "date_merged": 1613089149000,
    "author": "Michael Smart",
    "sha": "644d694dea8f1c58631f2ee7f1efc02ecf7bcf5c",
    "pr": "41419",
    "merge_sha": "afa58dc832c8e3554d55e968ec0a9bd3b7bcca6d",
    "html": "<p>Skip optimised #exist? query when #include? is called on a relation<br />\nwith a having clause.</p>\n\n<p>Relations that have aliased select values AND a having clause that<br />\nreferences an aliased select value would generate an error when<br />\n#include? was called, due to an optimisation that would generate<br />\ncall #exists? on the relation instead, which effectively alters<br />\nthe select values of the query (and thus removes the aliased select<br />\nvalues), but leaves the having clause intact. Because the having<br />\nclause is then referencing an aliased column that is no longer<br />\npresent in the simplified query, an ActiveRecord::InvalidStatement<br />\nerror was raised.</p>\n\n<p>A sample query affected by this problem:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">select</span><span class=\"p\">(</span><span class=\"s1\">'COUNT(*) as total_posts'</span><span class=\"p\">,</span> <span class=\"s1\">'authors.*'</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">joins</span><span class=\"p\">(</span><span class=\"ss\">:posts</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">group</span><span class=\"p\">(</span><span class=\"ss\">:id</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">having</span><span class=\"p\">(</span><span class=\"s1\">'total_posts &gt; 2'</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">include?</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">first</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>This change adds an addition check to the condition that skips the<br />\nsimplified #exists? query, which simply checks for the presence of<br />\na having clause.</p>\n\n<p>Fixes #41417.</p>\n\n<p><em>Michael Smart</em></p>\n"
  },
  {
    "message": "*   Increment postgres prepared statement counter before making a prepared statement, so if the statement is aborted\n    without Rails knowledge (e.g., if app gets killed during long-running query or due to Rack::Timeout), app won't end\n    up in perpetual crash state for being inconsistent with PostgreSQL.\n\n    *wbharding*, *Martin Tepper*",
    "project": "activerecord",
    "date_merged": 1613089149000,
    "author": "Rafael Mendonça França",
    "sha": "5b0fe373f331233d78ca5e1f644191a2a128b689",
    "pr": "41356",
    "merge_sha": "afa58dc832c8e3554d55e968ec0a9bd3b7bcca6d",
    "html": "<p>Increment postgres prepared statement counter before making a prepared statement, so if the statement is aborted<br />\nwithout Rails knowledge (e.g., if app gets killed during long-running query or due to Rack::Timeout), app won’t end<br />\nup in perpetual crash state for being inconsistent with PostgreSQL.</p>\n\n<p><em>wbharding</em>, <em>Martin Tepper</em></p>\n"
  },
  {
    "message": "*   Add ability to apply `scoping` to `all_queries`.\n\n    Some applications may want to use the `scoping` method but previously it only\n    worked on certain types of queries. This change allows the `scoping` method to apply\n    to all queries for a model in a block.\n\n    ```ruby\n    Post.where(blog_id: post.blog_id).scoping(all_queries: true) do\n      post.update(title: \"a post title\") # adds `posts.blog_id = 1` to the query\n    end\n    ```\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1613077462000,
    "author": "eileencodes",
    "sha": "d6e12ffb7dcbc8e9710b2e67e25525eff8669088",
    "pr": "41397",
    "merge_sha": "9eedc375d9094ff8ba441bb6fca2bb29d767cfa9",
    "html": "<p>Add ability to apply <code>scoping</code> to <code>all_queries</code>.</p>\n\n<p>Some applications may want to use the <code>scoping</code> method but previously it only<br />\nworked on certain types of queries. This change allows the <code>scoping</code> method to apply<br />\nto all queries for a model in a block.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">blog_id: </span><span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">blog_id</span><span class=\"p\">).</span><span class=\"nf\">scoping</span><span class=\"p\">(</span><span class=\"ss\">all_queries: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n  <span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">update</span><span class=\"p\">(</span><span class=\"ss\">title: </span><span class=\"s2\">\"a post title\"</span><span class=\"p\">)</span> <span class=\"c1\"># adds `posts.blog_id = 1` to the query</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   `ActiveRecord::Calculations.calculate` called with `:average`\n    (aliased as `ActiveRecord::Calculations.average`) will now use column-based\n    type casting. This means that floating-point number columns will now be\n    aggregated as `Float` and decimal columns will be aggregated as `BigDecimal`.\n\n    Integers are handled as a special case returning `BigDecimal` always\n    (this was the case before already).\n\n    ```ruby\n    # With the following schema:\n    create_table \"measurements\" do |t|\n      t.float \"temperature\"\n    end\n\n    # Before:\n    Measurement.average(:temperature).class\n    # => BigDecimal\n\n    # After:\n    Measurement.average(:temperature).class\n    # => Float\n    ```\n\n    Before this change, Rails just called `to_d` on average aggregates from the\n    database adapter. This is not the case anymore. If you relied on that kind\n    of magic, you now need to register your own `ActiveRecord::Type`\n    (see `ActiveRecord::Attributes::ClassMethods` for documentation).\n\n    *Josua Schmid*",
    "project": "activerecord",
    "date_merged": 1613133339000,
    "author": "Josua Schmid",
    "sha": "1a9b84391f4b1fb385755ab27c60d811402dc569",
    "pr": "41418",
    "merge_sha": "a19c9b3e1809238718c21785c6046d1e449c8499",
    "html": "<p><code>ActiveRecord::Calculations.calculate</code> called with <code>:average</code><br />\n(aliased as <code>ActiveRecord::Calculations.average</code>) will now use column-based<br />\ntype casting. This means that floating-point number columns will now be<br />\naggregated as <code>Float</code> and decimal columns will be aggregated as <code>BigDecimal</code>.</p>\n\n<p>Integers are handled as a special case returning <code>BigDecimal</code> always<br />\n(this was the case before already).</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># With the following schema:</span>\n<span class=\"n\">create_table</span> <span class=\"s2\">\"measurements\"</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n  <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">float</span> <span class=\"s2\">\"temperature\"</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># Before:</span>\n<span class=\"no\">Measurement</span><span class=\"p\">.</span><span class=\"nf\">average</span><span class=\"p\">(</span><span class=\"ss\">:temperature</span><span class=\"p\">).</span><span class=\"nf\">class</span>\n<span class=\"c1\"># =&gt; BigDecimal</span>\n\n<span class=\"c1\"># After:</span>\n<span class=\"no\">Measurement</span><span class=\"p\">.</span><span class=\"nf\">average</span><span class=\"p\">(</span><span class=\"ss\">:temperature</span><span class=\"p\">).</span><span class=\"nf\">class</span>\n<span class=\"c1\"># =&gt; Float</span>\n</code></pre></div></div>\n\n<p>Before this change, Rails just called <code>to_d</code> on average aggregates from the<br />\ndatabase adapter. This is not the case anymore. If you relied on that kind<br />\nof magic, you now need to register your own <code>ActiveRecord::Type</code><br />\n(see <code>ActiveRecord::Attributes::ClassMethods</code> for documentation).</p>\n\n<p><em>Josua Schmid</em></p>\n"
  },
  {
    "message": "*   PostgreSQL: introduce `ActiveRecord::ConnectionAdapters::PostgreSQLAdapter.datetime_type`.\n\n    This setting controls what native type Active Record should use when you call `datetime` in\n    a migration or schema. It takes a symbol which must correspond to one of the configured\n    `NATIVE_DATABASE_TYPES`. The default is `:timestamp`, meaning `t.datetime` in a migration\n    will create a \"timestamp without time zone\" column. To use \"timestamp with time zone\",\n    change this to `:timestamptz` in an initializer.\n\n    You should run `bin/rails db:migrate` to rebuild your schema.rb if you change this.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>PostgreSQL: introduce <code>ActiveRecord::ConnectionAdapters::PostgreSQLAdapter.datetime_type</code>.</p>\n\n<p>This setting controls what native type Active Record should use when you call <code>datetime</code> in<br />\na migration or schema. It takes a symbol which must correspond to one of the configured<br />\n<code>NATIVE_DATABASE_TYPES</code>. The default is <code>:timestamp</code>, meaning <code>t.datetime</code> in a migration<br />\nwill create a “timestamp without time zone” column. To use “timestamp with time zone”,<br />\nchange this to <code>:timestamptz</code> in an initializer.</p>\n\n<p>You should run <code>bin/rails db:migrate</code> to rebuild your schema.rb if you change this.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   PostgreSQL: handle `timestamp with time zone` columns correctly in `schema.rb`.\n\n    Previously they dumped as `t.datetime :column_name`, now they dump as `t.timestamptz :column_name`,\n    and are created as `timestamptz` columns when the schema is loaded.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1612986912000,
    "author": "Alex Ghiculescu",
    "sha": "25e8a581a505b57ef7c853deed79b437a3e4e013",
    "pr": "41395",
    "merge_sha": "0dda4456459a5ff1583a085155d940e1e5fad40c",
    "html": "<p>PostgreSQL: handle <code>timestamp with time zone</code> columns correctly in <code>schema.rb</code>.</p>\n\n<p>Previously they dumped as <code>t.datetime :column_name</code>, now they dump as <code>t.timestamptz :column_name</code>,<br />\nand are created as <code>timestamptz</code> columns when the schema is loaded.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Removing trailing whitespace when matching columns in\n    `ActiveRecord::Sanitization.disallow_raw_sql!`.\n\n    *Gannon McGibbon*, *Adrian Hirt*",
    "project": "activerecord",
    "date_merged": 1612486985000,
    "author": "Gannon McGibbon",
    "sha": "d4a9744860291058f570fdbb0a515a70b748a582",
    "pr": "41326",
    "merge_sha": "bf1fbfddeb9c3b8c91f8e78e90c0c7c28924c310",
    "html": "<p>Removing trailing whitespace when matching columns in<br />\n<code>ActiveRecord::Sanitization.disallow_raw_sql!</code>.</p>\n\n<p><em>Gannon McGibbon</em>, <em>Adrian Hirt</em></p>\n"
  },
  {
    "message": "*   Expose a way for applications to set a `primary_abstract_class`.\n\n    Multiple database applications that use a primary abstract class that is not\n    named `ApplicationRecord` can now set a specific class to be the `primary_abstract_class`.\n\n    ```ruby\n    class PrimaryApplicationRecord\n      self.primary_abstract_class\n    end\n    ```\n\n    When an application boots it automatically connects to the primary or first database in the\n    database configuration file. In a multiple database application that then call `connects_to`\n    needs to know that the default connection is the same as the `ApplicationRecord` connection.\n    However, some applications have a differently named `ApplicationRecord`. This prevents Active\n    Record from opening duplicate connections to the same database.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Expose a way for applications to set a <code>primary_abstract_class</code>.</p>\n\n<p>Multiple database applications that use a primary abstract class that is not<br />\nnamed <code>ApplicationRecord</code> can now set a specific class to be the <code>primary_abstract_class</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">PrimaryApplicationRecord</span>\n  <span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"nf\">primary_abstract_class</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>When an application boots it automatically connects to the primary or first database in the<br />\ndatabase configuration file. In a multiple database application that then call <code>connects_to</code><br />\nneeds to know that the default connection is the same as the <code>ApplicationRecord</code> connection.<br />\nHowever, some applications have a differently named <code>ApplicationRecord</code>. This prevents Active<br />\nRecord from opening duplicate connections to the same database.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Support hash config for `structure_dump_flags` and `structure_load_flags` flags.\n    Now that Active Record supports multiple databases configuration,\n    we need a way to pass specific flags for dump/load databases since\n    the options are not the same for different adapters.\n    We can use in the original way:\n\n    ```ruby\n    ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags = ['--no-defaults', '--skip-add-drop-table']\n    # or\n    ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags = '--no-defaults --skip-add-drop-table'\n    ```\n\n    And also use it passing a hash, with one or more keys, where the key\n    is the adapter\n\n    ```ruby\n    ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags = {\n      mysql2: ['--no-defaults', '--skip-add-drop-table'],\n      postgres: '--no-tablespaces'\n    }\n    ```\n\n    *Gustavo Gonzalez*",
    "project": "activerecord",
    "date_merged": 1635252943000,
    "author": "Taha Husain",
    "sha": "3007d794ed3bcd70a7e8120d79767f99e59af3e6",
    "pr": "43536",
    "merge_sha": "6d7fdbac50a784cfd7b6797da56613739f34f524",
    "html": "<p>Support hash config for <code>structure_dump_flags</code> and <code>structure_load_flags</code> flags.<br />\nNow that Active Record supports multiple databases configuration,<br />\nwe need a way to pass specific flags for dump/load databases since<br />\nthe options are not the same for different adapters.<br />\nWe can use in the original way:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Tasks</span><span class=\"o\">::</span><span class=\"no\">DatabaseTasks</span><span class=\"p\">.</span><span class=\"nf\">structure_dump_flags</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">'--no-defaults'</span><span class=\"p\">,</span> <span class=\"s1\">'--skip-add-drop-table'</span><span class=\"p\">]</span>\n<span class=\"c1\"># or</span>\n<span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Tasks</span><span class=\"o\">::</span><span class=\"no\">DatabaseTasks</span><span class=\"p\">.</span><span class=\"nf\">structure_dump_flags</span> <span class=\"o\">=</span> <span class=\"s1\">'--no-defaults --skip-add-drop-table'</span>\n</code></pre></div></div>\n\n<p>And also use it passing a hash, with one or more keys, where the key<br />\nis the adapter</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Tasks</span><span class=\"o\">::</span><span class=\"no\">DatabaseTasks</span><span class=\"p\">.</span><span class=\"nf\">structure_dump_flags</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"ss\">mysql2: </span><span class=\"p\">[</span><span class=\"s1\">'--no-defaults'</span><span class=\"p\">,</span> <span class=\"s1\">'--skip-add-drop-table'</span><span class=\"p\">],</span>\n  <span class=\"ss\">postgres: </span><span class=\"s1\">'--no-tablespaces'</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p><em>Gustavo Gonzalez</em></p>\n"
  },
  {
    "message": "*   Connection specification now passes the \"url\" key as a configuration for the\n    adapter if the \"url\" protocol is \"jdbc\", \"http\", or \"https\". Previously only\n    urls with the \"jdbc\" prefix were passed to the Active Record Adapter, others\n    are assumed to be adapter specification urls.\n\n    Fixes #41137.\n\n    *Jonathan Bracy*",
    "project": "activerecord",
    "date_merged": 1611347139000,
    "author": "Jon Bracy",
    "sha": "29cad39bd5cb5efe9ca90671859464c344db026e",
    "pr": "41144",
    "merge_sha": "aec71e84d83678d47ae46f7e90ba1dd7250c353c",
    "html": "<p>Connection specification now passes the “url” key as a configuration for the<br />\nadapter if the “url” protocol is “jdbc”, “http”, or “https”. Previously only<br />\nurls with the “jdbc” prefix were passed to the Active Record Adapter, others<br />\nare assumed to be adapter specification urls.</p>\n\n<p>Fixes #41137.</p>\n\n<p><em>Jonathan Bracy</em></p>\n"
  },
  {
    "message": "*   Allow to opt-out of `strict_loading` mode on a per-record base.\n\n    This is useful when strict loading is enabled application wide or on a\n    model level.\n\n    ```ruby\n    class User < ApplicationRecord\n      has_many :bookmarks\n      has_many :articles, strict_loading: true\n    end\n\n    user = User.first\n    user.articles                        # => ActiveRecord::StrictLoadingViolationError\n    user.bookmarks                       # => #<ActiveRecord::Associations::CollectionProxy>\n\n    user.strict_loading!(true)           # => true\n    user.bookmarks                       # => ActiveRecord::StrictLoadingViolationError\n\n    user.strict_loading!(false)          # => false\n    user.bookmarks                       # => #<ActiveRecord::Associations::CollectionProxy>\n    user.articles.strict_loading!(false) # => #<ActiveRecord::Associations::CollectionProxy>\n    ```\n\n    *Ayrton De Craene*",
    "project": "activerecord",
    "date_merged": 1611256574000,
    "author": "Ayrton De Craene",
    "sha": "20412799604cd164a6b000ce83601415ab9db79b",
    "pr": "41181",
    "merge_sha": "32e5d55a277690a8b4e58864bb2542d93ceaa017",
    "html": "<p>Allow to opt-out of <code>strict_loading</code> mode on a per-record base.</p>\n\n<p>This is useful when strict loading is enabled application wide or on a<br />\nmodel level.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">User</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:bookmarks</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:articles</span><span class=\"p\">,</span> <span class=\"ss\">strict_loading: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">articles</span>                        <span class=\"c1\"># =&gt; ActiveRecord::StrictLoadingViolationError</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">bookmarks</span>                       <span class=\"c1\"># =&gt; #&lt;ActiveRecord::Associations::CollectionProxy&gt;</span>\n\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">strict_loading!</span><span class=\"p\">(</span><span class=\"kp\">true</span><span class=\"p\">)</span>           <span class=\"c1\"># =&gt; true</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">bookmarks</span>                       <span class=\"c1\"># =&gt; ActiveRecord::StrictLoadingViolationError</span>\n\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">strict_loading!</span><span class=\"p\">(</span><span class=\"kp\">false</span><span class=\"p\">)</span>          <span class=\"c1\"># =&gt; false</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">bookmarks</span>                       <span class=\"c1\"># =&gt; #&lt;ActiveRecord::Associations::CollectionProxy&gt;</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">articles</span><span class=\"p\">.</span><span class=\"nf\">strict_loading!</span><span class=\"p\">(</span><span class=\"kp\">false</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; #&lt;ActiveRecord::Associations::CollectionProxy&gt;</span>\n</code></pre></div></div>\n\n<p><em>Ayrton De Craene</em></p>\n"
  },
  {
    "message": "*   Add `FinderMethods#sole` and `#find_sole_by` to find and assert the\n    presence of exactly one record.\n\n    Used when you need a single row, but also want to assert that there aren't\n    multiple rows matching the condition; especially for when database\n    constraints aren't enough or are impractical.\n\n    ```ruby\n    Product.where([\"price = %?\", price]).sole\n    # => ActiveRecord::RecordNotFound      (if no Product with given price)\n    # => #<Product ...>                    (if one Product with given price)\n    # => ActiveRecord::SoleRecordExceeded  (if more than one Product with given price)\n\n    user.api_keys.find_sole_by(key: key)\n    # as above\n    ```\n\n    *Asherah Connor*",
    "project": "activerecord",
    "date_merged": 1609272786000,
    "author": "Asherah Connor",
    "sha": "e2ccc482462d43c7dd801ca016a32d1f884288f5",
    "pr": "40768",
    "merge_sha": "414bdf73e54d9377449f698740b7649318f28a4f",
    "html": "<p>Add <code>FinderMethods#sole</code> and <code>#find_sole_by</code> to find and assert the<br />\npresence of exactly one record.</p>\n\n<p>Used when you need a single row, but also want to assert that there aren’t<br />\nmultiple rows matching the condition; especially for when database<br />\nconstraints aren’t enough or are impractical.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Product</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">([</span><span class=\"s2\">\"price = %?\"</span><span class=\"p\">,</span> <span class=\"n\">price</span><span class=\"p\">]).</span><span class=\"nf\">sole</span>\n<span class=\"c1\"># =&gt; ActiveRecord::RecordNotFound      (if no Product with given price)</span>\n<span class=\"c1\"># =&gt; #&lt;Product ...&gt;                    (if one Product with given price)</span>\n<span class=\"c1\"># =&gt; ActiveRecord::SoleRecordExceeded  (if more than one Product with given price)</span>\n\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">api_keys</span><span class=\"p\">.</span><span class=\"nf\">find_sole_by</span><span class=\"p\">(</span><span class=\"ss\">key: </span><span class=\"n\">key</span><span class=\"p\">)</span>\n<span class=\"c1\"># as above</span>\n</code></pre></div></div>\n\n<p><em>Asherah Connor</em></p>\n"
  },
  {
    "message": "*   Makes `ActiveRecord::AttributeMethods::Query` respect the getter overrides defined in the model.\n\n    Before:\n\n    ```ruby\n    class User\n      def admin\n        false # Overriding the getter to always return false\n      end\n    end\n\n    user = User.first\n    user.update(admin: true)\n\n    user.admin # false (as expected, due to the getter overwrite)\n    user.admin? # true (not expected, returned the DB column value)\n    ```\n\n    After this commit, `user.admin?` above returns false, as expected.\n\n    Fixes #40771.\n\n    *Felipe*",
    "project": "activerecord",
    "date_merged": 1609269600000,
    "author": "Ryuta Kamizono",
    "sha": "401ce9dd3d68bb550c92d40c31dc4c4e564eb6b9",
    "pr": "40961",
    "merge_sha": "67a1cb6c193ff1a00f1fef4270566162b255a60e",
    "html": "<p>Makes <code>ActiveRecord::AttributeMethods::Query</code> respect the getter overrides defined in the model.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">User</span>\n  <span class=\"k\">def</span> <span class=\"nf\">admin</span>\n    <span class=\"kp\">false</span> <span class=\"c1\"># Overriding the getter to always return false</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">update</span><span class=\"p\">(</span><span class=\"ss\">admin: </span><span class=\"kp\">true</span><span class=\"p\">)</span>\n\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">admin</span> <span class=\"c1\"># false (as expected, due to the getter overwrite)</span>\n<span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">admin?</span> <span class=\"c1\"># true (not expected, returned the DB column value)</span>\n</code></pre></div></div>\n\n<p>After this commit, <code>user.admin?</code> above returns false, as expected.</p>\n\n<p>Fixes #40771.</p>\n\n<p><em>Felipe</em></p>\n"
  },
  {
    "message": "*   Allow delegated_type to be specified primary_key and foreign_key.\n\n    Since delegated_type assumes that the foreign_key ends with `_id`,\n    `singular_id` defined by it does not work when the foreign_key does\n    not end with `id`. This change fixes it by taking into account\n    `primary_key` and `foreign_key` in the options.\n\n    *Ryota Egusa*",
    "project": "activerecord",
    "date_merged": 1608326693000,
    "author": "Ryota Egusa",
    "sha": "941c5641b07190cf9e5a5175e3f1a8ea6d10511f",
    "pr": "40865",
    "merge_sha": "d133078a6264f2ec9512fb85554123054e762a36",
    "html": "<p>Allow delegated_type to be specified primary_key and foreign_key.</p>\n\n<p>Since delegated_type assumes that the foreign_key ends with <code>_id</code>,<br />\n<code>singular_id</code> defined by it does not work when the foreign_key does<br />\nnot end with <code>id</code>. This change fixes it by taking into account<br />\n<code>primary_key</code> and <code>foreign_key</code> in the options.</p>\n\n<p><em>Ryota Egusa</em></p>\n"
  },
  {
    "message": "*   Expose an `invert_where` method that will invert all scope conditions.\n\n    ```ruby\n    class User\n      scope :active, -> { where(accepted: true, locked: false) }\n    end\n\n    User.active\n    # ... WHERE `accepted` = 1 AND `locked` = 0\n\n    User.active.invert_where\n    # ... WHERE NOT (`accepted` = 1 AND `locked` = 0)\n    ```\n\n    *Kevin Deisz*",
    "project": "activerecord",
    "date_merged": 1608326392000,
    "author": "Kevin Deisz",
    "sha": "812e90482d4c6f3b76bc99d7c9797d9106125cd5",
    "pr": "40249",
    "merge_sha": "23019c3969906b032235a644eb73768809e289a6",
    "html": "<p>Expose an <code>invert_where</code> method that will invert all scope conditions.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">User</span>\n  <span class=\"n\">scope</span> <span class=\"ss\">:active</span><span class=\"p\">,</span> <span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"n\">where</span><span class=\"p\">(</span><span class=\"ss\">accepted: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">locked: </span><span class=\"kp\">false</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">active</span>\n<span class=\"c1\"># ... WHERE `accepted` = 1 AND `locked` = 0</span>\n\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">active</span><span class=\"p\">.</span><span class=\"nf\">invert_where</span>\n<span class=\"c1\"># ... WHERE NOT (`accepted` = 1 AND `locked` = 0)</span>\n</code></pre></div></div>\n\n<p><em>Kevin Deisz</em></p>\n"
  },
  {
    "message": "*   Restore possibility of passing `false` to :polymorphic option of `belongs_to`.\n\n    Previously, passing `false` would trigger the option validation logic\n    to throw an error saying :polymorphic would not be a valid option.\n\n    *glaszig*",
    "project": "activerecord",
    "date_merged": 1608270302000,
    "author": "glaszig",
    "sha": "5b2332ac71e39fbdba0067cdf6231a8445f5e29e",
    "pr": "40879",
    "merge_sha": "9c120d7559b964d2a619a75faa9776b8f03c5cf7",
    "html": "<p>Restore possibility of passing <code>false</code> to :polymorphic option of <code>belongs_to</code>.</p>\n\n<p>Previously, passing <code>false</code> would trigger the option validation logic<br />\nto throw an error saying :polymorphic would not be a valid option.</p>\n\n<p><em>glaszig</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `database` kwarg from `connected_to`.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1608270302000,
    "author": "eileencodes",
    "sha": "96010b0066a7acc071a575096fb053022e679596",
    "pr": "40879",
    "merge_sha": "9c120d7559b964d2a619a75faa9776b8f03c5cf7",
    "html": "<p>Remove deprecated <code>database</code> kwarg from <code>connected_to</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Allow adding nonnamed expression indexes to be revertible.\n\n    Previously, the following code would raise an error, when executed while rolling back,\n    and the index name should be specified explicitly. Now, the index name is inferred\n    automatically.\n\n    ```ruby\n    add_index(:items, \"to_tsvector('english', description)\")\n    ```\n\n    Fixes #40732.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1607759269000,
    "author": "fatkodima",
    "sha": "633fa55c1c3dc41c864bc19ece8641ba36240896",
    "pr": "40803",
    "merge_sha": "c60bab5c99f1fc3827520d04d71a55357c008973",
    "html": "<p>Allow adding nonnamed expression indexes to be revertible.</p>\n\n<p>Previously, the following code would raise an error, when executed while rolling back,<br />\nand the index name should be specified explicitly. Now, the index name is inferred<br />\nautomatically.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">add_index</span><span class=\"p\">(</span><span class=\"ss\">:items</span><span class=\"p\">,</span> <span class=\"s2\">\"to_tsvector('english', description)\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Fixes #40732.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Only warn about negative enums if a positive form that would cause conflicts exists.\n\n    Fixes #39065.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1607533891000,
    "author": "Alex Ghiculescu",
    "sha": "6f9c639825d6a1e0624219efecac153b28944d81",
    "pr": "40679",
    "merge_sha": "354202e75d1d9510e2cc2f0d78ffdd77a43a2709",
    "html": "<p>Only warn about negative enums if a positive form that would cause conflicts exists.</p>\n\n<p>Fixes #39065.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Add option to run `default_scope` on all queries.\n\n    Previously, a `default_scope` would only run on select or insert queries. In some cases, like non-Rails tenant sharding solutions, it may be desirable to run `default_scope` on all queries in order to ensure queries are including a foreign key for the shard (i.e. `blog_id`).\n\n    Now applications can add an option to run on all queries including select, insert, delete, and update by adding an `all_queries` option to the default scope definition.\n\n    ```ruby\n    class Article < ApplicationRecord\n      default_scope -> { where(blog_id: Current.blog.id) }, all_queries: true\n    end\n    ```\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1606858184000,
    "author": "eileencodes",
    "sha": "816f6194b6efc622b86b7c439c7727af0f0c3b4c",
    "pr": "40720",
    "merge_sha": "600132afc17453019772d7065b0dde0ff408503a",
    "html": "<p>Add option to run <code>default_scope</code> on all queries.</p>\n\n<p>Previously, a <code>default_scope</code> would only run on select or insert queries. In some cases, like non-Rails tenant sharding solutions, it may be desirable to run <code>default_scope</code> on all queries in order to ensure queries are including a foreign key for the shard (i.e. <code>blog_id</code>).</p>\n\n<p>Now applications can add an option to run on all queries including select, insert, delete, and update by adding an <code>all_queries</code> option to the default scope definition.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Article</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">default_scope</span> <span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"n\">where</span><span class=\"p\">(</span><span class=\"ss\">blog_id: </span><span class=\"no\">Current</span><span class=\"p\">.</span><span class=\"nf\">blog</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">)</span> <span class=\"p\">},</span> <span class=\"ss\">all_queries: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Add `where.associated` to check for the presence of an association.\n\n    ```ruby\n    # Before:\n    account.users.joins(:contact).where.not(contact_id: nil)\n\n    # After:\n    account.users.where.associated(:contact)\n    ```\n\n    Also mirrors `where.missing`.\n\n    *Kasper Timm Hansen*",
    "project": "activerecord",
    "date_merged": 1606397377000,
    "author": "Kasper Timm Hansen",
    "sha": "ccdf6b8d42b2d32e0618870c87b1de83c06542c7",
    "pr": "40696",
    "merge_sha": "7eda5673e99305ec2a05102ce3a43a2bc1a28966",
    "html": "<p>Add <code>where.associated</code> to check for the presence of an association.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Before:</span>\n<span class=\"n\">account</span><span class=\"p\">.</span><span class=\"nf\">users</span><span class=\"p\">.</span><span class=\"nf\">joins</span><span class=\"p\">(</span><span class=\"ss\">:contact</span><span class=\"p\">).</span><span class=\"nf\">where</span><span class=\"p\">.</span><span class=\"nf\">not</span><span class=\"p\">(</span><span class=\"ss\">contact_id: </span><span class=\"kp\">nil</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># After:</span>\n<span class=\"n\">account</span><span class=\"p\">.</span><span class=\"nf\">users</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">.</span><span class=\"nf\">associated</span><span class=\"p\">(</span><span class=\"ss\">:contact</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Also mirrors <code>where.missing</code>.</p>\n\n<p><em>Kasper Timm Hansen</em></p>\n"
  },
  {
    "message": "*   Allow constructors (`build_association` and `create_association`) on\n    `has_one :through` associations.\n\n    *Santiago Perez Perret*",
    "project": "activerecord",
    "date_merged": 1604946586000,
    "author": "Santiago Perez Perret",
    "sha": "ac61973247190b510f87692cad627a099433643e",
    "pr": "40007",
    "merge_sha": "8ead8b3f87bb9c3c39d7eefb1f72dcb3c40219d0",
    "html": "<p>Allow constructors (<code>build_association</code> and <code>create_association</code>) on<br />\n<code>has_one :through</code> associations.</p>\n\n<p><em>Santiago Perez Perret</em></p>\n"
  },
  {
    "message": "*   Fix the `number_to_human_size` view helper to correctly work with negative numbers.\n\n    *Earlopain*",
    "project": "actionview",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "a645b9fffa4b205bf487c8d0b778c0163add9a71",
    "pr": "49791",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix the <code>number_to_human_size</code> view helper to correctly work with negative numbers.</p>\n\n<p><em>Earlopain</em></p>\n"
  },
  {
    "message": "*   Fix `form_for` missing the hidden `_method` input for models with a\n    namespaced route.\n\n    *Hartley McGuire*",
    "project": "actionview",
    "date_merged": 1693241787000,
    "author": "Hartley McGuire",
    "sha": "7d31cea35cd096099a247606c6f90a4bded9e3ca",
    "pr": "49053",
    "merge_sha": "d0403d2468c005e677fd4e5e36932182344d5563",
    "html": "<p>Fix <code>form_for</code> missing the hidden <code>_method</code> input for models with a<br />\nnamespaced route.</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Fix `render collection: @records, cache: true` inside `jbuilder` templates\n\n    The previous fix that shipped in `7.0.7` assumed template fragments are always strings,\n    this isn't true with `jbuilder`.\n\n    *Jean Boussier*",
    "project": "actionview",
    "date_merged": 1692006777000,
    "author": "Jean Boussier",
    "sha": "6db11339f4ed33d7593b428e39da73d6e06511af",
    "pr": "48937",
    "merge_sha": "a844773245e96de8a47d24df76747cdc9e4aa01f",
    "html": "<p>Fix <code>render collection: @records, cache: true</code> inside <code>jbuilder</code> templates</p>\n\n<p>The previous fix that shipped in <code>7.0.7</code> assumed template fragments are always strings,<br />\nthis isn’t true with <code>jbuilder</code>.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix `render collection: @records, cache: true` to cache fragments as bare strings\n\n    Previously it would incorrectly cache them as Action View buffers.\n\n    *Jean Boussier*",
    "project": "actionview",
    "date_merged": 1688564812000,
    "author": "Jean Boussier",
    "sha": "64bd0acf4d3abd54b029106930a7afcdad7aeaea",
    "pr": "48645",
    "merge_sha": "106f4a6f6a558419e57cc5cc4d1a111c9b8abe05",
    "html": "<p>Fix <code>render collection: @records, cache: true</code> to cache fragments as bare strings</p>\n\n<p>Previously it would incorrectly cache them as Action View buffers.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Don't double-encode nested `field_id` and `field_name` index values\n\n    Pass `index: @options` as a default keyword argument to `field_id` and\n    `field_name` view helper methods.\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1688443378000,
    "author": "Sean Doyle",
    "sha": "d76f2de1040f0504f9f8de278f976e8147ebc5af",
    "pr": "48642",
    "merge_sha": "81239d61c9b068bdfaad67b62017b17fd27eae77",
    "html": "<p>Don’t double-encode nested <code>field_id</code> and <code>field_name</code> index values</p>\n\n<p>Pass <code>index: @options</code> as a default keyword argument to <code>field_id</code> and<br />\n<code>field_name</code> view helper methods.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   `FormBuilder#id` finds id set by `form_for` and `form_with`.\n\n    *Matt Polito*",
    "project": "actionview",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p><code>FormBuilder#id</code> finds id set by <code>form_for</code> and <code>form_with</code>.</p>\n\n<p><em>Matt Polito</em></p>\n"
  },
  {
    "message": "*   Allow all available locales for template lookups.\n\n    *Ben Dilley*",
    "project": "actionview",
    "date_merged": 1685201134000,
    "author": "Rafael Mendonça França",
    "sha": "ac1fc34e1d5b9cf5b9f9d76de5211f8c4b282150",
    "pr": "48308",
    "merge_sha": "caeb89d08801989e240162eec396172e586d6a5c",
    "html": "<p>Allow all available locales for template lookups.</p>\n\n<p><em>Ben Dilley</em></p>\n"
  },
  {
    "message": "*   Choices of `select` can optionally contain html attributes as the last element\n    of the child arrays when using grouped/nested collections\n\n    ```erb\n    <%= form.select :foo, [[\"North America\", [[\"United States\",\"US\"],[\"Canada\",\"CA\"]], { disabled: \"disabled\" }]] %>\n    # => <select><optgroup label=\"North America\" disabled=\"disabled\"><option value=\"US\">United States</option><option value=\"CA\">Canada</option></optgroup></select>\n    ```\n\n    *Chris Gunther*",
    "project": "actionview",
    "date_merged": 1671784263000,
    "author": "Rafael Mendonça França",
    "sha": "a85813b63adf9ac5b0720ccaa04ef93ed22c1726",
    "pr": "43019",
    "merge_sha": "83009f94e7539c7db89f83446b1478bdaec9d1a0",
    "html": "<p>Choices of <code>select</code> can optionally contain html attributes as the last element<br />\nof the child arrays when using grouped/nested collections</p>\n\n<div class=\"language-erb highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">&lt;%=</span> <span class=\"n\">form</span><span class=\"p\">.</span><span class=\"nf\">select</span> <span class=\"ss\">:foo</span><span class=\"p\">,</span> <span class=\"p\">[[</span><span class=\"s2\">\"North America\"</span><span class=\"p\">,</span> <span class=\"p\">[[</span><span class=\"s2\">\"United States\"</span><span class=\"p\">,</span><span class=\"s2\">\"US\"</span><span class=\"p\">],[</span><span class=\"s2\">\"Canada\"</span><span class=\"p\">,</span><span class=\"s2\">\"CA\"</span><span class=\"p\">]],</span> <span class=\"p\">{</span> <span class=\"ss\">disabled: </span><span class=\"s2\">\"disabled\"</span> <span class=\"p\">}]]</span> <span class=\"cp\">%&gt;</span>\n# =&gt; <span class=\"nt\">&lt;select&gt;&lt;optgroup</span> <span class=\"na\">label=</span><span class=\"s\">\"North America\"</span> <span class=\"na\">disabled=</span><span class=\"s\">\"disabled\"</span><span class=\"nt\">&gt;&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"US\"</span><span class=\"nt\">&gt;</span>United States<span class=\"nt\">&lt;/option&gt;&lt;option</span> <span class=\"na\">value=</span><span class=\"s\">\"CA\"</span><span class=\"nt\">&gt;</span>Canada<span class=\"nt\">&lt;/option&gt;&lt;/optgroup&gt;&lt;/select&gt;</span>\n</code></pre></div></div>\n\n<p><em>Chris Gunther</em></p>\n"
  },
  {
    "message": "*   Ignore certain data-* attributes in rails-ujs when element is contenteditable\n\n    [CVE-2023-23913]",
    "project": "actionview",
    "date_merged": 1678736093000,
    "author": "John Hawthorn",
    "sha": "c15ee6e7b5065db3c46afa1f025b8e45f443604e",
    "pr": null,
    "merge_sha": "98497a6cd34921f0ef33848af36b19281b6ee027",
    "html": "<p>Ignore certain data-* attributes in rails-ujs when element is contenteditable</p>\n\n<p>[CVE-2023-23913]</p>\n"
  },
  {
    "message": "*   Guard against `ActionView::Helpers::FormTagHelper#field_name` calls with nil\n    `object_name` arguments. For example:\n\n    ```erb\n    <%= fields do |f| %>\n      <%= f.field_name :body %>\n    <% end %>\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1657647916000,
    "author": "Jonathan Hefner",
    "sha": "e62d8f2e12c2d632bb885f9a32d3c33f0bf015cf",
    "pr": "45366",
    "merge_sha": "a7308108f9037aa8ed5bfbd9b6edb2b03ab582cf",
    "html": "<p>Guard against <code>ActionView::Helpers::FormTagHelper#field_name</code> calls with nil<br />\n<code>object_name</code> arguments. For example:</p>\n\n<div class=\"language-erb highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">&lt;%=</span> <span class=\"n\">fields</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span> <span class=\"cp\">%&gt;</span>\n  <span class=\"cp\">&lt;%=</span> <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">field_name</span> <span class=\"ss\">:body</span> <span class=\"cp\">%&gt;</span>\n<span class=\"cp\">&lt;%</span> <span class=\"k\">end</span> <span class=\"cp\">%&gt;</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Strings returned from `strip_tags` are correctly tagged `html_safe?`\n\n    Because these strings contain no HTML elements and the basic entities are escaped, they are safe\n    to be included as-is as PCDATA in HTML content. Tagging them as html-safe avoids double-escaping\n    entities when being concatenated to a SafeBuffer during rendering.\n\n    Fixes [rails/rails-html-sanitizer#124](https://github.com/rails/rails-html-sanitizer/issues/124)\n\n    *Mike Dalessio*",
    "project": "actionview",
    "date_merged": 1654715957000,
    "author": "Eileen M. Uchitelle",
    "sha": "d15a694b40922f15c81042acaeede9e7df7bbb75",
    "pr": "45218",
    "merge_sha": "270a2ddd6b70a1d188650afe48dddd025c4e605a",
    "html": "<p>Strings returned from <code>strip_tags</code> are correctly tagged <code>html_safe?</code></p>\n\n<p>Because these strings contain no HTML elements and the basic entities are escaped, they are safe<br />\nto be included as-is as PCDATA in HTML content. Tagging them as html-safe avoids double-escaping<br />\nentities when being concatenated to a SafeBuffer during rendering.</p>\n\n<p>Fixes <a href=\"https://github.com/rails/rails-html-sanitizer/issues/124\">rails/rails-html-sanitizer#124</a></p>\n\n<p><em>Mike Dalessio</em></p>\n"
  },
  {
    "message": "*   Ensure models passed to `form_for` attempt to call `to_model`.\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1646631757000,
    "author": "Gannon McGibbon",
    "sha": "a9f2ad40d1c1a0c47ac36c9186a28ec773790fcf",
    "pr": "44328",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Ensure models passed to <code>form_for</code> attempt to call <code>to_model</code>.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Fix and add protections for XSS in `ActionView::Helpers` and `ERB::Util`.\n\n    Escape dangerous characters in names of tags and names of attributes in the\n    tag helpers, following the XML specification. Rename the option\n    `:escape_attributes` to `:escape`, to simplify by applying the option to the\n    whole tag.\n\n    *Álvaro Martín Fraguas*",
    "project": "actionview",
    "date_merged": 1651004099000,
    "author": "Alvaro Martin Fraguas",
    "sha": "5c7dae5a410ff49fe4dcf30b97ee0f9148114b66",
    "pr": null,
    "merge_sha": "c204039bf10191ed32b7cf75ef0275d3d0b12a6c",
    "html": "<p>Fix and add protections for XSS in <code>ActionView::Helpers</code> and <code>ERB::Util</code>.</p>\n\n<p>Escape dangerous characters in names of tags and names of attributes in the<br />\ntag helpers, following the XML specification. Rename the option<br />\n<code>:escape_attributes</code> to <code>:escape</code>, to simplify by applying the option to the<br />\nwhole tag.</p>\n\n<p><em>Álvaro Martín Fraguas</em></p>\n"
  },
  {
    "message": "*   Ensure `preload_link_tag` preloads JavaScript modules correctly.\n\n    *Máximo Mussini*",
    "project": "actionview",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Ensure <code>preload_link_tag</code> preloads JavaScript modules correctly.</p>\n\n<p><em>Máximo Mussini</em></p>\n"
  },
  {
    "message": "*   Fix `stylesheet_link_tag` and similar helpers are being used to work in objects with\n    a `response` method.\n\n    *dark-panda*",
    "project": "actionview",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Fix <code>stylesheet_link_tag</code> and similar helpers are being used to work in objects with<br />\na <code>response</code> method.</p>\n\n<p><em>dark-panda</em></p>\n"
  },
  {
    "message": "*   Fix `button_to` to work with a hash parameter as URL.\n\n    *MingyuanQin*",
    "project": "actionview",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>button_to</code> to work with a hash parameter as URL.</p>\n\n<p><em>MingyuanQin</em></p>\n"
  },
  {
    "message": "*   Fix `link_to` with a model passed as an argument twice.\n\n    *Alex Ghiculescu*",
    "project": "actionview",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Fix <code>link_to</code> with a model passed as an argument twice.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Support `include_hidden:` option in calls to\n    `ActionView::Helper::FormBuilder#file_field` with `multiple: true` to\n    support submitting an empty collection of files.\n\n    ```ruby\n    form.file_field :attachments, multiple: true\n    # => <input type=\"hidden\" autocomplete=\"off\" name=\"post[attachments][]\" value=\"\">\n         <input type=\"file\" multiple=\"multiple\" id=\"post_attachments\" name=\"post[attachments][]\">\n\n    form.file_field :attachments, multiple: true, include_hidden: false\n    # => <input type=\"file\" multiple=\"multiple\" id=\"post_attachments\" name=\"post[attachments][]\">\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1639532915000,
    "author": "Rafael Mendonça França",
    "sha": "906e4e1fc819c58811d302d169a3697ec9bd609f",
    "pr": "43511",
    "merge_sha": "51e654214fe5e558d728d993e9c4f5e74fe8950a",
    "html": "<p>Support <code>include_hidden:</code> option in calls to<br />\n<code>ActionView::Helper::FormBuilder#file_field</code> with <code>multiple: true</code> to<br />\nsupport submitting an empty collection of files.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">form</span><span class=\"p\">.</span><span class=\"nf\">file_field</span> <span class=\"ss\">:attachments</span><span class=\"p\">,</span> <span class=\"ss\">multiple: </span><span class=\"kp\">true</span>\n<span class=\"c1\"># =&gt; &lt;input type=\"hidden\" autocomplete=\"off\" name=\"post[attachments][]\" value=\"\"&gt;</span>\n     <span class=\"o\">&lt;</span><span class=\"n\">input</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s2\">\"file\"</span> <span class=\"n\">multiple</span><span class=\"o\">=</span><span class=\"s2\">\"multiple\"</span> <span class=\"nb\">id</span><span class=\"o\">=</span><span class=\"s2\">\"post_attachments\"</span> <span class=\"nb\">name</span><span class=\"o\">=</span><span class=\"s2\">\"post[attachments][]\"</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">form</span><span class=\"p\">.</span><span class=\"nf\">file_field</span> <span class=\"ss\">:attachments</span><span class=\"p\">,</span> <span class=\"ss\">multiple: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">include_hidden: </span><span class=\"kp\">false</span>\n<span class=\"c1\"># =&gt; &lt;input type=\"file\" multiple=\"multiple\" id=\"post_attachments\" name=\"post[attachments][]\"&gt;</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Fix `number_with_precision(raise: true)` always raising even on valid numbers.\n\n    *Pedro Moreira*",
    "project": "actionview",
    "date_merged": 1639513460000,
    "author": "Pedro Moreira",
    "sha": "0132eafbf31baef316aff80fa0b456b281c86b0c",
    "pr": null,
    "merge_sha": "8132d7b1063614631f7f06a7223ca87f5a993b5e",
    "html": "<p>Fix <code>number_with_precision(raise: true)</code> always raising even on valid numbers.</p>\n\n<p><em>Pedro Moreira</em></p>\n"
  },
  {
    "message": "*   Support `fields model: [@nested, @model]` the same way as `form_with model:\n    [@nested, @model]`.\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1637016937000,
    "author": "Sean Doyle",
    "sha": "46175a036a6a3821fe292f6cba73de030b0f8434",
    "pr": "43416",
    "merge_sha": "846f9e959531e9c9b466eff152d3ac5497f1f969",
    "html": "<p>Support <code>fields model: [@nested, @model]</code> the same way as <code>form_with model:\n[@nested, @model]</code>.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Infer HTTP verb `[method]` from a model or Array with model as the first\n    argument to `button_to` when combined with a block:\n\n    ```ruby\n    button_to(Workshop.find(1)){ \"Update\" }\n    #=> <form method=\"post\" action=\"/workshops/1\" class=\"button_to\">\n    #=>   <input type=\"hidden\" name=\"_method\" value=\"patch\" autocomplete=\"off\" />\n    #=>   <button type=\"submit\">Update</button>\n    #=> </form>\n\n    button_to([ Workshop.find(1), Session.find(1) ]) { \"Update\" }\n    #=> <form method=\"post\" action=\"/workshops/1/sessions/1\" class=\"button_to\">\n    #=>   <input type=\"hidden\" name=\"_method\" value=\"patch\" autocomplete=\"off\" />\n    #=>   <button type=\"submit\">Update</button>\n    #=> </form>\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1637015701000,
    "author": "Sean Doyle",
    "sha": "7d2be2e0115c5be83e41b0d033b6a1efe9b1b1fd",
    "pr": "43413",
    "merge_sha": "033822117b8656c696098babf93feb8bdb41f40c",
    "html": "<p>Infer HTTP verb <code>[method]</code> from a model or Array with model as the first<br />\nargument to <code>button_to</code> when combined with a block:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">button_to</span><span class=\"p\">(</span><span class=\"no\">Workshop</span><span class=\"p\">.</span><span class=\"nf\">find</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)){</span> <span class=\"s2\">\"Update\"</span> <span class=\"p\">}</span>\n<span class=\"c1\">#=&gt; &lt;form method=\"post\" action=\"/workshops/1\" class=\"button_to\"&gt;</span>\n<span class=\"c1\">#=&gt;   &lt;input type=\"hidden\" name=\"_method\" value=\"patch\" autocomplete=\"off\" /&gt;</span>\n<span class=\"c1\">#=&gt;   &lt;button type=\"submit\"&gt;Update&lt;/button&gt;</span>\n<span class=\"c1\">#=&gt; &lt;/form&gt;</span>\n\n<span class=\"n\">button_to</span><span class=\"p\">([</span> <span class=\"no\">Workshop</span><span class=\"p\">.</span><span class=\"nf\">find</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"no\">Session</span><span class=\"p\">.</span><span class=\"nf\">find</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"p\">])</span> <span class=\"p\">{</span> <span class=\"s2\">\"Update\"</span> <span class=\"p\">}</span>\n<span class=\"c1\">#=&gt; &lt;form method=\"post\" action=\"/workshops/1/sessions/1\" class=\"button_to\"&gt;</span>\n<span class=\"c1\">#=&gt;   &lt;input type=\"hidden\" name=\"_method\" value=\"patch\" autocomplete=\"off\" /&gt;</span>\n<span class=\"c1\">#=&gt;   &lt;button type=\"submit\"&gt;Update&lt;/button&gt;</span>\n<span class=\"c1\">#=&gt; &lt;/form&gt;</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Support passing a Symbol as the first argument to `FormBuilder#button`:\n\n    ```ruby\n    form.button(:draft, value: true)\n    # => <button name=\"post[draft]\" value=\"true\" type=\"submit\">Create post</button>\n\n    form.button(:draft, value: true) do\n      content_tag(:strong, \"Save as draft\")\n    end\n    # =>  <button name=\"post[draft]\" value=\"true\" type=\"submit\">\n    #       <strong>Save as draft</strong>\n    #     </button>\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1637014743000,
    "author": "Sean Doyle",
    "sha": "15f611362230b4e34bf157a52e3d90acb22128f2",
    "pr": "42682",
    "merge_sha": "83ce6e31cec767770c73021b8a4f5c758c4f97f4",
    "html": "<p>Support passing a Symbol as the first argument to <code>FormBuilder#button</code>:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">form</span><span class=\"p\">.</span><span class=\"nf\">button</span><span class=\"p\">(</span><span class=\"ss\">:draft</span><span class=\"p\">,</span> <span class=\"ss\">value: </span><span class=\"kp\">true</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt; &lt;button name=\"post[draft]\" value=\"true\" type=\"submit\"&gt;Create post&lt;/button&gt;</span>\n\n<span class=\"n\">form</span><span class=\"p\">.</span><span class=\"nf\">button</span><span class=\"p\">(</span><span class=\"ss\">:draft</span><span class=\"p\">,</span> <span class=\"ss\">value: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n  <span class=\"n\">content_tag</span><span class=\"p\">(</span><span class=\"ss\">:strong</span><span class=\"p\">,</span> <span class=\"s2\">\"Save as draft\"</span><span class=\"p\">)</span>\n<span class=\"k\">end</span>\n<span class=\"c1\"># =&gt;  &lt;button name=\"post[draft]\" value=\"true\" type=\"submit\"&gt;</span>\n<span class=\"c1\">#       &lt;strong&gt;Save as draft&lt;/strong&gt;</span>\n<span class=\"c1\">#     &lt;/button&gt;</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Introduce the `field_name` view helper, along with the\n    `FormBuilder#field_name` counterpart:\n\n    ```ruby\n    form_for @post do |f|\n      f.field_tag :tag, name: f.field_name(:tag, multiple: true)\n      # => <input type=\"text\" name=\"post[tag][]\">\n    end\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1637011234000,
    "author": "Sean Doyle",
    "sha": "37081bf507734b61a0662045f80d92c2384a3b6c",
    "pr": "43409",
    "merge_sha": "876d2ff9042b1168fdacf43576660fc2bb8a6fa6",
    "html": "<p>Introduce the <code>field_name</code> view helper, along with the<br />\n<code>FormBuilder#field_name</code> counterpart:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">form_for</span> <span class=\"vi\">@post</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">field_tag</span> <span class=\"ss\">:tag</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">field_name</span><span class=\"p\">(</span><span class=\"ss\">:tag</span><span class=\"p\">,</span> <span class=\"ss\">multiple: </span><span class=\"kp\">true</span><span class=\"p\">)</span>\n  <span class=\"c1\"># =&gt; &lt;input type=\"text\" name=\"post[tag][]\"&gt;</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Execute the `ActionView::Base.field_error_proc` within the context of the\n    `ActionView::Base` instance:\n\n    ```ruby\n    config.action_view.field_error_proc = proc { |html| content_tag(:div, html, class: \"field_with_errors\") }\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1637010719000,
    "author": "Sean Doyle",
    "sha": "9c86593caa1e0004fc48f1a0117e0991e063f679",
    "pr": "42755",
    "merge_sha": "27d24e9caa1942fb29f87bc14f66b5a0aaf53773",
    "html": "<p>Execute the <code>ActionView::Base.field_error_proc</code> within the context of the<br />\n<code>ActionView::Base</code> instance:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">action_view</span><span class=\"p\">.</span><span class=\"nf\">field_error_proc</span> <span class=\"o\">=</span> <span class=\"nb\">proc</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">html</span><span class=\"o\">|</span> <span class=\"n\">content_tag</span><span class=\"p\">(</span><span class=\"ss\">:div</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"ss\">class: </span><span class=\"s2\">\"field_with_errors\"</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Add support for `button_to ..., authenticity_token: false`\n\n    ```ruby\n    button_to \"Create\", Post.new, authenticity_token: false\n    # => <form class=\"button_to\" method=\"post\" action=\"/posts\"><button type=\"submit\">Create</button></form>\n\n    button_to \"Create\", Post.new, authenticity_token: true\n    # => <form class=\"button_to\" method=\"post\" action=\"/posts\"><button type=\"submit\">Create</button><input type=\"hidden\" name=\"form_token\" value=\"abc123...\" autocomplete=\"off\" /></form>\n\n    button_to \"Create\", Post.new, authenticity_token: \"secret\"\n    # => <form class=\"button_to\" method=\"post\" action=\"/posts\"><button type=\"submit\">Create</button><input type=\"hidden\" name=\"form_token\" value=\"secret\" autocomplete=\"off\" /></form>\n    ```\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1636920153000,
    "author": "Sean Doyle",
    "sha": "71fb8eb833e26caab13280a0ab92d822610f51f5",
    "pr": "43417",
    "merge_sha": "6ddd2cf4310bbefc32866200280f10202dab6ab6",
    "html": "<p>Add support for <code>button_to ..., authenticity_token: false</code></p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">button_to</span> <span class=\"s2\">\"Create\"</span><span class=\"p\">,</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">,</span> <span class=\"ss\">authenticity_token: </span><span class=\"kp\">false</span>\n<span class=\"c1\"># =&gt; &lt;form class=\"button_to\" method=\"post\" action=\"/posts\"&gt;&lt;button type=\"submit\"&gt;Create&lt;/button&gt;&lt;/form&gt;</span>\n\n<span class=\"n\">button_to</span> <span class=\"s2\">\"Create\"</span><span class=\"p\">,</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">,</span> <span class=\"ss\">authenticity_token: </span><span class=\"kp\">true</span>\n<span class=\"c1\"># =&gt; &lt;form class=\"button_to\" method=\"post\" action=\"/posts\"&gt;&lt;button type=\"submit\"&gt;Create&lt;/button&gt;&lt;input type=\"hidden\" name=\"form_token\" value=\"abc123...\" autocomplete=\"off\" /&gt;&lt;/form&gt;</span>\n\n<span class=\"n\">button_to</span> <span class=\"s2\">\"Create\"</span><span class=\"p\">,</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">,</span> <span class=\"ss\">authenticity_token: </span><span class=\"s2\">\"secret\"</span>\n<span class=\"c1\"># =&gt; &lt;form class=\"button_to\" method=\"post\" action=\"/posts\"&gt;&lt;button type=\"submit\"&gt;Create&lt;/button&gt;&lt;input type=\"hidden\" name=\"form_token\" value=\"secret\" autocomplete=\"off\" /&gt;&lt;/form&gt;</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Support rendering `<form>` elements _without_ `[action]` attributes by:\n\n    * `form_with url: false` or `form_with ..., html: { action: false }`\n    * `form_for ..., url: false` or `form_for ..., html: { action: false }`\n    * `form_tag false` or `form_tag ..., action: false`\n    * `button_to \"...\", false` or `button_to(false) { ... }`\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1636918169000,
    "author": "Sean Doyle",
    "sha": "3dae4469afdd1e1fedac8686d63c30d6a65a7abf",
    "pr": "42051",
    "merge_sha": "e0076e4c68951e106d1d3020a3a051ee09cd6cc2",
    "html": "<p>Support rendering <code>&lt;form&gt;</code> elements <em>without</em> <code>[action]</code> attributes by:</p>\n\n<ul>\n  <li><code>form_with url: false</code> or <code>form_with ..., html: { action: false }</code></li>\n  <li><code>form_for ..., url: false</code> or <code>form_for ..., html: { action: false }</code></li>\n  <li><code>form_tag false</code> or <code>form_tag ..., action: false</code></li>\n  <li><code>button_to \"...\", false</code> or <code>button_to(false) { ... }</code></li>\n</ul>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Add `:day_format` option to `date_select`\n\n        date_select(\"article\", \"written_on\", day_format: ->(day) { day.ordinalize })\n        # generates day options like <option value=\"1\">1st</option>\\n<option value=\"2\">2nd</option>...\n\n    *Shunichi Ikegami*",
    "project": "actionview",
    "date_merged": 1635494385000,
    "author": "Shunichi Ikegami",
    "sha": "e9fa24fca50e0a1f164c4874da8d03c251111b21",
    "pr": "43567",
    "merge_sha": "394dbac0b3787de1e4dc40716122f0532f7d52d3",
    "html": "<p>Add <code>:day_format</code> option to <code>date_select</code></p>\n\n<pre><code>date_select(\"article\", \"written_on\", day_format: -&gt;(day) { day.ordinalize })\n# generates day options like &lt;option value=\"1\"&gt;1st&lt;/option&gt;\\n&lt;option value=\"2\"&gt;2nd&lt;/option&gt;...\n</code></pre>\n\n<p><em>Shunichi Ikegami</em></p>\n"
  },
  {
    "message": "*   Allow `link_to` helper to infer link name from `Model#to_s` when it\n    is used with a single argument:\n\n        link_to @profile\n        #=> <a href=\"/profiles/1\">Eileen</a>\n\n    This assumes the model class implements a `to_s` method like this:\n\n        class Profile < ApplicationRecord\n          # ...\n          def to_s\n            name\n          end\n        end\n\n    Previously you had to supply a second argument even if the `Profile`\n    model implemented a `#to_s` method that called the `name` method.\n\n        link_to @profile, @profile.name\n        #=> <a href=\"/profiles/1\">Eileen</a>\n\n    *Olivier Lacan*",
    "project": "actionview",
    "date_merged": 1632265180000,
    "author": "Rafael Mendonça França",
    "sha": "8e86e87219e44c86a52f977c99eb7f4cd944916b",
    "pr": "42234",
    "merge_sha": "860f59b5e1369a8062b15a6fd537bbec6156320c",
    "html": "<p>Allow <code>link_to</code> helper to infer link name from <code>Model#to_s</code> when it<br />\nis used with a single argument:</p>\n\n<pre><code>link_to @profile\n#=&gt; &lt;a href=\"/profiles/1\"&gt;Eileen&lt;/a&gt;\n</code></pre>\n\n<p>This assumes the model class implements a <code>to_s</code> method like this:</p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n  # ...\n  def to_s\n    name\n  end\nend\n</code></pre>\n\n<p>Previously you had to supply a second argument even if the <code>Profile</code><br />\nmodel implemented a <code>#to_s</code> method that called the <code>name</code> method.</p>\n\n<pre><code>link_to @profile, @profile.name\n#=&gt; &lt;a href=\"/profiles/1\"&gt;Eileen&lt;/a&gt;\n</code></pre>\n\n<p><em>Olivier Lacan</em></p>\n"
  },
  {
    "message": "*   Support svg unpaired tags for `tag` helper.\n\n        tag.svg { tag.use('href' => \"#cool-icon\") }\n        # => <svg><use href=\"#cool-icon\"></svg>\n\n    *Oleksii Vasyliev*",
    "project": "actionview",
    "date_merged": 1632173668000,
    "author": "Alexey Vasiliev",
    "sha": "6b7ff4f933a68b47464b4e9786589c3a6e7e52e6",
    "pr": "43232",
    "merge_sha": "6e2247e9760da37882429b7a72dff1dd1ea5963e",
    "html": "<p>Support svg unpaired tags for <code>tag</code> helper.</p>\n\n<pre><code>tag.svg { tag.use('href' =&gt; \"#cool-icon\") }\n# =&gt; &lt;svg&gt;&lt;use href=\"#cool-icon\"&gt;&lt;/svg&gt;\n</code></pre>\n\n<p><em>Oleksii Vasyliev</em></p>\n"
  },
  {
    "message": "*   Improves the performance of ActionView::Helpers::NumberHelper formatters by avoiding the use of\n    exceptions as flow control.\n\n    *Mike Dalessio*",
    "project": "actionview",
    "date_merged": 1629985270000,
    "author": "Mike Dalessio",
    "sha": "900ce92c9d59931adfda1c40fabe36dbc2f5c972",
    "pr": "43106",
    "merge_sha": "4d3a2c09c855adca005b287d7b17bd8fb261c3ea",
    "html": "<p>Improves the performance of ActionView::Helpers::NumberHelper formatters by avoiding the use of<br />\nexceptions as flow control.</p>\n\n<p><em>Mike Dalessio</em></p>\n"
  },
  {
    "message": "*   `preload_link_tag` properly inserts `as` attributes for files with `image` MIME types, such as JPG or SVG.\n\n    *Nate Berkopec*",
    "project": "actionview",
    "date_merged": 1629836061000,
    "author": "Nate Berkopec",
    "sha": "46bfd082b00a6c10f7263c769edb9c053bd03936",
    "pr": "43088",
    "merge_sha": "c7647f884208adf083b485bc17e1f8bae06ca470",
    "html": "<p><code>preload_link_tag</code> properly inserts <code>as</code> attributes for files with <code>image</code> MIME types, such as JPG or SVG.</p>\n\n<p><em>Nate Berkopec</em></p>\n"
  },
  {
    "message": "*   Add `weekday_options_for_select` and `weekday_select` helper methods. Also adds `weekday_select` to `FormBuilder`.\n\n    *Drew Bragg*, *Dana Kashubeck*, *Kasper Timm Hansen*",
    "project": "actionview",
    "date_merged": 1629134746000,
    "author": "Drew Bragg",
    "sha": "592570f1bfefaf48deac2f264112bc5bbcc64955",
    "pr": "42979",
    "merge_sha": "13a714f30d5e4c4a53062bb1b29fbeb287efd3be",
    "html": "<p>Add <code>weekday_options_for_select</code> and <code>weekday_select</code> helper methods. Also adds <code>weekday_select</code> to <code>FormBuilder</code>.</p>\n\n<p><em>Drew Bragg</em>, <em>Dana Kashubeck</em>, <em>Kasper Timm Hansen</em></p>\n"
  },
  {
    "message": "*   Add `caching?` helper that returns whether the current code path is being cached and `uncacheable!` to denote helper methods that can't participate in fragment caching.\n\n    *Ben Toews*, *John Hawthorn*, *Kasper Timm Hansen*, *Joel Hawksley*",
    "project": "actionview",
    "date_merged": 1628191936000,
    "author": "Carlos Antonio da Silva",
    "sha": "65bbfa9519990c218b8dee740722d57a4ae117c4",
    "pr": "42926",
    "merge_sha": "7f5ebc4b43030f99dc06cb79fd3b3ad3faa3af6e",
    "html": "<p>Add <code>caching?</code> helper that returns whether the current code path is being cached and <code>uncacheable!</code> to denote helper methods that can’t participate in fragment caching.</p>\n\n<p><em>Ben Toews</em>, <em>John Hawthorn</em>, <em>Kasper Timm Hansen</em>, <em>Joel Hawksley</em></p>\n"
  },
  {
    "message": "*   Add `include_seconds` option for `time_field`.\n\n        <%= form.time_field :foo, include_seconds: false %>\n        # => <input value=\"16:22\" type=\"time\" />\n\n    Default includes seconds:\n\n        <%= form.time_field :foo %>\n        # => <input value=\"16:22:01.440\" type=\"time\" />\n\n    This allows you to take advantage of [different rendering options](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/time#time_value_format) in some browsers.\n\n    *Alex Ghiculescu*",
    "project": "actionview",
    "date_merged": 1628814280000,
    "author": "Petrik de Heus",
    "sha": "68283345551d10eee260c3a74f1f8d069d1d8200",
    "pr": "42967",
    "merge_sha": "0965b67bf71b9ce02fdc25912ea0a9f90dba20ec",
    "html": "<p>Add <code>include_seconds</code> option for <code>time_field</code>.</p>\n\n<pre><code>&lt;%= form.time_field :foo, include_seconds: false %&gt;\n# =&gt; &lt;input value=\"16:22\" type=\"time\" /&gt;\n</code></pre>\n\n<p>Default includes seconds:</p>\n\n<pre><code>&lt;%= form.time_field :foo %&gt;\n# =&gt; &lt;input value=\"16:22:01.440\" type=\"time\" /&gt;\n</code></pre>\n\n<p>This allows you to take advantage of <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/time#time_value_format\">different rendering options</a> in some browsers.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Improve error messages when template file does not exist at absolute filepath.\n\n    *Ted Whang*",
    "project": "actionview",
    "date_merged": 1626156228000,
    "author": "Ted",
    "sha": "0c528034cf2154936e015cf01d8ae0fe97914a67",
    "pr": "42756",
    "merge_sha": "02b7746e6fdaee7cc127510302bfe364f8d57553",
    "html": "<p>Improve error messages when template file does not exist at absolute filepath.</p>\n\n<p><em>Ted Whang</em></p>\n"
  },
  {
    "message": "*   Add `:country_code` option to `sms_to` for consistency with `phone_to`.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1625278760000,
    "author": "Jonathan Hefner",
    "sha": "b9eb9fee64adf67a0db183e118271872e8cab014",
    "pr": "41559",
    "merge_sha": "91593af849e00ba8de7602ae86670a1e0ac7fbae",
    "html": "<p>Add <code>:country_code</code> option to <code>sms_to</code> for consistency with <code>phone_to</code>.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "actionview",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   The `translate` helper now passes `default` values that aren't\n    translation keys through `I18n.translate` for interpolation.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1619811718000,
    "author": "Jonathan Hefner",
    "sha": "dd884eb4253b698039ea302becb71630cc7bc8a0",
    "pr": "40691",
    "merge_sha": "4740d2c14bab8006b08d1ffce4559a5405718575",
    "html": "<p>The <code>translate</code> helper now passes <code>default</code> values that aren’t<br />\ntranslation keys through <code>I18n.translate</code> for interpolation.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Adds option `extname` to `stylesheet_link_tag` to skip default\n    `.css` extension appended to the stylesheet path.\n\n    Before:\n\n    ```ruby\n    stylesheet_link_tag \"style.less\"\n    # <link href=\"/stylesheets/style.less.scss\" rel=\"stylesheet\">\n    ```\n\n    After:\n\n    ```ruby\n    stylesheet_link_tag \"style.less\", extname: false, skip_pipeline: true, rel: \"stylesheet/less\"\n    # <link href=\"/stylesheets/style.less\" rel=\"stylesheet/less\">\n    ```\n\n    *Abhay Nikam*",
    "project": "actionview",
    "date_merged": 1619713084000,
    "author": "Abhay Nikam",
    "sha": "2005afbe0452f17347707dfd936f1b019da29b5c",
    "pr": "41927",
    "merge_sha": "e0d2459401f7dd64e267cdbd921e3188a1497685",
    "html": "<p>Adds option <code>extname</code> to <code>stylesheet_link_tag</code> to skip default<br />\n<code>.css</code> extension appended to the stylesheet path.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">stylesheet_link_tag</span> <span class=\"s2\">\"style.less\"</span>\n<span class=\"c1\"># &lt;link href=\"/stylesheets/style.less.scss\" rel=\"stylesheet\"&gt;</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">stylesheet_link_tag</span> <span class=\"s2\">\"style.less\"</span><span class=\"p\">,</span> <span class=\"ss\">extname: </span><span class=\"kp\">false</span><span class=\"p\">,</span> <span class=\"ss\">skip_pipeline: </span><span class=\"kp\">true</span><span class=\"p\">,</span> <span class=\"ss\">rel: </span><span class=\"s2\">\"stylesheet/less\"</span>\n<span class=\"c1\"># &lt;link href=\"/stylesheets/style.less\" rel=\"stylesheet/less\"&gt;</span>\n</code></pre></div></div>\n\n<p><em>Abhay Nikam</em></p>\n"
  },
  {
    "message": "*   Deprecate `render` locals to be assigned to instance variables.\n\n    *Petrik de Heus*",
    "project": "actionview",
    "date_merged": 1613503499000,
    "author": "Petrik",
    "sha": "96d72d9b250e307e130acdda9051f9122b149002",
    "pr": "41464",
    "merge_sha": "fe912cb1a7fb502617792c8c61eaecf4a638da8b",
    "html": "<p>Deprecate <code>render</code> locals to be assigned to instance variables.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   Remove legacy default `media=screen` from `stylesheet_link_tag`.\n\n    *André Luis Leal Cardoso Junior*",
    "project": "actionview",
    "date_merged": 1611763234000,
    "author": "Rafael Mendonça França",
    "sha": "bf545b73b74dd9f66fcf300a7a3fa6528511ed5b",
    "pr": "41215",
    "merge_sha": "3921f247f379e17c38166de187170739cbe17de1",
    "html": "<p>Remove legacy default <code>media=screen</code> from <code>stylesheet_link_tag</code>.</p>\n\n<p><em>André Luis Leal Cardoso Junior</em></p>\n"
  },
  {
    "message": "*   Change `ActionView::Helpers::FormBuilder#button` to transform `formmethod`\n    attributes into `_method=\"$VERB\"` Form Data to enable varied same-form actions:\n\n        <%= form_with model: post, method: :put do %>\n          <%= form.button \"Update\" %>\n          <%= form.button \"Delete\", formmethod: :delete %>\n        <% end %>\n        <%# => <form action=\"posts/1\">\n            =>   <input type=\"hidden\" name=\"_method\" value=\"put\">\n            =>   <button type=\"submit\">Update</button>\n            =>   <button type=\"submit\" formmethod=\"post\" name=\"_method\" value=\"delete\">Delete</button>\n            => </form>\n        %>\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1610148983000,
    "author": "Sean Doyle",
    "sha": "b8c9c9d06f49f4e7028da30427a1e421dc632a80",
    "pr": "41045",
    "merge_sha": "66a4cf4bbc0651b995646ad86aa76f5634da49c5",
    "html": "<p>Change <code>ActionView::Helpers::FormBuilder#button</code> to transform <code>formmethod</code><br />\nattributes into <code>_method=\"$VERB\"</code> Form Data to enable varied same-form actions:</p>\n\n<pre><code>&lt;%= form_with model: post, method: :put do %&gt;\n  &lt;%= form.button \"Update\" %&gt;\n  &lt;%= form.button \"Delete\", formmethod: :delete %&gt;\n&lt;% end %&gt;\n&lt;%# =&gt; &lt;form action=\"posts/1\"&gt;\n    =&gt;   &lt;input type=\"hidden\" name=\"_method\" value=\"put\"&gt;\n    =&gt;   &lt;button type=\"submit\"&gt;Update&lt;/button&gt;\n    =&gt;   &lt;button type=\"submit\" formmethod=\"post\" name=\"_method\" value=\"delete\"&gt;Delete&lt;/button&gt;\n    =&gt; &lt;/form&gt;\n%&gt;\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Change `ActionView::Helpers::UrlHelper#button_to` to *always* render a\n    `<button>` element, regardless of whether or not the content is passed as\n    the first argument or as a block.\n\n        <%= button_to \"Delete\", post_path(@post), method: :delete %>\n        # => <form action=\"/posts/1\"><input type=\"hidden\" name=\"_method\" value=\"delete\"><button type=\"submit\">Delete</button></form>\n\n        <%= button_to post_path(@post), method: :delete do %>\n          Delete\n        <% end %>\n        # => <form action=\"/posts/1\"><input type=\"hidden\" name=\"_method\" value=\"delete\"><button type=\"submit\">Delete</button></form>\n\n    *Sean Doyle*, *Dusan Orlovic*",
    "project": "actionview",
    "date_merged": 1609203919000,
    "author": "Sean Doyle",
    "sha": "9af9458396d02ead8aa9d2f3ff39c7857cfe5eb1",
    "pr": "40747",
    "merge_sha": "cd019cd47c6c4f88ff64fa53e9a464a1ef6a908c",
    "html": "<p>Change <code>ActionView::Helpers::UrlHelper#button_to</code> to <em>always</em> render a<br />\n<code>&lt;button&gt;</code> element, regardless of whether or not the content is passed as<br />\nthe first argument or as a block.</p>\n\n<pre><code>&lt;%= button_to \"Delete\", post_path(@post), method: :delete %&gt;\n# =&gt; &lt;form action=\"/posts/1\"&gt;&lt;input type=\"hidden\" name=\"_method\" value=\"delete\"&gt;&lt;button type=\"submit\"&gt;Delete&lt;/button&gt;&lt;/form&gt;\n\n&lt;%= button_to post_path(@post), method: :delete do %&gt;\n  Delete\n&lt;% end %&gt;\n# =&gt; &lt;form action=\"/posts/1\"&gt;&lt;input type=\"hidden\" name=\"_method\" value=\"delete\"&gt;&lt;button type=\"submit\"&gt;Delete&lt;/button&gt;&lt;/form&gt;\n</code></pre>\n\n<p><em>Sean Doyle</em>, <em>Dusan Orlovic</em></p>\n"
  },
  {
    "message": "*   Add `config.action_view.preload_links_header` to allow disabling of\n    the `Link` header being added by default when using `stylesheet_link_tag`\n    and `javascript_include_tag`.\n\n    *Andrew White*",
    "project": "actionview",
    "date_merged": 1608532873000,
    "author": "Andrew White",
    "sha": "200083c232a5879a77b01bd5d38b6a259ab769d9",
    "pr": "40882",
    "merge_sha": "71bc41477da96bb05edc33c1b6a42203e6999667",
    "html": "<p>Add <code>config.action_view.preload_links_header</code> to allow disabling of<br />\nthe <code>Link</code> header being added by default when using <code>stylesheet_link_tag</code><br />\nand <code>javascript_include_tag</code>.</p>\n\n<p><em>Andrew White</em></p>\n"
  },
  {
    "message": "*   The `translate` helper now resolves `default` values when a `nil` key is\n    specified, instead of always returning `nil`.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1608157650000,
    "author": "Jonathan Hefner",
    "sha": "b8b18bbfadd4339fc153d3749f3068cf5c697870",
    "pr": "40788",
    "merge_sha": "370193071d0dc9b7ec1998ac3cc62a2b4fb54795",
    "html": "<p>The <code>translate</code> helper now resolves <code>default</code> values when a <code>nil</code> key is<br />\nspecified, instead of always returning <code>nil</code>.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Add `config.action_view.image_loading` to configure the default value of\n    the `image_tag` `:loading` option.\n\n    By setting `config.action_view.image_loading = \"lazy\"`, an application can opt in to\n    lazy loading images sitewide, without changing view code.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1607473387000,
    "author": "Rafael Mendonça França",
    "sha": "2a41b6ea98cdf227b93cc483e9a3f3640db54a05",
    "pr": "38452",
    "merge_sha": "257f151ffda42eacc5be9ddad6f3000668b163d4",
    "html": "<p>Add <code>config.action_view.image_loading</code> to configure the default value of<br />\nthe <code>image_tag</code> <code>:loading</code> option.</p>\n\n<p>By setting <code>config.action_view.image_loading = \"lazy\"</code>, an application can opt in to<br />\nlazy loading images sitewide, without changing view code.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   `ActionView::Helpers::FormBuilder#id` returns the value\n    of the `<form>` element's `id` attribute. With a `method` argument, returns\n    the `id` attribute for a form field with that name.\n\n        <%= form_for @post do |f| %>\n          <%# ... %>\n\n          <% content_for :sticky_footer do %>\n            <%= form.button(form: f.id) %>\n          <% end %>\n        <% end %>\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1606783302000,
    "author": "Sean Doyle",
    "sha": "59ca21c0119fff803e75e78d800c0c98aee7fd4c",
    "pr": "40127",
    "merge_sha": "38998af1d9035d529e553251ae441f0c09b7e8ab",
    "html": "<p><code>ActionView::Helpers::FormBuilder#id</code> returns the value<br />\nof the <code>&lt;form&gt;</code> element’s <code>id</code> attribute. With a <code>method</code> argument, returns<br />\nthe <code>id</code> attribute for a form field with that name.</p>\n\n<pre><code>&lt;%= form_for @post do |f| %&gt;\n  &lt;%# ... %&gt;\n\n  &lt;% content_for :sticky_footer do %&gt;\n    &lt;%= form.button(form: f.id) %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   `ActionView::Helpers::FormBuilder#field_id` returns the value generated by\n    the FormBuilder for the given attribute name.\n\n        <%= form_for @post do |f| %>\n          <%= f.label :title %>\n          <%= f.text_field :title, aria: { describedby: f.field_id(:title, :error) } %>\n          <%= tag.span(\"is blank\", id: f.field_id(:title, :error) %>\n        <% end %>\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1606783302000,
    "author": "Sean Doyle",
    "sha": "59ca21c0119fff803e75e78d800c0c98aee7fd4c",
    "pr": "40127",
    "merge_sha": "38998af1d9035d529e553251ae441f0c09b7e8ab",
    "html": "<p><code>ActionView::Helpers::FormBuilder#field_id</code> returns the value generated by<br />\nthe FormBuilder for the given attribute name.</p>\n\n<pre><code>&lt;%= form_for @post do |f| %&gt;\n  &lt;%= f.label :title %&gt;\n  &lt;%= f.text_field :title, aria: { describedby: f.field_id(:title, :error) } %&gt;\n  &lt;%= tag.span(\"is blank\", id: f.field_id(:title, :error) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Add `tag.attributes` to transform a Hash into HTML Attributes, ready to be\n    interpolated into ERB.\n\n        <input <%= tag.attributes(type: :text, aria: { label: \"Search\" }) %> >\n        # => <input type=\"text\" aria-label=\"Search\">\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1606783302000,
    "author": "Sean Doyle",
    "sha": "59ca21c0119fff803e75e78d800c0c98aee7fd4c",
    "pr": "40127",
    "merge_sha": "38998af1d9035d529e553251ae441f0c09b7e8ab",
    "html": "<p>Add <code>tag.attributes</code> to transform a Hash into HTML Attributes, ready to be<br />\ninterpolated into ERB.</p>\n\n<pre><code>&lt;input &lt;%= tag.attributes(type: :text, aria: { label: \"Search\" }) %&gt; &gt;\n# =&gt; &lt;input type=\"text\" aria-label=\"Search\"&gt;\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Keep configuration of `smtp_settings` consistent between 6.1 and 7.0.\n\n    *André Luis Leal Cardoso Junior*",
    "project": "actionmailer",
    "date_merged": 1641577657000,
    "author": "Rafael Mendonça França",
    "sha": "6bfc637659248df5d6719a86d2981b52662d9b50",
    "pr": "44111",
    "merge_sha": "572772f9a88f03e06647e2b50f415225f748a762",
    "html": "<p>Keep configuration of <code>smtp_settings</code> consistent between 6.1 and 7.0.</p>\n\n<p><em>André Luis Leal Cardoso Junior</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionMailer::DeliveryJob` and `ActionMailer::Parameterized::DeliveryJob`\n    in favor of `ActionMailer::MailDeliveryJob`.\n\n    *Rafael Mendonça França*",
    "project": "actionmailer",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "ddc7fb6e6ee957aae35f1bb11d35c2d3e3b0cdda",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Remove deprecated <code>ActionMailer::DeliveryJob</code> and <code>ActionMailer::Parameterized::DeliveryJob</code><br />\nin favor of <code>ActionMailer::MailDeliveryJob</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   `email_address_with_name` returns just the address if name is blank.\n\n    *Thomas Hutterer*",
    "project": "actionmailer",
    "date_merged": 1632264079000,
    "author": "Thomas Hutterer",
    "sha": "524c4cad07e6744da94e4e598a3bf690f20f6f81",
    "pr": "42970",
    "merge_sha": "02537722f3df4915e6cf71c4bb350b7ae292bdac",
    "html": "<p><code>email_address_with_name</code> returns just the address if name is blank.</p>\n\n<p><em>Thomas Hutterer</em></p>\n"
  },
  {
    "message": "*   Configures a default of 5 for both `open_timeout` and `read_timeout` for SMTP Settings.\n\n    *André Luis Leal Cardoso Junior*",
    "project": "actionmailer",
    "date_merged": 1619602911000,
    "author": "Rafael Mendonça França",
    "sha": "52db7f2ef3c4a902227cac163657c89282986e25",
    "pr": "42093",
    "merge_sha": "adc0146a07ccc72405aec78ccb65aac3502a4300",
    "html": "<p>Configures a default of 5 for both <code>open_timeout</code> and <code>read_timeout</code> for SMTP Settings.</p>\n\n<p><em>André Luis Leal Cardoso Junior</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveStorage::Representations::ProxyController` not returning the proper\n    preview image variant for previewable files.\n\n    *Chedli Bourguiba*",
    "project": "activestorage",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "a482f97034477185a7e50f5645b52fb35a37ac5e",
    "pr": "50098",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix <code>ActiveStorage::Representations::ProxyController</code> not returning the proper<br />\npreview image variant for previewable files.</p>\n\n<p><em>Chedli Bourguiba</em></p>\n"
  },
  {
    "message": "*   Make untracked variants obey `config.active_storage.content_types_to_serve_as_binary`\n    and `config.active_storage.content_types_allowed_inline`.\n\n    *Chedli Bourguiba* and *Jonathan Hefner*",
    "project": "activestorage",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "78e9db041518df57f808eee217fc86170463fb34",
    "pr": "50147",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Make untracked variants obey <code>config.active_storage.content_types_to_serve_as_binary</code><br />\nand <code>config.active_storage.content_types_allowed_inline</code>.</p>\n\n<p><em>Chedli Bourguiba</em> and <em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Fix direct upload forms when submit button contains nested elements.\n\n    *Marc Köhlbrugge*",
    "project": "activestorage",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "04a1b032d313a62bcd1eaa04c4d4c1ef3406ab12",
    "pr": "48290",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Fix direct upload forms when submit button contains nested elements.</p>\n\n<p><em>Marc Köhlbrugge</em></p>\n"
  },
  {
    "message": "*   Prevent `ActiveRecord::StrictLoadingViolationError` when strict loading is\n    enabled and the variant of an Active Storage preview has already been\n    processed (for example, by calling `ActiveStorage::Preview#url`).\n\n    *Jonathan Hefner*",
    "project": "activestorage",
    "date_merged": 1700731938000,
    "author": "Jonathan Hefner",
    "sha": "a8e7be5fd0570f316d30f3a88ebc36cf3490e53e",
    "pr": "50043",
    "merge_sha": "0d8a112647227ad0ff37cdc9e31acfe6ca861692",
    "html": "<p>Prevent <code>ActiveRecord::StrictLoadingViolationError</code> when strict loading is<br />\nenabled and the variant of an Active Storage preview has already been<br />\nprocessed (for example, by calling <code>ActiveStorage::Preview#url</code>).</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Fix variants not included when eager loading multiple records containing a single attachment\n\n    When using the `with_attached_#{name}` scope for a `has_one_attached` relation,\n    attachment variants were not eagerly loaded.\n\n    *Russell Porter*",
    "project": "activestorage",
    "date_merged": 1695193120000,
    "author": "Rafael Mendonça França",
    "sha": "488e46646e529f4f9357dc58a05a90a9c7c16737",
    "pr": "47370",
    "merge_sha": "b2efd86bdd862d898971b162b80085eed86037ca",
    "html": "<p>Fix variants not included when eager loading multiple records containing a single attachment</p>\n\n<p>When using the <code>with_attached_#{name}</code> scope for a <code>has_one_attached</code> relation,<br />\nattachment variants were not eagerly loaded.</p>\n\n<p><em>Russell Porter</em></p>\n"
  },
  {
    "message": "*   Disables the session in `ActiveStorage::Blobs::ProxyController`\n    and `ActiveStorage::Representations::ProxyController`\n    in order to allow caching by default in some CDNs as CloudFlare\n\n    Fixes #44136\n\n    *Bruno Prieto*",
    "project": "activestorage",
    "date_merged": 1708541473000,
    "author": "Rafael Mendonça França",
    "sha": "723f54566023e91060a67b03353e7c03e7436433",
    "pr": "48869",
    "merge_sha": "5bf5344521a6f305ca17e0004273322a0a26f50a",
    "html": "<p>Disables the session in <code>ActiveStorage::Blobs::ProxyController</code><br />\nand <code>ActiveStorage::Representations::ProxyController</code><br />\nin order to allow caching by default in some CDNs as CloudFlare</p>\n\n<p>Fixes #44136</p>\n\n<p><em>Bruno Prieto</em></p>\n"
  },
  {
    "message": "*   Fix retrieving rotation value from FFmpeg on version 5.0+.\n\n    In FFmpeg version 5.0+ the rotation value has been removed from tags.\n    Instead the value can be found in side_data_list. Along with\n    this update it's possible to have values of -90, -270 to denote the video\n    has been rotated.\n\n    *Haroon Ahmed*",
    "project": "activestorage",
    "date_merged": 1687488078000,
    "author": "Eileen M. Uchitelle",
    "sha": "c5edfa2486bbbd6582d6957ef8ad90ec86b337f1",
    "pr": "45837",
    "merge_sha": "dcfed5778885101a8815f5d0f2833be4f2ad3905",
    "html": "<p>Fix retrieving rotation value from FFmpeg on version 5.0+.</p>\n\n<p>In FFmpeg version 5.0+ the rotation value has been removed from tags.<br />\nInstead the value can be found in side_data_list. Along with<br />\nthis update it’s possible to have values of -90, -270 to denote the video<br />\nhas been rotated.</p>\n\n<p><em>Haroon Ahmed</em></p>\n"
  },
  {
    "message": "*   Fixes proxy downloads of files over 5MiB\n\n    Previously, trying to view and/or download files larger than 5mb stored in\n    services like S3 via proxy mode could return corrupted files at around\n    5.2mb or cause random halts in the download. Now,\n    `ActiveStorage::Blobs::ProxyController` correctly handles streaming these\n    larger files from the service to the client without any issues.\n\n    Fixes #44679\n\n    *Felipe Raul*",
    "project": "activestorage",
    "date_merged": 1663247880000,
    "author": "Jean Boussier",
    "sha": "8525e579775a9cd1c26f7cc4749bbbc49805e765",
    "pr": "45102",
    "merge_sha": "93b2461afb1f6bbe7c511b025c026567ebbc4b97",
    "html": "<p>Fixes proxy downloads of files over 5MiB</p>\n\n<p>Previously, trying to view and/or download files larger than 5mb stored in<br />\nservices like S3 via proxy mode could return corrupted files at around<br />\n5.2mb or cause random halts in the download. Now,<br />\n<code>ActiveStorage::Blobs::ProxyController</code> correctly handles streaming these<br />\nlarger files from the service to the client without any issues.</p>\n\n<p>Fixes #44679</p>\n\n<p><em>Felipe Raul</em></p>\n"
  },
  {
    "message": "*   Don't stream responses in redirect mode\n\n    Previously, both redirect mode and proxy mode streamed their\n    responses which caused a new thread to be created, and could end\n    up leaking connections in the connection pool. But since redirect\n    mode doesn't actually send any data, it doesn't need to be\n    streamed.\n\n    *Luke Lau*",
    "project": "activestorage",
    "date_merged": 1646631757000,
    "author": "Luke Lau",
    "sha": "5d08b95874594188d1f4e44581b5bea8e5a228ad",
    "pr": "44627",
    "merge_sha": "dc7681383e1fae2cae02b39461903241fe419a47",
    "html": "<p>Don’t stream responses in redirect mode</p>\n\n<p>Previously, both redirect mode and proxy mode streamed their<br />\nresponses which caused a new thread to be created, and could end<br />\nup leaking connections in the connection pool. But since redirect<br />\nmode doesn’t actually send any data, it doesn’t need to be<br />\nstreamed.</p>\n\n<p><em>Luke Lau</em></p>\n"
  },
  {
    "message": "*   Added image transformation validation via configurable allow-list.\n\n    Variant now offers a configurable allow-list for\n    transformation methods in addition to a configurable deny-list for arguments.\n\n    [CVE-2022-21831]",
    "project": "activestorage",
    "date_merged": 1646762084000,
    "author": "Aaron Patterson",
    "sha": "eb995037b996da38e2dae6e1c0b97f810b8087e6",
    "pr": null,
    "merge_sha": "e1c01ba9d7158002353758f320a326c57f6125b7",
    "html": "<p>Added image transformation validation via configurable allow-list.</p>\n\n<p>Variant now offers a configurable allow-list for<br />\ntransformation methods in addition to a configurable deny-list for arguments.</p>\n\n<p>[CVE-2022-21831]</p>\n"
  },
  {
    "message": "*   Revert the ability to pass `service_name` param to `DirectUploadsController` which was introduced\n    in 7.0.0.\n\n    That change caused a lot of problems to upgrade Rails applications so we decided to remove it\n    while in work in a more backwards compatible implementation.\n\n    *Gannon McGibbon*",
    "project": "activestorage",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Revert the ability to pass <code>service_name</code> param to <code>DirectUploadsController</code> which was introduced<br />\nin 7.0.0.</p>\n\n<p>That change caused a lot of problems to upgrade Rails applications so we decided to remove it<br />\nwhile in work in a more backwards compatible implementation.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Allow applications to opt out of precompiling Active Storage JavaScript assets.\n\n    *jlestavel*",
    "project": "activestorage",
    "date_merged": 1644605608000,
    "author": "Rafael Mendonça França",
    "sha": "76489d81ba77216271870e11fba6889088016fa5",
    "pr": null,
    "merge_sha": "6830b9d61197b781e4606eb9c84435aa5eaba3cc",
    "html": "<p>Allow applications to opt out of precompiling Active Storage JavaScript assets.</p>\n\n<p><em>jlestavel</em></p>\n"
  },
  {
    "message": "*   Support transforming empty-ish `has_many_attached` value into `[]` (e.g. `[\"\"]`).\n\n    ```ruby\n    @user.highlights = [\"\"]\n    @user.highlights # => []\n    ```\n\n    *Sean Doyle*",
    "project": "activestorage",
    "date_merged": 1639532915000,
    "author": "Rafael Mendonça França",
    "sha": "906e4e1fc819c58811d302d169a3697ec9bd609f",
    "pr": "43511",
    "merge_sha": "51e654214fe5e558d728d993e9c4f5e74fe8950a",
    "html": "<p>Support transforming empty-ish <code>has_many_attached</code> value into <code>[]</code> (e.g. <code>[\"\"]</code>).</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"vi\">@user</span><span class=\"p\">.</span><span class=\"nf\">highlights</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">\"\"</span><span class=\"p\">]</span>\n<span class=\"vi\">@user</span><span class=\"p\">.</span><span class=\"nf\">highlights</span> <span class=\"c1\"># =&gt; []</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   `Add ActiveStorage::Blob.compose` to concatenate multiple blobs.\n\n    *Gannon McGibbon*",
    "project": "activestorage",
    "date_merged": 1637888388000,
    "author": "Gannon McGibbon",
    "sha": "79a5e0b7591759817b846d1dd632003f7b6dfa25",
    "pr": "41544",
    "merge_sha": "1cb6db475a316f801876ae6bf74f23e8cbf9437e",
    "html": "<p><code>Add ActiveStorage::Blob.compose</code> to concatenate multiple blobs.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Setting custom metadata on blobs are now persisted to remote storage.\n\n    *joshuamsager*",
    "project": "activestorage",
    "date_merged": 1637707799000,
    "author": "Joshua Sager",
    "sha": "e106a4a1d2964fee475aa58dab7ab229293af692",
    "pr": "43294",
    "merge_sha": "05ec88cdb26df1f96fb9b6b24860bed579d215fe",
    "html": "<p>Setting custom metadata on blobs are now persisted to remote storage.</p>\n\n<p><em>joshuamsager</em></p>\n"
  },
  {
    "message": "*   Support direct uploads to multiple services.\n\n    *Dmitry Tsepelev*",
    "project": "activestorage",
    "date_merged": 1636952777000,
    "author": "DmitryTsepelev",
    "sha": "193289dbbe146c56ec16faf8dd1a2c88611feb83",
    "pr": "38957",
    "merge_sha": "fb36712781877da8272cd63417621e07de46cdaf",
    "html": "<p>Support direct uploads to multiple services.</p>\n\n<p><em>Dmitry Tsepelev</em></p>\n"
  },
  {
    "message": "*   Invalid default content types are deprecated\n\n    Blobs created with content_type `image/jpg`, `image/pjpeg`, `image/bmp`, `text/javascript` will now produce\n    a deprecation warning, since these are not valid content types.\n\n    These content types will be removed from the defaults in Rails 7.1.\n\n    You can set `config.active_storage.silence_invalid_content_types_warning = true` to dismiss the warning.\n\n    *Alex Ghiculescu*",
    "project": "activestorage",
    "date_merged": 1632348243000,
    "author": "Alex Ghiculescu",
    "sha": "550d728bd1f4ecd0f932a5b3e39163354574dce1",
    "pr": "42227",
    "merge_sha": "6aeeb0c6ba5d8fead31f8dddf039d9b37c064930",
    "html": "<p>Invalid default content types are deprecated</p>\n\n<p>Blobs created with content_type <code>image/jpg</code>, <code>image/pjpeg</code>, <code>image/bmp</code>, <code>text/javascript</code> will now produce<br />\na deprecation warning, since these are not valid content types.</p>\n\n<p>These content types will be removed from the defaults in Rails 7.1.</p>\n\n<p>You can set <code>config.active_storage.silence_invalid_content_types_warning = true</code> to dismiss the warning.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Emit Active Support instrumentation events from Active Storage analyzers.\n\n    Fixes #42930\n\n    *Shouichi Kamiya*",
    "project": "activestorage",
    "date_merged": 1630136981000,
    "author": "Guillermo Iguaran",
    "sha": "b1b8f8aa230011c661d0ec7d08fbbc3f8602affd",
    "pr": null,
    "merge_sha": "9ac1827331e85f01490b57f27e9cdf75a9cd1b69",
    "html": "<p>Emit Active Support instrumentation events from Active Storage analyzers.</p>\n\n<p>Fixes #42930</p>\n\n<p><em>Shouichi Kamiya</em></p>\n"
  },
  {
    "message": "*   Add support for byte range requests\n\n    *Tom Prats*",
    "project": "activestorage",
    "date_merged": 1629119625000,
    "author": "Tom Prats",
    "sha": "fcc46228c626b02f7ace689843dbbcf400d118df",
    "pr": "41437",
    "merge_sha": "fe4ec2ac0c131013090d9f36bceb3ce4a084af82",
    "html": "<p>Add support for byte range requests</p>\n\n<p><em>Tom Prats</em></p>\n"
  },
  {
    "message": "*   Attachments can be deleted after their association is no longer defined.\n\n    Fixes #42514\n\n    *Don Sisco*",
    "project": "activestorage",
    "date_merged": 1627520543000,
    "author": "Don Sisco",
    "sha": "f329ae8886d2ae31ec90d8cc019905ec835854c5",
    "pr": "42515",
    "merge_sha": "15ed41bf2fd1159ebf6101b6cd88a68e79c1bc24",
    "html": "<p>Attachments can be deleted after their association is no longer defined.</p>\n\n<p>Fixes #42514</p>\n\n<p><em>Don Sisco</em></p>\n"
  },
  {
    "message": "*   Make `vips` the default variant processor for new apps.\n\n    See the upgrade guide for instructions on converting from `mini_magick` to `vips`. `mini_magick` is\n    not deprecated, existing apps can keep using it.\n\n    *Breno Gazzola*",
    "project": "activestorage",
    "date_merged": 1627518341000,
    "author": "Breno Gazzola",
    "sha": "9bf523559f2dfd87947059f9d9737c28d360ccf3",
    "pr": null,
    "merge_sha": "f24d10c2856cbb2cb1b1a81b1b957b23495b42cb",
    "html": "<p>Make <code>vips</code> the default variant processor for new apps.</p>\n\n<p>See the upgrade guide for instructions on converting from <code>mini_magick</code> to <code>vips</code>. <code>mini_magick</code> is<br />\nnot deprecated, existing apps can keep using it.</p>\n\n<p><em>Breno Gazzola</em></p>\n"
  },
  {
    "message": "*   Deprecate `ActiveStorage::Current.host` in favor of `ActiveStorage::Current.url_options` which accepts\n    a host, protocol and port.\n\n    *Santiago Bartesaghi*",
    "project": "activestorage",
    "date_merged": 1626699810000,
    "author": "Santiago Bartesaghi",
    "sha": "e9accafc844ed5981ce7f50afe8261d5ef07d4d2",
    "pr": "41388",
    "merge_sha": "76694ccd1b7e7eb50350718d6e7e7ce67033299f",
    "html": "<p>Deprecate <code>ActiveStorage::Current.host</code> in favor of <code>ActiveStorage::Current.url_options</code> which accepts<br />\na host, protocol and port.</p>\n\n<p><em>Santiago Bartesaghi</em></p>\n"
  },
  {
    "message": "*   Allow using [IAM](https://cloud.google.com/storage/docs/access-control/signed-urls) when signing URLs with GCS.\n\n    ```yaml\n    gcs:\n      service: GCS\n      ...\n      iam: true\n    ```\n\n    *RRethy*",
    "project": "activestorage",
    "date_merged": 1626209900000,
    "author": "Adam P. Regasz-Rethy",
    "sha": "ae908553751acd0605e6e9fbb83ac9b7041e0059",
    "pr": "42723",
    "merge_sha": "ac87404bf8ca8d2edd264c31d2f431e428fcc078",
    "html": "<p>Allow using <a href=\"https://cloud.google.com/storage/docs/access-control/signed-urls\">IAM</a> when signing URLs with GCS.</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">gcs</span><span class=\"pi\">:</span>\n  <span class=\"na\">service</span><span class=\"pi\">:</span> <span class=\"s\">GCS</span>\n  <span class=\"s\">...</span>\n  <span class=\"na\">iam</span><span class=\"pi\">:</span> <span class=\"no\">true</span>\n</code></pre></div></div>\n\n<p><em>RRethy</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "activestorage",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   Deprecate `config.active_storage.replace_on_assign_to_many`. Future versions of Rails\n    will behave the same way as when the config is set to `true`.\n\n    *Santiago Bartesaghi*",
    "project": "activestorage",
    "date_merged": 1624905986000,
    "author": "Santiago Bartesaghi",
    "sha": "61a8cd6c8f9ce864ec9ada95239bfd85f1873f31",
    "pr": "42596",
    "merge_sha": "5f7c5ad109c06525ba9f5c4ac236e46cb856fe5f",
    "html": "<p>Deprecate <code>config.active_storage.replace_on_assign_to_many</code>. Future versions of Rails<br />\nwill behave the same way as when the config is set to <code>true</code>.</p>\n\n<p><em>Santiago Bartesaghi</em></p>\n"
  },
  {
    "message": "*   Remove deprecated methods: `build_after_upload`, `create_after_upload!` in favor of `create_and_upload!`,\n    and `service_url` in favor of `url`.\n\n    *Santiago Bartesaghi*",
    "project": "activestorage",
    "date_merged": 1624859707000,
    "author": "Santiago Bartesaghi",
    "sha": "65b1e1bb8d2d8b07548dde6904374ab82be8e162",
    "pr": "42598",
    "merge_sha": "306449b75722d81c9b63622d4761d3c0562f2b27",
    "html": "<p>Remove deprecated methods: <code>build_after_upload</code>, <code>create_after_upload!</code> in favor of <code>create_and_upload!</code>,<br />\nand <code>service_url</code> in favor of <code>url</code>.</p>\n\n<p><em>Santiago Bartesaghi</em></p>\n"
  },
  {
    "message": "*   Add support of `strict_loading_by_default` to `ActiveStorage::Representations` controllers.\n\n    *Anton Topchii*, *Andrew White*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add support of <code>strict_loading_by_default</code> to <code>ActiveStorage::Representations</code> controllers.</p>\n\n<p><em>Anton Topchii</em>, <em>Andrew White</em></p>\n"
  },
  {
    "message": "*   Allow to detach an attachment when record is not persisted.\n\n    *Jacopo Beschi*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow to detach an attachment when record is not persisted.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Use libvips instead of ImageMagick to analyze images when `active_storage.variant_processor = vips`.\n\n    *Breno Gazzola*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Use libvips instead of ImageMagick to analyze images when <code>active_storage.variant_processor = vips</code>.</p>\n\n<p><em>Breno Gazzola</em></p>\n"
  },
  {
    "message": "*   Add metadata value for presence of video channel in video blobs.\n\n    The `metadata` attribute of video blobs has a new boolean key named `video` that is set to\n    `true` if the file has an video channel and `false` if it doesn't.\n\n    *Breno Gazzola*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add metadata value for presence of video channel in video blobs.</p>\n\n<p>The <code>metadata</code> attribute of video blobs has a new boolean key named <code>video</code> that is set to<br />\n<code>true</code> if the file has an video channel and <code>false</code> if it doesn’t.</p>\n\n<p><em>Breno Gazzola</em></p>\n"
  },
  {
    "message": "*   Deprecate usage of `purge` and `purge_later` from the association extension.\n\n    *Jacopo Beschi*",
    "project": "activestorage",
    "date_merged": 1623965607000,
    "author": "Jacopo",
    "sha": "c8c967b53571b1d2e2a1b14c29f2d4b8ce6da67f",
    "pr": "42506",
    "merge_sha": "e2585a21e389967322a98b46a7b3643d82bd9c28",
    "html": "<p>Deprecate usage of <code>purge</code> and <code>purge_later</code> from the association extension.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Passing extra parameters in `ActiveStorage::Blob#url` to S3 Client.\n\n    This allows calls of `ActiveStorage::Blob#url` to have more interaction with\n    the S3 Presigner, enabling, amongst other options, custom S3 domain URL\n    Generation.\n\n    ```ruby\n    blob = ActiveStorage::Blob.last\n\n    blob.url # => https://<bucket-name>.s3.<region>.amazonaws.com/<key>\n    blob.url(virtual_host: true) # => # => https://<bucket-name>/<key>\n    ```\n\n    *josegomezr*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Passing extra parameters in <code>ActiveStorage::Blob#url</code> to S3 Client.</p>\n\n<p>This allows calls of <code>ActiveStorage::Blob#url</code> to have more interaction with<br />\nthe S3 Presigner, enabling, amongst other options, custom S3 domain URL<br />\nGeneration.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">blob</span> <span class=\"o\">=</span> <span class=\"no\">ActiveStorage</span><span class=\"o\">::</span><span class=\"no\">Blob</span><span class=\"p\">.</span><span class=\"nf\">last</span>\n\n<span class=\"n\">blob</span><span class=\"p\">.</span><span class=\"nf\">url</span> <span class=\"c1\"># =&gt; https://&lt;bucket-name&gt;.s3.&lt;region&gt;.amazonaws.com/&lt;key&gt;</span>\n<span class=\"n\">blob</span><span class=\"p\">.</span><span class=\"nf\">url</span><span class=\"p\">(</span><span class=\"ss\">virtual_host: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; # =&gt; https://&lt;bucket-name&gt;/&lt;key&gt;</span>\n</code></pre></div></div>\n\n<p><em>josegomezr</em></p>\n"
  },
  {
    "message": "*   Allow setting a `Cache-Control` on files uploaded to GCS.\n\n    ```yaml\n    gcs:\n      service: GCS\n      ...\n      cache_control: \"public, max-age=3600\"\n    ```\n\n    *maleblond*",
    "project": "activestorage",
    "date_merged": 1623883542000,
    "author": "Marc-Antoine Leblond",
    "sha": "e3fe39285f0d4648f407274304488c17adc2749d",
    "pr": "42509",
    "merge_sha": "1bd092cdb460c9952ffd9790b846a2fdddd9ac48",
    "html": "<p>Allow setting a <code>Cache-Control</code> on files uploaded to GCS.</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">gcs</span><span class=\"pi\">:</span>\n  <span class=\"na\">service</span><span class=\"pi\">:</span> <span class=\"s\">GCS</span>\n  <span class=\"s\">...</span>\n  <span class=\"na\">cache_control</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">public,</span><span class=\"nv\"> </span><span class=\"s\">max-age=3600\"</span>\n</code></pre></div></div>\n\n<p><em>maleblond</em></p>\n"
  },
  {
    "message": "*   The parameters sent to `ffmpeg` for generating a video preview image are now\n    configurable under `config.active_storage.video_preview_arguments`.\n\n    *Brendon Muir*",
    "project": "activestorage",
    "date_merged": 1623855255000,
    "author": "Brendon Muir",
    "sha": "54cde9d4c73d519ac0122b3dec4d771efc501e08",
    "pr": "42471",
    "merge_sha": "dc512b0b9dfce1b623eb3f78b31e9181346cf824",
    "html": "<p>The parameters sent to <code>ffmpeg</code> for generating a video preview image are now<br />\nconfigurable under <code>config.active_storage.video_preview_arguments</code>.</p>\n\n<p><em>Brendon Muir</em></p>\n"
  },
  {
    "message": "*   The ActiveStorage video previewer will now use scene change detection to generate\n    better preview images (rather than the previous default of using the first frame\n    of the video). This change requires FFmpeg v3.4+.\n\n    *Jonathan Hefner*",
    "project": "activestorage",
    "date_merged": 1623855255000,
    "author": "Brendon Muir",
    "sha": "54cde9d4c73d519ac0122b3dec4d771efc501e08",
    "pr": "42471",
    "merge_sha": "dc512b0b9dfce1b623eb3f78b31e9181346cf824",
    "html": "<p>The ActiveStorage video previewer will now use scene change detection to generate<br />\nbetter preview images (rather than the previous default of using the first frame<br />\nof the video). This change requires FFmpeg v3.4+.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Add support for ActiveStorage expiring URLs.\n\n    ```ruby\n    rails_blob_path(user.avatar, disposition: \"attachment\", expires_in: 30.minutes)\n\n    <%= image_tag rails_blob_path(user.avatar.variant(resize: \"100x100\"), expires_in: 30.minutes) %>\n    ```\n\n    If you want to set default expiration time for ActiveStorage URLs throughout your application, set `config.active_storage.urls_expire_in`.\n\n    *aki77*",
    "project": "activestorage",
    "date_merged": 1623697301000,
    "author": "aki",
    "sha": "209a79aeed2aab05af92687b041acc466ddcc302",
    "pr": "42410",
    "merge_sha": "1e1ca11c1c2260c7b281190c6c695859732bc790",
    "html": "<p>Add support for ActiveStorage expiring URLs.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">rails_blob_path</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">avatar</span><span class=\"p\">,</span> <span class=\"ss\">disposition: </span><span class=\"s2\">\"attachment\"</span><span class=\"p\">,</span> <span class=\"ss\">expires_in: </span><span class=\"mi\">30</span><span class=\"p\">.</span><span class=\"nf\">minutes</span><span class=\"p\">)</span>\n\n<span class=\"o\">&lt;</span><span class=\"sx\">%= image_tag rails_blob_path(user.avatar.variant(resize: \"100x100\"), expires_in: 30.minutes) %&gt;\n</span></code></pre></div></div>\n\n<p>If you want to set default expiration time for ActiveStorage URLs throughout your application, set <code>config.active_storage.urls_expire_in</code>.</p>\n\n<p><em>aki77</em></p>\n"
  },
  {
    "message": "*   Allow to purge an attachment when record is not persisted for `has_many_attached`.\n\n    *Jacopo Beschi*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow to purge an attachment when record is not persisted for <code>has_many_attached</code>.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Add `with_all_variant_records` method to eager load all variant records on an attachment at once.\n    `with_attached_image` scope now eager loads variant records if using variant tracking.\n\n    *Alex Ghiculescu*",
    "project": "activestorage",
    "date_merged": 1623494502000,
    "author": "Alex Ghiculescu",
    "sha": "c39d48686b422b0bdf4871805e19c7730ecf5823",
    "pr": "40842",
    "merge_sha": "6d3acaf293f1879b804b79a424128d635a407d9f",
    "html": "<p>Add <code>with_all_variant_records</code> method to eager load all variant records on an attachment at once.<br />\n<code>with_attached_image</code> scope now eager loads variant records if using variant tracking.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Add metadata value for presence of audio channel in video blobs.\n\n    The `metadata` attribute of video blobs has a new boolean key named `audio` that is set to\n    `true` if the file has an audio channel and `false` if it doesn't.\n\n    *Breno Gazzola*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Add metadata value for presence of audio channel in video blobs.</p>\n\n<p>The <code>metadata</code> attribute of video blobs has a new boolean key named <code>audio</code> that is set to<br />\n<code>true</code> if the file has an audio channel and <code>false</code> if it doesn’t.</p>\n\n<p><em>Breno Gazzola</em></p>\n"
  },
  {
    "message": "*   Adds analyzer for audio files.\n\n    *Breno Gazzola*",
    "project": "activestorage",
    "date_merged": 1623187129000,
    "author": "Breno Gazzola",
    "sha": "d2c5babf4b68f825b0c9fb33e974bc2e4e533fcc",
    "pr": "42425",
    "merge_sha": "8d5025a94ada7e6c0dc73b7932dc71f80f95140e",
    "html": "<p>Adds analyzer for audio files.</p>\n\n<p><em>Breno Gazzola</em></p>\n"
  },
  {
    "message": "*   Respect Active Record's primary_key_type in Active Storage migrations.\n\n    *fatkodima*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Respect Active Record’s primary_key_type in Active Storage migrations.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Allow `expires_in` for ActiveStorage signed ids.\n\n    *aki77*",
    "project": "activestorage",
    "date_merged": 1622873501000,
    "author": "aki",
    "sha": "1dc175338bd0cc9294be6a6e3027d468c31829c6",
    "pr": "42059",
    "merge_sha": "18391a17b29d1a4bf496a7506315d54f8ddca418",
    "html": "<p>Allow <code>expires_in</code> for ActiveStorage signed ids.</p>\n\n<p><em>aki77</em></p>\n"
  },
  {
    "message": "*   Allow to purge an attachment when record is not persisted for `has_one_attached`.\n\n    *Jacopo Beschi*",
    "project": "activestorage",
    "date_merged": 1626830098000,
    "author": "Ryuta Kamizono",
    "sha": "e50b0e3ab325edeae52ce5effea8350bc9e90acd",
    "pr": "42790",
    "merge_sha": "e43d0ddb0359858fdb93e86b158987da81698a3d",
    "html": "<p>Allow to purge an attachment when record is not persisted for <code>has_one_attached</code>.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Add a load hook called `active_storage_variant_record` (providing `ActiveStorage::VariantRecord`)\n    to allow for overriding aspects of the `ActiveStorage::VariantRecord` class. This makes\n    `ActiveStorage::VariantRecord` consistent with `ActiveStorage::Blob` and `ActiveStorage::Attachment`\n    that already have load hooks.\n\n    *Brendon Muir*",
    "project": "activestorage",
    "date_merged": 1622216663000,
    "author": "Brendon Muir",
    "sha": "516ff295846a5914e1c33d6d095f47818a48aa84",
    "pr": "42307",
    "merge_sha": "b678667853b48751ea6134f1f8ba3d687c943889",
    "html": "<p>Add a load hook called <code>active_storage_variant_record</code> (providing <code>ActiveStorage::VariantRecord</code>)<br />\nto allow for overriding aspects of the <code>ActiveStorage::VariantRecord</code> class. This makes<br />\n<code>ActiveStorage::VariantRecord</code> consistent with <code>ActiveStorage::Blob</code> and <code>ActiveStorage::Attachment</code><br />\nthat already have load hooks.</p>\n\n<p><em>Brendon Muir</em></p>\n"
  },
  {
    "message": "*   `ActiveStorage::PreviewError` is raised when a previewer is unable to generate a preview image.\n\n    *Alex Robbin*",
    "project": "activestorage",
    "date_merged": 1614409013000,
    "author": "Alex Robbin",
    "sha": "d6197d4c861a358aaa68f90704fb54b3262808a0",
    "pr": "41548",
    "merge_sha": "ef856d7e42481a8f31ae7255cae5204c55472bd4",
    "html": "<p><code>ActiveStorage::PreviewError</code> is raised when a previewer is unable to generate a preview image.</p>\n\n<p><em>Alex Robbin</em></p>\n"
  },
  {
    "message": "*   Add `ActiveStorage::Streaming` module that can be included in a controller to get access to `#send_blob_stream`,\n    which wraps the new `ActionController::Base#send_stream` method to stream a blob from cloud storage:\n\n    ```ruby\n    class MyPublicBlobsController < ApplicationController\n      include ActiveStorage::SetBlob, ActiveStorage::Streaming\n\n      def show\n        http_cache_forever(public: true) do\n          send_blob_stream @blob, disposition: params[:disposition]\n        end\n      end\n    end\n    ```\n\n    *DHH*",
    "project": "activestorage",
    "date_merged": 1613755725000,
    "author": "David Heinemeier Hansson",
    "sha": "ab8e3d22cbac85f1e5742dd13320cda6bd54e191",
    "pr": "41440",
    "merge_sha": "5b2fb8a6ffba5ac345afcbc406f5d43188e3f394",
    "html": "<p>Add <code>ActiveStorage::Streaming</code> module that can be included in a controller to get access to <code>#send_blob_stream</code>,<br />\nwhich wraps the new <code>ActionController::Base#send_stream</code> method to stream a blob from cloud storage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">MyPublicBlobsController</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationController</span>\n  <span class=\"kp\">include</span> <span class=\"no\">ActiveStorage</span><span class=\"o\">::</span><span class=\"no\">SetBlob</span><span class=\"p\">,</span> <span class=\"no\">ActiveStorage</span><span class=\"o\">::</span><span class=\"no\">Streaming</span>\n\n  <span class=\"k\">def</span> <span class=\"nf\">show</span>\n    <span class=\"n\">http_cache_forever</span><span class=\"p\">(</span><span class=\"ss\">public: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n      <span class=\"n\">send_blob_stream</span> <span class=\"vi\">@blob</span><span class=\"p\">,</span> <span class=\"ss\">disposition: </span><span class=\"n\">params</span><span class=\"p\">[</span><span class=\"ss\">:disposition</span><span class=\"p\">]</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Add ability to use pre-defined variants.\n\n    ```ruby\n    class User < ActiveRecord::Base\n      has_one_attached :avatar do |attachable|\n        attachable.variant :thumb, resize: \"100x100\"\n        attachable.variant :medium, resize: \"300x300\", monochrome: true\n      end\n    end\n\n    class Gallery < ActiveRecord::Base\n      has_many_attached :photos do |attachable|\n        attachable.variant :thumb, resize: \"100x100\"\n        attachable.variant :medium, resize: \"300x300\", monochrome: true\n      end\n    end\n\n    <%= image_tag user.avatar.variant(:thumb) %>\n    ```\n\n    *fatkodima*",
    "project": "activestorage",
    "date_merged": 1611888473000,
    "author": "fatkodima",
    "sha": "1adea932658aef0c83f1fb7e15288f0bf7e93557",
    "pr": "39135",
    "merge_sha": "65979c693bbf212736acc41bb200f04032cf9683",
    "html": "<p>Add ability to use pre-defined variants.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">User</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">has_one_attached</span> <span class=\"ss\">:avatar</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">attachable</span><span class=\"o\">|</span>\n    <span class=\"n\">attachable</span><span class=\"p\">.</span><span class=\"nf\">variant</span> <span class=\"ss\">:thumb</span><span class=\"p\">,</span> <span class=\"ss\">resize: </span><span class=\"s2\">\"100x100\"</span>\n    <span class=\"n\">attachable</span><span class=\"p\">.</span><span class=\"nf\">variant</span> <span class=\"ss\">:medium</span><span class=\"p\">,</span> <span class=\"ss\">resize: </span><span class=\"s2\">\"300x300\"</span><span class=\"p\">,</span> <span class=\"ss\">monochrome: </span><span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Gallery</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">has_many_attached</span> <span class=\"ss\">:photos</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">attachable</span><span class=\"o\">|</span>\n    <span class=\"n\">attachable</span><span class=\"p\">.</span><span class=\"nf\">variant</span> <span class=\"ss\">:thumb</span><span class=\"p\">,</span> <span class=\"ss\">resize: </span><span class=\"s2\">\"100x100\"</span>\n    <span class=\"n\">attachable</span><span class=\"p\">.</span><span class=\"nf\">variant</span> <span class=\"ss\">:medium</span><span class=\"p\">,</span> <span class=\"ss\">resize: </span><span class=\"s2\">\"300x300\"</span><span class=\"p\">,</span> <span class=\"ss\">monochrome: </span><span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"o\">&lt;</span><span class=\"sx\">%= image_tag user.avatar.variant(:thumb) %&gt;\n</span></code></pre></div></div>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   After setting `config.active_storage.resolve_model_to_route = :rails_storage_proxy`\n    `rails_blob_path` and `rails_representation_path` will generate proxy URLs by default.\n\n    *Ali Ismayilov*",
    "project": "activestorage",
    "date_merged": 1611881590000,
    "author": "Ali Ismayilov",
    "sha": "a205f5110d69903857c09fbca079c112f14ebdc6",
    "pr": "41260",
    "merge_sha": "059024ea79bf3267f7022149502aa7fd03f1da8b",
    "html": "<p>After setting <code>config.active_storage.resolve_model_to_route = :rails_storage_proxy</code><br />\n<code>rails_blob_path</code> and <code>rails_representation_path</code> will generate proxy URLs by default.</p>\n\n<p><em>Ali Ismayilov</em></p>\n"
  },
  {
    "message": "*   Declare `ActiveStorage::FixtureSet` and `ActiveStorage::FixtureSet.blob` to\n    improve fixture integration.\n\n    *Sean Doyle*",
    "project": "activestorage",
    "date_merged": 1611558039000,
    "author": "Sean Doyle",
    "sha": "c0f33b923bbb805242ac83660cea55283cc65330",
    "pr": "41065",
    "merge_sha": "76e37e29d8a02133b20d3ef60322c1635428cb9f",
    "html": "<p>Declare <code>ActiveStorage::FixtureSet</code> and <code>ActiveStorage::FixtureSet.blob</code> to<br />\nimprove fixture integration.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Removed deprecated environment variable `MAILGUN_INGRESS_API_KEY`.\n\n    *Rafael Mendonça França*",
    "project": "actionmailbox",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "d33c529c7fb6c20b5709ef37c1f2019f60eb87f8",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Removed deprecated environment variable <code>MAILGUN_INGRESS_API_KEY</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Removed deprecated `Rails.application.credentials.action_mailbox.mailgun_api_key`.\n\n    *Rafael Mendonça França*",
    "project": "actionmailbox",
    "date_merged": 1637195748000,
    "author": "Rafael Mendonça França",
    "sha": "d33c529c7fb6c20b5709ef37c1f2019f60eb87f8",
    "pr": "43668",
    "merge_sha": "a0e14a8bfebf5f4bd4b66d1d468c844ab3e9d704",
    "html": "<p>Removed deprecated <code>Rails.application.credentials.action_mailbox.mailgun_api_key</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Add `attachments` to the list of permitted parameters for inbound emails conductor.\n\n    When using the conductor to test inbound emails with attachments, this prevents an\n    unpermitted parameter warning in default configurations, and prevents errors for\n    applications that set:\n\n    ```ruby\n    config.action_controller.action_on_unpermitted_parameters = :raise\n    ```\n\n    *David Jones*, *Dana Henke*",
    "project": "actionmailbox",
    "date_merged": 1627521268000,
    "author": "David Jones",
    "sha": "c6c53a02a5dfb99fba7c0886893fde46060fdcc7",
    "pr": "42395",
    "merge_sha": "c903dfe618b8ed2b2c6d73b162a49fc4d478a855",
    "html": "<p>Add <code>attachments</code> to the list of permitted parameters for inbound emails conductor.</p>\n\n<p>When using the conductor to test inbound emails with attachments, this prevents an<br />\nunpermitted parameter warning in default configurations, and prevents errors for<br />\napplications that set:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">action_controller</span><span class=\"p\">.</span><span class=\"nf\">action_on_unpermitted_parameters</span> <span class=\"o\">=</span> <span class=\"ss\">:raise</span>\n</code></pre></div></div>\n\n<p><em>David Jones</em>, <em>Dana Henke</em></p>\n"
  },
  {
    "message": "*   Add ability to configure ActiveStorage service\n    for storing email raw source.\n\n    ```yml\n    # config/storage.yml\n    incoming_emails:\n      service: Disk\n      root: /secure/dir/for/emails/only\n    ```\n\n    ```ruby\n    config.action_mailbox.storage_service = :incoming_emails\n    ```\n\n    *Yurii Rashkovskii*",
    "project": "actionmailbox",
    "date_merged": 1625152537000,
    "author": "Yurii Rashkovskii",
    "sha": "855e08d22d36269eb2ea6615d0c2916e1376704e",
    "pr": "42634",
    "merge_sha": "f263530bf709f611920b5f663882e5113b4f984b",
    "html": "<p>Add ability to configure ActiveStorage service<br />\nfor storing email raw source.</p>\n\n<div class=\"language-yml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/storage.yml</span>\n<span class=\"na\">incoming_emails</span><span class=\"pi\">:</span>\n  <span class=\"na\">service</span><span class=\"pi\">:</span> <span class=\"s\">Disk</span>\n  <span class=\"na\">root</span><span class=\"pi\">:</span> <span class=\"s\">/secure/dir/for/emails/only</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">action_mailbox</span><span class=\"p\">.</span><span class=\"nf\">storage_service</span> <span class=\"o\">=</span> <span class=\"ss\">:incoming_emails</span>\n</code></pre></div></div>\n\n<p><em>Yurii Rashkovskii</em></p>\n"
  },
  {
    "message": "*   Add ability to incinerate an inbound message through the conductor interface.\n\n    *Santiago Bartesaghi*",
    "project": "actionmailbox",
    "date_merged": 1624561853000,
    "author": "Santiago Bartesaghi",
    "sha": "75e6ea47560414e728a04c57639efbf77b3bd5fe",
    "pr": "42541",
    "merge_sha": "ef52dd906ed4ef9f1578119e27b712d11e68009d",
    "html": "<p>Add ability to incinerate an inbound message through the conductor interface.</p>\n\n<p><em>Santiago Bartesaghi</em></p>\n"
  },
  {
    "message": "*   OpenSSL constants are now used for Digest computations.\n\n    *Dirkjan Bussink*",
    "project": "actionmailbox",
    "date_merged": 1625140179000,
    "author": "Dirkjan Bussink",
    "sha": "0523532a3ce41ec9d7de998824987c57c4c2b016",
    "pr": "41722",
    "merge_sha": "6ecf1065da57360bdc9f1d85e2c2d9314dcb79e0",
    "html": "<p>OpenSSL constants are now used for Digest computations.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  }
]
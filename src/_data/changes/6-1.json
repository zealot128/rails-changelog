[
  {
    "message": "*   Add `racc` as a dependency since it will become a bundled gem in Ruby 3.4.0\n\n    *Hartley McGuire*",
    "project": "actionpack",
    "date_merged": 1704733657000,
    "author": "Yasuo Honda",
    "sha": "2466189b49131399bfd3527c530478cac83f1fdf",
    "pr": "49722",
    "merge_sha": "b3f909d7f1ebd61175b8d2aa2da4c06ad8199210",
    "html": "<p>Add <code>racc</code> as a dependency since it will become a bundled gem in Ruby 3.4.0</p>\n\n<p><em>Hartley McGuire</em></p>\n"
  },
  {
    "message": "*   Include the HTTP Permissions-Policy on non-HTML Content-Types\n    [CVE-2024-28103]",
    "project": "actionpack",
    "date_merged": 1717524144000,
    "author": "Aaron Patterson",
    "sha": "86521a08e5bfb477e1e6843d9116c883a2b3cccc",
    "pr": null,
    "merge_sha": "58412d17ce8c2e72c0c72b1d830d598e5140d21c",
    "html": "<p>Include the HTTP Permissions-Policy on non-HTML Content-Types<br />\n[CVE-2024-28103]</p>\n"
  },
  {
    "message": "*   Raise an exception if illegal characters are provide to redirect_to\n    [CVE-2023-28362]\n\n    *Zack Deveau*",
    "project": "actionpack",
    "date_merged": 1687816010000,
    "author": "Aaron Patterson",
    "sha": "11d5de1aea7d62f38af0bbfca5a97a546ef9d52e",
    "pr": null,
    "merge_sha": "8a556dc7c5807b1a604071ca1a494c0f08bd4969",
    "html": "<p>Raise an exception if illegal characters are provide to redirect_to<br />\n[CVE-2023-28362]</p>\n\n<p><em>Zack Deveau</em></p>\n"
  },
  {
    "message": "*   Fix `domain: :all` for two letter TLD\n\n    This fixes a compatibility issue introduced in our previous security\n    release when using `domain: :all` with a two letter but single level top\n    level domain domain (like `.ca`, rather than `.co.uk`).",
    "project": "actionpack",
    "date_merged": 1678736557000,
    "author": "John Hawthorn",
    "sha": "3e0c1a528494c352c125962c1f96b369e1d5ac34",
    "pr": null,
    "merge_sha": "39880c889876250422f15c9f691ba7324797495e",
    "html": "<p>Fix <code>domain: :all</code> for two letter TLD</p>\n\n<p>This fixes a compatibility issue introduced in our previous security<br />\nrelease when using <code>domain: :all</code> with a two letter but single level top<br />\nlevel domain domain (like <code>.ca</code>, rather than <code>.co.uk</code>).</p>\n"
  },
  {
    "message": "*   Avoid regex backtracking on If-None-Match header\n\n    [CVE-2023-22795]",
    "project": "actionpack",
    "date_merged": 1678736557000,
    "author": "John Hawthorn",
    "sha": "c443466a99f8ed951605fb4993a01de5e41349a4",
    "pr": null,
    "merge_sha": "39880c889876250422f15c9f691ba7324797495e",
    "html": "<p>Avoid regex backtracking on If-None-Match header</p>\n\n<p>[CVE-2023-22795]</p>\n"
  },
  {
    "message": "*   Use string#split instead of regex for domain parts\n\n    [CVE-2023-22792]",
    "project": "actionpack",
    "date_merged": 1678736557000,
    "author": "John Hawthorn",
    "sha": "c443466a99f8ed951605fb4993a01de5e41349a4",
    "pr": null,
    "merge_sha": "39880c889876250422f15c9f691ba7324797495e",
    "html": "<p>Use string#split instead of regex for domain parts</p>\n\n<p>[CVE-2023-22792]</p>\n"
  },
  {
    "message": "*   Allow Content Security Policy DSL to generate for API responses.\n\n    *Tim Wade*",
    "project": "actionpack",
    "date_merged": 1651004154000,
    "author": "Aaron Patterson",
    "sha": "2b820a2a69fa50cffa74b4aedc57bf92ed6910ec",
    "pr": "44635",
    "merge_sha": "3bcb481cfc06dec244f18b790344fb64697726a3",
    "html": "<p>Allow Content Security Policy DSL to generate for API responses.</p>\n\n<p><em>Tim Wade</em></p>\n"
  },
  {
    "message": "*   Fix `content_security_policy` returning invalid directives.\n\n    Directives such as `self`, `unsafe-eval` and few others were not\n    single quoted when the directive was the result of calling a lambda\n    returning an array.\n\n    ```ruby\n    content_security_policy do |policy|\n      policy.frame_ancestors lambda { [:self, \"https://example.com\"] }\n    end\n    ```\n\n    With this fix the policy generated from above will now be valid.\n\n    *Edouard Chin*",
    "project": "actionpack",
    "date_merged": 1646259391000,
    "author": "Edouard CHIN",
    "sha": "28f85324200b65ff1cb1c0771a084aedb3447910",
    "pr": "44600",
    "merge_sha": "a12ba30928a219a8c46f632f5ba44f78d41e5cf1",
    "html": "<p>Fix <code>content_security_policy</code> returning invalid directives.</p>\n\n<p>Directives such as <code>self</code>, <code>unsafe-eval</code> and few others were not<br />\nsingle quoted when the directive was the result of calling a lambda<br />\nreturning an array.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">content_security_policy</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">policy</span><span class=\"o\">|</span>\n  <span class=\"n\">policy</span><span class=\"p\">.</span><span class=\"nf\">frame_ancestors</span> <span class=\"nb\">lambda</span> <span class=\"p\">{</span> <span class=\"p\">[</span><span class=\"ss\">:self</span><span class=\"p\">,</span> <span class=\"s2\">\"https://example.com\"</span><span class=\"p\">]</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>With this fix the policy generated from above will now be valid.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Update `HostAuthorization` middleware to render debug info only\n    when `config.consider_all_requests_local` is set to true.\n\n    Also, blocked host info is always logged with level `error`.\n\n    Fixes #42813.\n\n    *Nikita Vyrko*",
    "project": "actionpack",
    "date_merged": 1633131442000,
    "author": "Rafael Mendonça França",
    "sha": "9079c68e86feda8773db161e4bec5a5b3d6f8a1d",
    "pr": "42872",
    "merge_sha": "4b74021e4e2ebc7948b7fd74dff62b2ab309492e",
    "html": "<p>Update <code>HostAuthorization</code> middleware to render debug info only<br />\nwhen <code>config.consider_all_requests_local</code> is set to true.</p>\n\n<p>Also, blocked host info is always logged with level <code>error</code>.</p>\n\n<p>Fixes #42813.</p>\n\n<p><em>Nikita Vyrko</em></p>\n"
  },
  {
    "message": "*   Dup arrays that get \"converted\".\n\n    Fixes #43681.\n\n    *Aaron Patterson*",
    "project": "actionpack",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Dup arrays that get “converted”.</p>\n\n<p>Fixes #43681.</p>\n\n<p><em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   Don't show deprecation warning for equal paths.\n\n    *Anton Rieder*",
    "project": "actionpack",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Don’t show deprecation warning for equal paths.</p>\n\n<p><em>Anton Rieder</em></p>\n"
  },
  {
    "message": "*   Fix crash in `ActionController::Instrumentation` with invalid HTTP formats.\n\n    Fixes #43094.\n\n    *Alex Ghiculescu*",
    "project": "actionpack",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix crash in <code>ActionController::Instrumentation</code> with invalid HTTP formats.</p>\n\n<p>Fixes #43094.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Add fallback host for SystemTestCase driven by RackTest.\n\n    Fixes #42780.\n\n    *Petrik de Heus*",
    "project": "actionpack",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Add fallback host for SystemTestCase driven by RackTest.</p>\n\n<p>Fixes #42780.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   Add more detail about what hosts are allowed.\n\n    *Alex Ghiculescu*",
    "project": "actionpack",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Add more detail about what hosts are allowed.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Under certain circumstances, the middleware isn't informed that the\n    response body has been fully closed which result in request state not\n    being fully reset before the next request\n\n    [CVE-2022-23633]",
    "project": "actionpack",
    "date_merged": 1644605583000,
    "author": "Aaron Patterson",
    "sha": "a45d25246d8a4cc097ab829010f3fd89c1cb938b",
    "pr": null,
    "merge_sha": "f994570f58bfbc1d7fc627383d04e72815165792",
    "html": "<p>Under certain circumstances, the middleware isn’t informed that the<br />\nresponse body has been fully closed which result in request state not<br />\nbeing fully reset before the next request</p>\n\n<p>[CVE-2022-23633]</p>\n"
  },
  {
    "message": "*   Fix issue with host protection not allowing host with port in development.",
    "project": "actionpack",
    "date_merged": 1639609090000,
    "author": "Rafael Mendonça França",
    "sha": "87d4d0f4126f64d991d40a1827de50935ddfdbff",
    "pr": null,
    "merge_sha": "196a03332822b974c5328b53455d15e19bc52d79",
    "html": "<p>Fix issue with host protection not allowing host with port in development.</p>\n"
  },
  {
    "message": "*    Fix issue with host protection not allowing localhost in development.",
    "project": "actionpack",
    "date_merged": 1639609090000,
    "author": "Rafael Mendonça França",
    "sha": "87d4d0f4126f64d991d40a1827de50935ddfdbff",
    "pr": null,
    "merge_sha": "196a03332822b974c5328b53455d15e19bc52d79",
    "html": "<p>Fix issue with host protection not allowing localhost in development.</p>\n"
  },
  {
    "message": "*   Fix X_FORWARDED_HOST protection.  [CVE-2021-44528]",
    "project": "actionpack",
    "date_merged": 1639513031000,
    "author": "Aaron Patterson",
    "sha": "ea8042864dd8c08323c33ce45299d7d2a768621a",
    "pr": null,
    "merge_sha": "582184ecd31d9db826b2014e7f6d838dbbb45e66",
    "html": "<p>Fix X_FORWARDED_HOST protection.  [CVE-2021-44528]</p>\n"
  },
  {
    "message": "*   [CVE-2021-22942] Fix possible open redirect in Host Authorization middleware.\n\n    Specially crafted \"X-Forwarded-Host\" headers in combination with certain\n    \"allowed host\" formats can cause the Host Authorization middleware in Action\n    Pack to redirect users to a malicious website.",
    "project": "actionpack",
    "date_merged": 1629390780000,
    "author": "Aaron Patterson",
    "sha": "e63dcc1db405be1671bac056ceca1cc8b4eeeb6a",
    "pr": null,
    "merge_sha": "e7b0eddc70bf516bed56f892a40c57e8ddec559f",
    "html": "<p>[CVE-2021-22942] Fix possible open redirect in Host Authorization middleware.</p>\n\n<p>Specially crafted “X-Forwarded-Host” headers in combination with certain<br />\n“allowed host” formats can cause the Host Authorization middleware in Action<br />\nPack to redirect users to a malicious website.</p>\n"
  },
  {
    "message": "*   Ignore file fixtures on `db:fixtures:load`\n\n    *Kevin Sjöberg*",
    "project": "actionpack",
    "date_merged": 1624703928000,
    "author": "Rafael França",
    "sha": "8877b88223aed6fc40d2ef21d0dffb616ba0e70d",
    "pr": "42153",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Ignore file fixtures on <code>db:fixtures:load</code></p>\n\n<p><em>Kevin Sjöberg</em></p>\n"
  },
  {
    "message": "*   Fix ActionController::Live controller test deadlocks by removing the body buffer size limit for tests.\n\n    *Dylan Thacker-Smith*",
    "project": "actionpack",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "5b4466d122f751a6de1a228e5531c03d396e9edd",
    "pr": "41609",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix ActionController::Live controller test deadlocks by removing the body buffer size limit for tests.</p>\n\n<p><em>Dylan Thacker-Smith</em></p>\n"
  },
  {
    "message": "*   Correctly place optional path parameter booleans.\n\n    Previously, if you specify a url parameter that is part of the path as false it would include that part\n    of the path as parameter for example:\n\n    ```\n    get \"(/optional/:optional_id)/things\" => \"foo#foo\", as: :things\n    things_path(optional_id: false) # => /things?optional_id=false\n    ```\n\n    After this change, true and false will be treated the same when used as optional path parameters. Meaning now:\n\n    ```\n    get '(this/:my_bool)/that' as: :that\n\n    that_path(my_bool: true) # => `/this/true/that`\n    that_path(my_bool: false) # => `/this/false/that`\n    ```\n\n    *Adam Hess*",
    "project": "actionpack",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Correctly place optional path parameter booleans.</p>\n\n<p>Previously, if you specify a url parameter that is part of the path as false it would include that part<br />\nof the path as parameter for example:</p>\n\n<pre><code>get \"(/optional/:optional_id)/things\" =&gt; \"foo#foo\", as: :things\nthings_path(optional_id: false) # =&gt; /things?optional_id=false\n</code></pre>\n\n<p>After this change, true and false will be treated the same when used as optional path parameters. Meaning now:</p>\n\n<pre><code>get '(this/:my_bool)/that' as: :that\n\nthat_path(my_bool: true) # =&gt; `/this/true/that`\nthat_path(my_bool: false) # =&gt; `/this/false/that`\n</code></pre>\n\n<p><em>Adam Hess</em></p>\n"
  },
  {
    "message": "*   Add support for 'private, no-store' Cache-Control headers.\n\n    Previously, 'no-store' was exclusive; no other directives could be specified.\n\n    *Alex Smith*",
    "project": "actionpack",
    "date_merged": 1619865687000,
    "author": "Alex Smith",
    "sha": "6a0d6bee1c0f585564008a6674517d325cf910c3",
    "pr": "42115",
    "merge_sha": "b588d8335294c843ca4c43f97418ce1ef1230685",
    "html": "<p>Add support for ‘private, no-store’ Cache-Control headers.</p>\n\n<p>Previously, ‘no-store’ was exclusive; no other directives could be specified.</p>\n\n<p><em>Alex Smith</em></p>\n"
  },
  {
    "message": "*   Prevent open redirects by correctly escaping the host allow list\n    CVE-2021-22903",
    "project": "actionpack",
    "date_merged": 1620230909000,
    "author": "Aaron Patterson",
    "sha": "9c21201772d240d58462796ae9f4d03765f573b4",
    "pr": null,
    "merge_sha": "4829fae966a251b3873c4d8a244c513bbbb81e1d",
    "html": "<p>Prevent open redirects by correctly escaping the host allow list<br />\nCVE-2021-22903</p>\n"
  },
  {
    "message": "*   Prevent catastrophic backtracking during mime parsing\n    CVE-2021-22902",
    "project": "actionpack",
    "date_merged": 1620230909000,
    "author": "Aaron Patterson",
    "sha": "9c21201772d240d58462796ae9f4d03765f573b4",
    "pr": null,
    "merge_sha": "4829fae966a251b3873c4d8a244c513bbbb81e1d",
    "html": "<p>Prevent catastrophic backtracking during mime parsing<br />\nCVE-2021-22902</p>\n"
  },
  {
    "message": "*   Prevent regex DoS in HTTP token authentication\n    CVE-2021-22904",
    "project": "actionpack",
    "date_merged": 1620230909000,
    "author": "Aaron Patterson",
    "sha": "9c21201772d240d58462796ae9f4d03765f573b4",
    "pr": null,
    "merge_sha": "4829fae966a251b3873c4d8a244c513bbbb81e1d",
    "html": "<p>Prevent regex DoS in HTTP token authentication<br />\nCVE-2021-22904</p>\n"
  },
  {
    "message": "*   Prevent string polymorphic route arguments.\n\n    `url_for` supports building polymorphic URLs via an array\n    of arguments (usually symbols and records). If a developer passes a\n    user input array, strings can result in unwanted route helper calls.\n\n    CVE-2021-22885\n\n    *Gannon McGibbon*",
    "project": "actionpack",
    "date_merged": 1620230909000,
    "author": "Gannon McGibbon",
    "sha": "030318784683f76df4c916d5a38b07dbf1f2aec5",
    "pr": null,
    "merge_sha": "4829fae966a251b3873c4d8a244c513bbbb81e1d",
    "html": "<p>Prevent string polymorphic route arguments.</p>\n\n<p><code>url_for</code> supports building polymorphic URLs via an array<br />\nof arguments (usually symbols and records). If a developer passes a<br />\nuser input array, strings can result in unwanted route helper calls.</p>\n\n<p>CVE-2021-22885</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Re-define routes when not set correctly via inheritance.\n\n    *John Hawthorn*",
    "project": "actionpack",
    "date_merged": 1614688438000,
    "author": "Rafael Mendonça França",
    "sha": "5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67",
    "pr": "41592",
    "merge_sha": "1f7287a4396f89ea13e3f8f6a116f05823c310b4",
    "html": "<p>Re-define routes when not set correctly via inheritance.</p>\n\n<p><em>John Hawthorn</em></p>\n"
  },
  {
    "message": "*   Prevent open redirect when allowed host starts with a dot\n\n    [CVE-2021-22881]\n\n    Thanks to @tktech (https://hackerone.com/tktech) for reporting this\n    issue and the patch!\n\n    *Aaron Patterson*",
    "project": "actionpack",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "130c128eae233bf71231c73b9c3c3b3f3ede918b",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Prevent open redirect when allowed host starts with a dot</p>\n\n<p>[CVE-2021-22881]</p>\n\n<p>Thanks to @tktech (https://hackerone.com/tktech) for reporting this<br />\nissue and the patch!</p>\n\n<p><em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   Fix error in `ActionController::LogSubscriber` that would happen when throwing inside a controller action.\n\n    *Janko Marohnić*",
    "project": "actionpack",
    "date_merged": 1612990034000,
    "author": "Ryuta Kamizono",
    "sha": "04d6ac8e195ae172770490499e389b03698bb005",
    "pr": "41223",
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix error in <code>ActionController::LogSubscriber</code> that would happen when throwing inside a controller action.</p>\n\n<p><em>Janko Marohnić</em></p>\n"
  },
  {
    "message": "*   Fix `fixture_file_upload` deprecation when `file_fixture_path` is a relative path.\n\n    *Eugene Kenny*",
    "project": "actionpack",
    "date_merged": 1612990034000,
    "author": "Eugene Kenny",
    "sha": "78cbda200e21588ce5dd9bacf510a556a6d917aa",
    "pr": "41067",
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>fixture_file_upload</code> deprecation when <code>file_fixture_path</code> is a relative path.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Fix nil translation key lookup in controllers/\n\n    *Jan Klimo*",
    "project": "actionpack",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix nil translation key lookup in controllers/</p>\n\n<p><em>Jan Klimo</em></p>\n"
  },
  {
    "message": "*   Quietly handle unknown HTTP methods in Action Dispatch SSL middleware.\n\n    *Alex Robbin*",
    "project": "actionpack",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Quietly handle unknown HTTP methods in Action Dispatch SSL middleware.</p>\n\n<p><em>Alex Robbin</em></p>\n"
  },
  {
    "message": "*   Change the request method to a `GET` when passing failed requests down to `config.exceptions_app`.\n\n    *Alex Robbin*",
    "project": "actionpack",
    "date_merged": 1609286812000,
    "author": "Rafael França",
    "sha": "06c94818d640d13efecc722c4ec8c9c5ea2a99b0",
    "pr": "40834",
    "merge_sha": "4453888760f6813aaefd2d8015364fb01c2264ca",
    "html": "<p>Change the request method to a <code>GET</code> when passing failed requests down to <code>config.exceptions_app</code>.</p>\n\n<p><em>Alex Robbin</em></p>\n"
  },
  {
    "message": "*   Support for the HTTP header `Feature-Policy` has been revised to reflect\n    its [rename](https://github.com/w3c/webappsec-permissions-policy/pull/379) to [`Permissions-Policy`](https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-http-header-field).\n\n    ```ruby\n    Rails.application.config.permissions_policy do |p|\n      p.camera     :none\n      p.gyroscope  :none\n      p.microphone :none\n      p.usb        :none\n      p.fullscreen :self\n      p.payment    :self, \"https://secure-example.com\"\n    end\n    ```\n\n    *Julien Grillot*",
    "project": "actionpack",
    "date_merged": 1606948320000,
    "author": "Xavier Noria",
    "sha": "d1e0baa2557b526e5f6ec0cd50f096f640b35876",
    "pr": "40729",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Support for the HTTP header <code>Feature-Policy</code> has been revised to reflect<br />\nits <a href=\"https://github.com/w3c/webappsec-permissions-policy/pull/379\">rename</a> to <a href=\"https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-http-header-field\"><code>Permissions-Policy</code></a>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">application</span><span class=\"p\">.</span><span class=\"nf\">config</span><span class=\"p\">.</span><span class=\"nf\">permissions_policy</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"nb\">p</span><span class=\"o\">|</span>\n  <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">camera</span>     <span class=\"ss\">:none</span>\n  <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">gyroscope</span>  <span class=\"ss\">:none</span>\n  <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">microphone</span> <span class=\"ss\">:none</span>\n  <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">usb</span>        <span class=\"ss\">:none</span>\n  <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">fullscreen</span> <span class=\"ss\">:self</span>\n  <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">payment</span>    <span class=\"ss\">:self</span><span class=\"p\">,</span> <span class=\"s2\">\"https://secure-example.com\"</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Julien Grillot</em></p>\n"
  },
  {
    "message": "*   Allow `ActionDispatch::HostAuthorization` to exclude specific requests.\n\n    Host Authorization checks can be skipped for specific requests. This allows for health check requests to be permitted for requests with missing or non-matching host headers.\n\n    *Chris Bisnett*",
    "project": "actionpack",
    "date_merged": 1604348555000,
    "author": "Chris Bisnett",
    "sha": "1f767407cb46c847a528525d4fe01136428c16f8",
    "pr": "38829",
    "merge_sha": "67e69e8db4199ce079fdc081097fae4cf6bc59c8",
    "html": "<p>Allow <code>ActionDispatch::HostAuthorization</code> to exclude specific requests.</p>\n\n<p>Host Authorization checks can be skipped for specific requests. This allows for health check requests to be permitted for requests with missing or non-matching host headers.</p>\n\n<p><em>Chris Bisnett</em></p>\n"
  },
  {
    "message": "*   Add `config.action_dispatch.request_id_header` to allow changing the name of\n    the unique X-Request-Id header\n\n    *Arlston Fernandes*",
    "project": "actionpack",
    "date_merged": 1604018547000,
    "author": "Arlston Fernandes",
    "sha": "2711dcc9a6d5a27a68de6edca6458fa08556e834",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Add <code>config.action_dispatch.request_id_header</code> to allow changing the name of<br />\nthe unique X-Request-Id header</p>\n\n<p><em>Arlston Fernandes</em></p>\n"
  },
  {
    "message": "*   Deprecate `config.action_dispatch.return_only_media_type_on_content_type`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "64efe502f3c7bbf6d17fc1470f4b15d0c9a08b02",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Deprecate <code>config.action_dispatch.return_only_media_type_on_content_type</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Change `ActionDispatch::Response#content_type` to return the full Content-Type header.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "64efe502f3c7bbf6d17fc1470f4b15d0c9a08b02",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Change <code>ActionDispatch::Response#content_type</code> to return the full Content-Type header.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionDispatch::Http::ParameterFilter`.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "3e2552db899160266f175f2fda61e44be258aecd",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionDispatch::Http::ParameterFilter</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Added support for exclusive no-store Cache-Control header.\n\n    If `no-store` is set on Cache-Control header it is exclusive (all other cache directives are dropped).\n\n    *Chris Kruger*",
    "project": "actionpack",
    "date_merged": 1602054014000,
    "author": "Chris Kruger",
    "sha": "e06f7b3ef7a24d9e25c99ef04b16eceec0fddbf4",
    "pr": "39461",
    "merge_sha": "8c9a5dca9c91546af748a750adf5650dd4367b6c",
    "html": "<p>Added support for exclusive no-store Cache-Control header.</p>\n\n<p>If <code>no-store</code> is set on Cache-Control header it is exclusive (all other cache directives are dropped).</p>\n\n<p><em>Chris Kruger</em></p>\n"
  },
  {
    "message": "*   Catch invalid UTF-8 parameters for POST requests and respond with BadRequest.\n\n    Additionally, perform `#set_binary_encoding` in `ActionDispatch::Http::Request#GET` and\n    `ActionDispatch::Http::Request#POST` prior to validating encoding.\n\n    *Adrianna Chang*",
    "project": "actionpack",
    "date_merged": 1600720339000,
    "author": "Adrianna Chang",
    "sha": "7dc53ec91d724fc1b6c1aea9b7c06383046e9304",
    "pr": "40124",
    "merge_sha": "0bce813442e7aa9088e811d7bdd595264388f949",
    "html": "<p>Catch invalid UTF-8 parameters for POST requests and respond with BadRequest.</p>\n\n<p>Additionally, perform <code>#set_binary_encoding</code> in <code>ActionDispatch::Http::Request#GET</code> and<br />\n<code>ActionDispatch::Http::Request#POST</code> prior to validating encoding.</p>\n\n<p><em>Adrianna Chang</em></p>\n"
  },
  {
    "message": "*   Allow `assert_recognizes` routing assertions to work on mounted root routes.\n\n    *Gannon McGibbon*",
    "project": "actionpack",
    "date_merged": 1597094447000,
    "author": "Gannon McGibbon",
    "sha": "8d4d0f37014dddb4bd24833cf7ec1ec0da6102e5",
    "pr": "39981",
    "merge_sha": "23a9e29d9b1882e4d28530fca98b8c57b3de0410",
    "html": "<p>Allow <code>assert_recognizes</code> routing assertions to work on mounted root routes.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Change default redirection status code for non-GET/HEAD requests to 308 Permanent Redirect for `ActionDispatch::SSL`.\n\n    *Alan Tan*, *Oz Ben-David*",
    "project": "actionpack",
    "date_merged": 1594023837000,
    "author": "Guo Xiang Tan",
    "sha": "f1e53be50833bbef0a24f5ac56c13dc530635358",
    "pr": "39656",
    "merge_sha": "5394c94a2b8fa3b24893f00b2fc20d6554bf31c9",
    "html": "<p>Change default redirection status code for non-GET/HEAD requests to 308 Permanent Redirect for <code>ActionDispatch::SSL</code>.</p>\n\n<p><em>Alan Tan</em>, <em>Oz Ben-David</em></p>\n"
  },
  {
    "message": "*   Fix `follow_redirect!` to follow redirection with same HTTP verb when following\n    a 308 redirection.\n\n    *Alan Tan*",
    "project": "actionpack",
    "date_merged": 1592651201000,
    "author": "Guo Xiang Tan",
    "sha": "e84c43844d7f5138df98cce55ad625d9b5b449db",
    "pr": "39657",
    "merge_sha": "36b44ca9f755be908874dc1994ca75fe03fd35c0",
    "html": "<p>Fix <code>follow_redirect!</code> to follow redirection with same HTTP verb when following<br />\na 308 redirection.</p>\n\n<p><em>Alan Tan</em></p>\n"
  },
  {
    "message": "*   When multiple domains are specified for a cookie, a domain will now be\n    chosen only if it is equal to or is a superdomain of the request host.\n\n    *Jonathan Hefner*",
    "project": "actionpack",
    "date_merged": 1591777105000,
    "author": "Jonathan Hefner",
    "sha": "1704be74ee00c58ee8b1fb38e9cb0f5086e49771",
    "pr": "39557",
    "merge_sha": "186115180e671e1a222f368600189df155446260",
    "html": "<p>When multiple domains are specified for a cookie, a domain will now be<br />\nchosen only if it is equal to or is a superdomain of the request host.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   `ActionDispatch::Static` handles precompiled Brotli (.br) files.\n\n    Adds to existing support for precompiled gzip (.gz) files.\n    Brotli files are preferred due to much better compression.\n\n    When the browser requests /some.js with `Accept-Encoding: br`,\n    we check for public/some.js.br and serve that file, if present, with\n    `Content-Encoding: br` and `Vary: Accept-Encoding` headers.\n\n    *Ryan Edward Hall*, *Jeremy Daer*",
    "project": "actionpack",
    "date_merged": 1591039801000,
    "author": "Jeremy Daer",
    "sha": "e3ef5911a195e460bfa456f9c75e1abe4041d036",
    "pr": "38674",
    "merge_sha": "8642c564dab37366c2ca8950b428d1aec84eb10d",
    "html": "<p><code>ActionDispatch::Static</code> handles precompiled Brotli (.br) files.</p>\n\n<p>Adds to existing support for precompiled gzip (.gz) files.<br />\nBrotli files are preferred due to much better compression.</p>\n\n<p>When the browser requests /some.js with <code>Accept-Encoding: br</code>,<br />\nwe check for public/some.js.br and serve that file, if present, with<br />\n<code>Content-Encoding: br</code> and <code>Vary: Accept-Encoding</code> headers.</p>\n\n<p><em>Ryan Edward Hall</em>, <em>Jeremy Daer</em></p>\n"
  },
  {
    "message": "*   Add raise_on_missing_translations support for controllers.\n\n    This configuration determines whether an error should be raised for missing translations.\n    It can be enabled through `config.i18n.raise_on_missing_translations`. Note that described\n    configuration also affects raising error for missing translations in views.\n\n    *fatkodima*",
    "project": "actionpack",
    "date_merged": 1589932490000,
    "author": "fatkodima",
    "sha": "6c4f3be929f1f427d6767050848f2fbee8c1f05f",
    "pr": "31571",
    "merge_sha": "a4395a97db3c4df5ee266918a9e4c6af7b61e830",
    "html": "<p>Add raise_on_missing_translations support for controllers.</p>\n\n<p>This configuration determines whether an error should be raised for missing translations.<br />\nIt can be enabled through <code>config.i18n.raise_on_missing_translations</code>. Note that described<br />\nconfiguration also affects raising error for missing translations in views.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Added `compact` and `compact!` to `ActionController::Parameters`.\n\n    *Eugene Kenny*",
    "project": "actionpack",
    "date_merged": 1589918582000,
    "author": "Eugene Kenny",
    "sha": "c84cc3a59ced82f11db4795d0535cbf0f783b931",
    "pr": "39312",
    "merge_sha": "7bf572bd0eef587032d3e0cf26a71d8bc6c8a0ae",
    "html": "<p>Added <code>compact</code> and <code>compact!</code> to <code>ActionController::Parameters</code>.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Calling `each_pair` or `each_value` on an `ActionController::Parameters`\n    without passing a block now returns an enumerator.\n\n    *Eugene Kenny*",
    "project": "actionpack",
    "date_merged": 1589663031000,
    "author": "Eugene Kenny",
    "sha": "1c4a7a0da3945d2230e1a94f487781268f2134cd",
    "pr": "39249",
    "merge_sha": "23bf8e3bd472c80162326003ee92e12bfc910b34",
    "html": "<p>Calling <code>each_pair</code> or <code>each_value</code> on an <code>ActionController::Parameters</code><br />\nwithout passing a block now returns an enumerator.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   `fixture_file_upload` now uses path relative to `file_fixture_path`\n\n    Previously the path had to be relative to `fixture_path`.\n    You can change your existing code as follow:\n\n    ```ruby\n    # Before\n    fixture_file_upload('files/dog.png')\n\n    # After\n    fixture_file_upload('dog.png')\n    ```\n\n    *Edouard Chin*",
    "project": "actionpack",
    "date_merged": 1588703754000,
    "author": "Edouard CHIN",
    "sha": "beb7fba632b19a6b3c021b616611048bde50f5a4",
    "pr": "39086",
    "merge_sha": "f01696958e38b7ae6fa1eeabbdcba0c78675802c",
    "html": "<p><code>fixture_file_upload</code> now uses path relative to <code>file_fixture_path</code></p>\n\n<p>Previously the path had to be relative to <code>fixture_path</code>.<br />\nYou can change your existing code as follow:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Before</span>\n<span class=\"n\">fixture_file_upload</span><span class=\"p\">(</span><span class=\"s1\">'files/dog.png'</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># After</span>\n<span class=\"n\">fixture_file_upload</span><span class=\"p\">(</span><span class=\"s1\">'dog.png'</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `force_ssl` at the controller level.\n\n    *Rafael Mendonça França*",
    "project": "actionpack",
    "date_merged": 1588685610000,
    "author": "Rafael Mendonça França",
    "sha": "03351cd5410b3ad3d3e51f44ce60aa553ddeef14",
    "pr": "39152",
    "merge_sha": "55e038cf17afcd6712d38d5a43d463bc7f7d098f",
    "html": "<p>Remove deprecated <code>force_ssl</code> at the controller level.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   The +helper+ class method for controllers loads helper modules specified as\n    strings/symbols with `String#constantize` instead of `require_dependency`.\n\n    Remember that support for strings/symbols is only a convenient API. You can\n    always pass a module object:\n\n    ```ruby\n    helper UtilsHelper\n    ```\n\n    which is recommended because it is simple and direct. When a string/symbol\n    is received, `helper` just manipulates and inflects the argument to obtain\n    that same module object.\n\n    *Xavier Noria*, *Jean Boussier*",
    "project": "actionpack",
    "date_merged": 1588452506000,
    "author": "Xavier Noria",
    "sha": "5b28a0e972da31da570ed24be505ef7958ab4b5e",
    "pr": "37632",
    "merge_sha": "298c64815d4446a39da820842027f29b12b50bb3",
    "html": "<p>The +helper+ class method for controllers loads helper modules specified as<br />\nstrings/symbols with <code>String#constantize</code> instead of <code>require_dependency</code>.</p>\n\n<p>Remember that support for strings/symbols is only a convenient API. You can<br />\nalways pass a module object:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">helper</span> <span class=\"no\">UtilsHelper</span>\n</code></pre></div></div>\n\n<p>which is recommended because it is simple and direct. When a string/symbol<br />\nis received, <code>helper</code> just manipulates and inflects the argument to obtain<br />\nthat same module object.</p>\n\n<p><em>Xavier Noria</em>, <em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Correctly identify the entire localhost IPv4 range as trusted proxy.\n\n    *Nick Soracco*",
    "project": "actionpack",
    "date_merged": 1586480700000,
    "author": "Nick Soracco",
    "sha": "8544c9c23687964ab754c06a7745215a5369a4e0",
    "pr": "38910",
    "merge_sha": "c1ccc6a0d24072d223363a9ad6d6a92e074e3073",
    "html": "<p>Correctly identify the entire localhost IPv4 range as trusted proxy.</p>\n\n<p><em>Nick Soracco</em></p>\n"
  },
  {
    "message": "*   `url_for` will now use \"https://\" as the default protocol when\n    `Rails.application.config.force_ssl` is set to true.\n\n    *Jonathan Hefner*",
    "project": "actionpack",
    "date_merged": 1586208147000,
    "author": "Jonathan Hefner",
    "sha": "c7b7d83f70421b914262af4bd09f7c0a79c1a83e",
    "pr": "37480",
    "merge_sha": "41139f6ba27556e710ecad93f3cd241ea6764f9d",
    "html": "<p><code>url_for</code> will now use “https://” as the default protocol when<br />\n<code>Rails.application.config.force_ssl</code> is set to true.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Accept and default to base64_urlsafe CSRF tokens.\n\n    Base64 strict-encoded CSRF tokens are not inherently websafe, which makes\n    them difficult to deal with. For example, the common practice of sending\n    the CSRF token to a browser in a client-readable cookie does not work properly\n    out of the box: the value has to be url-encoded and decoded to survive transport.\n\n    Now, we generate Base64 urlsafe-encoded CSRF tokens, which are inherently safe\n    to transport. Validation accepts both urlsafe tokens, and strict-encoded tokens\n    for backwards compatibility.\n\n    *Scott Blum*",
    "project": "actionpack",
    "date_merged": 1585492218000,
    "author": "Scott Blum",
    "sha": "dabb587cbb279b102ffddb82456140b951d34d91",
    "pr": "18496",
    "merge_sha": "975a4470665b1192b2f0a4453d8f3f506ce86a6b",
    "html": "<p>Accept and default to base64_urlsafe CSRF tokens.</p>\n\n<p>Base64 strict-encoded CSRF tokens are not inherently websafe, which makes<br />\nthem difficult to deal with. For example, the common practice of sending<br />\nthe CSRF token to a browser in a client-readable cookie does not work properly<br />\nout of the box: the value has to be url-encoded and decoded to survive transport.</p>\n\n<p>Now, we generate Base64 urlsafe-encoded CSRF tokens, which are inherently safe<br />\nto transport. Validation accepts both urlsafe tokens, and strict-encoded tokens<br />\nfor backwards compatibility.</p>\n\n<p><em>Scott Blum</em></p>\n"
  },
  {
    "message": "*   Support rolling deploys for cookie serialization/encryption changes.\n\n    In a distributed configuration like rolling update, users may observe\n    both old and new instances during deployment. Users may be served by a\n    new instance and then by an old instance.\n\n    That means when the server changes `cookies_serializer` from `:marshal`\n    to `:hybrid` or the server changes `use_authenticated_cookie_encryption`\n    from `false` to `true`, users may lose their sessions if they access the\n    server during deployment.\n\n    We added fallbacks to downgrade the cookie format when necessary during\n    deployment, ensuring compatibility on both old and new instances.\n\n    *Masaki Hara*",
    "project": "actionpack",
    "date_merged": 1584564036000,
    "author": "Masaki Hara",
    "sha": "5debcecdf106051453300c7002cdd5cef3c27cf0",
    "pr": "37628",
    "merge_sha": "5c188c12ee719dfe4b76cde7763f269bcb992484",
    "html": "<p>Support rolling deploys for cookie serialization/encryption changes.</p>\n\n<p>In a distributed configuration like rolling update, users may observe<br />\nboth old and new instances during deployment. Users may be served by a<br />\nnew instance and then by an old instance.</p>\n\n<p>That means when the server changes <code>cookies_serializer</code> from <code>:marshal</code><br />\nto <code>:hybrid</code> or the server changes <code>use_authenticated_cookie_encryption</code><br />\nfrom <code>false</code> to <code>true</code>, users may lose their sessions if they access the<br />\nserver during deployment.</p>\n\n<p>We added fallbacks to downgrade the cookie format when necessary during<br />\ndeployment, ensuring compatibility on both old and new instances.</p>\n\n<p><em>Masaki Hara</em></p>\n"
  },
  {
    "message": "*   `ActionDispatch::Request.remote_ip` has ip address even when all sites are trusted.\n\n    Before, if all `X-Forwarded-For` sites were trusted, the `remote_ip` would default to `127.0.0.1`.\n    Now, the furthest proxy site is used. e.g.: It now gives an ip address when using curl from the load balancer.\n\n    *Keenan Brock*",
    "project": "actionpack",
    "date_merged": 1578088823000,
    "author": "Keenan Brock",
    "sha": "b17aaae81139cdbe4452b498400d125d77cafbfc",
    "pr": "38150",
    "merge_sha": "7b29bc2179702a04613068e6e6efd6cf7f343440",
    "html": "<p><code>ActionDispatch::Request.remote_ip</code> has ip address even when all sites are trusted.</p>\n\n<p>Before, if all <code>X-Forwarded-For</code> sites were trusted, the <code>remote_ip</code> would default to <code>127.0.0.1</code>.<br />\nNow, the furthest proxy site is used. e.g.: It now gives an ip address when using curl from the load balancer.</p>\n\n<p><em>Keenan Brock</em></p>\n"
  },
  {
    "message": "*   Fix possible information leak / session hijacking vulnerability.\n\n    The `ActionDispatch::Session::MemcacheStore` is still vulnerable given it requires the\n    gem dalli to be updated as well.\n\n    CVE-2019-16782.",
    "project": "actionpack",
    "date_merged": 1576701015000,
    "author": "Rafael Mendonça França",
    "sha": "92ec9f270d696a17ba7604b3d02931f07c3e7c6a",
    "pr": "38028",
    "merge_sha": "63ec70e700e321b22e9baf2ad2d45cd3f4febc79",
    "html": "<p>Fix possible information leak / session hijacking vulnerability.</p>\n\n<p>The <code>ActionDispatch::Session::MemcacheStore</code> is still vulnerable given it requires the<br />\ngem dalli to be updated as well.</p>\n\n<p>CVE-2019-16782.</p>\n"
  },
  {
    "message": "*   Include child session assertion count in ActionDispatch::IntegrationTest.\n\n    `IntegrationTest#open_session` uses `dup` to create the new session, which\n    meant it had its own copy of `@assertions`. This prevented the assertions\n    from being correctly counted and reported.\n\n    Child sessions now have their `attr_accessor` overridden to delegate to the\n    root session.\n\n    Fixes #32142.\n\n    *Sam Bostock*",
    "project": "actionpack",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Include child session assertion count in ActionDispatch::IntegrationTest.</p>\n\n<p><code>IntegrationTest#open_session</code> uses <code>dup</code> to create the new session, which<br />\nmeant it had its own copy of <code>@assertions</code>. This prevented the assertions<br />\nfrom being correctly counted and reported.</p>\n\n<p>Child sessions now have their <code>attr_accessor</code> overridden to delegate to the<br />\nroot session.</p>\n\n<p>Fixes #32142.</p>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   Add SameSite protection to every written cookie.\n\n    Enabling `SameSite` cookie protection is an addition to CSRF protection,\n    where cookies won't be sent by browsers in cross-site POST requests when set to `:lax`.\n\n    `:strict` disables cookies being sent in cross-site GET or POST requests.\n\n    Passing `:none` disables this protection and is the same as previous versions albeit a `; SameSite=None` is appended to the cookie.\n\n    See upgrade instructions in config/initializers/new_framework_defaults_6_1.rb.\n\n    More info [here](https://tools.ietf.org/html/draft-west-first-party-cookies-07)\n\n    _NB: Technically already possible as Rack supports SameSite protection, this is to ensure it's applied to all cookies_\n\n    *Cédric Fabianski*",
    "project": "actionpack",
    "date_merged": 1576370332000,
    "author": "Cédric Fabianski",
    "sha": "7ccaa125ba396d418aad1b217b63653d06044680",
    "pr": "28297",
    "merge_sha": "cd1aeda0a9dc15f09d7bf1b8b59e2ce07946f031",
    "html": "<p>Add SameSite protection to every written cookie.</p>\n\n<p>Enabling <code>SameSite</code> cookie protection is an addition to CSRF protection,<br />\nwhere cookies won’t be sent by browsers in cross-site POST requests when set to <code>:lax</code>.</p>\n\n<p><code>:strict</code> disables cookies being sent in cross-site GET or POST requests.</p>\n\n<p>Passing <code>:none</code> disables this protection and is the same as previous versions albeit a <code>; SameSite=None</code> is appended to the cookie.</p>\n\n<p>See upgrade instructions in config/initializers/new_framework_defaults_6_1.rb.</p>\n\n<p>More info <a href=\"https://tools.ietf.org/html/draft-west-first-party-cookies-07\">here</a></p>\n\n<p><em>NB: Technically already possible as Rack supports SameSite protection, this is to ensure it’s applied to all cookies</em></p>\n\n<p><em>Cédric Fabianski</em></p>\n"
  },
  {
    "message": "*   Bring back the feature that allows loading external route files from the router.\n\n    This feature existed back in 2012 but got reverted with the incentive that\n    https://github.com/rails/routing_concerns was a better approach. Turned out\n    that this wasn't fully the case and loading external route files from the router\n    can be helpful for applications with a really large set of routes.\n    Without this feature, application needs to implement routes reloading\n    themselves and it's not straightforward.\n\n    ```ruby\n    # config/routes.rb\n\n    Rails.application.routes.draw do\n      draw(:admin)\n    end\n\n    # config/routes/admin.rb\n\n    get :foo, to: 'foo#bar'\n    ```\n\n    *Yehuda Katz*, *Edouard Chin*",
    "project": "actionpack",
    "date_merged": 1575641426000,
    "author": "Edouard CHIN",
    "sha": "33bf253282496072aa130de4cb49d0031cb3a37c",
    "pr": "37892",
    "merge_sha": "758e4f8406e680a6cbf21b170749202c537a2576",
    "html": "<p>Bring back the feature that allows loading external route files from the router.</p>\n\n<p>This feature existed back in 2012 but got reverted with the incentive that<br />\nhttps://github.com/rails/routing_concerns was a better approach. Turned out<br />\nthat this wasn’t fully the case and loading external route files from the router<br />\ncan be helpful for applications with a really large set of routes.<br />\nWithout this feature, application needs to implement routes reloading<br />\nthemselves and it’s not straightforward.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/routes.rb</span>\n\n<span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">application</span><span class=\"p\">.</span><span class=\"nf\">routes</span><span class=\"p\">.</span><span class=\"nf\">draw</span> <span class=\"k\">do</span>\n  <span class=\"n\">draw</span><span class=\"p\">(</span><span class=\"ss\">:admin</span><span class=\"p\">)</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># config/routes/admin.rb</span>\n\n<span class=\"n\">get</span> <span class=\"ss\">:foo</span><span class=\"p\">,</span> <span class=\"ss\">to: </span><span class=\"s1\">'foo#bar'</span>\n</code></pre></div></div>\n\n<p><em>Yehuda Katz</em>, <em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Fix system test driver option initialization for non-headless browsers.\n\n    *glaszig*",
    "project": "actionpack",
    "date_merged": 1575607310000,
    "author": "glaszig",
    "sha": "769188e1c32069b67f3c22c5521163c898acc60f",
    "pr": "37792",
    "merge_sha": "3ae38069e90eed5f6b8d8653a7859a36eea72c3f",
    "html": "<p>Fix system test driver option initialization for non-headless browsers.</p>\n\n<p><em>glaszig</em></p>\n"
  },
  {
    "message": "*   `redirect_to.action_controller` notifications now include the `ActionDispatch::Request` in\n    their payloads as `:request`.\n\n    *Austin Story*",
    "project": "actionpack",
    "date_merged": 1575279903000,
    "author": "Austin Story",
    "sha": "23b738225fc6568c4a4973be58011763575f7292",
    "pr": "37849",
    "merge_sha": "b50fed1bb04c0c7a277e6557e2513b69126e2454",
    "html": "<p><code>redirect_to.action_controller</code> notifications now include the <code>ActionDispatch::Request</code> in<br />\ntheir payloads as <code>:request</code>.</p>\n\n<p><em>Austin Story</em></p>\n"
  },
  {
    "message": "*   `respond_to#any` no longer returns a response's Content-Type based on the\n    request format but based on the block given.\n\n    Example:\n\n    ```ruby\n      def my_action\n        respond_to do |format|\n          format.any { render(json: { foo: 'bar' }) }\n        end\n      end\n\n      get('my_action.csv')\n    ```\n\n    The previous behaviour was to respond with a `text/csv` Content-Type which\n    is inaccurate since a JSON response is being rendered.\n\n    Now it correctly returns a `application/json` Content-Type.\n\n    *Edouard Chin*",
    "project": "actionpack",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p><code>respond_to#any</code> no longer returns a response’s Content-Type based on the<br />\nrequest format but based on the block given.</p>\n\n<p>Example:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"k\">def</span> <span class=\"nf\">my_action</span>\n    <span class=\"n\">respond_to</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"nb\">format</span><span class=\"o\">|</span>\n      <span class=\"nb\">format</span><span class=\"p\">.</span><span class=\"nf\">any</span> <span class=\"p\">{</span> <span class=\"n\">render</span><span class=\"p\">(</span><span class=\"ss\">json: </span><span class=\"p\">{</span> <span class=\"ss\">foo: </span><span class=\"s1\">'bar'</span> <span class=\"p\">})</span> <span class=\"p\">}</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s1\">'my_action.csv'</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>The previous behaviour was to respond with a <code>text/csv</code> Content-Type which<br />\nis inaccurate since a JSON response is being rendered.</p>\n\n<p>Now it correctly returns a <code>application/json</code> Content-Type.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Replaces (back)slashes in failure screenshot image paths with dashes.\n\n    If a failed test case contained a slash or a backslash, a screenshot would be created in a\n    nested directory, causing issues with `tmp:clear`.\n\n    *Damir Zekic*",
    "project": "actionpack",
    "date_merged": 1574360231000,
    "author": "Damir Zekić",
    "sha": "3c3b80eb96577dda1bfe336fed2bfc0e12bb4873",
    "pr": "37696",
    "merge_sha": "223c706b89998205cdd300c1595276f0b57d4665",
    "html": "<p>Replaces (back)slashes in failure screenshot image paths with dashes.</p>\n\n<p>If a failed test case contained a slash or a backslash, a screenshot would be created in a<br />\nnested directory, causing issues with <code>tmp:clear</code>.</p>\n\n<p><em>Damir Zekic</em></p>\n"
  },
  {
    "message": "*   Add `params.member?` to mimic Hash behavior.\n\n    *Younes Serraj*",
    "project": "actionpack",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Add <code>params.member?</code> to mimic Hash behavior.</p>\n\n<p><em>Younes Serraj</em></p>\n"
  },
  {
    "message": "*   `process_action.action_controller` notifications now include the following in their payloads:\n\n    * `:request` - the `ActionDispatch::Request`\n    * `:response` - the `ActionDispatch::Response`\n\n    *George Claghorn*",
    "project": "actionpack",
    "date_merged": 1572898721000,
    "author": "George Claghorn",
    "sha": "8ec75a142e0796be58b3bfbb28c4b412dd206396",
    "pr": "37504",
    "merge_sha": "4e105385d046e2aeab16955943df97c5eefa3a6f",
    "html": "<p><code>process_action.action_controller</code> notifications now include the following in their payloads:</p>\n\n<ul>\n  <li><code>:request</code> - the <code>ActionDispatch::Request</code></li>\n  <li><code>:response</code> - the <code>ActionDispatch::Response</code></li>\n</ul>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Updated `ActionDispatch::Request.remote_ip` setter to clear set the instance\n    `remote_ip` to `nil` before setting the header that the value is derived\n    from.\n\n    Fixes #37383.\n\n    *Norm Provost*",
    "project": "actionpack",
    "date_merged": 1570403533000,
    "author": "norm",
    "sha": "bf14a8e23526447b9893ed66090f898da68eb7f1",
    "pr": "37384",
    "merge_sha": "731859fe32b30546c615d5082ad57ad80ad96a9e",
    "html": "<p>Updated <code>ActionDispatch::Request.remote_ip</code> setter to clear set the instance<br />\n<code>remote_ip</code> to <code>nil</code> before setting the header that the value is derived<br />\nfrom.</p>\n\n<p>Fixes #37383.</p>\n\n<p><em>Norm Provost</em></p>\n"
  },
  {
    "message": "*   `ActionController::Base.log_at` allows setting a different log level per request.\n\n    ```ruby\n    # Use the debug level if a particular cookie is set.\n    class ApplicationController < ActionController::Base\n      log_at :debug, if: -> { cookies[:debug] }\n    end\n    ```\n\n    *George Claghorn*",
    "project": "actionpack",
    "date_merged": 1569347448000,
    "author": "George Claghorn",
    "sha": "75a53297c7b7adcffef3cab0183d72969564281f",
    "pr": "37288",
    "merge_sha": "2a3ab476c8bfadd75c38e9186179a217a4bcca0d",
    "html": "<p><code>ActionController::Base.log_at</code> allows setting a different log level per request.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Use the debug level if a particular cookie is set.</span>\n<span class=\"k\">class</span> <span class=\"nc\">ApplicationController</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActionController</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">log_at</span> <span class=\"ss\">:debug</span><span class=\"p\">,</span> <span class=\"ss\">if: </span><span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"n\">cookies</span><span class=\"p\">[</span><span class=\"ss\">:debug</span><span class=\"p\">]</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Allow system test screen shots to be taken more than once in\n    a test by prefixing the file name with an incrementing counter.\n\n    Add an environment variable `RAILS_SYSTEM_TESTING_SCREENSHOT_HTML` to\n    enable saving of HTML during a screenshot in addition to the image.\n    This uses the same image name, with the extension replaced with `.html`\n\n    *Tom Fakes*",
    "project": "actionpack",
    "date_merged": 1564282104000,
    "author": "Tom Fakes",
    "sha": "c699a877ca39951ba29cb8f9785f4a3909784f44",
    "pr": "36545",
    "merge_sha": "5b0ea95a1a8acc5054f9a58d324070303cbd19b9",
    "html": "<p>Allow system test screen shots to be taken more than once in<br />\na test by prefixing the file name with an incrementing counter.</p>\n\n<p>Add an environment variable <code>RAILS_SYSTEM_TESTING_SCREENSHOT_HTML</code> to<br />\nenable saving of HTML during a screenshot in addition to the image.<br />\nThis uses the same image name, with the extension replaced with <code>.html</code></p>\n\n<p><em>Tom Fakes</em></p>\n"
  },
  {
    "message": "*   Add `Vary: Accept` header when using `Accept` header for response.\n\n    For some requests like `/users/1`, Rails uses requests' `Accept`\n    header to determine what to return. And if we don't add `Vary`\n    in the response header, browsers might accidentally cache different\n    types of content, which would cause issues: e.g. javascript got displayed\n    instead of html content. This PR fixes these issues by adding `Vary: Accept`\n    in these types of requests. For more detailed problem description, please read:\n\n    https://github.com/rails/rails/pull/36213\n\n    Fixes #25842.\n\n    *Stan Lo*",
    "project": "actionpack",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Add <code>Vary: Accept</code> header when using <code>Accept</code> header for response.</p>\n\n<p>For some requests like <code>/users/1</code>, Rails uses requests’ <code>Accept</code><br />\nheader to determine what to return. And if we don’t add <code>Vary</code><br />\nin the response header, browsers might accidentally cache different<br />\ntypes of content, which would cause issues: e.g. javascript got displayed<br />\ninstead of html content. This PR fixes these issues by adding <code>Vary: Accept</code><br />\nin these types of requests. For more detailed problem description, please read:</p>\n\n<p>https://github.com/rails/rails/pull/36213</p>\n\n<p>Fixes #25842.</p>\n\n<p><em>Stan Lo</em></p>\n"
  },
  {
    "message": "*   Fix IntegrationTest `follow_redirect!` to follow redirection using the same HTTP verb when following\n    a 307 redirection.\n\n    *Edouard Chin*",
    "project": "actionpack",
    "date_merged": 1564076588000,
    "author": "Edouard CHIN",
    "sha": "1969f40a3a0aa7393b4815b7f7227c79f28b343a",
    "pr": "34201",
    "merge_sha": "8ff7efef6c102c6668c7f29e839af7da6663f7c6",
    "html": "<p>Fix IntegrationTest <code>follow_redirect!</code> to follow redirection using the same HTTP verb when following<br />\na 307 redirection.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   System tests require Capybara 3.26 or newer.\n\n    *George Claghorn*",
    "project": "actionpack",
    "date_merged": 1564033938000,
    "author": "George Claghorn",
    "sha": "d415eb4f6d6bb24b78b968ae28c22bb7e1721285",
    "pr": "36492",
    "merge_sha": "3ecaf0aafa43ff6fd511c6557592591ee5731244",
    "html": "<p>System tests require Capybara 3.26 or newer.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Reduced log noise handling ActionController::RoutingErrors.\n\n    *Alberto Fernández-Capel*",
    "project": "actionpack",
    "date_merged": 1563282988000,
    "author": "Alberto Fernández Capel",
    "sha": "c8f4c53d55762010496cf801cf1ec726e35d75df",
    "pr": "31634",
    "merge_sha": "a115a4cc796e55f2a86e36e92780fa74cd1c4c33",
    "html": "<p>Reduced log noise handling ActionController::RoutingErrors.</p>\n\n<p><em>Alberto Fernández-Capel</em></p>\n"
  },
  {
    "message": "*   Add DSL for configuring HTTP Feature Policy.\n\n    This new DSL provides a way to configure an HTTP Feature Policy at a\n    global or per-controller level. Full details of HTTP Feature Policy\n    specification and guidelines can be found at MDN:\n\n    https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy\n\n    Example global policy:\n\n    ```ruby\n    Rails.application.config.feature_policy do |f|\n      f.camera      :none\n      f.gyroscope   :none\n      f.microphone  :none\n      f.usb         :none\n      f.fullscreen  :self\n      f.payment     :self, \"https://secure.example.com\"\n    end\n    ```\n\n    Example controller level policy:\n\n    ```ruby\n    class PagesController < ApplicationController\n      feature_policy do |p|\n        p.geolocation \"https://example.com\"\n      end\n    end\n    ```\n\n    *Jacob Bednarz*",
    "project": "actionpack",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Add DSL for configuring HTTP Feature Policy.</p>\n\n<p>This new DSL provides a way to configure an HTTP Feature Policy at a<br />\nglobal or per-controller level. Full details of HTTP Feature Policy<br />\nspecification and guidelines can be found at MDN:</p>\n\n<p>https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy</p>\n\n<p>Example global policy:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">application</span><span class=\"p\">.</span><span class=\"nf\">config</span><span class=\"p\">.</span><span class=\"nf\">feature_policy</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">camera</span>      <span class=\"ss\">:none</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">gyroscope</span>   <span class=\"ss\">:none</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">microphone</span>  <span class=\"ss\">:none</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">usb</span>         <span class=\"ss\">:none</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">fullscreen</span>  <span class=\"ss\">:self</span>\n  <span class=\"n\">f</span><span class=\"p\">.</span><span class=\"nf\">payment</span>     <span class=\"ss\">:self</span><span class=\"p\">,</span> <span class=\"s2\">\"https://secure.example.com\"</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Example controller level policy:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">PagesController</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationController</span>\n  <span class=\"n\">feature_policy</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"nb\">p</span><span class=\"o\">|</span>\n    <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">geolocation</span> <span class=\"s2\">\"https://example.com\"</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Jacob Bednarz</em></p>\n"
  },
  {
    "message": "*   Add the ability to set the CSP nonce only to the specified directives.\n\n    Fixes #35137.\n\n    *Yuji Yaginuma*",
    "project": "actionpack",
    "date_merged": 1562109828000,
    "author": "yuuji.yaginuma",
    "sha": "09d55b302266cf002a4b307f8d37a105d2838a18",
    "pr": "36534",
    "merge_sha": "141b30630cc9ec15dd5aa88e062383adedd335de",
    "html": "<p>Add the ability to set the CSP nonce only to the specified directives.</p>\n\n<p>Fixes #35137.</p>\n\n<p><em>Yuji Yaginuma</em></p>\n"
  },
  {
    "message": "*   Keep part when scope option has value.\n\n    When a route was defined within an optional scope, if that route didn't\n    take parameters the scope was lost when using path helpers. This commit\n    ensures scope is kept both when the route takes parameters or when it\n    doesn't.\n\n    Fixes #33219.\n\n    *Alberto Almagro*",
    "project": "actionpack",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Keep part when scope option has value.</p>\n\n<p>When a route was defined within an optional scope, if that route didn’t<br />\ntake parameters the scope was lost when using path helpers. This commit<br />\nensures scope is kept both when the route takes parameters or when it<br />\ndoesn’t.</p>\n\n<p>Fixes #33219.</p>\n\n<p><em>Alberto Almagro</em></p>\n"
  },
  {
    "message": "*   Added `deep_transform_keys` and `deep_transform_keys!` methods to ActionController::Parameters.\n\n    *Gustavo Gutierrez*",
    "project": "actionpack",
    "date_merged": 1558536153000,
    "author": "Gustavo Gutierrez",
    "sha": "bc7e94503a3fb30d6e02898fc2d08285eb0b552b",
    "pr": "36294",
    "merge_sha": "2a08f79e6f34a80c03ef502ca7d25c75d5b0371c",
    "html": "<p>Added <code>deep_transform_keys</code> and <code>deep_transform_keys!</code> methods to ActionController::Parameters.</p>\n\n<p><em>Gustavo Gutierrez</em></p>\n"
  },
  {
    "message": "*   Calling `ActionController::Parameters#transform_keys`/`!` without a block now returns\n    an enumerator for the parameters instead of the underlying hash.\n\n    *Eugene Kenny*",
    "project": "actionpack",
    "date_merged": 1564299264000,
    "author": "Ryuta Kamizono",
    "sha": "36b32bb32e84aff0f507c690aafa1e51e0a3acf6",
    "pr": "36785",
    "merge_sha": "715dad107b5cce4f09065b4f6b84641f6d18f028",
    "html": "<p>Calling <code>ActionController::Parameters#transform_keys</code>/<code>!</code> without a block now returns<br />\nan enumerator for the parameters instead of the underlying hash.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Fix strong parameters blocks all attributes even when only some keys are invalid (non-numerical).\n    It should only block invalid key's values instead.\n\n    *Stan Lo*",
    "project": "actionpack",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Fix strong parameters blocks all attributes even when only some keys are invalid (non-numerical).<br />\nIt should only block invalid key’s values instead.</p>\n\n<p><em>Stan Lo</em></p>\n"
  },
  {
    "message": "*   Add `bigdecimal` as Active Support dependency that is a bundled gem candidate for Ruby 3.4.\n\n    `bigdecimal` 3.1.4 or higher version will be installed.\n    Ruby 2.7 and 3.0 users who want `bigdecimal` version 2.0.0 or 3.0.0 behavior as a default gem,\n    pin the `bigdecimal` version in your application Gemfile.\n\n    *Koichi ITO*",
    "project": "activesupport",
    "date_merged": 1704733657000,
    "author": "Guillermo Iguaran",
    "sha": "3f4eba85e7753fd60a60738deea4c795b8668b42",
    "pr": "49318",
    "merge_sha": "b3f909d7f1ebd61175b8d2aa2da4c06ad8199210",
    "html": "<p>Add <code>bigdecimal</code> as Active Support dependency that is a bundled gem candidate for Ruby 3.4.</p>\n\n<p><code>bigdecimal</code> 3.1.4 or higher version will be installed.<br />\nRuby 2.7 and 3.0 users who want <code>bigdecimal</code> version 2.0.0 or 3.0.0 behavior as a default gem,<br />\npin the <code>bigdecimal</code> version in your application Gemfile.</p>\n\n<p><em>Koichi ITO</em></p>\n"
  },
  {
    "message": "*   Add `drb`, `mutex_m` and `base64` that are bundled gem candidates for Ruby 3.4\n\n    *Yasuo Honda*",
    "project": "activesupport",
    "date_merged": 1704733657000,
    "author": "Yasuo Honda",
    "sha": "9d7e1b4e3d319b1f3eae2949b9ccc133ed3f0701",
    "pr": "48907",
    "merge_sha": "b3f909d7f1ebd61175b8d2aa2da4c06ad8199210",
    "html": "<p>Add <code>drb</code>, <code>mutex_m</code> and <code>base64</code> that are bundled gem candidates for Ruby 3.4</p>\n\n<p><em>Yasuo Honda</em></p>\n"
  },
  {
    "message": "*   Use a temporary file for storing unencrypted files while editing\n\n    [CVE-2023-38037]",
    "project": "activesupport",
    "date_merged": 1692724904000,
    "author": "Aaron Patterson",
    "sha": "c2af5781a972fcc5f39ef0a2915fca480f1aa186",
    "pr": null,
    "merge_sha": "69950e0631177f4070cc17de807aeaac049129ed",
    "html": "<p>Use a temporary file for storing unencrypted files while editing</p>\n\n<p>[CVE-2023-38037]</p>\n"
  },
  {
    "message": "*   Implement SafeBuffer#bytesplice\n\n    [CVE-2023-28120]",
    "project": "activesupport",
    "date_merged": 1678736582000,
    "author": "John Hawthorn",
    "sha": "7167e535201afc1d1864dd9eb862f177e309ade3",
    "pr": null,
    "merge_sha": "09fd64effc5d4a2c47d3665487a48e93ce2c95f2",
    "html": "<p>Implement SafeBuffer#bytesplice</p>\n\n<p>[CVE-2023-28120]</p>\n"
  },
  {
    "message": "*   Avoid regex backtracking in Inflector.underscore\n\n    [CVE-2023-22796]",
    "project": "activesupport",
    "date_merged": 1678736557000,
    "author": "John Hawthorn",
    "sha": "c443466a99f8ed951605fb4993a01de5e41349a4",
    "pr": null,
    "merge_sha": "39880c889876250422f15c9f691ba7324797495e",
    "html": "<p>Avoid regex backtracking in Inflector.underscore</p>\n\n<p>[CVE-2023-22796]</p>\n"
  },
  {
    "message": "*   Fix and add protections for XSS in `ActionView::Helpers` and `ERB::Util`.\n\n    Add the method `ERB::Util.xml_name_escape` to escape dangerous characters\n    in names of tags and names of attributes, following the specification of XML.\n\n    *Álvaro Martín Fraguas*",
    "project": "activesupport",
    "date_merged": 1651004154000,
    "author": "Alvaro Martin Fraguas",
    "sha": "123f42a573f7fcbf391885c135ca809f21615180",
    "pr": null,
    "merge_sha": "3bcb481cfc06dec244f18b790344fb64697726a3",
    "html": "<p>Fix and add protections for XSS in <code>ActionView::Helpers</code> and <code>ERB::Util</code>.</p>\n\n<p>Add the method <code>ERB::Util.xml_name_escape</code> to escape dangerous characters<br />\nin names of tags and names of attributes, following the specification of XML.</p>\n\n<p><em>Álvaro Martín Fraguas</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveSupport::Duration.build` to support negative values.\n\n    The algorithm to collect the `parts` of the `ActiveSupport::Duration`\n    ignored the sign of the `value` and accumulated incorrect part values. This\n    impacted `ActiveSupport::Duration#sum` (which is dependent on `parts`) but\n    not `ActiveSupport::Duration#eql?` (which is dependent on `value`).\n\n    *Caleb Buxton*, *Braden Staudacher*",
    "project": "activesupport",
    "date_merged": 1639513031000,
    "author": "Caleb Buxton",
    "sha": "21be844751aec9af93ff56529214628c0a46b67e",
    "pr": "43795",
    "merge_sha": "582184ecd31d9db826b2014e7f6d838dbbb45e66",
    "html": "<p>Fix <code>ActiveSupport::Duration.build</code> to support negative values.</p>\n\n<p>The algorithm to collect the <code>parts</code> of the <code>ActiveSupport::Duration</code><br />\nignored the sign of the <code>value</code> and accumulated incorrect part values. This<br />\nimpacted <code>ActiveSupport::Duration#sum</code> (which is dependent on <code>parts</code>) but<br />\nnot <code>ActiveSupport::Duration#eql?</code> (which is dependent on <code>value</code>).</p>\n\n<p><em>Caleb Buxton</em>, <em>Braden Staudacher</em></p>\n"
  },
  {
    "message": "*   `Time#change` and methods that call it (eg. `Time#advance`) will now\n    return a `Time` with the timezone argument provided, if the caller was\n    initialized with a timezone argument.\n\n    Fixes [#42467](https://github.com/rails/rails/issues/42467).\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1624703928000,
    "author": "Alex Ghiculescu",
    "sha": "5022a671fe308e628324202ba62e227521d4176e",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p><code>Time#change</code> and methods that call it (eg. <code>Time#advance</code>) will now<br />\nreturn a <code>Time</code> with the timezone argument provided, if the caller was<br />\ninitialized with a timezone argument.</p>\n\n<p>Fixes <a href=\"https://github.com/rails/rails/issues/42467\">#42467</a>.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Clone to keep extended Logger methods for tagged logger.\n\n    *Orhan Toy*",
    "project": "activesupport",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Clone to keep extended Logger methods for tagged logger.</p>\n\n<p><em>Orhan Toy</em></p>\n"
  },
  {
    "message": "*   `assert_changes` works on including `ActiveSupport::Assertions` module.\n\n    *Pedro Medeiros*",
    "project": "activesupport",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p><code>assert_changes</code> works on including <code>ActiveSupport::Assertions</code> module.</p>\n\n<p><em>Pedro Medeiros</em></p>\n"
  },
  {
    "message": "*   Fix Reloader method signature to work with the new Executor signature",
    "project": "activesupport",
    "date_merged": 1644608850000,
    "author": "Aaron Patterson",
    "sha": "55d48cf229d71b9c533fd67b1e2ce6c9b8d3a8c8",
    "pr": null,
    "merge_sha": "923d91e062168cec32ce9cb3b946b69834924412",
    "html": "<p>Fix Reloader method signature to work with the new Executor signature</p>\n"
  },
  {
    "message": "*   MemCacheStore: convert any underlying value (including `false`) to an `Entry`.\n\n    See [#42559](https://github.com/rails/rails/pull/42559).\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1624406722000,
    "author": "Alex Ghiculescu",
    "sha": "6ae28e177926b529b6d31574fc7815aa19e643d0",
    "pr": "42559",
    "merge_sha": "768e224d0027587f97dacbcf3dcc5ef65e2a0d0a",
    "html": "<p>MemCacheStore: convert any underlying value (including <code>false</code>) to an <code>Entry</code>.</p>\n\n<p>See <a href=\"https://github.com/rails/rails/pull/42559\">#42559</a>.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix bug in `number_with_precision` when using large `BigDecimal` values.\n\n    Fixes #42302.\n\n    *Federico Aldunate*, *Zachary Scott*",
    "project": "activesupport",
    "date_merged": 1622732186000,
    "author": "Andrew White",
    "sha": "17a4a0c5b5d5bd1dc8a1796b097db0c72b0f99b4",
    "pr": "42316",
    "merge_sha": "519b55113463a3992158fdaa3ecaf2087975823c",
    "html": "<p>Fix bug in <code>number_with_precision</code> when using large <code>BigDecimal</code> values.</p>\n\n<p>Fixes #42302.</p>\n\n<p><em>Federico Aldunate</em>, <em>Zachary Scott</em></p>\n"
  },
  {
    "message": "*   Check byte size instead of length on `secure_compare`.\n\n    *Tietew*",
    "project": "activesupport",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Check byte size instead of length on <code>secure_compare</code>.</p>\n\n<p><em>Tietew</em></p>\n"
  },
  {
    "message": "*   Fix `Time.at` to not lose `:in` option.\n\n    *Ryuta Kamizono*",
    "project": "activesupport",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix <code>Time.at</code> to not lose <code>:in</code> option.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Require a path for `config.cache_store = :file_store`.\n\n    *Alex Ghiculescu*",
    "project": "activesupport",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Require a path for <code>config.cache_store = :file_store</code>.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Avoid having to store complex object in the default translation file.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Avoid having to store complex object in the default translation file.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Cache::MemCacheStore` now accepts an explicit `nil` for its `addresses` argument.\n\n    ```ruby\n    config.cache_store = :mem_cache_store, nil\n\n    # is now equivalent to\n\n    config.cache_store = :mem_cache_store\n\n    # and is also equivalent to\n\n    config.cache_store = :mem_cache_store, ENV[\"MEMCACHE_SERVERS\"] || \"localhost:11211\"\n\n    # which is the fallback behavior of Dalli\n    ```\n\n    This helps those migrating from `:dalli_store`, where an explicit `nil` was permitted.\n\n    *Michael Overmeyer*",
    "project": "activesupport",
    "date_merged": 1612990034000,
    "author": "Rafael França",
    "sha": "ca798c0a1e386186710de147f3f7dba5473079ab",
    "pr": "41381",
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p><code>ActiveSupport::Cache::MemCacheStore</code> now accepts an explicit <code>nil</code> for its <code>addresses</code> argument.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span><span class=\"p\">,</span> <span class=\"kp\">nil</span>\n\n<span class=\"c1\"># is now equivalent to</span>\n\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span>\n\n<span class=\"c1\"># and is also equivalent to</span>\n\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span><span class=\"p\">,</span> <span class=\"no\">ENV</span><span class=\"p\">[</span><span class=\"s2\">\"MEMCACHE_SERVERS\"</span><span class=\"p\">]</span> <span class=\"o\">||</span> <span class=\"s2\">\"localhost:11211\"</span>\n\n<span class=\"c1\"># which is the fallback behavior of Dalli</span>\n</code></pre></div></div>\n\n<p>This helps those migrating from <code>:dalli_store</code>, where an explicit <code>nil</code> was permitted.</p>\n\n<p><em>Michael Overmeyer</em></p>\n"
  },
  {
    "message": "*   Change `IPAddr#to_json` to match the behavior of the json gem returning the string representation\n    instead of the instance variables of the object.\n\n    Before:\n\n    ```ruby\n    IPAddr.new(\"127.0.0.1\").to_json\n    # => \"{\\\"addr\\\":2130706433,\\\"family\\\":2,\\\"mask_addr\\\":4294967295}\"\n    ```\n\n    After:\n\n    ```ruby\n    IPAddr.new(\"127.0.0.1\").to_json\n    # => \"\\\"127.0.0.1\\\"\"\n    ```",
    "project": "activesupport",
    "date_merged": 1609286812000,
    "author": "Rafael Mendonça França",
    "sha": "4bbfc87dfd375b395a77366d342e8face1d785de",
    "pr": "40897",
    "merge_sha": "4453888760f6813aaefd2d8015364fb01c2264ca",
    "html": "<p>Change <code>IPAddr#to_json</code> to match the behavior of the json gem returning the string representation<br />\ninstead of the instance variables of the object.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">IPAddr</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">).</span><span class=\"nf\">to_json</span>\n<span class=\"c1\"># =&gt; \"{\\\"addr\\\":2130706433,\\\"family\\\":2,\\\"mask_addr\\\":4294967295}\"</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">IPAddr</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"s2\">\"127.0.0.1\"</span><span class=\"p\">).</span><span class=\"nf\">to_json</span>\n<span class=\"c1\"># =&gt; \"\\\"127.0.0.1\\\"\"</span>\n</code></pre></div></div>\n"
  },
  {
    "message": "*   Ensure `MemoryStore` disables compression by default. Reverts behavior of\n    `MemoryStore` to its prior rails `5.1` behavior.\n\n    *Max Gurewitz*",
    "project": "activesupport",
    "date_merged": 1606948320000,
    "author": "Rafael França",
    "sha": "a75f1cba0c7d47dff365d5e5c205c6d2eedaeb94",
    "pr": "39930",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Ensure <code>MemoryStore</code> disables compression by default. Reverts behavior of<br />\n<code>MemoryStore</code> to its prior rails <code>5.1</code> behavior.</p>\n\n<p><em>Max Gurewitz</em></p>\n"
  },
  {
    "message": "*   Calling `iso8601` on negative durations retains the negative sign on individual\n    digits instead of prepending it.\n\n    This change is required so we can interoperate with PostgreSQL, which prefers\n    negative signs for each component.\n\n    Compatibility with other iso8601 parsers which support leading negatives as well\n    as negatives per component is still retained.\n\n    Before:\n\n        (-1.year - 1.day).iso8601\n        # => \"-P1Y1D\"\n\n    After:\n\n        (-1.year - 1.day).iso8601\n        # => \"P-1Y-1D\"\n\n    *Vipul A M*",
    "project": "activesupport",
    "date_merged": 1604349760000,
    "author": "Vipul A M",
    "sha": "fdfac8760f2a0db4de7bb83862df8b26f6c2916a",
    "pr": "39538",
    "merge_sha": "81ee5dcdf45b451841d80dc0f750e80b0118e976",
    "html": "<p>Calling <code>iso8601</code> on negative durations retains the negative sign on individual<br />\ndigits instead of prepending it.</p>\n\n<p>This change is required so we can interoperate with PostgreSQL, which prefers<br />\nnegative signs for each component.</p>\n\n<p>Compatibility with other iso8601 parsers which support leading negatives as well<br />\nas negatives per component is still retained.</p>\n\n<p>Before:</p>\n\n<pre><code>(-1.year - 1.day).iso8601\n# =&gt; \"-P1Y1D\"\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>(-1.year - 1.day).iso8601\n# =&gt; \"P-1Y-1D\"\n</code></pre>\n\n<p><em>Vipul A M</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveSupport::Notifications::Instrumenter#end=`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "a7faef6869c04fea002855a667362a13ba6075de",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveSupport::Notifications::Instrumenter#end=</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Deprecate `ActiveSupport::Multibyte::Unicode.default_normalization_form`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "6cbc7842f0e45bf461d8c59eac1bd81d85273cc8",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Deprecate <code>ActiveSupport::Multibyte::Unicode.default_normalization_form</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveSupport::Multibyte::Unicode.pack_graphemes`,\n    `ActiveSupport::Multibyte::Unicode.unpack_graphemes`,\n    `ActiveSupport::Multibyte::Unicode.normalize`,\n    `ActiveSupport::Multibyte::Unicode.downcase`,\n    `ActiveSupport::Multibyte::Unicode.upcase` and `ActiveSupport::Multibyte::Unicode.swapcase`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "2c6f5c0b8a7b72a413224dc3efd383ea787f2805",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveSupport::Multibyte::Unicode.pack_graphemes</code>,<br />\n<code>ActiveSupport::Multibyte::Unicode.unpack_graphemes</code>,<br />\n<code>ActiveSupport::Multibyte::Unicode.normalize</code>,<br />\n<code>ActiveSupport::Multibyte::Unicode.downcase</code>,<br />\n<code>ActiveSupport::Multibyte::Unicode.upcase</code> and <code>ActiveSupport::Multibyte::Unicode.swapcase</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveSupport::Multibyte::Chars#consumes?` and `ActiveSupport::Multibyte::Chars#normalize`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "8f14d5ad4b3aa3fbdd8051276caec1b92f937e7f",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveSupport::Multibyte::Chars#consumes?</code> and <code>ActiveSupport::Multibyte::Chars#normalize</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated file `active_support/core_ext/range/include_range`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "6a4151f026f8e603f227bfa90296decc0e007613",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated file <code>active_support/core_ext/range/include_range</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated file `active_support/core_ext/hash/transform_values`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "96a0cb693858b8fc269df13bbab049af3eb47c74",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated file <code>active_support/core_ext/hash/transform_values</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated file `active_support/core_ext/hash/compact`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "36eebfe184077d1ee9d55ad710254bbe7887f0c7",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated file <code>active_support/core_ext/hash/compact</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated file `active_support/core_ext/array/prepend_and_append`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "14cfb37083c184f258d96961d23c481f0f99c9a6",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated file <code>active_support/core_ext/array/prepend_and_append</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated file `active_support/core_ext/numeric/inquiry`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "959af4bfcb074e711d6328333ac68a8ce838acaa",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated file <code>active_support/core_ext/numeric/inquiry</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated file `active_support/core_ext/module/reachable`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "b8a8a66993ad30230e9f6aa7be24ee1785d41c81",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated file <code>active_support/core_ext/module/reachable</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `Module#parent_name`, `Module#parent` and `Module#parents`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "167b4153cac0069a21e0bb9689cb16f34f6abbaa",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>Module#parent_name</code>, <code>Module#parent</code> and <code>Module#parents</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveSupport::LoggerThreadSafeLevel#after_initialize`.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "e84af03914ff767a80fdb1a66a4dcb37f8bdb262",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveSupport::LoggerThreadSafeLevel#after_initialize</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `LoggerSilence` constant.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "8d1ade40dd08feb26240ba6ef7e4bed91f70864a",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>LoggerSilence</code> constant.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated fallback to `I18n.default_local` when `config.i18n.fallbacks` is empty.\n\n    *Rafael Mendonça França*",
    "project": "activesupport",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "4bd56f44280b645aebe9192db5862d4529cc0999",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated fallback to <code>I18n.default_local</code> when <code>config.i18n.fallbacks</code> is empty.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove entries from local cache on `RedisCacheStore#delete_matched`\n\n    Fixes #38627\n\n    *ojab*",
    "project": "activesupport",
    "date_merged": 1603820289000,
    "author": "ojab",
    "sha": "1edc61dff0543b44dd0aca07bd419eb50d5ee1b0",
    "pr": "40386",
    "merge_sha": "10649e6e480d437f4393ff224e593bc27ca9589b",
    "html": "<p>Remove entries from local cache on <code>RedisCacheStore#delete_matched</code></p>\n\n<p>Fixes #38627</p>\n\n<p><em>ojab</em></p>\n"
  },
  {
    "message": "*   Speed up `ActiveSupport::SecurityUtils.fixed_length_secure_compare` by using\n    `OpenSSL.fixed_length_secure_compare`, if available.\n\n    *Nate Matykiewicz*",
    "project": "activesupport",
    "date_merged": 1603392151000,
    "author": "Nate Matykiewicz",
    "sha": "5017b92362914ed724f0403dbccfea2aa5e7153c",
    "pr": "40429",
    "merge_sha": "7eb855bfbca604036f5f7a057143d9b5b434c714",
    "html": "<p>Speed up <code>ActiveSupport::SecurityUtils.fixed_length_secure_compare</code> by using<br />\n<code>OpenSSL.fixed_length_secure_compare</code>, if available.</p>\n\n<p><em>Nate Matykiewicz</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Cache::MemCacheStore` now checks `ENV[\"MEMCACHE_SERVERS\"]` before falling back to `\"localhost:11211\"` if configured without any addresses.\n\n    ```ruby\n    config.cache_store = :mem_cache_store\n\n    # is now equivalent to\n\n    config.cache_store = :mem_cache_store, ENV[\"MEMCACHE_SERVERS\"] || \"localhost:11211\"\n\n    # instead of\n\n    config.cache_store = :mem_cache_store, \"localhost:11211\" # ignores ENV[\"MEMCACHE_SERVERS\"]\n    ```\n\n    *Sam Bostock*",
    "project": "activesupport",
    "date_merged": 1603257303000,
    "author": "Sam Bostock",
    "sha": "e79364610ccaa45d729fb7d9b30306242c341f51",
    "pr": "40420",
    "merge_sha": "e66e05719feb6537199bc2325088a325c822e495",
    "html": "<p><code>ActiveSupport::Cache::MemCacheStore</code> now checks <code>ENV[\"MEMCACHE_SERVERS\"]</code> before falling back to <code>\"localhost:11211\"</code> if configured without any addresses.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span>\n\n<span class=\"c1\"># is now equivalent to</span>\n\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span><span class=\"p\">,</span> <span class=\"no\">ENV</span><span class=\"p\">[</span><span class=\"s2\">\"MEMCACHE_SERVERS\"</span><span class=\"p\">]</span> <span class=\"o\">||</span> <span class=\"s2\">\"localhost:11211\"</span>\n\n<span class=\"c1\"># instead of</span>\n\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">cache_store</span> <span class=\"o\">=</span> <span class=\"ss\">:mem_cache_store</span><span class=\"p\">,</span> <span class=\"s2\">\"localhost:11211\"</span> <span class=\"c1\"># ignores ENV[\"MEMCACHE_SERVERS\"]</span>\n</code></pre></div></div>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   `ActiveSupport::Subscriber#attach_to` now accepts an `inherit_all:` argument. When set to true,\n    it allows a subscriber to receive events for methods defined in the subscriber's ancestor class(es).\n\n    ```ruby\n    class ActionControllerSubscriber < ActiveSupport::Subscriber\n      attach_to :action_controller\n\n      def start_processing(event)\n        info \"Processing by #{event.payload[:controller]}##{event.payload[:action]} as #{format}\"\n      end\n\n      def redirect_to(event)\n        info { \"Redirected to #{event.payload[:location]}\" }\n      end\n    end\n\n    # We detach ActionControllerSubscriber from the :action_controller namespace so that our CustomActionControllerSubscriber\n    # can provide its own instrumentation for certain events in the namespace\n    ActionControllerSubscriber.detach_from(:action_controller)\n\n    class CustomActionControllerSubscriber < ActionControllerSubscriber\n      attach_to :action_controller, inherit_all: true\n\n      def start_processing(event)\n        info \"A custom response to start_processing events\"\n      end\n\n      # => CustomActionControllerSubscriber will process events for \"start_processing.action_controller\" notifications\n      # using its own #start_processing implementation, while retaining ActionControllerSubscriber's instrumentation\n      # for \"redirect_to.action_controller\" notifications\n    end\n    ```\n\n    *Adrianna Chang*",
    "project": "activesupport",
    "date_merged": 1600934794000,
    "author": "Ryuta Kamizono",
    "sha": "8ecb0e22d7b8ffd1a48c6ba9217bfb6b099959cb",
    "pr": "40281",
    "merge_sha": "7cc563427de111ee7983645bfb86403fc16f8797",
    "html": "<p><code>ActiveSupport::Subscriber#attach_to</code> now accepts an <code>inherit_all:</code> argument. When set to true,<br />\nit allows a subscriber to receive events for methods defined in the subscriber’s ancestor class(es).</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">ActionControllerSubscriber</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveSupport</span><span class=\"o\">::</span><span class=\"no\">Subscriber</span>\n  <span class=\"n\">attach_to</span> <span class=\"ss\">:action_controller</span>\n\n  <span class=\"k\">def</span> <span class=\"nf\">start_processing</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">)</span>\n    <span class=\"n\">info</span> <span class=\"s2\">\"Processing by </span><span class=\"si\">#{</span><span class=\"n\">event</span><span class=\"p\">.</span><span class=\"nf\">payload</span><span class=\"p\">[</span><span class=\"ss\">:controller</span><span class=\"p\">]</span><span class=\"si\">}</span><span class=\"s2\">#</span><span class=\"si\">#{</span><span class=\"n\">event</span><span class=\"p\">.</span><span class=\"nf\">payload</span><span class=\"p\">[</span><span class=\"ss\">:action</span><span class=\"p\">]</span><span class=\"si\">}</span><span class=\"s2\"> as </span><span class=\"si\">#{</span><span class=\"nb\">format</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"k\">def</span> <span class=\"nf\">redirect_to</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">)</span>\n    <span class=\"n\">info</span> <span class=\"p\">{</span> <span class=\"s2\">\"Redirected to </span><span class=\"si\">#{</span><span class=\"n\">event</span><span class=\"p\">.</span><span class=\"nf\">payload</span><span class=\"p\">[</span><span class=\"ss\">:location</span><span class=\"p\">]</span><span class=\"si\">}</span><span class=\"s2\">\"</span> <span class=\"p\">}</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># We detach ActionControllerSubscriber from the :action_controller namespace so that our CustomActionControllerSubscriber</span>\n<span class=\"c1\"># can provide its own instrumentation for certain events in the namespace</span>\n<span class=\"no\">ActionControllerSubscriber</span><span class=\"p\">.</span><span class=\"nf\">detach_from</span><span class=\"p\">(</span><span class=\"ss\">:action_controller</span><span class=\"p\">)</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">CustomActionControllerSubscriber</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActionControllerSubscriber</span>\n  <span class=\"n\">attach_to</span> <span class=\"ss\">:action_controller</span><span class=\"p\">,</span> <span class=\"ss\">inherit_all: </span><span class=\"kp\">true</span>\n\n  <span class=\"k\">def</span> <span class=\"nf\">start_processing</span><span class=\"p\">(</span><span class=\"n\">event</span><span class=\"p\">)</span>\n    <span class=\"n\">info</span> <span class=\"s2\">\"A custom response to start_processing events\"</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"c1\"># =&gt; CustomActionControllerSubscriber will process events for \"start_processing.action_controller\" notifications</span>\n  <span class=\"c1\"># using its own #start_processing implementation, while retaining ActionControllerSubscriber's instrumentation</span>\n  <span class=\"c1\"># for \"redirect_to.action_controller\" notifications</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Adrianna Chang</em></p>\n"
  },
  {
    "message": "*   Allow the digest class used to generate non-sensitive digests to be configured with `config.active_support.hash_digest_class`.\n\n    `config.active_support.use_sha1_digests` is deprecated in favour of `config.active_support.hash_digest_class = ::Digest::SHA1`.\n\n    *Dirkjan Bussink*",
    "project": "activesupport",
    "date_merged": 1604016629000,
    "author": "Eugene Kenny",
    "sha": "a03a2c4188bb7370fb24418488776157a59dfac7",
    "pr": "40478",
    "merge_sha": "12ce3e7723651f442e89fdc2d8be06ad00d2f228",
    "html": "<p>Allow the digest class used to generate non-sensitive digests to be configured with <code>config.active_support.hash_digest_class</code>.</p>\n\n<p><code>config.active_support.use_sha1_digests</code> is deprecated in favour of <code>config.active_support.hash_digest_class = ::Digest::SHA1</code>.</p>\n\n<p><em>Dirkjan Bussink</em></p>\n"
  },
  {
    "message": "*   Fix bug to make memcached write_entry expire correctly with unless_exist\n\n    *Jye Lee*",
    "project": "activesupport",
    "date_merged": 1600675563000,
    "author": "Michael Grosser",
    "sha": "950bf54cda6620b9c0083d1ed850e276f7906acb",
    "pr": "40260",
    "merge_sha": "e09d4f95d63d39eb7057bcb71a2d7960428f3938",
    "html": "<p>Fix bug to make memcached write_entry expire correctly with unless_exist</p>\n\n<p><em>Jye Lee</em></p>\n"
  },
  {
    "message": "*   Add `ActiveSupport::Duration` conversion methods\n\n    `in_seconds`, `in_minutes`, `in_hours`, `in_days`, `in_weeks`, `in_months`, and `in_years` return the respective duration covered.\n\n    *Jason York*",
    "project": "activesupport",
    "date_merged": 1598464161000,
    "author": "Jason York",
    "sha": "a2535d9fe91f58aafc7206a8a51dd29a06ecbf61",
    "pr": "38699",
    "merge_sha": "7bd416363a6d6035a250b7b102b24ca1c06761ad",
    "html": "<p>Add <code>ActiveSupport::Duration</code> conversion methods</p>\n\n<p><code>in_seconds</code>, <code>in_minutes</code>, <code>in_hours</code>, <code>in_days</code>, <code>in_weeks</code>, <code>in_months</code>, and <code>in_years</code> return the respective duration covered.</p>\n\n<p><em>Jason York</em></p>\n"
  },
  {
    "message": "*   Fixed issue in `ActiveSupport::Cache::RedisCacheStore` not passing options\n    to `read_multi` causing `fetch_multi` to not work properly\n\n    *Rajesh Sharma*",
    "project": "activesupport",
    "date_merged": 1595753896000,
    "author": "Rajesh Sharma",
    "sha": "4a552c3ab91e4005abcbf99a9531f84d4fd5485c",
    "pr": "39844",
    "merge_sha": "e8dcb728edd986f3615817519a38c7f20a4f8801",
    "html": "<p>Fixed issue in <code>ActiveSupport::Cache::RedisCacheStore</code> not passing options<br />\nto <code>read_multi</code> causing <code>fetch_multi</code> to not work properly</p>\n\n<p><em>Rajesh Sharma</em></p>\n"
  },
  {
    "message": "*   Fixed issue in `ActiveSupport::Cache::MemCacheStore` which caused duplicate compression,\n    and caused the provided `compression_threshold` to not be respected.\n\n    *Max Gurewitz*",
    "project": "activesupport",
    "date_merged": 1595708880000,
    "author": "maxgurewitz",
    "sha": "73ba6faa3692a6fa7a76ef11a9b819ca4c3e4598",
    "pr": "39747",
    "merge_sha": "9e9a0a501fe944a0a182cdc61704ed03bcf678f0",
    "html": "<p>Fixed issue in <code>ActiveSupport::Cache::MemCacheStore</code> which caused duplicate compression,<br />\nand caused the provided <code>compression_threshold</code> to not be respected.</p>\n\n<p><em>Max Gurewitz</em></p>\n"
  },
  {
    "message": "*   Prevent `RedisCacheStore` and `MemCacheStore` from performing compression\n    when reading entries written with `raw: true`.\n\n    *Max Gurewitz*",
    "project": "activesupport",
    "date_merged": 1595619128000,
    "author": "maxgurewitz",
    "sha": "f1fb097a74bcf15cdce1bffd0b9a8224afd50b34",
    "pr": "39728",
    "merge_sha": "27f27fb75a3e32bdf2325c1f22c95566ef27242b",
    "html": "<p>Prevent <code>RedisCacheStore</code> and <code>MemCacheStore</code> from performing compression<br />\nwhen reading entries written with <code>raw: true</code>.</p>\n\n<p><em>Max Gurewitz</em></p>\n"
  },
  {
    "message": "*   `URI.parser` is deprecated and will be removed in Rails 7.0. Use\n    `URI::DEFAULT_PARSER` instead.\n\n    *Jean Boussier*",
    "project": "activesupport",
    "date_merged": 1636979455000,
    "author": "Eugene Kenny",
    "sha": "a4bbc3b360b3032c2cb1153f7620eeef9a6ead03",
    "pr": "43644",
    "merge_sha": "a559d37155cc6e8783b0130d7dda7df1e5996c45",
    "html": "<p><code>URI.parser</code> is deprecated and will be removed in Rails 7.0. Use<br />\n<code>URI::DEFAULT_PARSER</code> instead.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   `require_dependency` has been documented to be _obsolete_ in `:zeitwerk`\n    mode. The method is not deprecated as such (yet), but applications are\n    encouraged to not use it.\n\n    In `:zeitwerk` mode, semantics match Ruby's and you do not need to be\n    defensive with load order. Just refer to classes and modules normally. If\n    the constant name is dynamic, camelize if needed, and constantize.\n\n    *Xavier Noria*",
    "project": "activesupport",
    "date_merged": 1588797703000,
    "author": "Xavier Noria",
    "sha": "f2902edc0c972253984d229886e456eab08c92a5",
    "pr": "39163",
    "merge_sha": "f52824b87ff74e89a39c17a2e8288c183ee1f10f",
    "html": "<p><code>require_dependency</code> has been documented to be <em>obsolete</em> in <code>:zeitwerk</code><br />\nmode. The method is not deprecated as such (yet), but applications are<br />\nencouraged to not use it.</p>\n\n<p>In <code>:zeitwerk</code> mode, semantics match Ruby’s and you do not need to be<br />\ndefensive with load order. Just refer to classes and modules normally. If<br />\nthe constant name is dynamic, camelize if needed, and constantize.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Add 3rd person aliases of `Symbol#start_with?` and `Symbol#end_with?`.\n\n    ```ruby\n    :foo.starts_with?(\"f\") # => true\n    :foo.ends_with?(\"o\")   # => true\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activesupport",
    "date_merged": 1588700707000,
    "author": "Ryuta Kamizono",
    "sha": "62a20c2a642a2ae6ac7c265af1fe8fdf33114bf4",
    "pr": "39155",
    "merge_sha": "39e4796b93ca396c1f19c7c82dc57722b63e1075",
    "html": "<p>Add 3rd person aliases of <code>Symbol#start_with?</code> and <code>Symbol#end_with?</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"ss\">:foo</span><span class=\"p\">.</span><span class=\"nf\">starts_with?</span><span class=\"p\">(</span><span class=\"s2\">\"f\"</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; true</span>\n<span class=\"ss\">:foo</span><span class=\"p\">.</span><span class=\"nf\">ends_with?</span><span class=\"p\">(</span><span class=\"s2\">\"o\"</span><span class=\"p\">)</span>   <span class=\"c1\"># =&gt; true</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Add override of unary plus for `ActiveSupport::Duration`.\n\n    `+ 1.second` is now identical to `+1.second` to prevent errors\n    where a seemingly innocent change of formatting leads to a change in the code behavior.\n\n    Before:\n    ```ruby\n    +1.second.class\n    # => ActiveSupport::Duration\n    (+ 1.second).class\n    # => Integer\n    ```\n\n    After:\n    ```ruby\n    +1.second.class\n    # => ActiveSupport::Duration\n    (+ 1.second).class\n    # => ActiveSupport::Duration\n    ```\n\n    Fixes #39079.\n\n    *Roman Kushnir*",
    "project": "activesupport",
    "date_merged": 1588229237000,
    "author": "Roman Kushnir",
    "sha": "17e24f92f19e7cf9393f502c1b7471aeed8020e1",
    "pr": "39087",
    "merge_sha": "b8c48613dda71968e55854aa3f1a7588ce048dce",
    "html": "<p>Add override of unary plus for <code>ActiveSupport::Duration</code>.</p>\n\n<p><code>+ 1.second</code> is now identical to <code>+1.second</code> to prevent errors<br />\nwhere a seemingly innocent change of formatting leads to a change in the code behavior.</p>\n\n<p>Before:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"nf\">second</span><span class=\"p\">.</span><span class=\"nf\">class</span>\n<span class=\"c1\"># =&gt; ActiveSupport::Duration</span>\n<span class=\"p\">(</span><span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"nf\">second</span><span class=\"p\">).</span><span class=\"nf\">class</span>\n<span class=\"c1\"># =&gt; Integer</span>\n</code></pre></div></div>\n\n<p>After:</p>\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"nf\">second</span><span class=\"p\">.</span><span class=\"nf\">class</span>\n<span class=\"c1\"># =&gt; ActiveSupport::Duration</span>\n<span class=\"p\">(</span><span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">.</span><span class=\"nf\">second</span><span class=\"p\">).</span><span class=\"nf\">class</span>\n<span class=\"c1\"># =&gt; ActiveSupport::Duration</span>\n</code></pre></div></div>\n\n<p>Fixes #39079.</p>\n\n<p><em>Roman Kushnir</em></p>\n"
  },
  {
    "message": "*   Add subsec to `ActiveSupport::TimeWithZone#inspect`.\n\n    Before:\n\n        Time.at(1498099140).in_time_zone.inspect\n        # => \"Thu, 22 Jun 2017 02:39:00 UTC +00:00\"\n        Time.at(1498099140, 123456780, :nsec).in_time_zone.inspect\n        # => \"Thu, 22 Jun 2017 02:39:00 UTC +00:00\"\n        Time.at(1498099140 + Rational(\"1/3\")).in_time_zone.inspect\n        # => \"Thu, 22 Jun 2017 02:39:00 UTC +00:00\"\n\n    After:\n\n        Time.at(1498099140).in_time_zone.inspect\n        # => \"Thu, 22 Jun 2017 02:39:00.000000000 UTC +00:00\"\n        Time.at(1498099140, 123456780, :nsec).in_time_zone.inspect\n        # => \"Thu, 22 Jun 2017 02:39:00.123456780 UTC +00:00\"\n        Time.at(1498099140 + Rational(\"1/3\")).in_time_zone.inspect\n        # => \"Thu, 22 Jun 2017 02:39:00.333333333 UTC +00:00\"\n\n    *akinomaeni*",
    "project": "activesupport",
    "date_merged": 1586570029000,
    "author": "akinomaeni",
    "sha": "1e799f23853066b48da1a617016e6aff5d3b839d",
    "pr": "38874",
    "merge_sha": "4d0947207a54db89b646b6277b9f8c8f6dcf53d6",
    "html": "<p>Add subsec to <code>ActiveSupport::TimeWithZone#inspect</code>.</p>\n\n<p>Before:</p>\n\n<pre><code>Time.at(1498099140).in_time_zone.inspect\n# =&gt; \"Thu, 22 Jun 2017 02:39:00 UTC +00:00\"\nTime.at(1498099140, 123456780, :nsec).in_time_zone.inspect\n# =&gt; \"Thu, 22 Jun 2017 02:39:00 UTC +00:00\"\nTime.at(1498099140 + Rational(\"1/3\")).in_time_zone.inspect\n# =&gt; \"Thu, 22 Jun 2017 02:39:00 UTC +00:00\"\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>Time.at(1498099140).in_time_zone.inspect\n# =&gt; \"Thu, 22 Jun 2017 02:39:00.000000000 UTC +00:00\"\nTime.at(1498099140, 123456780, :nsec).in_time_zone.inspect\n# =&gt; \"Thu, 22 Jun 2017 02:39:00.123456780 UTC +00:00\"\nTime.at(1498099140 + Rational(\"1/3\")).in_time_zone.inspect\n# =&gt; \"Thu, 22 Jun 2017 02:39:00.333333333 UTC +00:00\"\n</code></pre>\n\n<p><em>akinomaeni</em></p>\n"
  },
  {
    "message": "*   Calling `ActiveSupport::TaggedLogging#tagged` without a block now returns a tagged logger.\n\n    ```ruby\n    logger.tagged(\"BCX\").info(\"Funky time!\") # => [BCX] Funky time!\n    ```\n\n    *Eugene Kenny*",
    "project": "activesupport",
    "date_merged": 1585668627000,
    "author": "Eugene Kenny",
    "sha": "f84e0d64ddda0ca454887c11e26653dd9d862f7b",
    "pr": "38850",
    "merge_sha": "a1b6f08891a414f1d8ed94765b3f72eb5a5feef8",
    "html": "<p>Calling <code>ActiveSupport::TaggedLogging#tagged</code> without a block now returns a tagged logger.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">logger</span><span class=\"p\">.</span><span class=\"nf\">tagged</span><span class=\"p\">(</span><span class=\"s2\">\"BCX\"</span><span class=\"p\">).</span><span class=\"nf\">info</span><span class=\"p\">(</span><span class=\"s2\">\"Funky time!\"</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [BCX] Funky time!</span>\n</code></pre></div></div>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Align `Range#cover?` extension behavior with Ruby behavior for backwards ranges.\n\n    `(1..10).cover?(5..3)` now returns `false`, as it does in plain Ruby.\n\n    Also update `#include?` and `#===` behavior to match.\n\n    *Michael Groeneman*",
    "project": "activesupport",
    "date_merged": 1585603271000,
    "author": "Michael Groeneman",
    "sha": "e4068f5ff250951371d8248d78183a1da8fe12e7",
    "pr": "38837",
    "merge_sha": "1239b22e2250a40ac88709d1bacc904d0f47fafb",
    "html": "<p>Align <code>Range#cover?</code> extension behavior with Ruby behavior for backwards ranges.</p>\n\n<p><code>(1..10).cover?(5..3)</code> now returns <code>false</code>, as it does in plain Ruby.</p>\n\n<p>Also update <code>#include?</code> and <code>#===</code> behavior to match.</p>\n\n<p><em>Michael Groeneman</em></p>\n"
  },
  {
    "message": "*   Update to TZInfo v2.0.0.\n\n    This changes the output of `ActiveSupport::TimeZone.utc_to_local`, but\n    can be controlled with the\n    `ActiveSupport.utc_to_local_returns_utc_offset_times` config.\n\n    New Rails 6.1 apps have it enabled by default, existing apps can upgrade\n    via the config in config/initializers/new_framework_defaults_6_1.rb\n\n    See the `utc_to_local_returns_utc_offset_times` documentation for details.\n\n    *Phil Ross*, *Jared Beck*",
    "project": "activesupport",
    "date_merged": 1585425204000,
    "author": "Phil Ross",
    "sha": "e9425abe33924623b1dce62bd817eace757c2b4e",
    "pr": null,
    "merge_sha": "bf34c808f9936ecb160914cace45c655ec0924c7",
    "html": "<p>Update to TZInfo v2.0.0.</p>\n\n<p>This changes the output of <code>ActiveSupport::TimeZone.utc_to_local</code>, but<br />\ncan be controlled with the<br />\n<code>ActiveSupport.utc_to_local_returns_utc_offset_times</code> config.</p>\n\n<p>New Rails 6.1 apps have it enabled by default, existing apps can upgrade<br />\nvia the config in config/initializers/new_framework_defaults_6_1.rb</p>\n\n<p>See the <code>utc_to_local_returns_utc_offset_times</code> documentation for details.</p>\n\n<p><em>Phil Ross</em>, <em>Jared Beck</em></p>\n"
  },
  {
    "message": "*   Add Date and Time `#yesterday?` and `#tomorrow?` alongside `#today?`.\n\n    Aliased to `#prev_day?` and `#next_day?` to match the existing `#prev/next_day` methods.\n\n    *Jatin Dhankhar*",
    "project": "activesupport",
    "date_merged": 1584743395000,
    "author": "Jatin Dhankhar",
    "sha": "5df9b4584cd6fb653d169ec9a1671532799bdf95",
    "pr": "37625",
    "merge_sha": "3c362f097ff8f6d28da0c6572779a82fedd2b63d",
    "html": "<p>Add Date and Time <code>#yesterday?</code> and <code>#tomorrow?</code> alongside <code>#today?</code>.</p>\n\n<p>Aliased to <code>#prev_day?</code> and <code>#next_day?</code> to match the existing <code>#prev/next_day</code> methods.</p>\n\n<p><em>Jatin Dhankhar</em></p>\n"
  },
  {
    "message": "*   Add `Enumerable#pick` to complement `ActiveRecord::Relation#pick`.\n\n    *Eugene Kenny*",
    "project": "activesupport",
    "date_merged": 1584564036000,
    "author": "Eugene Kenny",
    "sha": "a4914a436e0543a9ce3706b5c76e427d5a326028",
    "pr": "38760",
    "merge_sha": "5c188c12ee719dfe4b76cde7763f269bcb992484",
    "html": "<p>Add <code>Enumerable#pick</code> to complement <code>ActiveRecord::Relation#pick</code>.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   [Breaking change] `ActiveSupport::Callbacks#halted_callback_hook` now receive a 2nd argument:\n\n    `ActiveSupport::Callbacks#halted_callback_hook` now receive the name of the callback\n    being halted as second argument.\n    This change will allow you to differentiate which callbacks halted the chain\n    and act accordingly.\n\n    ```ruby\n      class Book < ApplicationRecord\n        before_save { throw(:abort) }\n        before_create { throw(:abort) }\n\n        def halted_callback_hook(filter, callback_name)\n          Rails.logger.info(\"Book couldn't be #{callback_name}d\")\n        end\n\n        Book.create # => \"Book couldn't be created\"\n        book.save # => \"Book couldn't be saved\"\n      end\n    ```\n\n    *Edouard Chin*",
    "project": "activesupport",
    "date_merged": 1583267330000,
    "author": "Edouard CHIN",
    "sha": "06dd162fb3ae67f202a0a59da1ce94317d0a3e22",
    "pr": "38576",
    "merge_sha": "40b7d93c5bf04974cfd0201a8e391c499c046f0b",
    "html": "<p>[Breaking change] <code>ActiveSupport::Callbacks#halted_callback_hook</code> now receive a 2nd argument:</p>\n\n<p><code>ActiveSupport::Callbacks#halted_callback_hook</code> now receive the name of the callback<br />\nbeing halted as second argument.<br />\nThis change will allow you to differentiate which callbacks halted the chain<br />\nand act accordingly.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n    <span class=\"n\">before_save</span> <span class=\"p\">{</span> <span class=\"kp\">throw</span><span class=\"p\">(</span><span class=\"ss\">:abort</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n    <span class=\"n\">before_create</span> <span class=\"p\">{</span> <span class=\"kp\">throw</span><span class=\"p\">(</span><span class=\"ss\">:abort</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">halted_callback_hook</span><span class=\"p\">(</span><span class=\"n\">filter</span><span class=\"p\">,</span> <span class=\"n\">callback_name</span><span class=\"p\">)</span>\n      <span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">logger</span><span class=\"p\">.</span><span class=\"nf\">info</span><span class=\"p\">(</span><span class=\"s2\">\"Book couldn't be </span><span class=\"si\">#{</span><span class=\"n\">callback_name</span><span class=\"si\">}</span><span class=\"s2\">d\"</span><span class=\"p\">)</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">create</span> <span class=\"c1\"># =&gt; \"Book couldn't be created\"</span>\n    <span class=\"n\">book</span><span class=\"p\">.</span><span class=\"nf\">save</span> <span class=\"c1\"># =&gt; \"Book couldn't be saved\"</span>\n  <span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Support `prepend` with `ActiveSupport::Concern`.\n\n    Allows a module with `extend ActiveSupport::Concern` to be prepended.\n\n        module Imposter\n          extend ActiveSupport::Concern\n\n          # Same as `included`, except only run when prepended.\n          prepended do\n          end\n        end\n\n        class Person\n          prepend Imposter\n        end\n\n    Class methods are prepended to the base class, concerning is also\n    updated: `concerning :Imposter, prepend: true do`.\n\n    *Jason Karns*, *Elia Schito*",
    "project": "activesupport",
    "date_merged": 1581297830000,
    "author": "Jason Karns",
    "sha": "54ecc90d902816b8a96f78c2b2d85d6b8a7df135",
    "pr": "37174",
    "merge_sha": "a6cf6492501241d96cc76b7502dab830318a39ca",
    "html": "<p>Support <code>prepend</code> with <code>ActiveSupport::Concern</code>.</p>\n\n<p>Allows a module with <code>extend ActiveSupport::Concern</code> to be prepended.</p>\n\n<pre><code>module Imposter\n  extend ActiveSupport::Concern\n\n  # Same as `included`, except only run when prepended.\n  prepended do\n  end\nend\n\nclass Person\n  prepend Imposter\nend\n</code></pre>\n\n<p>Class methods are prepended to the base class, concerning is also<br />\nupdated: <code>concerning :Imposter, prepend: true do</code>.</p>\n\n<p><em>Jason Karns</em>, <em>Elia Schito</em></p>\n"
  },
  {
    "message": "*   Deprecate using `Range#include?` method to check the inclusion of a value\n    in a date time range. It is recommended to use `Range#cover?` method\n    instead of `Range#include?` to check the inclusion of a value\n    in a date time range.\n\n    *Vishal Telangre*",
    "project": "activesupport",
    "date_merged": 1578496409000,
    "author": "Vishal Telangre",
    "sha": "740bb178d96643aed2a780e107df4d9d826b3b04",
    "pr": "38186",
    "merge_sha": "ff341ae0bbb070fbf40736dc909e6d1897bb2c81",
    "html": "<p>Deprecate using <code>Range#include?</code> method to check the inclusion of a value<br />\nin a date time range. It is recommended to use <code>Range#cover?</code> method<br />\ninstead of <code>Range#include?</code> to check the inclusion of a value<br />\nin a date time range.</p>\n\n<p><em>Vishal Telangre</em></p>\n"
  },
  {
    "message": "*   Support added for a `round_mode` parameter, in all number helpers. (See: `BigDecimal::mode`.)\n\n    ```ruby\n    number_to_currency(1234567890.50, precision: 0, round_mode: :half_down) # => \"$1,234,567,890\"\n    number_to_percentage(302.24398923423, precision: 5, round_mode: :down) # => \"302.24398%\"\n    number_to_rounded(389.32314, precision: 0, round_mode: :ceil) # => \"390\"\n    number_to_human_size(483989, precision: 2, round_mode: :up) # => \"480 KB\"\n    number_to_human(489939, precision: 2, round_mode: :floor) # => \"480 Thousand\"\n\n    485000.to_s(:human, precision: 2, round_mode: :half_even) # => \"480 Thousand\"\n    ```\n\n    *Tom Lord*",
    "project": "activesupport",
    "date_merged": 1578318299000,
    "author": "tom-lord",
    "sha": "7905bdfd8b2ae50319cd7a9a74ee1f8c865d648d",
    "pr": "38148",
    "merge_sha": "cd71826547899c9d4311fe0f10017551292d957f",
    "html": "<p>Support added for a <code>round_mode</code> parameter, in all number helpers. (See: <code>BigDecimal::mode</code>.)</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">number_to_currency</span><span class=\"p\">(</span><span class=\"mf\">1234567890.50</span><span class=\"p\">,</span> <span class=\"ss\">precision: </span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"ss\">round_mode: :half_down</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; \"$1,234,567,890\"</span>\n<span class=\"n\">number_to_percentage</span><span class=\"p\">(</span><span class=\"mf\">302.24398923423</span><span class=\"p\">,</span> <span class=\"ss\">precision: </span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"ss\">round_mode: :down</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; \"302.24398%\"</span>\n<span class=\"n\">number_to_rounded</span><span class=\"p\">(</span><span class=\"mf\">389.32314</span><span class=\"p\">,</span> <span class=\"ss\">precision: </span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"ss\">round_mode: :ceil</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; \"390\"</span>\n<span class=\"n\">number_to_human_size</span><span class=\"p\">(</span><span class=\"mi\">483989</span><span class=\"p\">,</span> <span class=\"ss\">precision: </span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"ss\">round_mode: :up</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; \"480 KB\"</span>\n<span class=\"n\">number_to_human</span><span class=\"p\">(</span><span class=\"mi\">489939</span><span class=\"p\">,</span> <span class=\"ss\">precision: </span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"ss\">round_mode: :floor</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; \"480 Thousand\"</span>\n\n<span class=\"mi\">485000</span><span class=\"p\">.</span><span class=\"nf\">to_s</span><span class=\"p\">(</span><span class=\"ss\">:human</span><span class=\"p\">,</span> <span class=\"ss\">precision: </span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"ss\">round_mode: :half_even</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; \"480 Thousand\"</span>\n</code></pre></div></div>\n\n<p><em>Tom Lord</em></p>\n"
  },
  {
    "message": "*   `Array#to_sentence` no longer returns a frozen string.\n\n    Before:\n\n        ['one', 'two'].to_sentence.frozen?\n        # => true\n\n    After:\n\n        ['one', 'two'].to_sentence.frozen?\n        # => false\n\n    *Nicolas Dular*",
    "project": "activesupport",
    "date_merged": 1577628466000,
    "author": "Nicolas Dular",
    "sha": "97d428b790f27a79f6cc2ea848fbb5eeba5de42d",
    "pr": "38117",
    "merge_sha": "09cc7967b970373de8a748f68d027ec4bf331832",
    "html": "<p><code>Array#to_sentence</code> no longer returns a frozen string.</p>\n\n<p>Before:</p>\n\n<pre><code>['one', 'two'].to_sentence.frozen?\n# =&gt; true\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>['one', 'two'].to_sentence.frozen?\n# =&gt; false\n</code></pre>\n\n<p><em>Nicolas Dular</em></p>\n"
  },
  {
    "message": "*   When an instance of `ActiveSupport::Duration` is converted to an `iso8601` duration string, if `weeks` are mixed with `date` parts, the `week` part will be converted to days.\n    This keeps the parser and serializer on the same page.\n\n    ```ruby\n    duration = ActiveSupport::Duration.build(1000000)\n    # 1 week, 4 days, 13 hours, 46 minutes, and 40.0 seconds\n\n    duration_iso = duration.iso8601\n    # P11DT13H46M40S\n\n    ActiveSupport::Duration.parse(duration_iso)\n    # 11 days, 13 hours, 46 minutes, and 40 seconds\n\n    duration = ActiveSupport::Duration.build(604800)\n    # 1 week\n\n    duration_iso = duration.iso8601\n    # P1W\n\n    ActiveSupport::Duration.parse(duration_iso)\n    # 1 week\n    ```\n\n    *Abhishek Sarkar*",
    "project": "activesupport",
    "date_merged": 1576853351000,
    "author": "Abhishek Sarkar",
    "sha": "c9bc6d66cbfcb3bac1c3368ee8faa0ddbb0b626d",
    "pr": "38046",
    "merge_sha": "5c2d33bd90c4e58c3e7ad327ac6d6cca4158f4d5",
    "html": "<p>When an instance of <code>ActiveSupport::Duration</code> is converted to an <code>iso8601</code> duration string, if <code>weeks</code> are mixed with <code>date</code> parts, the <code>week</code> part will be converted to days.<br />\nThis keeps the parser and serializer on the same page.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">duration</span> <span class=\"o\">=</span> <span class=\"no\">ActiveSupport</span><span class=\"o\">::</span><span class=\"no\">Duration</span><span class=\"p\">.</span><span class=\"nf\">build</span><span class=\"p\">(</span><span class=\"mi\">1000000</span><span class=\"p\">)</span>\n<span class=\"c1\"># 1 week, 4 days, 13 hours, 46 minutes, and 40.0 seconds</span>\n\n<span class=\"n\">duration_iso</span> <span class=\"o\">=</span> <span class=\"n\">duration</span><span class=\"p\">.</span><span class=\"nf\">iso8601</span>\n<span class=\"c1\"># P11DT13H46M40S</span>\n\n<span class=\"no\">ActiveSupport</span><span class=\"o\">::</span><span class=\"no\">Duration</span><span class=\"p\">.</span><span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"n\">duration_iso</span><span class=\"p\">)</span>\n<span class=\"c1\"># 11 days, 13 hours, 46 minutes, and 40 seconds</span>\n\n<span class=\"n\">duration</span> <span class=\"o\">=</span> <span class=\"no\">ActiveSupport</span><span class=\"o\">::</span><span class=\"no\">Duration</span><span class=\"p\">.</span><span class=\"nf\">build</span><span class=\"p\">(</span><span class=\"mi\">604800</span><span class=\"p\">)</span>\n<span class=\"c1\"># 1 week</span>\n\n<span class=\"n\">duration_iso</span> <span class=\"o\">=</span> <span class=\"n\">duration</span><span class=\"p\">.</span><span class=\"nf\">iso8601</span>\n<span class=\"c1\"># P1W</span>\n\n<span class=\"no\">ActiveSupport</span><span class=\"o\">::</span><span class=\"no\">Duration</span><span class=\"p\">.</span><span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"n\">duration_iso</span><span class=\"p\">)</span>\n<span class=\"c1\"># 1 week</span>\n</code></pre></div></div>\n\n<p><em>Abhishek Sarkar</em></p>\n"
  },
  {
    "message": "*   Add block support to `ActiveSupport::Testing::TimeHelpers#travel_back`.\n\n    *Tim Masliuchenko*",
    "project": "activesupport",
    "date_merged": 1573412540000,
    "author": "Tim Masliuchenko",
    "sha": "21f907bb51df95a26f129277fe817019b8c37f0a",
    "pr": "37496",
    "merge_sha": "aa457920cc339ab076eeda71444f36f64570adbe",
    "html": "<p>Add block support to <code>ActiveSupport::Testing::TimeHelpers#travel_back</code>.</p>\n\n<p><em>Tim Masliuchenko</em></p>\n"
  },
  {
    "message": "*   Update `ActiveSupport::Messages::Metadata#fresh?` to work for cookies with expiry set when\n    `ActiveSupport.parse_json_times = true`.\n\n    *Christian Gregg*",
    "project": "activesupport",
    "date_merged": 1571444801000,
    "author": "Christian Gregg",
    "sha": "6e0aa1887da39659312e218906fa8f7b5f1b49e4",
    "pr": null,
    "merge_sha": "2c7ec815be4695780f43c2e1245b380808f7ce2e",
    "html": "<p>Update <code>ActiveSupport::Messages::Metadata#fresh?</code> to work for cookies with expiry set when<br />\n<code>ActiveSupport.parse_json_times = true</code>.</p>\n\n<p><em>Christian Gregg</em></p>\n"
  },
  {
    "message": "*   Support symbolic links for `content_path` in `ActiveSupport::EncryptedFile`.\n\n    *Takumi Shotoku*",
    "project": "activesupport",
    "date_merged": 1571278055000,
    "author": "sinsoku",
    "sha": "6db6432d71c7928d701c35ec80cb0767710dd65f",
    "pr": null,
    "merge_sha": "678b59aa522bbf9c55bfa5a79b32826f356dacbf",
    "html": "<p>Support symbolic links for <code>content_path</code> in <code>ActiveSupport::EncryptedFile</code>.</p>\n\n<p><em>Takumi Shotoku</em></p>\n"
  },
  {
    "message": "*   Improve `Range#===`, `Range#include?`, and `Range#cover?` to work with beginless (startless)\n    and endless range targets.\n\n    *Allen Hsu*, *Andrew Hodgkinson*",
    "project": "activesupport",
    "date_merged": 1569021761000,
    "author": "Carlos Antonio da Silva",
    "sha": "6001af630f34cf0012539945428897813bc27a41",
    "pr": "37259",
    "merge_sha": "c276e5d9ed5f43605bafd72071f0df6933181b41",
    "html": "<p>Improve <code>Range#===</code>, <code>Range#include?</code>, and <code>Range#cover?</code> to work with beginless (startless)<br />\nand endless range targets.</p>\n\n<p><em>Allen Hsu</em>, <em>Andrew Hodgkinson</em></p>\n"
  },
  {
    "message": "*   Don't use `Process#clock_gettime(CLOCK_THREAD_CPUTIME_ID)` on Solaris.\n\n    *Iain Beeston*",
    "project": "activesupport",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "9714d5d1408eda3130a29f5b00bedfcaa41b673f",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Don’t use <code>Process#clock_gettime(CLOCK_THREAD_CPUTIME_ID)</code> on Solaris.</p>\n\n<p><em>Iain Beeston</em></p>\n"
  },
  {
    "message": "*   Prevent `ActiveSupport::Duration.build(value)` from creating instances of\n    `ActiveSupport::Duration` unless `value` is of type `Numeric`.\n\n    Addresses the errant set of behaviours described in #37012 where\n    `ActiveSupport::Duration` comparisons would fail confusingly\n    or return unexpected results when comparing durations built from instances of `String`.\n\n    Before:\n\n        small_duration_from_string = ActiveSupport::Duration.build('9')\n        large_duration_from_string = ActiveSupport::Duration.build('100000000000000')\n        small_duration_from_int = ActiveSupport::Duration.build(9)\n\n        large_duration_from_string > small_duration_from_string\n        # => false\n\n        small_duration_from_string == small_duration_from_int\n        # => false\n\n        small_duration_from_int < large_duration_from_string\n        # => ArgumentError (comparison of ActiveSupport::Duration::Scalar with ActiveSupport::Duration failed)\n\n        large_duration_from_string > small_duration_from_int\n        # => ArgumentError (comparison of String with ActiveSupport::Duration failed)\n\n    After:\n\n        small_duration_from_string = ActiveSupport::Duration.build('9')\n        # => TypeError (can't build an ActiveSupport::Duration from a String)\n\n    *Alexei Emam*",
    "project": "activesupport",
    "date_merged": 1566923896000,
    "author": "Alexei Emam",
    "sha": "1a48d50363c024277dbebfef67c48bebe21b538f",
    "pr": "37012",
    "merge_sha": "45fa3261eb7fc3d38253ad5c67b847855597c353",
    "html": "<p>Prevent <code>ActiveSupport::Duration.build(value)</code> from creating instances of<br />\n<code>ActiveSupport::Duration</code> unless <code>value</code> is of type <code>Numeric</code>.</p>\n\n<p>Addresses the errant set of behaviours described in #37012 where<br />\n<code>ActiveSupport::Duration</code> comparisons would fail confusingly<br />\nor return unexpected results when comparing durations built from instances of <code>String</code>.</p>\n\n<p>Before:</p>\n\n<pre><code>small_duration_from_string = ActiveSupport::Duration.build('9')\nlarge_duration_from_string = ActiveSupport::Duration.build('100000000000000')\nsmall_duration_from_int = ActiveSupport::Duration.build(9)\n\nlarge_duration_from_string &gt; small_duration_from_string\n# =&gt; false\n\nsmall_duration_from_string == small_duration_from_int\n# =&gt; false\n\nsmall_duration_from_int &lt; large_duration_from_string\n# =&gt; ArgumentError (comparison of ActiveSupport::Duration::Scalar with ActiveSupport::Duration failed)\n\nlarge_duration_from_string &gt; small_duration_from_int\n# =&gt; ArgumentError (comparison of String with ActiveSupport::Duration failed)\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>small_duration_from_string = ActiveSupport::Duration.build('9')\n# =&gt; TypeError (can't build an ActiveSupport::Duration from a String)\n</code></pre>\n\n<p><em>Alexei Emam</em></p>\n"
  },
  {
    "message": "*   Add `ActiveSupport::Cache::Store#delete_multi` method to delete multiple keys from the cache store.\n\n    *Peter Zhu*",
    "project": "activesupport",
    "date_merged": 1566877928000,
    "author": "Peter Zhu",
    "sha": "59e746d4d07bedbb08bd3f00d30cc216ff1fe006",
    "pr": "37050",
    "merge_sha": "f7049ec583a727c72ee7b218fbff267a06cd7882",
    "html": "<p>Add <code>ActiveSupport::Cache::Store#delete_multi</code> method to delete multiple keys from the cache store.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Support multiple arguments in `HashWithIndifferentAccess` for `merge` and `update` methods, to\n    follow Ruby 2.6 addition.\n\n    *Wojciech Wnętrzak*",
    "project": "activesupport",
    "date_merged": 1565303277000,
    "author": "Wojciech Wnętrzak",
    "sha": "8674417358b56d382f5615b9a4a464e9c862969c",
    "pr": "36880",
    "merge_sha": "6ebdab323955da711bcad2d9c5471d542d4e364f",
    "html": "<p>Support multiple arguments in <code>HashWithIndifferentAccess</code> for <code>merge</code> and <code>update</code> methods, to<br />\nfollow Ruby 2.6 addition.</p>\n\n<p><em>Wojciech Wnętrzak</em></p>\n"
  },
  {
    "message": "*   Allow initializing `thread_mattr_*` attributes via `:default` option.\n\n        class Scraper\n          thread_mattr_reader :client, default: Api::Client.new\n        end\n\n    *Guilherme Mansur*",
    "project": "activesupport",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Allow initializing <code>thread_mattr_*</code> attributes via <code>:default</code> option.</p>\n\n<pre><code>class Scraper\n  thread_mattr_reader :client, default: Api::Client.new\nend\n</code></pre>\n\n<p><em>Guilherme Mansur</em></p>\n"
  },
  {
    "message": "*   Add `compact_blank` for those times when you want to remove #blank? values from\n    an Enumerable (also `compact_blank!` on Hash, Array, ActionController::Parameters).\n\n    *Dana Sherson*",
    "project": "activesupport",
    "date_merged": 1564085898000,
    "author": "Dana Sherson",
    "sha": "c8847c17a7c9ae75c44c522c56ccd9c5fca25ea7",
    "pr": "36412",
    "merge_sha": "c9b7b9ff8adb3f01db0f9af90359030028a33b5b",
    "html": "<p>Add <code>compact_blank</code> for those times when you want to remove #blank? values from<br />\nan Enumerable (also <code>compact_blank!</code> on Hash, Array, ActionController::Parameters).</p>\n\n<p><em>Dana Sherson</em></p>\n"
  },
  {
    "message": "*   Make ActiveSupport::Logger Fiber-safe.\n\n    Use `Fiber.current.__id__` in `ActiveSupport::Logger#local_level=` in order\n    to make log level local to Ruby Fibers in addition to Threads.\n\n    Example:\n\n        logger = ActiveSupport::Logger.new(STDOUT)\n        logger.level = 1\n        puts \"Main is debug? #{logger.debug?}\"\n\n        Fiber.new {\n          logger.local_level = 0\n          puts \"Thread is debug? #{logger.debug?}\"\n        }.resume\n\n        puts \"Main is debug? #{logger.debug?}\"\n\n    Before:\n\n        Main is debug? false\n        Thread is debug? true\n        Main is debug? true\n\n    After:\n\n        Main is debug? false\n        Thread is debug? true\n        Main is debug? false\n\n    Fixes #36752.\n\n    *Alexander Varnin*",
    "project": "activesupport",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Make ActiveSupport::Logger Fiber-safe.</p>\n\n<p>Use <code>Fiber.current.__id__</code> in <code>ActiveSupport::Logger#local_level=</code> in order<br />\nto make log level local to Ruby Fibers in addition to Threads.</p>\n\n<p>Example:</p>\n\n<pre><code>logger = ActiveSupport::Logger.new(STDOUT)\nlogger.level = 1\nputs \"Main is debug? #{logger.debug?}\"\n\nFiber.new {\n  logger.local_level = 0\n  puts \"Thread is debug? #{logger.debug?}\"\n}.resume\n\nputs \"Main is debug? #{logger.debug?}\"\n</code></pre>\n\n<p>Before:</p>\n\n<pre><code>Main is debug? false\nThread is debug? true\nMain is debug? true\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>Main is debug? false\nThread is debug? true\nMain is debug? false\n</code></pre>\n\n<p>Fixes #36752.</p>\n\n<p><em>Alexander Varnin</em></p>\n"
  },
  {
    "message": "*   Allow the `on_rotation` proc used when decrypting/verifying a message to be\n    passed at the constructor level.\n\n    Before:\n\n        crypt = ActiveSupport::MessageEncryptor.new('long_secret')\n        crypt.decrypt_and_verify(encrypted_message, on_rotation: proc { ... })\n        crypt.decrypt_and_verify(another_encrypted_message, on_rotation: proc { ... })\n\n    After:\n\n        crypt = ActiveSupport::MessageEncryptor.new('long_secret', on_rotation: proc { ... })\n        crypt.decrypt_and_verify(encrypted_message)\n        crypt.decrypt_and_verify(another_encrypted_message)\n\n    *Edouard Chin*",
    "project": "activesupport",
    "date_merged": 1563885106000,
    "author": "Carlos Antonio da Silva",
    "sha": "d33428611c8c3a3decf999ae17e0f33513c26861",
    "pr": "36724",
    "merge_sha": "990c07794e68b3df5ba0e987db76d77f7f674da1",
    "html": "<p>Allow the <code>on_rotation</code> proc used when decrypting/verifying a message to be<br />\npassed at the constructor level.</p>\n\n<p>Before:</p>\n\n<pre><code>crypt = ActiveSupport::MessageEncryptor.new('long_secret')\ncrypt.decrypt_and_verify(encrypted_message, on_rotation: proc { ... })\ncrypt.decrypt_and_verify(another_encrypted_message, on_rotation: proc { ... })\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>crypt = ActiveSupport::MessageEncryptor.new('long_secret', on_rotation: proc { ... })\ncrypt.decrypt_and_verify(encrypted_message)\ncrypt.decrypt_and_verify(another_encrypted_message)\n</code></pre>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   `delegate_missing_to` would raise a `DelegationError` if the object\n    delegated to was `nil`. Now the `allow_nil` option has been added to enable\n    the user to specify they want `nil` returned in this case.\n\n    *Matthew Tanous*",
    "project": "activesupport",
    "date_merged": 1558629214000,
    "author": "Matt Tanous",
    "sha": "f002be148e1377709ed28b8e80c5db76ee2fa410",
    "pr": "33437",
    "merge_sha": "639d7beb0b2f2c412b6f561f10bc1d66ab3b0b1e",
    "html": "<p><code>delegate_missing_to</code> would raise a <code>DelegationError</code> if the object<br />\ndelegated to was <code>nil</code>. Now the <code>allow_nil</code> option has been added to enable<br />\nthe user to specify they want <code>nil</code> returned in this case.</p>\n\n<p><em>Matthew Tanous</em></p>\n"
  },
  {
    "message": "*   `truncate` would return the original string if it was too short to be truncated\n    and a frozen string if it were long enough to be truncated. Now truncate will\n    consistently return an unfrozen string regardless. This behavior is consistent\n    with `gsub` and `strip`.\n\n    Before:\n\n        'foobar'.truncate(5).frozen?\n        # => true\n        'foobar'.truncate(6).frozen?\n        # => false\n\n    After:\n\n        'foobar'.truncate(5).frozen?\n        # => false\n        'foobar'.truncate(6).frozen?\n        # => false\n\n    *Jordan Thomas*",
    "project": "activesupport",
    "date_merged": 1556375174000,
    "author": "Jordan Thomas",
    "sha": "4dfdc7eb90be905e0e8e583f942091ce12381b37",
    "pr": "36109",
    "merge_sha": "99df469ddc3dc4be611f4a17f76d14af9ab01bbd",
    "html": "<p><code>truncate</code> would return the original string if it was too short to be truncated<br />\nand a frozen string if it were long enough to be truncated. Now truncate will<br />\nconsistently return an unfrozen string regardless. This behavior is consistent<br />\nwith <code>gsub</code> and <code>strip</code>.</p>\n\n<p>Before:</p>\n\n<pre><code>'foobar'.truncate(5).frozen?\n# =&gt; true\n'foobar'.truncate(6).frozen?\n# =&gt; false\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>'foobar'.truncate(5).frozen?\n# =&gt; false\n'foobar'.truncate(6).frozen?\n# =&gt; false\n</code></pre>\n\n<p><em>Jordan Thomas</em></p>\n"
  },
  {
    "message": "*   Clear secure password cache if password is set to `nil`\n\n    Before:\n\n       user.password = 'something'\n       user.password = nil\n\n       user.password # => 'something'\n\n    Now:\n\n       user.password = 'something'\n       user.password = nil\n\n       user.password # => nil\n\n    *Markus Doits*",
    "project": "activemodel",
    "date_merged": 1636979455000,
    "author": "Rafael Mendonça França",
    "sha": "711b241dfd45a56323c647fc82ad7e574e3282c3",
    "pr": "43378",
    "merge_sha": "a559d37155cc6e8783b0130d7dda7df1e5996c45",
    "html": "<p>Clear secure password cache if password is set to <code>nil</code></p>\n\n<p>Before:</p>\n\n<p>user.password = ‘something’<br />\n   user.password = nil</p>\n\n<p>user.password # =&gt; ‘something’</p>\n\n<p>Now:</p>\n\n<p>user.password = ‘something’<br />\n   user.password = nil</p>\n\n<p>user.password # =&gt; nil</p>\n\n<p><em>Markus Doits</em></p>\n"
  },
  {
    "message": "*   Fix delegation in `ActiveModel::Type::Registry#lookup` and `ActiveModel::Type.lookup`\n\n    Passing a last positional argument `{}` would be incorrectly considered as keyword argument.\n\n    *Benoit Daloze*",
    "project": "activemodel",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix delegation in <code>ActiveModel::Type::Registry#lookup</code> and <code>ActiveModel::Type.lookup</code></p>\n\n<p>Passing a last positional argument <code>{}</code> would be incorrectly considered as keyword argument.</p>\n\n<p><em>Benoit Daloze</em></p>\n"
  },
  {
    "message": "*   Fix `to_json` after `changes_applied` for `ActiveModel::Dirty` object.\n\n    *Ryuta Kamizono*",
    "project": "activemodel",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix <code>to_json</code> after <code>changes_applied</code> for <code>ActiveModel::Dirty</code> object.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix `to_json` for `ActiveModel::Dirty` object.\n\n    Exclude +mutations_from_database+ attribute from json as it lead to recursion.\n\n    *Anil Maurya*",
    "project": "activemodel",
    "date_merged": 1624703928000,
    "author": "Rafael França",
    "sha": "15a043f9cd96b774ee441032571ee9ff9fc8a5c7",
    "pr": "41677",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix <code>to_json</code> for <code>ActiveModel::Dirty</code> object.</p>\n\n<p>Exclude +mutations_from_database+ attribute from json as it lead to recursion.</p>\n\n<p><em>Anil Maurya</em></p>\n"
  },
  {
    "message": "*   Pass in `base` instead of `base_class` to Error.human_attribute_name\n\n    This is useful in cases where the `human_attribute_name` method depends\n    on other attributes' values of the class under validation to derive what the\n    attribute name should be.\n\n    *Filipe Sabella*",
    "project": "activemodel",
    "date_merged": 1604340953000,
    "author": "Filipe Sabella",
    "sha": "ac677fb1e3235920f666a3253be3eea167dc7972",
    "pr": "40434",
    "merge_sha": "af91d9a1c54d93ac4d725aada801cdc02c281eff",
    "html": "<p>Pass in <code>base</code> instead of <code>base_class</code> to Error.human_attribute_name</p>\n\n<p>This is useful in cases where the <code>human_attribute_name</code> method depends<br />\non other attributes’ values of the class under validation to derive what the<br />\nattribute name should be.</p>\n\n<p><em>Filipe Sabella</em></p>\n"
  },
  {
    "message": "*   Deprecate marshalling load from legacy attributes format.\n\n    *Ryuta Kamizono*",
    "project": "activemodel",
    "date_merged": 1588452506000,
    "author": "Ryuta Kamizono",
    "sha": "f93b04afab15475817c638a8dbe20eb9ce672b54",
    "pr": "39112",
    "merge_sha": "298c64815d4446a39da820842027f29b12b50bb3",
    "html": "<p>Deprecate marshalling load from legacy attributes format.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   `*_previously_changed?` accepts `:from` and `:to` keyword arguments like `*_changed?`.\n\n        topic.update!(status: :archived)\n        topic.status_previously_changed?(from: \"active\", to: \"archived\")\n        # => true\n\n    *George Claghorn*",
    "project": "activemodel",
    "date_merged": 1580162188000,
    "author": "George Claghorn",
    "sha": "a6841c720ad567d28a5ffac945bce8acc8b66c1a",
    "pr": "38268",
    "merge_sha": "f207e00eb25b2c3f9e7249e163b8cdc78e53483c",
    "html": "<p><code>*_previously_changed?</code> accepts <code>:from</code> and <code>:to</code> keyword arguments like <code>*_changed?</code>.</p>\n\n<pre><code>topic.update!(status: :archived)\ntopic.status_previously_changed?(from: \"active\", to: \"archived\")\n# =&gt; true\n</code></pre>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Raise FrozenError when trying to write attributes that aren't backed by the database on an object that is frozen:\n\n        class Animal\n          include ActiveModel::Attributes\n          attribute :age\n        end\n\n        animal = Animal.new\n        animal.freeze\n        animal.age = 25 # => FrozenError, \"can't modify a frozen Animal\"\n\n    *Josh Brody*",
    "project": "activemodel",
    "date_merged": 1570410026000,
    "author": "Josh Brody",
    "sha": "54b157442171d28c7e9553537aef7a6ae571aad7",
    "pr": "37217",
    "merge_sha": "4c5da6093d1148aaee619070f3401d4c27e17d95",
    "html": "<p>Raise FrozenError when trying to write attributes that aren’t backed by the database on an object that is frozen:</p>\n\n<pre><code>class Animal\n  include ActiveModel::Attributes\n  attribute :age\nend\n\nanimal = Animal.new\nanimal.freeze\nanimal.age = 25 # =&gt; FrozenError, \"can't modify a frozen Animal\"\n</code></pre>\n\n<p><em>Josh Brody</em></p>\n"
  },
  {
    "message": "*   Add `*_previously_was` attribute methods when dirty tracking. Example:\n\n        pirate.update(catchphrase: \"Ahoy!\")\n        pirate.previous_changes[\"catchphrase\"] # => [\"Thar She Blows!\", \"Ahoy!\"]\n        pirate.catchphrase_previously_was # => \"Thar She Blows!\"\n\n    *DHH*",
    "project": "activemodel",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Add <code>*_previously_was</code> attribute methods when dirty tracking. Example:</p>\n\n<pre><code>pirate.update(catchphrase: \"Ahoy!\")\npirate.previous_changes[\"catchphrase\"] # =&gt; [\"Thar She Blows!\", \"Ahoy!\"]\npirate.catchphrase_previously_was # =&gt; \"Thar She Blows!\"\n</code></pre>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Encapsulate each validation error as an Error object.\n\n    The `ActiveModel`’s `errors` collection is now an array of these Error\n    objects, instead of messages/details hash.\n\n    For each of these `Error` object, its `message` and `full_message` methods\n    are for generating error messages. Its `details` method would return error’s\n    extra parameters, found in the original `details` hash.\n\n    The change tries its best at maintaining backward compatibility, however\n    some edge cases won’t be covered, like `errors#first` will return `ActiveModel::Error` and manipulating\n    `errors.messages` and `errors.details` hashes directly will have no effect. Moving forward,\n    please convert those direct manipulations to use provided API methods instead.\n    Please note that `errors#add` now accepts `options` as keyword arguments instead of `Hash` which\n    introduced a change in Ruby 3 to [keyword arguments][kwargs-ann].\n\n    [kwargs-ann]: https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/\n\n    The list of deprecated methods and their planned future behavioral changes at the next major release are:\n\n    * `errors#slice!` will be removed.\n    * `errors#each` with the `key, value` two-arguments block will stop working, while the `error` single-argument block would return `Error` object.\n    * `errors#values` will be removed.\n    * `errors#keys` will be removed.\n    * `errors#to_xml` will be removed.\n    * `errors#to_h` will be removed, and can be replaced with `errors#to_hash`.\n    * Manipulating `errors` itself as a hash will have no effect (e.g. `errors[:foo] = 'bar'`).\n    * Manipulating the hash returned by `errors#messages` (e.g. `errors.messages[:foo] = 'bar'`) will have no effect.\n    * Manipulating the hash returned by `errors#details` (e.g. `errors.details[:foo].clear`) will have no effect.\n\n    *lulalala*",
    "project": "activemodel",
    "date_merged": 1586801515000,
    "author": "lulalala",
    "sha": "fcd1e41e82d3c9993f96e1763ac49a196678f931",
    "pr": "36125",
    "merge_sha": "6f6f4e40ab8c973e3f990fd759ea2804302d573a",
    "html": "<p>Encapsulate each validation error as an Error object.</p>\n\n<p>The <code>ActiveModel</code>’s <code>errors</code> collection is now an array of these Error<br />\nobjects, instead of messages/details hash.</p>\n\n<p>For each of these <code>Error</code> object, its <code>message</code> and <code>full_message</code> methods<br />\nare for generating error messages. Its <code>details</code> method would return error’s<br />\nextra parameters, found in the original <code>details</code> hash.</p>\n\n<p>The change tries its best at maintaining backward compatibility, however<br />\nsome edge cases won’t be covered, like <code>errors#first</code> will return <code>ActiveModel::Error</code> and manipulating<br />\n<code>errors.messages</code> and <code>errors.details</code> hashes directly will have no effect. Moving forward,<br />\nplease convert those direct manipulations to use provided API methods instead.<br />\nPlease note that <code>errors#add</code> now accepts <code>options</code> as keyword arguments instead of <code>Hash</code> which<br />\nintroduced a change in Ruby 3 to <a href=\"https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/\">keyword arguments</a>.</p>\n\n<p>The list of deprecated methods and their planned future behavioral changes at the next major release are:</p>\n\n<ul>\n  <li><code>errors#slice!</code> will be removed.</li>\n  <li><code>errors#each</code> with the <code>key, value</code> two-arguments block will stop working, while the <code>error</code> single-argument block would return <code>Error</code> object.</li>\n  <li><code>errors#values</code> will be removed.</li>\n  <li><code>errors#keys</code> will be removed.</li>\n  <li><code>errors#to_xml</code> will be removed.</li>\n  <li><code>errors#to_h</code> will be removed, and can be replaced with <code>errors#to_hash</code>.</li>\n  <li>Manipulating <code>errors</code> itself as a hash will have no effect (e.g. <code>errors[:foo] = 'bar'</code>).</li>\n  <li>Manipulating the hash returned by <code>errors#messages</code> (e.g. <code>errors.messages[:foo] = 'bar'</code>) will have no effect.</li>\n  <li>Manipulating the hash returned by <code>errors#details</code> (e.g. <code>errors.details[:foo].clear</code>) will have no effect.</li>\n</ul>\n\n<p><em>lulalala</em></p>\n"
  },
  {
    "message": "*   Make `retry_job` return the job that was created.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Make <code>retry_job</code> return the job that was created.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Include `ActiveSupport::Testing::Assertions` in `ActiveJob::TestHelpers`.\n\n    *Mikkel Malmberg*",
    "project": "activejob",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Include <code>ActiveSupport::Testing::Assertions</code> in <code>ActiveJob::TestHelpers</code>.</p>\n\n<p><em>Mikkel Malmberg</em></p>\n"
  },
  {
    "message": "*   Recover nano precision when serializing `Time`, `TimeWithZone` and `DateTime` objects.\n\n    *Alan Tan*",
    "project": "activejob",
    "date_merged": 1604087990000,
    "author": "Guo Xiang Tan",
    "sha": "bda10bf3a8f389e8d4c60ce1d3d5a18542af9bd2",
    "pr": "39698",
    "merge_sha": "25c518430e098fa28c64b2303b900da2bd2e2c1e",
    "html": "<p>Recover nano precision when serializing <code>Time</code>, <code>TimeWithZone</code> and <code>DateTime</code> objects.</p>\n\n<p><em>Alan Tan</em></p>\n"
  },
  {
    "message": "*   Deprecate `config.active_job.return_false_on_aborted_enqueue`.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "fd24cf1c5d02425dbd12179590d9ea225e700b01",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Deprecate <code>config.active_job.return_false_on_aborted_enqueue</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Return `false` when enqueuing a job is aborted.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "fd24cf1c5d02425dbd12179590d9ea225e700b01",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Return <code>false</code> when enqueuing a job is aborted.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   While using `perform_enqueued_jobs` test helper enqueued jobs must be stored for the later check with\n    `assert_enqueued_with`.\n\n    *Dmitry Polushkin*",
    "project": "activejob",
    "date_merged": 1586387852000,
    "author": "Rafael Mendonça França",
    "sha": "855c9897eb98ea4d77ec5036d15cdd1764698838",
    "pr": "38902",
    "merge_sha": "814bed615c846174563df00b0aac67116fa9b0d9",
    "html": "<p>While using <code>perform_enqueued_jobs</code> test helper enqueued jobs must be stored for the later check with<br />\n<code>assert_enqueued_with</code>.</p>\n\n<p><em>Dmitry Polushkin</em></p>\n"
  },
  {
    "message": "*   `ActiveJob::TestCase#perform_enqueued_jobs` without a block removes performed jobs from the queue.\n\n    That way the helper can be called multiple times and not perform a job invocation multiple times.\n\n    ```ruby\n    def test_jobs\n      HelloJob.perform_later(\"rafael\")\n      perform_enqueued_jobs # only runs with \"rafael\"\n      HelloJob.perform_later(\"david\")\n      perform_enqueued_jobs # only runs with \"david\"\n    end\n    ```\n\n    *Étienne Barrié*",
    "project": "activejob",
    "date_merged": 1584657016000,
    "author": "Étienne Barrié",
    "sha": "c6d621d132b8075698e451581e36381fee610e61",
    "pr": "38749",
    "merge_sha": "d9dc569d5bcf38416964d8f28a96c45fb1e899bd",
    "html": "<p><code>ActiveJob::TestCase#perform_enqueued_jobs</code> without a block removes performed jobs from the queue.</p>\n\n<p>That way the helper can be called multiple times and not perform a job invocation multiple times.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">def</span> <span class=\"nf\">test_jobs</span>\n  <span class=\"no\">HelloJob</span><span class=\"p\">.</span><span class=\"nf\">perform_later</span><span class=\"p\">(</span><span class=\"s2\">\"rafael\"</span><span class=\"p\">)</span>\n  <span class=\"n\">perform_enqueued_jobs</span> <span class=\"c1\"># only runs with \"rafael\"</span>\n  <span class=\"no\">HelloJob</span><span class=\"p\">.</span><span class=\"nf\">perform_later</span><span class=\"p\">(</span><span class=\"s2\">\"david\"</span><span class=\"p\">)</span>\n  <span class=\"n\">perform_enqueued_jobs</span> <span class=\"c1\"># only runs with \"david\"</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   `ActiveJob::TestCase#perform_enqueued_jobs` will no longer perform retries:\n\n    When calling `perform_enqueued_jobs` without a block, the adapter will\n    now perform jobs that are **already** in the queue. Jobs that will end up in\n    the queue afterwards won't be performed.\n\n    This change only affects `perform_enqueued_jobs` when no block is given.\n\n    *Edouard Chin*",
    "project": "activejob",
    "date_merged": 1583948518000,
    "author": "Edouard CHIN",
    "sha": "17e304def893eed1392977ee8e742f23ca1ceb10",
    "pr": "38686",
    "merge_sha": "08cbf442877c21263b096d4c958d1cf41c6b13a7",
    "html": "<p><code>ActiveJob::TestCase#perform_enqueued_jobs</code> will no longer perform retries:</p>\n\n<p>When calling <code>perform_enqueued_jobs</code> without a block, the adapter will<br />\nnow perform jobs that are <strong>already</strong> in the queue. Jobs that will end up in<br />\nthe queue afterwards won’t be performed.</p>\n\n<p>This change only affects <code>perform_enqueued_jobs</code> when no block is given.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Add queue name support to Que adapter.\n\n    *Brad Nauta*, *Wojciech Wnętrzak*",
    "project": "activejob",
    "date_merged": 1586968111000,
    "author": "Ryuta Kamizono",
    "sha": "6f2126c760e3ef8c21dcdf8e8fec466a0fdd88f1",
    "pr": "38959",
    "merge_sha": "9303873e57dd86a82ef69d58ed7e7af6bc7ed344",
    "html": "<p>Add queue name support to Que adapter.</p>\n\n<p><em>Brad Nauta</em>, <em>Wojciech Wnętrzak</em></p>\n"
  },
  {
    "message": "*   Don't run `after_enqueue` and `after_perform` callbacks if the callback chain is halted.\n\n        class MyJob < ApplicationJob\n          before_enqueue { throw(:abort) }\n          after_enqueue { # won't enter here anymore }\n        end\n\n    `after_enqueue` and `after_perform` callbacks will no longer run if the callback chain is halted.\n    This behaviour is a breaking change and won't take effect until Rails 7.0.\n    To enable this behaviour in your app right now, you can add in your app's configuration file\n    `config.active_job.skip_after_callbacks_if_terminated = true`.\n\n    *Edouard Chin*",
    "project": "activejob",
    "date_merged": 1575910248000,
    "author": "Edouard CHIN",
    "sha": "bbfab0b33abd7481b8a801b672d7b2316609315a",
    "pr": "37827",
    "merge_sha": "9926fd86626690746c7ee78174c4d3577bdfa58d",
    "html": "<p>Don’t run <code>after_enqueue</code> and <code>after_perform</code> callbacks if the callback chain is halted.</p>\n\n<pre><code>class MyJob &lt; ApplicationJob\n  before_enqueue { throw(:abort) }\n  after_enqueue { # won't enter here anymore }\nend\n</code></pre>\n\n<p><code>after_enqueue</code> and <code>after_perform</code> callbacks will no longer run if the callback chain is halted.<br />\nThis behaviour is a breaking change and won’t take effect until Rails 7.0.<br />\nTo enable this behaviour in your app right now, you can add in your app’s configuration file<br />\n<code>config.active_job.skip_after_callbacks_if_terminated = true</code>.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Fix enqueuing and performing incorrect logging message.\n\n    Jobs will no longer always log \"Enqueued MyJob\" or \"Performed MyJob\" when they actually didn't get enqueued/performed.\n\n    ```ruby\n      class MyJob < ApplicationJob\n        before_enqueue { throw(:abort) }\n      end\n\n      MyJob.perform_later # Will no longer log \"Enqueued MyJob\" since job wasn't even enqueued through adapter.\n    ```\n\n    A new message will be logged in case a job couldn't be enqueued, either because the callback chain was halted or\n    because an exception happened during enqueuing. (i.e. Redis is down when you try to enqueue your job)\n\n    *Edouard Chin*",
    "project": "activejob",
    "date_merged": 1575907510000,
    "author": "Edouard CHIN",
    "sha": "0d3aec496955f38c21bf8042d2510d5b3ade8a00",
    "pr": "37830",
    "merge_sha": "7f4d222c372691dce021c64198409eb2ec75549a",
    "html": "<p>Fix enqueuing and performing incorrect logging message.</p>\n\n<p>Jobs will no longer always log “Enqueued MyJob” or “Performed MyJob” when they actually didn’t get enqueued/performed.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"k\">class</span> <span class=\"nc\">MyJob</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationJob</span>\n    <span class=\"n\">before_enqueue</span> <span class=\"p\">{</span> <span class=\"kp\">throw</span><span class=\"p\">(</span><span class=\"ss\">:abort</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"no\">MyJob</span><span class=\"p\">.</span><span class=\"nf\">perform_later</span> <span class=\"c1\"># Will no longer log \"Enqueued MyJob\" since job wasn't even enqueued through adapter.</span>\n</code></pre></div></div>\n\n<p>A new message will be logged in case a job couldn’t be enqueued, either because the callback chain was halted or<br />\nbecause an exception happened during enqueuing. (i.e. Redis is down when you try to enqueue your job)</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Add an option to disable logging of the job arguments when enqueuing and executing the job.\n\n        class SensitiveJob < ApplicationJob\n          self.log_arguments = false\n\n          def perform(my_sensitive_argument)\n          end\n        end\n\n    When dealing with sensitive arguments as password and tokens it is now possible to configure the job\n    to not put the sensitive argument in the logs.\n\n    *Rafael Mendonça França*",
    "project": "activejob",
    "date_merged": 1573242552000,
    "author": "Rafael Mendonça França",
    "sha": "ce085f62d440534fada343e708d8864c0d55c03b",
    "pr": "37660",
    "merge_sha": "986d3bf4c1d542df94dbf6d30293b7e4ecbb4dbf",
    "html": "<p>Add an option to disable logging of the job arguments when enqueuing and executing the job.</p>\n\n<pre><code>class SensitiveJob &lt; ApplicationJob\n  self.log_arguments = false\n\n  def perform(my_sensitive_argument)\n  end\nend\n</code></pre>\n\n<p>When dealing with sensitive arguments as password and tokens it is now possible to configure the job<br />\nto not put the sensitive argument in the logs.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Changes in `queue_name_prefix` of a job no longer affects all other jobs.\n\n    Fixes #37084.\n\n    *Lucas Mansur*",
    "project": "activejob",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Changes in <code>queue_name_prefix</code> of a job no longer affects all other jobs.</p>\n\n<p>Fixes #37084.</p>\n\n<p><em>Lucas Mansur</em></p>\n"
  },
  {
    "message": "*   Allow `Class` and `Module` instances to be serialized.\n\n    *Kevin Deisz*",
    "project": "activejob",
    "date_merged": 1568113542000,
    "author": "Kevin Deisz",
    "sha": "fbebeabd6d59280c3a8173b58657f755904b02db",
    "pr": "37159",
    "merge_sha": "8ca16693e8b36edfcd2313e9320faf5c18c35684",
    "html": "<p>Allow <code>Class</code> and <code>Module</code> instances to be serialized.</p>\n\n<p><em>Kevin Deisz</em></p>\n"
  },
  {
    "message": "*   Log potential matches in `assert_enqueued_with` and `assert_performed_with`.\n\n    *Gareth du Plooy*",
    "project": "activejob",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Log potential matches in <code>assert_enqueued_with</code> and <code>assert_performed_with</code>.</p>\n\n<p><em>Gareth du Plooy</em></p>\n"
  },
  {
    "message": "*   Add `at` argument to the `perform_enqueued_jobs` test helper.\n\n    *John Crepezzi*, *Eileen Uchitelle*",
    "project": "activejob",
    "date_merged": 1565202327000,
    "author": "John Crepezzi",
    "sha": "c45c84db72b1448ca4a8a01a7d705ad0286d2277",
    "pr": "36881",
    "merge_sha": "9894f652ad0e236fe3578d55b0608ebbd22bc79a",
    "html": "<p>Add <code>at</code> argument to the <code>perform_enqueued_jobs</code> test helper.</p>\n\n<p><em>John Crepezzi</em>, <em>Eileen Uchitelle</em></p>\n"
  },
  {
    "message": "*   `assert_enqueued_with` and `assert_performed_with` can now test jobs with relative delay.\n\n    *Vlado Cingel*",
    "project": "activejob",
    "date_merged": 1564107485000,
    "author": "Vlado Cingel",
    "sha": "10d0f48ad8c42b13738fade4c79b7275cfb7380d",
    "pr": "36767",
    "merge_sha": "30757a16923e0afaa38388975b195ae7cf119f4c",
    "html": "<p><code>assert_enqueued_with</code> and <code>assert_performed_with</code> can now test jobs with relative delay.</p>\n\n<p><em>Vlado Cingel</em></p>\n"
  },
  {
    "message": "*   Add jitter to `ActiveJob::Exceptions.retry_on`.\n\n    `ActiveJob::Exceptions.retry_on` now uses a random amount of jitter in order to\n    prevent the [thundering herd effect](https://en.wikipedia.org/wiki/Thundering_herd_problem). Defaults to\n    15% (represented as 0.15) but overridable via the `:jitter` option when using `retry_on`.\n    Jitter is applied when an `Integer`, `ActiveSupport::Duration` or `:exponentially_longer`, is passed to the `wait` argument in `retry_on`.\n\n    ```ruby\n    retry_on(MyError, wait: :exponentially_longer, jitter: 0.30)\n    ```\n\n    *Anthony Ross*",
    "project": "activejob",
    "date_merged": 1583948599000,
    "author": "Aditya Narsapurkar",
    "sha": "895c39fe964333b26240193c811154461003280d",
    "pr": "38702",
    "merge_sha": "d2d8b2892dafff70d7ae44d0a5cce5d834fc708e",
    "html": "<p>Add jitter to <code>ActiveJob::Exceptions.retry_on</code>.</p>\n\n<p><code>ActiveJob::Exceptions.retry_on</code> now uses a random amount of jitter in order to<br />\nprevent the <a href=\"https://en.wikipedia.org/wiki/Thundering_herd_problem\">thundering herd effect</a>. Defaults to<br />\n15% (represented as 0.15) but overridable via the <code>:jitter</code> option when using <code>retry_on</code>.<br />\nJitter is applied when an <code>Integer</code>, <code>ActiveSupport::Duration</code> or <code>:exponentially_longer</code>, is passed to the <code>wait</code> argument in <code>retry_on</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">retry_on</span><span class=\"p\">(</span><span class=\"no\">MyError</span><span class=\"p\">,</span> <span class=\"ss\">wait: :exponentially_longer</span><span class=\"p\">,</span> <span class=\"ss\">jitter: </span><span class=\"mf\">0.30</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Anthony Ross</em></p>\n"
  },
  {
    "message": "*   In `zeitwerk` mode, setup the `once` autoloader first, and the `main` autoloader after it.\n    This order plays better with shared namespaces.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>In <code>zeitwerk</code> mode, setup the <code>once</code> autoloader first, and the <code>main</code> autoloader after it.<br />\nThis order plays better with shared namespaces.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Handle paths with spaces when editing credentials.\n\n    *Alex Ghiculescu*",
    "project": "railties",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Handle paths with spaces when editing credentials.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Support Psych 4 when loading secrets.\n\n    *Nat Morcos*",
    "project": "railties",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Support Psych 4 when loading secrets.</p>\n\n<p><em>Nat Morcos</em></p>\n"
  },
  {
    "message": "*   Allow localhost with a port by default in development\n\n    [Fixes: #43864]",
    "project": "railties",
    "date_merged": 1639523331000,
    "author": "Aaron Patterson",
    "sha": "f4c63e0ffef85b938a4200a3504b369679113f5d",
    "pr": "43868",
    "merge_sha": "66fd71981ec22f2199c2d89a657df8d999206f8d",
    "html": "<p>Allow localhost with a port by default in development</p>\n\n<p>[Fixes: #43864]</p>\n"
  },
  {
    "message": "*   Fix compatibility with `psych >= 4`.\n\n    Starting in Psych 4.0.0 `YAML.load` behaves like `YAML.safe_load`. To preserve compatibility\n    `Rails.application.config_for` now uses `YAML.unsafe_load` if available.\n\n    *Jean Boussier*",
    "project": "railties",
    "date_merged": 1622732186000,
    "author": "Jean Boussier",
    "sha": "255b5ff9af57f9b54dee7ec884b12a1ad16f0321",
    "pr": "42374",
    "merge_sha": "519b55113463a3992158fdaa3ecaf2087975823c",
    "html": "<p>Fix compatibility with <code>psych &gt;= 4</code>.</p>\n\n<p>Starting in Psych 4.0.0 <code>YAML.load</code> behaves like <code>YAML.safe_load</code>. To preserve compatibility<br />\n<code>Rails.application.config_for</code> now uses <code>YAML.unsafe_load</code> if available.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Ensure `Rails.application.config_for` always cast hashes to `ActiveSupport::OrderedOptions`.\n\n    *Jean Boussier*",
    "project": "railties",
    "date_merged": 1619865687000,
    "author": "Jean Boussier",
    "sha": "e4bf943ada11ee3e8b8212f9aa5539648ded123d",
    "pr": "42115",
    "merge_sha": "b588d8335294c843ca4c43f97418ce1ef1230685",
    "html": "<p>Ensure <code>Rails.application.config_for</code> always cast hashes to <code>ActiveSupport::OrderedOptions</code>.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix create migration generator with `--pretend` option.\n\n    *euxx*",
    "project": "railties",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix create migration generator with <code>--pretend</code> option.</p>\n\n<p><em>euxx</em></p>\n"
  },
  {
    "message": "*   Allow spaces in path to Yarn binstub and only run on precompile if needed.\n\n    *Markus Doits*",
    "project": "railties",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Allow spaces in path to Yarn binstub and only run on precompile if needed.</p>\n\n<p><em>Markus Doits</em></p>\n"
  },
  {
    "message": "*   Populate ARGV for app template.\n\n    Fixes #40945.\n\n    *Jonathan Hefner*",
    "project": "railties",
    "date_merged": 1612990034000,
    "author": "Kasper Timm Hansen",
    "sha": "0a38e725f8f44f45a5a6045b11afdf25a5e629ae",
    "pr": "40994",
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Populate ARGV for app template.</p>\n\n<p>Fixes #40945.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Added `Railtie#server` hook called when Rails starts a server.\n    This is useful in case your application or a library needs to run\n    another process next to the Rails server. This is quite common in development\n    for instance to run the Webpack or the React server.\n\n    It can be used like this:\n\n    ```ruby\n      class MyRailtie < Rails::Railtie\n        server do\n          WebpackServer.run\n        end\n      end\n    ```\n\n    *Edouard Chin*",
    "project": "railties",
    "date_merged": 1604340731000,
    "author": "Edouard Chin",
    "sha": "868866c1fd7f6c79fd48d90febb1fd02a83380e1",
    "pr": "39953",
    "merge_sha": "f8a1a8acc340da29cee8771f1ddc3861a57948de",
    "html": "<p>Added <code>Railtie#server</code> hook called when Rails starts a server.<br />\nThis is useful in case your application or a library needs to run<br />\nanother process next to the Rails server. This is quite common in development<br />\nfor instance to run the Webpack or the React server.</p>\n\n<p>It can be used like this:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"k\">class</span> <span class=\"nc\">MyRailtie</span> <span class=\"o\">&lt;</span> <span class=\"no\">Rails</span><span class=\"o\">::</span><span class=\"no\">Railtie</span>\n    <span class=\"n\">server</span> <span class=\"k\">do</span>\n      <span class=\"no\">WebpackServer</span><span class=\"p\">.</span><span class=\"nf\">run</span>\n    <span class=\"k\">end</span>\n  <span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `rake dev:cache` tasks.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "01f0020a55a2851b41e000f8f5f0df8d4bcaf7a6",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>rake dev:cache</code> tasks.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `rake routes` tasks.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "e152f83c64596e3c701d1b34175ae0fa8669c983",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>rake routes</code> tasks.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `rake initializers` tasks.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "8992a7d0c2f6d61a1d7e78d8fa8a0f05c23c8681",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>rake initializers</code> tasks.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support for using the `HOST` environment variable to specify the server IP.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "c0728ad3213d1e582871860e37c131b503372b2d",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support for using the <code>HOST</code> environment variable to specify the server IP.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `server` argument from the rails server command.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "5a7028a1a590ff82c8e1f34484eeb7603f2ef908",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>server</code> argument from the rails server command.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `SOURCE_ANNOTATION_DIRECTORIES` environment variable support from `rails notes`.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "620465141252872041bda52471c50fafe2138568",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>SOURCE_ANNOTATION_DIRECTORIES</code> environment variable support from <code>rails notes</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `connection` option in the `rails dbconsole` command.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "8513769ad60f68d084e487550162b9d3766aea77",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>connection</code> option in the <code>rails dbconsole</code> command.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove depreated `rake notes` tasks.\n\n    *Rafael Mendonça França*",
    "project": "railties",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "227d04f46abc4355e740fd3a98f9045a48e5b327",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove depreated <code>rake notes</code> tasks.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Return a 405 Method Not Allowed response when a request uses an unknown HTTP method.\n\n    Fixes #38998.\n\n    *Loren Norman*",
    "project": "railties",
    "date_merged": 1603493577000,
    "author": "Loren Norman",
    "sha": "1f9a5dd36bd0dcba8ad7692322e79d6ce14c064d",
    "pr": "40246",
    "merge_sha": "fe23e37ad84244dbb2e62c74be27ad13bbd58a91",
    "html": "<p>Return a 405 Method Not Allowed response when a request uses an unknown HTTP method.</p>\n\n<p>Fixes #38998.</p>\n\n<p><em>Loren Norman</em></p>\n"
  },
  {
    "message": "*   Make railsrc file location xdg-specification compliant\n\n    `rails new` will now look for the default `railsrc` file at\n    `$XDG_CONFIG_HOME/rails/railsrc` (or `~/.config/rails/railsrc` if\n    `XDG_CONFIG_HOME` is not set).  If this file does not exist, `rails new`\n    will fall back to `~/.railsrc`.\n\n    The fallback behaviour means this does not cause any breaking changes.\n\n    *Nick Wolf*",
    "project": "railties",
    "date_merged": 1603318805000,
    "author": "Nick Wolf",
    "sha": "7cc2b57b8dd052ff5986c663865174b247c0ea8c",
    "pr": "39411",
    "merge_sha": "57dd21ef65f8c4ff8f847b04133b17c5f01d6ed7",
    "html": "<p>Make railsrc file location xdg-specification compliant</p>\n\n<p><code>rails new</code> will now look for the default <code>railsrc</code> file at<br />\n<code>$XDG_CONFIG_HOME/rails/railsrc</code> (or <code>~/.config/rails/railsrc</code> if<br />\n<code>XDG_CONFIG_HOME</code> is not set).  If this file does not exist, <code>rails new</code><br />\nwill fall back to <code>~/.railsrc</code>.</p>\n\n<p>The fallback behaviour means this does not cause any breaking changes.</p>\n\n<p><em>Nick Wolf</em></p>\n"
  },
  {
    "message": "*   Change the default logging level from :debug to :info to avoid inadvertent exposure of personally\n    identifiable information (PII) in production environments.\n\n    *Eric M. Payne*",
    "project": "railties",
    "date_merged": 1600787128000,
    "author": "Eric Payne",
    "sha": "229fd2a02fc694b4b7756445b6647777aa94e25d",
    "pr": "39707",
    "merge_sha": "70018f87f0f382c357ba9f4203454a2059991a9a",
    "html": "<p>Change the default logging level from :debug to :info to avoid inadvertent exposure of personally<br />\nidentifiable information (PII) in production environments.</p>\n\n<p><em>Eric M. Payne</em></p>\n"
  },
  {
    "message": "*   Automatically generate abstract class when using multiple databases.\n\n    When generating a scaffold for a multiple database application, Rails will now automatically generate the abstract class for the database when the database argument is passed. This abstract class will include the connection information for the writing configuration and any models generated for that database will automatically inherit from the abstract class.\n\n    Usage:\n\n    ```bash\n    $ bin/rails generate scaffold Pet name:string --database=animals\n    ```\n\n    Will create an abstract class for the animals connection.\n\n    ```ruby\n    class AnimalsRecord < ApplicationRecord\n      self.abstract_class = true\n\n      connects_to database: { writing: :animals }\n    end\n    ```\n\n    And generate a `Pet` model that inherits from the new `AnimalsRecord`:\n\n    ```ruby\n    class Pet < AnimalsRecord\n    end\n    ```\n\n    If you already have an abstract class and it follows a different pattern than Rails defaults, you can pass a parent class with the database argument.\n\n    ```bash\n    $ bin/rails generate scaffold Pet name:string --database=animals --parent=SecondaryBase\n    ```\n\n    This will ensure the model inherits from the `SecondaryBase` parent instead of `AnimalsRecord`\n\n    ```ruby\n    class Pet < SecondaryBase\n    end\n    ```\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "railties",
    "date_merged": 1596053556000,
    "author": "eileencodes",
    "sha": "261cbcd2a8cb11624ddba17ce6f0c0ac257d5fbe",
    "pr": "39866",
    "merge_sha": "e396bcaabd5821a75bf7629778accdb25ff0f001",
    "html": "<p>Automatically generate abstract class when using multiple databases.</p>\n\n<p>When generating a scaffold for a multiple database application, Rails will now automatically generate the abstract class for the database when the database argument is passed. This abstract class will include the connection information for the writing configuration and any models generated for that database will automatically inherit from the abstract class.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>bin/rails generate scaffold Pet name:string <span class=\"nt\">--database</span><span class=\"o\">=</span>animals\n</code></pre></div></div>\n\n<p>Will create an abstract class for the animals connection.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">AnimalsRecord</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"nf\">abstract_class</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n\n  <span class=\"n\">connects_to</span> <span class=\"ss\">database: </span><span class=\"p\">{</span> <span class=\"ss\">writing: :animals</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>And generate a <code>Pet</code> model that inherits from the new <code>AnimalsRecord</code>:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Pet</span> <span class=\"o\">&lt;</span> <span class=\"no\">AnimalsRecord</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>If you already have an abstract class and it follows a different pattern than Rails defaults, you can pass a parent class with the database argument.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>bin/rails generate scaffold Pet name:string <span class=\"nt\">--database</span><span class=\"o\">=</span>animals <span class=\"nt\">--parent</span><span class=\"o\">=</span>SecondaryBase\n</code></pre></div></div>\n\n<p>This will ensure the model inherits from the <code>SecondaryBase</code> parent instead of <code>AnimalsRecord</code></p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Pet</span> <span class=\"o\">&lt;</span> <span class=\"no\">SecondaryBase</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Accept params from url to prepopulate the Inbound Emails form in Rails conductor.\n\n    *Chris Oliver*",
    "project": "railties",
    "date_merged": 1594782773000,
    "author": "Chris Oliver",
    "sha": "12afb7fb4babe8b20a753191304c447256afb7de",
    "pr": "39840",
    "merge_sha": "649b77b6674576634b6726e524e882ec2c0245b6",
    "html": "<p>Accept params from url to prepopulate the Inbound Emails form in Rails conductor.</p>\n\n<p><em>Chris Oliver</em></p>\n"
  },
  {
    "message": "*   Create a new rails app using a minimal stack.\n\n      `rails new cool_app --minimal`\n\n    All the following are excluded from your minimal stack:\n\n    - action_cable\n    - action_mailbox\n    - action_mailer\n    - action_text\n    - active_job\n    - active_storage\n    - bootsnap\n    - jbuilder\n    - spring\n    - system_tests\n    - turbolinks\n    - webpack\n\n    *Haroon Ahmed*, *DHH*",
    "project": "railties",
    "date_merged": 1591147996000,
    "author": "Haroon Ahmed",
    "sha": "7a321d8429e3d7b9d8aa97a44ce4a4b6cb62de70",
    "pr": "39282",
    "merge_sha": "aaf20e3c7ee6803e08b371696563888e6859a42d",
    "html": "<p>Create a new rails app using a minimal stack.</p>\n\n<p><code>rails new cool_app --minimal</code></p>\n\n<p>All the following are excluded from your minimal stack:</p>\n\n<ul>\n  <li>action_cable</li>\n  <li>action_mailbox</li>\n  <li>action_mailer</li>\n  <li>action_text</li>\n  <li>active_job</li>\n  <li>active_storage</li>\n  <li>bootsnap</li>\n  <li>jbuilder</li>\n  <li>spring</li>\n  <li>system_tests</li>\n  <li>turbolinks</li>\n  <li>webpack</li>\n</ul>\n\n<p><em>Haroon Ahmed</em>, <em>DHH</em></p>\n"
  },
  {
    "message": "*   Add default ENV variable option with BACKTRACE to turn off backtrace cleaning when debugging framework code in the\n    generated config/initializers/backtrace_silencers.rb.\n\n      `BACKTRACE=1 ./bin/rails runner \"MyClass.perform\"`\n\n    *DHH*",
    "project": "railties",
    "date_merged": 1589754253000,
    "author": "Ryuta Kamizono",
    "sha": "a2a861d35730cc02381be8a05302eac49e7adb58",
    "pr": "39318",
    "merge_sha": "b02728882339f6c2d4474ad313936db2ac94b73b",
    "html": "<p>Add default ENV variable option with BACKTRACE to turn off backtrace cleaning when debugging framework code in the<br />\ngenerated config/initializers/backtrace_silencers.rb.</p>\n\n<p><code>BACKTRACE=1 ./bin/rails runner \"MyClass.perform\"</code></p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   The autoloading guide for Zeitwerk mode documents how to autoload classes\n    during application boot in a safe way.\n\n    *Haroon Ahmed*, *Xavier Noria*",
    "project": "railties",
    "date_merged": 1589734305000,
    "author": "Xavier Noria",
    "sha": "524d678a037d1b7ca7e96ade216aa494dfb4951c",
    "pr": "39121",
    "merge_sha": "12bfc8d9a6164329aa66244da82c381b56349802",
    "html": "<p>The autoloading guide for Zeitwerk mode documents how to autoload classes<br />\nduring application boot in a safe way.</p>\n\n<p><em>Haroon Ahmed</em>, <em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   The `classic` autoloader starts its deprecation cycle.\n\n    New Rails projects are strongly discouraged from using `classic`, and we recommend that existing projects running on `classic` switch to `zeitwerk` mode when upgrading. Please check the [_Upgrading Ruby on Rails_](https://guides.rubyonrails.org/upgrading_ruby_on_rails.html) guide for tips.\n\n    *Xavier Noria*",
    "project": "railties",
    "date_merged": 1589293352000,
    "author": "Xavier Noria",
    "sha": "e9c585096ec53f60173cf3f7990aa7be9f08985f",
    "pr": "39178",
    "merge_sha": "af831a0963695376a29ca62272c841385a39e02f",
    "html": "<p>The <code>classic</code> autoloader starts its deprecation cycle.</p>\n\n<p>New Rails projects are strongly discouraged from using <code>classic</code>, and we recommend that existing projects running on <code>classic</code> switch to <code>zeitwerk</code> mode when upgrading. Please check the <a href=\"https://guides.rubyonrails.org/upgrading_ruby_on_rails.html\"><em>Upgrading Ruby on Rails</em></a> guide for tips.</p>\n\n<p><em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Adds `rails test:all` for running all tests in the test directory.\n\n    This runs all test files in the test directory, including system tests.\n\n    *Niklas Häusele*",
    "project": "railties",
    "date_merged": 1589230058000,
    "author": "Niklas Häusele",
    "sha": "948871236548c4bd278b9430d87812c27277c618",
    "pr": "39221",
    "merge_sha": "de7f57f9482dd94c585cbd63cdef061b81371db3",
    "html": "<p>Adds <code>rails test:all</code> for running all tests in the test directory.</p>\n\n<p>This runs all test files in the test directory, including system tests.</p>\n\n<p><em>Niklas Häusele</em></p>\n"
  },
  {
    "message": "*   Add `config.generators.after_generate` for processing to generated files.\n\n    Register a callback that will get called right after generators has finished.\n\n    *Yuji Yaginuma*",
    "project": "railties",
    "date_merged": 1588941484000,
    "author": "yuuji.yaginuma",
    "sha": "fde100d18edd8469f81a0a03ac81d817f9eface9",
    "pr": "38870",
    "merge_sha": "d80c18a391e33552ae2d943e68af56946f883f65",
    "html": "<p>Add <code>config.generators.after_generate</code> for processing to generated files.</p>\n\n<p>Register a callback that will get called right after generators has finished.</p>\n\n<p><em>Yuji Yaginuma</em></p>\n"
  },
  {
    "message": "*   Make test file patterns configurable via Environment variables\n\n    This makes test file patterns configurable via two environment variables:\n     `DEFAULT_TEST`, to configure files to test, and `DEFAULT_TEST_EXCLUDE`,\n    to configure files to exclude from testing.\n\n    These values were hardcoded before, which made it difficult to add\n    new categories of tests that should not be executed by default (e.g:\n    smoke tests).\n\n    *Jorge Manrubia*",
    "project": "railties",
    "date_merged": 1588806358000,
    "author": "Jorge Manrubia",
    "sha": "a0f18e60900fc45eb3524ab3cdfe57be430d6016",
    "pr": "39036",
    "merge_sha": "d14315414786db24c6e51624a39d41411ea3fc97",
    "html": "<p>Make test file patterns configurable via Environment variables</p>\n\n<p>This makes test file patterns configurable via two environment variables:<br />\n <code>DEFAULT_TEST</code>, to configure files to test, and <code>DEFAULT_TEST_EXCLUDE</code>,<br />\nto configure files to exclude from testing.</p>\n\n<p>These values were hardcoded before, which made it difficult to add<br />\nnew categories of tests that should not be executed by default (e.g:<br />\nsmoke tests).</p>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   No longer include `rake rdoc` task when generating plugins.\n\n    To generate docs, use the `rdoc lib` command instead.\n\n    *Jonathan Hefner*",
    "project": "railties",
    "date_merged": 1586122701000,
    "author": "Jonathan Hefner",
    "sha": "677eac678d421f6c65de67f84526d73dd305036e",
    "pr": "38574",
    "merge_sha": "4174f56b6c55cca5fa4be4def2ea20d8a6152c30",
    "html": "<p>No longer include <code>rake rdoc</code> task when generating plugins.</p>\n\n<p>To generate docs, use the <code>rdoc lib</code> command instead.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Allow relative paths with trailing slashes to be passed to `rails test`.\n\n    *Eugene Kenny*",
    "project": "railties",
    "date_merged": 1585263163000,
    "author": "Eugene Kenny",
    "sha": "326d5027147c087c6f22a075c021ead3d496995e",
    "pr": "38814",
    "merge_sha": "83dd0d53d6a3e8e4fe8f06d148197007c09100fe",
    "html": "<p>Allow relative paths with trailing slashes to be passed to <code>rails test</code>.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Add `rack-mini-profiler` gem to the default `Gemfile`.\n\n    `rack-mini-profiler` displays performance information such as SQL time and flame graphs.\n    It's enabled by default in development environment, but can be enabled in production as well.\n    See the gem [README](https://github.com/MiniProfiler/rack-mini-profiler/blob/master/README.md) for information on how to enable it in production.\n\n    *Osama Sayegh*",
    "project": "railties",
    "date_merged": 1584029068000,
    "author": "OsamaSayegh",
    "sha": "ac1d4a6a62cf76bbce1a6b61be7601124eac3069",
    "pr": "38701",
    "merge_sha": "bb9c12b4f519d9669b2b63e61511c5d45d5e543d",
    "html": "<p>Add <code>rack-mini-profiler</code> gem to the default <code>Gemfile</code>.</p>\n\n<p><code>rack-mini-profiler</code> displays performance information such as SQL time and flame graphs.<br />\nIt’s enabled by default in development environment, but can be enabled in production as well.<br />\nSee the gem <a href=\"https://github.com/MiniProfiler/rack-mini-profiler/blob/master/README.md\">README</a> for information on how to enable it in production.</p>\n\n<p><em>Osama Sayegh</em></p>\n"
  },
  {
    "message": "*   `rails stats` will now count TypeScript files toward JavaScript stats.\n\n    *Joshua Cody*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p><code>rails stats</code> will now count TypeScript files toward JavaScript stats.</p>\n\n<p><em>Joshua Cody</em></p>\n"
  },
  {
    "message": "*   Run `git init` when generating plugins.\n\n    Opt out with `--skip-git`.\n\n    *OKURA Masafumi*",
    "project": "railties",
    "date_merged": 1581286325000,
    "author": "Kasper Timm Hansen",
    "sha": "b7027099b19c12f8d43df0213278d2dc42471503",
    "pr": "37974",
    "merge_sha": "4ec2557cbffcb514359c985c1560bdfceedd31f4",
    "html": "<p>Run <code>git init</code> when generating plugins.</p>\n\n<p>Opt out with <code>--skip-git</code>.</p>\n\n<p><em>OKURA Masafumi</em></p>\n"
  },
  {
    "message": "*   Add benchmark generator.\n\n    Introduce benchmark generator to benchmark Rails applications.\n\n      `rails generate benchmark opt_compare`\n\n    This creates a benchmark file that uses [`benchmark-ips`](https://github.com/evanphx/benchmark-ips).\n    By default, two code blocks can be benchmarked using the `before` and `after` reports.\n\n    You can run the generated benchmark file using:\n      `ruby script/benchmarks/opt_compare.rb`\n\n    *Kevin Jalbert*, *Gannon McGibbon*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Add benchmark generator.</p>\n\n<p>Introduce benchmark generator to benchmark Rails applications.</p>\n\n<p><code>rails generate benchmark opt_compare</code></p>\n\n<p>This creates a benchmark file that uses <a href=\"https://github.com/evanphx/benchmark-ips\"><code>benchmark-ips</code></a>.<br />\nBy default, two code blocks can be benchmarked using the <code>before</code> and <code>after</code> reports.</p>\n\n<p>You can run the generated benchmark file using:<br />\n  <code>ruby script/benchmarks/opt_compare.rb</code></p>\n\n<p><em>Kevin Jalbert</em>, <em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Cache compiled view templates when running tests by default.\n\n    When generating a new app without `--skip-spring`, caching classes is\n    disabled in `environments/test.rb`. This implicitly disables caching\n    view templates too. This change will enable view template caching by\n    adding this to the generated `environments/test.rb`:\n\n    ```ruby\n    config.action_view.cache_template_loading = true\n    ```\n\n    *Jorge Manrubia*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Cache compiled view templates when running tests by default.</p>\n\n<p>When generating a new app without <code>--skip-spring</code>, caching classes is<br />\ndisabled in <code>environments/test.rb</code>. This implicitly disables caching<br />\nview templates too. This change will enable view template caching by<br />\nadding this to the generated <code>environments/test.rb</code>:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">action_view</span><span class=\"p\">.</span><span class=\"nf\">cache_template_loading</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p><em>Jorge Manrubia</em></p>\n"
  },
  {
    "message": "*   Introduce middleware move operations.\n\n    With this change, you no longer need to delete and reinsert a middleware to\n    move it from one place to another in the stack:\n\n    ```ruby\n    config.middleware.move_before ActionDispatch::Flash, Magical::Unicorns\n    ```\n\n    This will move the `Magical::Unicorns` middleware before\n    `ActionDispatch::Flash`. You can also move it after with:\n\n    ```ruby\n    config.middleware.move_after ActionDispatch::Flash, Magical::Unicorns\n    ```\n\n    *Genadi Samokovarov*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Introduce middleware move operations.</p>\n\n<p>With this change, you no longer need to delete and reinsert a middleware to<br />\nmove it from one place to another in the stack:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">middleware</span><span class=\"p\">.</span><span class=\"nf\">move_before</span> <span class=\"no\">ActionDispatch</span><span class=\"o\">::</span><span class=\"no\">Flash</span><span class=\"p\">,</span> <span class=\"no\">Magical</span><span class=\"o\">::</span><span class=\"no\">Unicorns</span>\n</code></pre></div></div>\n\n<p>This will move the <code>Magical::Unicorns</code> middleware before<br />\n<code>ActionDispatch::Flash</code>. You can also move it after with:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">middleware</span><span class=\"p\">.</span><span class=\"nf\">move_after</span> <span class=\"no\">ActionDispatch</span><span class=\"o\">::</span><span class=\"no\">Flash</span><span class=\"p\">,</span> <span class=\"no\">Magical</span><span class=\"o\">::</span><span class=\"no\">Unicorns</span>\n</code></pre></div></div>\n\n<p><em>Genadi Samokovarov</em></p>\n"
  },
  {
    "message": "*   Generators that inherit from NamedBase respect `--force` option.\n\n    *Josh Brody*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Generators that inherit from NamedBase respect <code>--force</code> option.</p>\n\n<p><em>Josh Brody</em></p>\n"
  },
  {
    "message": "*   Allow configuration of eager_load behaviour for rake environment:\n\n        config.rake_eager_load\n\n    Defaults to `false` as per previous behaviour.\n\n    *Thierry Joyal*",
    "project": "railties",
    "date_merged": 1576631414000,
    "author": "Thierry Joyal",
    "sha": "924e53f1be390aa7155dd7f390b1460f109b0587",
    "pr": "28209",
    "merge_sha": "ed5f2c6192bd00c0552fcc98ad16463cf8ec293f",
    "html": "<p>Allow configuration of eager_load behaviour for rake environment:</p>\n\n<pre><code>config.rake_eager_load\n</code></pre>\n\n<p>Defaults to <code>false</code> as per previous behaviour.</p>\n\n<p><em>Thierry Joyal</em></p>\n"
  },
  {
    "message": "*   Ensure Rails migration generator respects system-wide primary key config.\n\n    When rails is configured to use a specific primary key type:\n\n    ```ruby\n    config.generators do |g|\n      g.orm :active_record, primary_key_type: :uuid\n    end\n    ```\n\n    Previously:\n\n    ```bash\n    $ bin/rails g migration add_location_to_users location:references\n    ```\n\n    The references line in the migration would not have `type: :uuid`.\n    This change causes the type to be applied appropriately.\n\n    *Louis-Michel Couture*, *Dermot Haughey*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Ensure Rails migration generator respects system-wide primary key config.</p>\n\n<p>When rails is configured to use a specific primary key type:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">generators</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">g</span><span class=\"o\">|</span>\n  <span class=\"n\">g</span><span class=\"p\">.</span><span class=\"nf\">orm</span> <span class=\"ss\">:active_record</span><span class=\"p\">,</span> <span class=\"ss\">primary_key_type: :uuid</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>Previously:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>bin/rails g migration add_location_to_users location:references\n</code></pre></div></div>\n\n<p>The references line in the migration would not have <code>type: :uuid</code>.<br />\nThis change causes the type to be applied appropriately.</p>\n\n<p><em>Louis-Michel Couture</em>, <em>Dermot Haughey</em></p>\n"
  },
  {
    "message": "*   Deprecate `Rails::DBConsole#config`.\n\n    `Rails::DBConsole#config` is deprecated without replacement. Use `Rails::DBConsole.db_config.configuration_hash` instead.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "railties",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Deprecate <code>Rails::DBConsole#config</code>.</p>\n\n<p><code>Rails::DBConsole#config</code> is deprecated without replacement. Use <code>Rails::DBConsole.db_config.configuration_hash</code> instead.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   `Rails.application.config_for` merges shared configuration deeply.\n\n    ```yaml\n    # config/example.yml\n    shared:\n      foo:\n        bar:\n          baz: 1\n    development:\n      foo:\n        bar:\n          qux: 2\n    ```\n\n    ```ruby\n    # Previously\n    Rails.application.config_for(:example)[:foo][:bar] #=> { qux: 2 }\n\n    # Now\n    Rails.application.config_for(:example)[:foo][:bar] #=> { baz: 1, qux: 2 }\n    ```\n\n    *Yuhei Kiriyama*",
    "project": "railties",
    "date_merged": 1578417327000,
    "author": "Carlos Antonio da Silva",
    "sha": "99d2d356ee002776b341b5e6c5ecd926e5f72729",
    "pr": "37955",
    "merge_sha": "ee2ec9737245be59a11a5927d9ceffb60809ae05",
    "html": "<p><code>Rails.application.config_for</code> merges shared configuration deeply.</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/example.yml</span>\n<span class=\"na\">shared</span><span class=\"pi\">:</span>\n  <span class=\"na\">foo</span><span class=\"pi\">:</span>\n    <span class=\"na\">bar</span><span class=\"pi\">:</span>\n      <span class=\"na\">baz</span><span class=\"pi\">:</span> <span class=\"m\">1</span>\n<span class=\"na\">development</span><span class=\"pi\">:</span>\n  <span class=\"na\">foo</span><span class=\"pi\">:</span>\n    <span class=\"na\">bar</span><span class=\"pi\">:</span>\n      <span class=\"na\">qux</span><span class=\"pi\">:</span> <span class=\"m\">2</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Previously</span>\n<span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">application</span><span class=\"p\">.</span><span class=\"nf\">config_for</span><span class=\"p\">(</span><span class=\"ss\">:example</span><span class=\"p\">)[</span><span class=\"ss\">:foo</span><span class=\"p\">][</span><span class=\"ss\">:bar</span><span class=\"p\">]</span> <span class=\"c1\">#=&gt; { qux: 2 }</span>\n\n<span class=\"c1\"># Now</span>\n<span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">application</span><span class=\"p\">.</span><span class=\"nf\">config_for</span><span class=\"p\">(</span><span class=\"ss\">:example</span><span class=\"p\">)[</span><span class=\"ss\">:foo</span><span class=\"p\">][</span><span class=\"ss\">:bar</span><span class=\"p\">]</span> <span class=\"c1\">#=&gt; { baz: 1, qux: 2 }</span>\n</code></pre></div></div>\n\n<p><em>Yuhei Kiriyama</em></p>\n"
  },
  {
    "message": "*   Remove access to values in nested hashes returned by `Rails.application.config_for` via String keys.\n\n    ```yaml\n    # config/example.yml\n    development:\n      options:\n        key: value\n    ```\n\n    ```ruby\n    Rails.application.config_for(:example).options\n    ```\n\n    This used to return a Hash on which you could access values with String keys. This was deprecated in 6.0, and now doesn't work anymore.\n\n    *Étienne Barrié*",
    "project": "railties",
    "date_merged": 1575477982000,
    "author": "Étienne Barrié",
    "sha": "e5e9c558a3654d1365bae0747de64e115b2871d3",
    "pr": "37876",
    "merge_sha": "b4e7bb74920552b4b5f391a4a762d6ddb72abb73",
    "html": "<p>Remove access to values in nested hashes returned by <code>Rails.application.config_for</code> via String keys.</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/example.yml</span>\n<span class=\"na\">development</span><span class=\"pi\">:</span>\n  <span class=\"na\">options</span><span class=\"pi\">:</span>\n    <span class=\"na\">key</span><span class=\"pi\">:</span> <span class=\"s\">value</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">application</span><span class=\"p\">.</span><span class=\"nf\">config_for</span><span class=\"p\">(</span><span class=\"ss\">:example</span><span class=\"p\">).</span><span class=\"nf\">options</span>\n</code></pre></div></div>\n\n<p>This used to return a Hash on which you could access values with String keys. This was deprecated in 6.0, and now doesn’t work anymore.</p>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Configuration files for environments (`config/environments/*.rb`) are\n    now able to modify `autoload_paths`, `autoload_once_paths`, and\n    `eager_load_paths`.\n\n    As a consequence, applications cannot autoload within those files. Before, they technically could, but changes in autoloaded classes or modules had no effect anyway in the configuration because reloading does not reboot.\n\n    Ways to use application code in these files:\n\n    * Define early in the boot process a class that is not reloadable, from which the application takes configuration values that get passed to the framework.\n\n        ```ruby\n        # In config/application.rb, for example.\n        require \"#{Rails.root}/lib/my_app/config\"\n\n        # In config/environments/development.rb, for example.\n        config.foo = MyApp::Config.foo\n        ```\n\n    * If the class has to be reloadable, then wrap the configuration code in a `to_prepare` block:\n\n        ```ruby\n        config.to_prepare do\n          config.foo = MyModel.foo\n        end\n        ```\n\n      That assigns the latest `MyModel.foo` to `config.foo` when the application boots, and each time there is a reload. But whether that has an effect or not depends on the configuration point, since it is not uncommon for engines to read the application configuration during initialization and set their own state from them. That process happens only on boot, not on reloads, and if that is how `config.foo` worked, resetting it would have no effect in the state of the engine.\n\n    *Allen Hsu* & *Xavier Noria*",
    "project": "railties",
    "date_merged": 1575324548000,
    "author": "Xavier Noria",
    "sha": "76bafb0b2ff5d4a7afc373191963eb2a243c75d4",
    "pr": "37856",
    "merge_sha": "f16431e0c04a72e5a42fe1f7c5b5aefe76220ddc",
    "html": "<p>Configuration files for environments (<code>config/environments/*.rb</code>) are<br />\nnow able to modify <code>autoload_paths</code>, <code>autoload_once_paths</code>, and<br />\n<code>eager_load_paths</code>.</p>\n\n<p>As a consequence, applications cannot autoload within those files. Before, they technically could, but changes in autoloaded classes or modules had no effect anyway in the configuration because reloading does not reboot.</p>\n\n<p>Ways to use application code in these files:</p>\n\n<ul>\n  <li>\n    <p>Define early in the boot process a class that is not reloadable, from which the application takes configuration values that get passed to the framework.</p>\n\n    <div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"c1\"># In config/application.rb, for example.</span>\n  <span class=\"nb\">require</span> <span class=\"s2\">\"</span><span class=\"si\">#{</span><span class=\"no\">Rails</span><span class=\"p\">.</span><span class=\"nf\">root</span><span class=\"si\">}</span><span class=\"s2\">/lib/my_app/config\"</span>\n\n  <span class=\"c1\"># In config/environments/development.rb, for example.</span>\n  <span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">foo</span> <span class=\"o\">=</span> <span class=\"no\">MyApp</span><span class=\"o\">::</span><span class=\"no\">Config</span><span class=\"p\">.</span><span class=\"nf\">foo</span>\n</code></pre></div>    </div>\n  </li>\n  <li>\n    <p>If the class has to be reloadable, then wrap the configuration code in a <code>to_prepare</code> block:</p>\n\n    <div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">to_prepare</span> <span class=\"k\">do</span>\n    <span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">foo</span> <span class=\"o\">=</span> <span class=\"no\">MyModel</span><span class=\"p\">.</span><span class=\"nf\">foo</span>\n  <span class=\"k\">end</span>\n</code></pre></div>    </div>\n\n    <p>That assigns the latest <code>MyModel.foo</code> to <code>config.foo</code> when the application boots, and each time there is a reload. But whether that has an effect or not depends on the configuration point, since it is not uncommon for engines to read the application configuration during initialization and set their own state from them. That process happens only on boot, not on reloads, and if that is how <code>config.foo</code> worked, resetting it would have no effect in the state of the engine.</p>\n  </li>\n</ul>\n\n<p><em>Allen Hsu</em> &amp; <em>Xavier Noria</em></p>\n"
  },
  {
    "message": "*   Support using environment variable to set pidfile.\n\n    *Ben Thorner*",
    "project": "railties",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Support using environment variable to set pidfile.</p>\n\n<p><em>Ben Thorner</em></p>\n"
  },
  {
    "message": "*   The Action Cable client now ensures successful channel subscriptions:\n\n    * The client maintains a set of pending subscriptions until either\n      the server confirms the subscription or the channel is torn down.\n    * Rectifies the race condition where an unsubscribe is rapidly followed\n      by a subscribe (on the same channel identifier) and the requests are\n      handled out of order by the ActionCable server, thereby ignoring the\n      subscribe command.\n\n    *Daniel Spinosa*",
    "project": "actioncable",
    "date_merged": 1636979455000,
    "author": "Daniel Spinosa",
    "sha": "bf7dcf032778bf630f8549bbc2c1d50e5420d3fc",
    "pr": "43644",
    "merge_sha": "a559d37155cc6e8783b0130d7dda7df1e5996c45",
    "html": "<p>The Action Cable client now ensures successful channel subscriptions:</p>\n\n<ul>\n  <li>The client maintains a set of pending subscriptions until either<br />\nthe server confirms the subscription or the channel is torn down.</li>\n  <li>Rectifies the race condition where an unsubscribe is rapidly followed<br />\nby a subscribe (on the same channel identifier) and the requests are<br />\nhandled out of order by the ActionCable server, thereby ignoring the<br />\nsubscribe command.</li>\n</ul>\n\n<p><em>Daniel Spinosa</em></p>\n"
  },
  {
    "message": "*   Truncate broadcast logging messages.\n\n    *J Smith*",
    "project": "actioncable",
    "date_merged": 1627518654000,
    "author": "J Smith",
    "sha": "95ac92f808daf450ef52f13fa7ff1e1d03f5dbfa",
    "pr": "42810",
    "merge_sha": "849dd5849568fe7e8a8d3426e4434c6009149dc1",
    "html": "<p>Truncate broadcast logging messages.</p>\n\n<p><em>J Smith</em></p>\n"
  },
  {
    "message": "*   Fix `ArgumentError` with ruby 3.0 on `RemoteConnection#disconnect`.\n\n    *Vladislav*",
    "project": "actioncable",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix <code>ArgumentError</code> with ruby 3.0 on <code>RemoteConnection#disconnect</code>.</p>\n\n<p><em>Vladislav</em></p>\n"
  },
  {
    "message": "*   `ActionCable::Connection::Base` now allows intercepting unhandled exceptions\n    with `rescue_from` before they are logged, which is useful for error reporting\n    tools and other integrations.\n\n    *Justin Talbott*",
    "project": "actioncable",
    "date_merged": 1584743395000,
    "author": "justin talbott",
    "sha": "d2571e560c62116f60429c933d0c41a0e249b58b",
    "pr": "38778",
    "merge_sha": "3c362f097ff8f6d28da0c6572779a82fedd2b63d",
    "html": "<p><code>ActionCable::Connection::Base</code> now allows intercepting unhandled exceptions<br />\nwith <code>rescue_from</code> before they are logged, which is useful for error reporting<br />\ntools and other integrations.</p>\n\n<p><em>Justin Talbott</em></p>\n"
  },
  {
    "message": "*   Add `ActionCable::Channel#stream_or_reject_for` to stream if record is present, otherwise reject the connection\n\n    *Atul Bhosale*",
    "project": "actioncable",
    "date_merged": 1583769910000,
    "author": "Atul Bhosale",
    "sha": "ec69083cf3352c78f840de50fdf20ef30334e0b1",
    "pr": "38375",
    "merge_sha": "9519c1aadc52258688a1e51706eae6e646b321d4",
    "html": "<p>Add <code>ActionCable::Channel#stream_or_reject_for</code> to stream if record is present, otherwise reject the connection</p>\n\n<p><em>Atul Bhosale</em></p>\n"
  },
  {
    "message": "*   Add `ActionCable::Channel#stop_stream_from` and `#stop_stream_for` to unsubscribe from a specific stream.\n\n    *Zhang Kang*",
    "project": "actioncable",
    "date_merged": 1579298204000,
    "author": "Zhang Kang",
    "sha": "96b74fe43355d1456e04592e53328ca1055042ad",
    "pr": "37171",
    "merge_sha": "d72f940d1612aa8b905214c06115db48af41e8ec",
    "html": "<p>Add <code>ActionCable::Channel#stop_stream_from</code> and <code>#stop_stream_for</code> to unsubscribe from a specific stream.</p>\n\n<p><em>Zhang Kang</em></p>\n"
  },
  {
    "message": "*   Add PostgreSQL subscription connection identificator.\n\n    Now you can distinguish Action Cable PostgreSQL subscription connections among others.\n    Also, you can set custom `id` in `cable.yml` configuration.\n\n    ```sql\n    SELECT application_name FROM pg_stat_activity;\n    /*\n        application_name\n    ------------------------\n    psql\n    ActionCable-PID-42\n    (2 rows)\n    */\n    ```\n\n    *Sergey Ponomarev*",
    "project": "actioncable",
    "date_merged": 1577793145000,
    "author": "Sergey Ponomarev",
    "sha": "723375147b4110ad7260962851ca4e3a7a951b47",
    "pr": "35256",
    "merge_sha": "bb5ac1623e8de08c1b7b62b1368758f0d3bb6379",
    "html": "<p>Add PostgreSQL subscription connection identificator.</p>\n\n<p>Now you can distinguish Action Cable PostgreSQL subscription connections among others.<br />\nAlso, you can set custom <code>id</code> in <code>cable.yml</code> configuration.</p>\n\n<div class=\"language-sql highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">SELECT</span> <span class=\"n\">application_name</span> <span class=\"k\">FROM</span> <span class=\"n\">pg_stat_activity</span><span class=\"p\">;</span>\n<span class=\"cm\">/*\n    application_name\n------------------------\npsql\nActionCable-PID-42\n(2 rows)\n*/</span>\n</code></pre></div></div>\n\n<p><em>Sergey Ponomarev</em></p>\n"
  },
  {
    "message": "*   Subscription confirmations and rejections are now logged at the `DEBUG` level instead of `INFO`.\n\n    *DHH*",
    "project": "actioncable",
    "date_merged": 1567691060000,
    "author": "David Heinemeier Hansson",
    "sha": "6315a11b90727de782891f51b12951612abb66bd",
    "pr": "37040",
    "merge_sha": "3437691708f62eea5856ab1460b9ab4da6d52e86",
    "html": "<p>Subscription confirmations and rejections are now logged at the <code>DEBUG</code> level instead of <code>INFO</code>.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Updated `ActiveSupport::Cache::MemCacheStore` docs to reflect support for `$MEMCACHE_SERVERS`.\n\n    *Sam Bostock*",
    "project": "guides",
    "date_merged": 1603257303000,
    "author": "Sam Bostock",
    "sha": "e79364610ccaa45d729fb7d9b30306242c341f51",
    "pr": "40420",
    "merge_sha": "e66e05719feb6537199bc2325088a325c822e495",
    "html": "<p>Updated <code>ActiveSupport::Cache::MemCacheStore</code> docs to reflect support for <code>$MEMCACHE_SERVERS</code>.</p>\n\n<p><em>Sam Bostock</em></p>\n"
  },
  {
    "message": "*   Use Bookstore as a unified use-case for all examples in Active Record Query Interface Guide.\n\n    *Ashley Engelund*, *Vipul A M*",
    "project": "guides",
    "date_merged": 1598392712000,
    "author": "Vipul A M",
    "sha": "536a7e5bddce9bb583b32f598d8d0c7b7b3f0ed9",
    "pr": "39406",
    "merge_sha": "e6c61c54bbd4e55159b00ce46da0b240350965a5",
    "html": "<p>Use Bookstore as a unified use-case for all examples in Active Record Query Interface Guide.</p>\n\n<p><em>Ashley Engelund</em>, <em>Vipul A M</em></p>\n"
  },
  {
    "message": "*   Fix Action Text extra trix content wrapper.\n\n    *Alexandre Ruban*",
    "project": "actiontext",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix Action Text extra trix content wrapper.</p>\n\n<p><em>Alexandre Ruban</em></p>\n"
  },
  {
    "message": "*   Always render attachment partials as HTML with `:html` format inside trix editor.\n\n    *James Brooks*",
    "project": "actiontext",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Always render attachment partials as HTML with <code>:html</code> format inside trix editor.</p>\n\n<p><em>James Brooks</em></p>\n"
  },
  {
    "message": "*   Declare `ActionText::FixtureSet.attachment` to generate an\n    `<action-text-attachment sgid=\"...\"></action-text-attachment>` element with\n    a valid `sgid` attribute.\n\n    ```ruby\n    hello_world_review_content:\n      record: hello_world (Review)\n      name: content\n      body: <p><%= ActionText::FixtureSet.attachment(\"messages\", :hello_world) %> is great!</p>\n    ```\n\n    *Sean Doyle*",
    "project": "actiontext",
    "date_merged": 1604087990000,
    "author": "Sean Doyle",
    "sha": "76b33aa3d102ad4ff3f766ac2d3a711d73aaee82",
    "pr": "39698",
    "merge_sha": "25c518430e098fa28c64b2303b900da2bd2e2c1e",
    "html": "<p>Declare <code>ActionText::FixtureSet.attachment</code> to generate an<br />\n<code>&lt;action-text-attachment sgid=\"...\"&gt;&lt;/action-text-attachment&gt;</code> element with<br />\na valid <code>sgid</code> attribute.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"ss\">hello_world_review_content:\n  record: </span><span class=\"n\">hello_world</span> <span class=\"p\">(</span><span class=\"no\">Review</span><span class=\"p\">)</span>\n  <span class=\"ss\">name: </span><span class=\"n\">content</span>\n  <span class=\"ss\">body: </span><span class=\"o\">&lt;</span><span class=\"nb\">p</span><span class=\"o\">&gt;&lt;</span><span class=\"sx\">%= ActionText::FixtureSet.attachment(\"messages\", :hello_world) %&gt; is great!&lt;/p&gt;\n</span></code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Locate `fill_in_rich_text_area` by `<label>` text\n\n    In addition to searching for `<trix-editor>` elements with the appropriate\n    `aria-label` attribute, also support locating elements that match the\n    corresponding `<label>` element's text.\n\n    *Sean Doyle*",
    "project": "actiontext",
    "date_merged": 1601751113000,
    "author": "Sean Doyle",
    "sha": "614580270d7789e5275defc3da020ce27b3b2302",
    "pr": "40293",
    "merge_sha": "d46668a3fe8564a57cdd09661943104313473181",
    "html": "<p>Locate <code>fill_in_rich_text_area</code> by <code>&lt;label&gt;</code> text</p>\n\n<p>In addition to searching for <code>&lt;trix-editor&gt;</code> elements with the appropriate<br />\n<code>aria-label</code> attribute, also support locating elements that match the<br />\ncorresponding <code>&lt;label&gt;</code> element’s text.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Be able to add a default value to `rich_text_area`.\n\n    ```ruby\n    form.rich_text_area :content, value: \"<h1>Hello world</h1>\"\n    #=> <input type=\"hidden\" name=\"message[content]\" id=\"message_content_trix_input_message_1\" value=\"<h1>Hello world</h1>\">\n    ```\n\n    *Paulo Ancheta*",
    "project": "actiontext",
    "date_merged": 1599030154000,
    "author": "Paulo Ancheta",
    "sha": "b9571ae45f56bffd8bffa8f181c9529fb54e0aee",
    "pr": "40158",
    "merge_sha": "3afa536c42bb5f4b303c02f832d92ce477c720b6",
    "html": "<p>Be able to add a default value to <code>rich_text_area</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">form</span><span class=\"p\">.</span><span class=\"nf\">rich_text_area</span> <span class=\"ss\">:content</span><span class=\"p\">,</span> <span class=\"ss\">value: </span><span class=\"s2\">\"&lt;h1&gt;Hello world&lt;/h1&gt;\"</span>\n<span class=\"c1\">#=&gt; &lt;input type=\"hidden\" name=\"message[content]\" id=\"message_content_trix_input_message_1\" value=\"&lt;h1&gt;Hello world&lt;/h1&gt;\"&gt;</span>\n</code></pre></div></div>\n\n<p><em>Paulo Ancheta</em></p>\n"
  },
  {
    "message": "*   Add method to confirm rich text content existence by adding `?` after rich\n    text attribute.\n\n    ```ruby\n    message = Message.create!(body: \"<h1>Funny times!</h1>\")\n    message.body? #=> true\n    ```\n\n    *Kyohei Toyoda*",
    "project": "actiontext",
    "date_merged": 1589230058000,
    "author": "प्रथमेश Sonpatki",
    "sha": "1a2de86568b34bab46b1a2b6e5b8e4567f914ded",
    "pr": "39231",
    "merge_sha": "de7f57f9482dd94c585cbd63cdef061b81371db3",
    "html": "<p>Add method to confirm rich text content existence by adding <code>?</code> after rich<br />\ntext attribute.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">message</span> <span class=\"o\">=</span> <span class=\"no\">Message</span><span class=\"p\">.</span><span class=\"nf\">create!</span><span class=\"p\">(</span><span class=\"ss\">body: </span><span class=\"s2\">\"&lt;h1&gt;Funny times!&lt;/h1&gt;\"</span><span class=\"p\">)</span>\n<span class=\"n\">message</span><span class=\"p\">.</span><span class=\"nf\">body?</span> <span class=\"c1\">#=&gt; true</span>\n</code></pre></div></div>\n\n<p><em>Kyohei Toyoda</em></p>\n"
  },
  {
    "message": "*   The `fill_in_rich_text_area` system test helper locates a Trix editor\n    and fills it in with the given HTML.\n\n    ```ruby\n    # <trix-editor id=\"message_content\" ...></trix-editor>\n    fill_in_rich_text_area \"message_content\", with: \"Hello <em>world!</em>\"\n\n    # <trix-editor placeholder=\"Your message here\" ...></trix-editor>\n    fill_in_rich_text_area \"Your message here\", with: \"Hello <em>world!</em>\"\n\n    # <trix-editor aria-label=\"Message content\" ...></trix-editor>\n    fill_in_rich_text_area \"Message content\", with: \"Hello <em>world!</em>\"\n\n    # <input id=\"trix_input_1\" name=\"message[content]\" type=\"hidden\">\n    # <trix-editor input=\"trix_input_1\"></trix-editor>\n    fill_in_rich_text_area \"message[content]\", with: \"Hello <em>world!</em>\"\n    ```\n\n    *George Claghorn*",
    "project": "actiontext",
    "date_merged": 1589230058000,
    "author": "प्रथमेश Sonpatki",
    "sha": "1a2de86568b34bab46b1a2b6e5b8e4567f914ded",
    "pr": "39231",
    "merge_sha": "de7f57f9482dd94c585cbd63cdef061b81371db3",
    "html": "<p>The <code>fill_in_rich_text_area</code> system test helper locates a Trix editor<br />\nand fills it in with the given HTML.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># &lt;trix-editor id=\"message_content\" ...&gt;&lt;/trix-editor&gt;</span>\n<span class=\"n\">fill_in_rich_text_area</span> <span class=\"s2\">\"message_content\"</span><span class=\"p\">,</span> <span class=\"ss\">with: </span><span class=\"s2\">\"Hello &lt;em&gt;world!&lt;/em&gt;\"</span>\n\n<span class=\"c1\"># &lt;trix-editor placeholder=\"Your message here\" ...&gt;&lt;/trix-editor&gt;</span>\n<span class=\"n\">fill_in_rich_text_area</span> <span class=\"s2\">\"Your message here\"</span><span class=\"p\">,</span> <span class=\"ss\">with: </span><span class=\"s2\">\"Hello &lt;em&gt;world!&lt;/em&gt;\"</span>\n\n<span class=\"c1\"># &lt;trix-editor aria-label=\"Message content\" ...&gt;&lt;/trix-editor&gt;</span>\n<span class=\"n\">fill_in_rich_text_area</span> <span class=\"s2\">\"Message content\"</span><span class=\"p\">,</span> <span class=\"ss\">with: </span><span class=\"s2\">\"Hello &lt;em&gt;world!&lt;/em&gt;\"</span>\n\n<span class=\"c1\"># &lt;input id=\"trix_input_1\" name=\"message[content]\" type=\"hidden\"&gt;</span>\n<span class=\"c1\"># &lt;trix-editor input=\"trix_input_1\"&gt;&lt;/trix-editor&gt;</span>\n<span class=\"n\">fill_in_rich_text_area</span> <span class=\"s2\">\"message[content]\"</span><span class=\"p\">,</span> <span class=\"ss\">with: </span><span class=\"s2\">\"Hello &lt;em&gt;world!&lt;/em&gt;\"</span>\n</code></pre></div></div>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Make sanitize_as_sql_comment more strict\n\n    Though this method was likely never meant to take user input, it was\n    attempting sanitization. That sanitization could be bypassed with\n    carefully crafted input.\n\n    This commit makes the sanitization more robust by replacing any\n    occurrences of \"/*\" or \"*/\" with \"/ *\" or \"* /\". It also performs a\n    first pass to remove one surrounding comment to avoid compatibility\n    issues for users relying on the existing removal.\n\n    This also clarifies in the documentation of annotate that it should not\n    be provided user input.\n\n    [CVE-2023-22794]",
    "project": "activerecord",
    "date_merged": 1675887998000,
    "author": "John Hawthorn",
    "sha": "1ff2012eaa1f321d02393e40bc087652a78bb81e",
    "pr": "47319",
    "merge_sha": "daa00c8357dc12ce24f89d92e4ceeabebb3af3d1",
    "html": "<p>Make sanitize_as_sql_comment more strict</p>\n\n<p>Though this method was likely never meant to take user input, it was<br />\nattempting sanitization. That sanitization could be bypassed with<br />\ncarefully crafted input.</p>\n\n<p>This commit makes the sanitization more robust by replacing any<br />\noccurrences of “/<em>” or “</em>/” with “/ <em>” or “</em> /”. It also performs a<br />\nfirst pass to remove one surrounding comment to avoid compatibility<br />\nissues for users relying on the existing removal.</p>\n\n<p>This also clarifies in the documentation of annotate that it should not<br />\nbe provided user input.</p>\n\n<p>[CVE-2023-22794]</p>\n"
  },
  {
    "message": "*   Added integer width check to PostgreSQL::Quoting\n\n    Given a value outside the range for a 64bit signed integer type\n    PostgreSQL will treat the column type as numeric. Comparing\n    integer values against numeric values can result in a slow\n    sequential scan.\n\n    This behavior is configurable via\n    ActiveRecord::Base.raise_int_wider_than_64bit which defaults to true.\n\n    [CVE-2022-44566]",
    "project": "activerecord",
    "date_merged": 1675887998000,
    "author": "John Hawthorn",
    "sha": "1ff2012eaa1f321d02393e40bc087652a78bb81e",
    "pr": "47319",
    "merge_sha": "daa00c8357dc12ce24f89d92e4ceeabebb3af3d1",
    "html": "<p>Added integer width check to PostgreSQL::Quoting</p>\n\n<p>Given a value outside the range for a 64bit signed integer type<br />\nPostgreSQL will treat the column type as numeric. Comparing<br />\ninteger values against numeric values can result in a slow<br />\nsequential scan.</p>\n\n<p>This behavior is configurable via<br />\nActiveRecord::Base.raise_int_wider_than_64bit which defaults to true.</p>\n\n<p>[CVE-2022-44566]</p>\n"
  },
  {
    "message": "*   Symbol is allowed by default for YAML columns\n\n    *Étienne Barrié*",
    "project": "activerecord",
    "date_merged": 1664480034000,
    "author": "John Hawthorn",
    "sha": "9ab33753b6bab1809fc73d35b98a5c1d0c96ba1b",
    "pr": "46156",
    "merge_sha": "c858c877a725c615a2e2068cb9184749302df057",
    "html": "<p>Symbol is allowed by default for YAML columns</p>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::Store` to serialize as a regular Hash\n\n    Previously it would serialize as an `ActiveSupport::HashWithIndifferentAccess`\n    which is wasteful and cause problem with YAML safe_load.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1657904545000,
    "author": "Jean Boussier",
    "sha": "e5ac49d986de0f9f1f7083422f04c08fa15e1616",
    "pr": "45591",
    "merge_sha": "571b4d5fb9cd254db79e93370d7b208b6d0fd1e4",
    "html": "<p>Fix <code>ActiveRecord::Store</code> to serialize as a regular Hash</p>\n\n<p>Previously it would serialize as an <code>ActiveSupport::HashWithIndifferentAccess</code><br />\nwhich is wasteful and cause problem with YAML safe_load.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix PG.connect keyword arguments deprecation warning on ruby 2.7\n\n    Fixes #44307.\n\n    *Nikita Vasilevsky*",
    "project": "activerecord",
    "date_merged": 1652620193000,
    "author": "Dave Gudge",
    "sha": "06a8f02d7dc1e757695837e3cc417c2479912662",
    "pr": "45090",
    "merge_sha": "8e4d04cd5737a9b8a62c39a2506c9a04764b1468",
    "html": "<p>Fix PG.connect keyword arguments deprecation warning on ruby 2.7</p>\n\n<p>Fixes #44307.</p>\n\n<p><em>Nikita Vasilevsky</em></p>\n"
  },
  {
    "message": "*   Change ActiveRecord::Coders::YAMLColumn default to safe_load\n\n    This adds two new configuration options The configuration options are as\n    follows:\n    \n    * `config.active_record.use_yaml_unsafe_load`\n    \n    When set to true, this configuration option tells Rails to use the old\n    \"unsafe\" YAML loading strategy, maintaining the existing behavior but leaving\n    the possible escalation vulnerability in place.  Setting this option to true\n    is *not* recommended, but can aid in upgrading.\n    \n    * `config.active_record.yaml_column_permitted_classes`\n    \n    The \"safe YAML\" loading method does not allow all classes to be deserialized\n    by default.  This option allows you to specify classes deemed \"safe\" in your\n    application.  For example, if your application uses Symbol and Time in\n    serialized data, you can add Symbol and Time to the allowed list as follows:\n    \n    ```\n    config.active_record.yaml_column_permitted_classes = [Symbol, Date, Time]\n    ```\n\n    [CVE-2022-32224]",
    "project": "activerecord",
    "date_merged": 1657647817000,
    "author": "Aaron Patterson",
    "sha": "0bce40f3dd5aa1fb5bb8611e3ad8179222f80e40",
    "pr": null,
    "merge_sha": "f05ac78bfc9d172abaa86a9da139c7933e4e79c5",
    "html": "<p>Change ActiveRecord::Coders::YAMLColumn default to safe_load</p>\n\n<p>This adds two new configuration options The configuration options are as<br />\nfollows:</p>\n\n<ul>\n  <li><code>config.active_record.use_yaml_unsafe_load</code></li>\n</ul>\n\n<p>When set to true, this configuration option tells Rails to use the old<br />\n“unsafe” YAML loading strategy, maintaining the existing behavior but leaving<br />\nthe possible escalation vulnerability in place.  Setting this option to true<br />\nis <em>not</em> recommended, but can aid in upgrading.</p>\n\n<ul>\n  <li><code>config.active_record.yaml_column_permitted_classes</code></li>\n</ul>\n\n<p>The “safe YAML” loading method does not allow all classes to be deserialized<br />\nby default.  This option allows you to specify classes deemed “safe” in your<br />\napplication.  For example, if your application uses Symbol and Time in<br />\nserialized data, you can add Symbol and Time to the allowed list as follows:</p>\n\n<pre><code>config.active_record.yaml_column_permitted_classes = [Symbol, Date, Time]\n</code></pre>\n\n<p>[CVE-2022-32224]</p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::ConnectionAdapters::SchemaCache#deep_deduplicate` for Ruby 2.6.\n\n    Ruby 2.6 and 2.7 have slightly different implementations of the `String#-@` method.\n    In Ruby 2.6, the receiver of the `String#-@` method is modified under certain circumstances.\n    This was later identified as a bug (https://bugs.ruby-lang.org/issues/15926) and only\n    fixed in Ruby 2.7.\n\n    Before the changes in this commit, the\n    `ActiveRecord::ConnectionAdapters::SchemaCache#deep_deduplicate` method, which internally\n    calls the `String#-@` method, could also modify an input string argument in Ruby 2.6 --\n    changing a tainted, unfrozen string into a tainted, frozen string.\n\n    Fixes #43056\n\n    *Eric O'Hanlon*",
    "project": "activerecord",
    "date_merged": 1643911051000,
    "author": "Eric O",
    "sha": "2449d7c272f88a6a87207262574a75b29e87bf2a",
    "pr": "44308",
    "merge_sha": "448856c7eb4465d0d1a5682bddd8c9fb07489d23",
    "html": "<p>Fix <code>ActiveRecord::ConnectionAdapters::SchemaCache#deep_deduplicate</code> for Ruby 2.6.</p>\n\n<p>Ruby 2.6 and 2.7 have slightly different implementations of the <code>String#-@</code> method.<br />\nIn Ruby 2.6, the receiver of the <code>String#-@</code> method is modified under certain circumstances.<br />\nThis was later identified as a bug (https://bugs.ruby-lang.org/issues/15926) and only<br />\nfixed in Ruby 2.7.</p>\n\n<p>Before the changes in this commit, the<br />\n<code>ActiveRecord::ConnectionAdapters::SchemaCache#deep_deduplicate</code> method, which internally<br />\ncalls the <code>String#-@</code> method, could also modify an input string argument in Ruby 2.6 –<br />\nchanging a tainted, unfrozen string into a tainted, frozen string.</p>\n\n<p>Fixes #43056</p>\n\n<p><em>Eric O’Hanlon</em></p>\n"
  },
  {
    "message": "*   Fix migration compatibility to create SQLite references/belongs_to column as integer when\n    migration version is 6.0.\n\n    `reference`/`belongs_to` in migrations with version 6.0 were creating columns as\n    bigint instead of integer for the SQLite Adapter.\n\n    *Marcelo Lauxen*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix migration compatibility to create SQLite references/belongs_to column as integer when<br />\nmigration version is 6.0.</p>\n\n<p><code>reference</code>/<code>belongs_to</code> in migrations with version 6.0 were creating columns as<br />\nbigint instead of integer for the SQLite Adapter.</p>\n\n<p><em>Marcelo Lauxen</em></p>\n"
  },
  {
    "message": "*   Fix dbconsole for 3-tier config.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix dbconsole for 3-tier config.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Better handle SQL queries with invalid encoding.\n\n    ```ruby\n    Post.create(name: \"broken \\xC8 UTF-8\")\n    ```\n\n    Would cause all adapters to fail in a non controlled way in the code\n    responsible to detect write queries.\n\n    The query is now properly passed to the database connection, which might or might\n    not be able to handle it, but will either succeed or failed in a more correct way.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Better handle SQL queries with invalid encoding.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">(</span><span class=\"ss\">name: </span><span class=\"s2\">\"broken </span><span class=\"se\">\\xC8</span><span class=\"s2\"> UTF-8\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Would cause all adapters to fail in a non controlled way in the code<br />\nresponsible to detect write queries.</p>\n\n<p>The query is now properly passed to the database connection, which might or might<br />\nnot be able to handle it, but will either succeed or failed in a more correct way.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Ignore persisted in-memory records when merging target lists.\n\n    *Kevin Sjöberg*",
    "project": "activerecord",
    "date_merged": 1639127585000,
    "author": "Rafael Mendonça França",
    "sha": "38cb5610b17c1cb6e6a6abfb54e79f104376ef61",
    "pr": "43517",
    "merge_sha": "a079decb7421cdfab9b11dac721f707b45af4394",
    "html": "<p>Ignore persisted in-memory records when merging target lists.</p>\n\n<p><em>Kevin Sjöberg</em></p>\n"
  },
  {
    "message": "*   Fix regression bug that caused ignoring additional conditions for preloading\n    `has_many` through relations.\n\n    Fixes #43132\n\n    *Alexander Pauly*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix regression bug that caused ignoring additional conditions for preloading<br />\n<code>has_many</code> through relations.</p>\n\n<p>Fixes #43132</p>\n\n<p><em>Alexander Pauly</em></p>\n"
  },
  {
    "message": "*   Fix `ActiveRecord::InternalMetadata` to not be broken by\n    `config.active_record.record_timestamps = false`\n\n    Since the model always create the timestamp columns, it has to set them, otherwise it breaks\n    various DB management tasks.\n\n    Fixes #42983\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix <code>ActiveRecord::InternalMetadata</code> to not be broken by<br />\n<code>config.active_record.record_timestamps = false</code></p>\n\n<p>Since the model always create the timestamp columns, it has to set them, otherwise it breaks<br />\nvarious DB management tasks.</p>\n\n<p>Fixes #42983</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Fix duplicate active record objects on `inverse_of`.\n\n    *Justin Carvalho*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix duplicate active record objects on <code>inverse_of</code>.</p>\n\n<p><em>Justin Carvalho</em></p>\n"
  },
  {
    "message": "*   Fix duplicate objects stored in has many association after save.\n\n    Fixes #42549.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix duplicate objects stored in has many association after save.</p>\n\n<p>Fixes #42549.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix performance regression in `CollectionAssocation#build`.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix performance regression in <code>CollectionAssocation#build</code>.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix retrieving default value for text column for MariaDB.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix retrieving default value for text column for MariaDB.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Do not try to rollback transactions that failed due to a `ActiveRecord::TransactionRollbackError`.\n\n    *Jamie McCarthy*",
    "project": "activerecord",
    "date_merged": 1624388301000,
    "author": "Rafael Mendonça França",
    "sha": "57053ad20b40099b060fc5356831fae41764f1d5",
    "pr": "30922",
    "merge_sha": "0d54271073ed17ff13a3fca92df641403445182e",
    "html": "<p>Do not try to rollback transactions that failed due to a <code>ActiveRecord::TransactionRollbackError</code>.</p>\n\n<p><em>Jamie McCarthy</em></p>\n"
  },
  {
    "message": "*   Raise an error if `pool_config` is `nil` in `set_pool_config`.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Raise an error if <code>pool_config</code> is <code>nil</code> in <code>set_pool_config</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Fix compatibility with `psych >= 4`.\n\n    Starting in Psych 4.0.0 `YAML.load` behaves like `YAML.safe_load`. To preserve compatibility\n    Active Record's schema cache loader and `YAMLColumn` now uses `YAML.unsafe_load` if available.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1622732186000,
    "author": "Jean Boussier",
    "sha": "255b5ff9af57f9b54dee7ec884b12a1ad16f0321",
    "pr": "42374",
    "merge_sha": "519b55113463a3992158fdaa3ecaf2087975823c",
    "html": "<p>Fix compatibility with <code>psych &gt;= 4</code>.</p>\n\n<p>Starting in Psych 4.0.0 <code>YAML.load</code> behaves like <code>YAML.safe_load</code>. To preserve compatibility<br />\nActive Record’s schema cache loader and <code>YAMLColumn</code> now uses <code>YAML.unsafe_load</code> if available.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Support using replicas when using `rails dbconsole`.\n\n    *Christopher Thornton*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Support using replicas when using <code>rails dbconsole</code>.</p>\n\n<p><em>Christopher Thornton</em></p>\n"
  },
  {
    "message": "*   Restore connection pools after transactional tests.\n\n    *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Restore connection pools after transactional tests.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Change `upsert_all` to fails cleanly for MySQL when `:unique_by` is used.\n\n    *Bastian Bartmann*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Change <code>upsert_all</code> to fails cleanly for MySQL when <code>:unique_by</code> is used.</p>\n\n<p><em>Bastian Bartmann</em></p>\n"
  },
  {
    "message": "*   Fix user-defined `self.default_scope` to respect table alias.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix user-defined <code>self.default_scope</code> to respect table alias.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Clear `@cache_keys` cache after `update_all`, `delete_all`, `destroy_all`.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Clear <code>@cache_keys</code> cache after <code>update_all</code>, <code>delete_all</code>, <code>destroy_all</code>.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Changed Arel predications `contains` and `overlaps` to use\n    `quoted_node` so that PostgreSQL arrays are quoted properly.\n\n    *Bradley Priest*",
    "project": "activerecord",
    "date_merged": 1616919248000,
    "author": "Andrew White",
    "sha": "4d51ccc560b784e4981b51bc0703b17eefd599f7",
    "pr": "41640",
    "merge_sha": "4c0b8432d63f54b4b59a2eaf2114d42ed5a7cb09",
    "html": "<p>Changed Arel predications <code>contains</code> and <code>overlaps</code> to use<br />\n<code>quoted_node</code> so that PostgreSQL arrays are quoted properly.</p>\n\n<p><em>Bradley Priest</em></p>\n"
  },
  {
    "message": "*   Fix `merge` when the `where` clauses have string contents.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix <code>merge</code> when the <code>where</code> clauses have string contents.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix rollback of parent destruction with nested `dependent: :destroy`.\n\n    *Jacopo Beschi*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix rollback of parent destruction with nested <code>dependent: :destroy</code>.</p>\n\n<p><em>Jacopo Beschi</em></p>\n"
  },
  {
    "message": "*   Fix binds logging for `\"WHERE ... IN ...\"` statements.\n\n    *Ricardo Díaz*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix binds logging for <code>\"WHERE ... IN ...\"</code> statements.</p>\n\n<p><em>Ricardo Díaz</em></p>\n"
  },
  {
    "message": "*   Handle `false` in relation strict loading checks.\n\n    Previously when a model had strict loading set to true and then had a\n    relation set `strict_loading` to false the false wasn't considered when\n    deciding whether to raise/warn about strict loading.\n\n    ```\n    class Dog < ActiveRecord::Base\n      self.strict_loading_by_default = true\n\n      has_many :treats, strict_loading: false\n    end\n    ```\n\n    In the example, `dog.treats` would still raise even though\n    `strict_loading` was set to false. This is a bug affecting more than\n    Active Storage which is why I made this PR superseding #41461. We need\n    to fix this for all applications since the behavior is a little\n    surprising. I took the test from #41461 and the code suggestion from #41453\n    with some additions.\n\n    *Eileen M. Uchitelle*, *Radamés Roriz*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Handle <code>false</code> in relation strict loading checks.</p>\n\n<p>Previously when a model had strict loading set to true and then had a<br />\nrelation set <code>strict_loading</code> to false the false wasn’t considered when<br />\ndeciding whether to raise/warn about strict loading.</p>\n\n<pre><code>class Dog &lt; ActiveRecord::Base\n  self.strict_loading_by_default = true\n\n  has_many :treats, strict_loading: false\nend\n</code></pre>\n\n<p>In the example, <code>dog.treats</code> would still raise even though<br />\n<code>strict_loading</code> was set to false. This is a bug affecting more than<br />\nActive Storage which is why I made this PR superseding #41461. We need<br />\nto fix this for all applications since the behavior is a little<br />\nsurprising. I took the test from #41461 and the code suggestion from #41453<br />\nwith some additions.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>Radamés Roriz</em></p>\n"
  },
  {
    "message": "*   Fix numericality validator without precision.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix numericality validator without precision.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix aggregate attribute on Enum types.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix aggregate attribute on Enum types.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix `CREATE INDEX` statement generation for PostgreSQL.\n\n    *eltongo*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix <code>CREATE INDEX</code> statement generation for PostgreSQL.</p>\n\n<p><em>eltongo</em></p>\n"
  },
  {
    "message": "*   Fix where clause on enum attribute when providing array of strings.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix where clause on enum attribute when providing array of strings.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix `unprepared_statement` to work it when nesting.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix <code>unprepared_statement</code> to work it when nesting.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix the MySQL adapter to always set the right collation and charset\n    to the connection session.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1614688438000,
    "author": "Rafael Mendonça França",
    "sha": "5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67",
    "pr": "41592",
    "merge_sha": "1f7287a4396f89ea13e3f8f6a116f05823c310b4",
    "html": "<p>Fix the MySQL adapter to always set the right collation and charset<br />\nto the connection session.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix MySQL adapter handling of time objects when prepared statements\n    are enabled.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1614688438000,
    "author": "Rafael Mendonça França",
    "sha": "5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67",
    "pr": "41592",
    "merge_sha": "1f7287a4396f89ea13e3f8f6a116f05823c310b4",
    "html": "<p>Fix MySQL adapter handling of time objects when prepared statements<br />\nare enabled.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix scoping in enum fields using conditions that would generate\n    an `IN` clause.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1614688438000,
    "author": "Rafael Mendonça França",
    "sha": "5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67",
    "pr": "41592",
    "merge_sha": "1f7287a4396f89ea13e3f8f6a116f05823c310b4",
    "html": "<p>Fix scoping in enum fields using conditions that would generate<br />\nan <code>IN</code> clause.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Skip optimised #exist? query when #include? is called on a relation\n    with a having clause\n\n    Relations that have aliased select values AND a having clause that\n    references an aliased select value would generate an error when\n    #include? was called, due to an optimisation that would generate\n    call #exists? on the relation instead, which effectively alters\n    the select values of the query (and thus removes the aliased select\n    values), but leaves the having clause intact. Because the having\n    clause is then referencing an aliased column that is no longer\n    present in the simplified query, an ActiveRecord::InvalidStatement\n    error was raised.\n\n    An sample query affected by this problem:\n\n    ```ruby\n    Author.select('COUNT(*) as total_posts', 'authors.*')\n          .joins(:posts)\n          .group(:id)\n          .having('total_posts > 2')\n          .include?(Author.first)\n    ```\n\n    This change adds an addition check to the condition that skips the\n    simplified #exists? query, which simply checks for the presence of\n    a having clause.\n\n    Fixes #41417\n\n    *Michael Smart*",
    "project": "activerecord",
    "date_merged": 1613495213000,
    "author": "Rafael França",
    "sha": "2a7ff0a5f54979b14b19f827c99295297dda411d",
    "pr": "41419",
    "merge_sha": "7f343cb23cb0acbffb34f0d9018551aa2c84151f",
    "html": "<p>Skip optimised #exist? query when #include? is called on a relation<br />\nwith a having clause</p>\n\n<p>Relations that have aliased select values AND a having clause that<br />\nreferences an aliased select value would generate an error when<br />\n#include? was called, due to an optimisation that would generate<br />\ncall #exists? on the relation instead, which effectively alters<br />\nthe select values of the query (and thus removes the aliased select<br />\nvalues), but leaves the having clause intact. Because the having<br />\nclause is then referencing an aliased column that is no longer<br />\npresent in the simplified query, an ActiveRecord::InvalidStatement<br />\nerror was raised.</p>\n\n<p>An sample query affected by this problem:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">select</span><span class=\"p\">(</span><span class=\"s1\">'COUNT(*) as total_posts'</span><span class=\"p\">,</span> <span class=\"s1\">'authors.*'</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">joins</span><span class=\"p\">(</span><span class=\"ss\">:posts</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">group</span><span class=\"p\">(</span><span class=\"ss\">:id</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">having</span><span class=\"p\">(</span><span class=\"s1\">'total_posts &gt; 2'</span><span class=\"p\">)</span>\n      <span class=\"p\">.</span><span class=\"nf\">include?</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">first</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>This change adds an addition check to the condition that skips the<br />\nsimplified #exists? query, which simply checks for the presence of<br />\na having clause.</p>\n\n<p>Fixes #41417</p>\n\n<p><em>Michael Smart</em></p>\n"
  },
  {
    "message": "*   Increment postgres prepared statement counter before making a prepared statement, so if the statement is aborted\n    without Rails knowledge (e.g., if app gets kill -9d during long-running query or due to Rack::Timeout), app won't end\n    up in perpetual crash state for being inconsistent with Postgres.\n\n    *wbharding*, *Martin Tepper*",
    "project": "activerecord",
    "date_merged": 1613495213000,
    "author": "Rafael Mendonça França",
    "sha": "442c6f16f10ea578e1a87717ce6da7f5716cad13",
    "pr": "41356",
    "merge_sha": "7f343cb23cb0acbffb34f0d9018551aa2c84151f",
    "html": "<p>Increment postgres prepared statement counter before making a prepared statement, so if the statement is aborted<br />\nwithout Rails knowledge (e.g., if app gets kill -9d during long-running query or due to Rack::Timeout), app won’t end<br />\nup in perpetual crash state for being inconsistent with Postgres.</p>\n\n<p><em>wbharding</em>, <em>Martin Tepper</em></p>\n"
  },
  {
    "message": "*   Fix possible DoS vector in PostgreSQL money type\n\n    Carefully crafted input can cause a DoS via the regular expressions used\n    for validating the money format in the PostgreSQL adapter.  This patch\n    fixes the regexp.\n\n    Thanks to @dee-see from Hackerone for this patch!\n\n    [CVE-2021-22880]\n\n    *Aaron Patterson*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "130c128eae233bf71231c73b9c3c3b3f3ede918b",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix possible DoS vector in PostgreSQL money type</p>\n\n<p>Carefully crafted input can cause a DoS via the regular expressions used<br />\nfor validating the money format in the PostgreSQL adapter.  This patch<br />\nfixes the regexp.</p>\n\n<p>Thanks to @dee-see from Hackerone for this patch!</p>\n\n<p>[CVE-2021-22880]</p>\n\n<p><em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   Fix timestamp type for sqlite3.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix timestamp type for sqlite3.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Make destroy async transactional.\n\n    An active record rollback could occur while enqueuing a job. In this\n    case the job would enqueue even though the database deletion\n    rolledback putting things in a funky state.\n\n    Now the jobs are only enqueued until after the db transaction has been committed.\n\n    *Cory Gwin*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "d01394603608297e645bf4171a63e108beaae0b3",
    "pr": "41093",
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Make destroy async transactional.</p>\n\n<p>An active record rollback could occur while enqueuing a job. In this<br />\ncase the job would enqueue even though the database deletion<br />\nrolledback putting things in a funky state.</p>\n\n<p>Now the jobs are only enqueued until after the db transaction has been committed.</p>\n\n<p><em>Cory Gwin</em></p>\n"
  },
  {
    "message": "*   Fix malformed packet error in MySQL statement for connection configuration.\n\n    *robinroestenburg*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix malformed packet error in MySQL statement for connection configuration.</p>\n\n<p><em>robinroestenburg</em></p>\n"
  },
  {
    "message": "*   Connection specification now passes the \"url\" key as a configuration for the\n    adapter if the \"url\" protocol is \"jdbc\", \"http\", or \"https\". Previously only\n    urls with the \"jdbc\" prefix were passed to the Active Record Adapter, others\n    are assumed to be adapter specification urls.\n\n    Fixes #41137.\n\n    *Jonathan Bracy*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "cdb88ccea0426b055b73ab90396dbcac42fd5df6",
    "pr": "41144",
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Connection specification now passes the “url” key as a configuration for the<br />\nadapter if the “url” protocol is “jdbc”, “http”, or “https”. Previously only<br />\nurls with the “jdbc” prefix were passed to the Active Record Adapter, others<br />\nare assumed to be adapter specification urls.</p>\n\n<p>Fixes #41137.</p>\n\n<p><em>Jonathan Bracy</em></p>\n"
  },
  {
    "message": "*   Fix granular connection swapping when there are multiple abstract classes.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix granular connection swapping when there are multiple abstract classes.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Fix `find_by` with custom primary key for belongs_to association.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>find_by</code> with custom primary key for belongs_to association.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Add support for `rails console --sandbox` for multiple database applications.\n\n    *alpaca-tc*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Add support for <code>rails console --sandbox</code> for multiple database applications.</p>\n\n<p><em>alpaca-tc</em></p>\n"
  },
  {
    "message": "*   Fix `where` on polymorphic association with empty array.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>where</code> on polymorphic association with empty array.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix preventing writes for `ApplicationRecord`.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "bf8c59cd896b1bf98d0f3df356531fa4c163219f",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix preventing writes for <code>ApplicationRecord</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Fix fixtures loading when strict loading is enabled for the association.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix fixtures loading when strict loading is enabled for the association.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Fix `where` with custom primary key for belongs_to association.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>where</code> with custom primary key for belongs_to association.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix `where` with aliased associations.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>where</code> with aliased associations.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix `composed_of` with symbol mapping.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>composed_of</code> with symbol mapping.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Don't skip money's type cast for pluck and calculations.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Don’t skip money’s type cast for pluck and calculations.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix `where` on polymorphic association with non Active Record object.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix <code>where</code> on polymorphic association with non Active Record object.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Make sure `db:prepare` works even the schema file doesn't exist.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Make sure <code>db:prepare</code> works even the schema file doesn’t exist.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix complicated `has_many :through` with nested where condition.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix complicated <code>has_many :through</code> with nested where condition.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Handle STI models for `has_many dependent: :destroy_async`.\n\n    *Muhammad Usman*",
    "project": "activerecord",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Handle STI models for <code>has_many dependent: :destroy_async</code>.</p>\n\n<p><em>Muhammad Usman</em></p>\n"
  },
  {
    "message": "*   Restore possibility of passing `false` to :polymorphic option of `belongs_to`.\n\n    Previously, passing `false` would trigger the option validation logic\n    to throw an error saying :polymorphic would not be a valid option.\n\n    *glaszig*",
    "project": "activerecord",
    "date_merged": 1609286812000,
    "author": "Ryuta Kamizono",
    "sha": "0475aa9b95f3fbd05c6d4db4cee698a562fdea3c",
    "pr": "40879",
    "merge_sha": "4453888760f6813aaefd2d8015364fb01c2264ca",
    "html": "<p>Restore possibility of passing <code>false</code> to :polymorphic option of <code>belongs_to</code>.</p>\n\n<p>Previously, passing <code>false</code> would trigger the option validation logic<br />\nto throw an error saying :polymorphic would not be a valid option.</p>\n\n<p><em>glaszig</em></p>\n"
  },
  {
    "message": "*   Allow adding nonnamed expression indexes to be revertible.\n\n    Fixes #40732.\n\n    Previously, the following code would raise an error, when executed while rolling back,\n    and the index name should be specified explicitly. Now, the index name is inferred\n    automatically.\n\n    ```ruby\n    add_index(:items, \"to_tsvector('english', description)\")\n    ```\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1609286812000,
    "author": "Ryuta Kamizono",
    "sha": "95a8c83d2ec7aa34ab127f7fa6def4d8891eb662",
    "pr": "40803",
    "merge_sha": "4453888760f6813aaefd2d8015364fb01c2264ca",
    "html": "<p>Allow adding nonnamed expression indexes to be revertible.</p>\n\n<p>Fixes #40732.</p>\n\n<p>Previously, the following code would raise an error, when executed while rolling back,<br />\nand the index name should be specified explicitly. Now, the index name is inferred<br />\nautomatically.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">add_index</span><span class=\"p\">(</span><span class=\"ss\">:items</span><span class=\"p\">,</span> <span class=\"s2\">\"to_tsvector('english', description)\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Only warn about negative enums if a positive form that would cause conflicts exists.\n\n    Fixes #39065.\n\n    *Alex Ghiculescu*",
    "project": "activerecord",
    "date_merged": 1607730144000,
    "author": "Rafael França",
    "sha": "8d41688ff7cf38598531354268eb18209b1a8aa8",
    "pr": "40679",
    "merge_sha": "ae48b71708dfaa067395a74b79626c20eb09f571",
    "html": "<p>Only warn about negative enums if a positive form that would cause conflicts exists.</p>\n\n<p>Fixes #39065.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   Change `attribute_for_inspect` to take `filter_attributes` in consideration.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1607467528000,
    "author": "Rafael Mendonça França",
    "sha": "75cdcaa9623d0afebd85259bb9cdd176bca8bd2f",
    "pr": "40766",
    "merge_sha": "188fb074a9b13031db283c1c7229e84ef0cc4375",
    "html": "<p>Change <code>attribute_for_inspect</code> to take <code>filter_attributes</code> in consideration.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix odd behavior of inverse_of with multiple belongs_to to same class.\n\n    Fixes #35204.\n\n    *Tomoyuki Kai*",
    "project": "activerecord",
    "date_merged": 1606948320000,
    "author": "Ryuta Kamizono",
    "sha": "413a02c4a5dc1fa3c5bdb557b4970200eafce033",
    "pr": "40643",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Fix odd behavior of inverse_of with multiple belongs_to to same class.</p>\n\n<p>Fixes #35204.</p>\n\n<p><em>Tomoyuki Kai</em></p>\n"
  },
  {
    "message": "*   Build predicate conditions with objects that delegate `#id` and primary key:\n\n    ```ruby\n    class AdminAuthor\n      delegate_missing_to :@author\n\n      def initialize(author)\n        @author = author\n      end\n    end\n\n    Post.where(author: AdminAuthor.new(author))\n    ```\n\n    *Sean Doyle*",
    "project": "activerecord",
    "date_merged": 1606948320000,
    "author": "Rafael França",
    "sha": "46b4136e0e09960ea3d869781ab07ee60f73cca5",
    "pr": "40554",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Build predicate conditions with objects that delegate <code>#id</code> and primary key:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">AdminAuthor</span>\n  <span class=\"n\">delegate_missing_to</span> <span class=\"ss\">:@author</span>\n\n  <span class=\"k\">def</span> <span class=\"nf\">initialize</span><span class=\"p\">(</span><span class=\"n\">author</span><span class=\"p\">)</span>\n    <span class=\"vi\">@author</span> <span class=\"o\">=</span> <span class=\"n\">author</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">author: </span><span class=\"no\">AdminAuthor</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"n\">author</span><span class=\"p\">))</span>\n</code></pre></div></div>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Add `connected_to_many` API.\n\n    This API allows applications to connect to multiple databases at once without switching all of them or implementing a deeply nested stack.\n\n    Before:\n\n        AnimalsRecord.connected_to(role: :reading) do\n          MealsRecord.connected_to(role: :reading) do\n            Dog.first # read from animals replica\n            Dinner.first # read from meals replica\n            Person.first # read from primary writer\n          end\n        end\n\n    After:\n\n        ActiveRecord::Base.connected_to_many([AnimalsRecord, MealsRecord], role: :reading) do\n          Dog.first # read from animals replica\n          Dinner.first # read from meals replica\n          Person.first # read from primary writer\n        end\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1604345697000,
    "author": "eileencodes",
    "sha": "27d51da866c5e8d59eef159cf78f63b022e6314e",
    "pr": "40510",
    "merge_sha": "bd28db1400609cba0a3e7f053d07159588d27d35",
    "html": "<p>Add <code>connected_to_many</code> API.</p>\n\n<p>This API allows applications to connect to multiple databases at once without switching all of them or implementing a deeply nested stack.</p>\n\n<p>Before:</p>\n\n<pre><code>AnimalsRecord.connected_to(role: :reading) do\n  MealsRecord.connected_to(role: :reading) do\n    Dog.first # read from animals replica\n    Dinner.first # read from meals replica\n    Person.first # read from primary writer\n  end\nend\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>ActiveRecord::Base.connected_to_many([AnimalsRecord, MealsRecord], role: :reading) do\n  Dog.first # read from animals replica\n  Dinner.first # read from meals replica\n  Person.first # read from primary writer\nend\n</code></pre>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Add option to raise or log for `ActiveRecord::StrictLoadingViolationError`.\n\n    Some applications may not want to raise an error in production if using `strict_loading`. This would allow an application to set strict loading to log for the production environment while still raising in development and test environments.\n\n    Set `config.active_record.action_on_strict_loading_violation` to `:log` errors instead of raising.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1604341596000,
    "author": "eileencodes",
    "sha": "656c6faf7891ad6068155d1461e8f8aa64131afa",
    "pr": "40511",
    "merge_sha": "a7f29d357bc626a43bab6580d678fad8ba083822",
    "html": "<p>Add option to raise or log for <code>ActiveRecord::StrictLoadingViolationError</code>.</p>\n\n<p>Some applications may not want to raise an error in production if using <code>strict_loading</code>. This would allow an application to set strict loading to log for the production environment while still raising in development and test environments.</p>\n\n<p>Set <code>config.active_record.action_on_strict_loading_violation</code> to <code>:log</code> errors instead of raising.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Allow the inverse of a `has_one` association that was previously autosaved to be loaded.\n\n    Fixes #34255.\n\n    *Steven Weber*",
    "project": "activerecord",
    "date_merged": 1604072886000,
    "author": "Steve Weber",
    "sha": "ba99e6d4002e606679567d8e7cf3d56c29f90925",
    "pr": "39754",
    "merge_sha": "1037f1cdf7518f1e87aa1cb1564b1b29d9cb0531",
    "html": "<p>Allow the inverse of a <code>has_one</code> association that was previously autosaved to be loaded.</p>\n\n<p>Fixes #34255.</p>\n\n<p><em>Steven Weber</em></p>\n"
  },
  {
    "message": "*   Optimise the length of index names for polymorphic references by using the reference name rather than the type and id column names.\n\n    Because the default behaviour when adding an index with multiple columns is to use all column names in the index name, this could frequently lead to overly long index names for polymorphic references which would fail the migration if it exceeded the database limit.\n\n    This change reduces the chance of that happening by using the reference name, e.g. `index_my_table_on_my_reference`.\n\n    Fixes #38655.\n\n    *Luke Redpath*",
    "project": "activerecord",
    "date_merged": 1604019786000,
    "author": "Luke Redpath",
    "sha": "e8437a68f614d61722d94445a9792ccde5dfa0da",
    "pr": "38717",
    "merge_sha": "cdfe8aefa66a8e809b6c7407d2d312128cbbff9e",
    "html": "<p>Optimise the length of index names for polymorphic references by using the reference name rather than the type and id column names.</p>\n\n<p>Because the default behaviour when adding an index with multiple columns is to use all column names in the index name, this could frequently lead to overly long index names for polymorphic references which would fail the migration if it exceeded the database limit.</p>\n\n<p>This change reduces the chance of that happening by using the reference name, e.g. <code>index_my_table_on_my_reference</code>.</p>\n\n<p>Fixes #38655.</p>\n\n<p><em>Luke Redpath</em></p>\n"
  },
  {
    "message": "*   MySQL: Uniqueness validator now respects default database collation,\n    no longer enforce case sensitive comparison by default.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Ryuta Kamizono",
    "sha": "3daf2c7b2df8014c928f5640376550191ab712b7",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>MySQL: Uniqueness validator now respects default database collation,<br />\nno longer enforce case sensitive comparison by default.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Remove deprecated methods from `ActiveRecord::ConnectionAdapters::DatabaseLimits`.\n\n    `column_name_length`\n    `table_name_length`\n    `columns_per_table`\n    `indexes_per_table`\n    `columns_per_multicolumn_index`\n    `sql_query_length`\n    `joins_per_query`\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "426967c6f51809103595bf64cec0261087edf769",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated methods from <code>ActiveRecord::ConnectionAdapters::DatabaseLimits</code>.</p>\n\n<p><code>column_name_length</code><br />\n<code>table_name_length</code><br />\n<code>columns_per_table</code><br />\n<code>indexes_per_table</code><br />\n<code>columns_per_multicolumn_index</code><br />\n<code>sql_query_length</code><br />\n<code>joins_per_query</code></p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::ConnectionAdapters::AbstractAdapter#supports_multi_insert?`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "cbf43df288cad214b910c97f46b74166a515a29b",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveRecord::ConnectionAdapters::AbstractAdapter#supports_multi_insert?</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::ConnectionAdapters::AbstractAdapter#supports_foreign_keys_in_create?`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "ea32fe3de4efe80ab937cbdbbbc721327d8bae31",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveRecord::ConnectionAdapters::AbstractAdapter#supports_foreign_keys_in_create?</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#supports_ranges?`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "ae7b937cfa3a4c3f80d1dd4c173538bb51de052c",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#supports_ranges?</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Base#update_attributes` and `ActiveRecord::Base#update_attributes!`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "b232d019a23e42eebfb75e2aa77a10c54352e939",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveRecord::Base#update_attributes</code> and <code>ActiveRecord::Base#update_attributes!</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `migrations_path` argument in `ActiveRecord::ConnectionAdapter::SchemaStatements#assume_migrated_upto_version`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "43591b43a6c3a0ccbbfeefe496392526e72fb503",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>migrations_path</code> argument in <code>ActiveRecord::ConnectionAdapter::SchemaStatements#assume_migrated_upto_version</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `config.active_record.sqlite3.represent_boolean_as_integer`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "67b4746c16980f0f19e0b73fd3552700792e3540",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>config.active_record.sqlite3.represent_boolean_as_integer</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   `relation.create` does no longer leak scope to class level querying methods\n    in initialization block and callbacks.\n\n    Before:\n\n        User.where(name: \"John\").create do |john|\n          User.find_by(name: \"David\") # => nil\n        end\n\n    After:\n\n        User.where(name: \"John\").create do |john|\n          User.find_by(name: \"David\") # => #<User name: \"David\", ...>\n        end\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Ryuta Kamizono",
    "sha": "255a7ef7b09ba96f92c7c8a8d59666314551f454",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p><code>relation.create</code> does no longer leak scope to class level querying methods<br />\nin initialization block and callbacks.</p>\n\n<p>Before:</p>\n\n<pre><code>User.where(name: \"John\").create do |john|\n  User.find_by(name: \"David\") # =&gt; nil\nend\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>User.where(name: \"John\").create do |john|\n  User.find_by(name: \"David\") # =&gt; #&lt;User name: \"David\", ...&gt;\nend\n</code></pre>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Named scope chain does no longer leak scope to class level querying methods.\n\n        class User < ActiveRecord::Base\n          scope :david, -> { User.where(name: \"David\") }\n        end\n\n    Before:\n\n        User.where(name: \"John\").david\n        # SELECT * FROM users WHERE name = 'John' AND name = 'David'\n\n    After:\n\n        User.where(name: \"John\").david\n        # SELECT * FROM users WHERE name = 'David'\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Ryuta Kamizono",
    "sha": "255a7ef7b09ba96f92c7c8a8d59666314551f454",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Named scope chain does no longer leak scope to class level querying methods.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  scope :david, -&gt; { User.where(name: \"David\") }\nend\n</code></pre>\n\n<p>Before:</p>\n\n<pre><code>User.where(name: \"John\").david\n# SELECT * FROM users WHERE name = 'John' AND name = 'David'\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>User.where(name: \"John\").david\n# SELECT * FROM users WHERE name = 'David'\n</code></pre>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Remove deprecated methods from `ActiveRecord::DatabaseConfigurations`.\n\n    `fetch`\n    `each`\n    `first`\n    `values`\n    `[]=`\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "4692cdda5f31bca346e73c8b17c04980b4aee7f0",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated methods from <code>ActiveRecord::DatabaseConfigurations</code>.</p>\n\n<p><code>fetch</code><br />\n<code>each</code><br />\n<code>first</code><br />\n<code>values</code><br />\n<code>[]=</code></p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   `where.not` now generates NAND predicates instead of NOR.\n\n     Before:\n\n        User.where.not(name: \"Jon\", role: \"admin\")\n        # SELECT * FROM users WHERE name != 'Jon' AND role != 'admin'\n\n     After:\n\n        User.where.not(name: \"Jon\", role: \"admin\")\n        # SELECT * FROM users WHERE NOT (name == 'Jon' AND role == 'admin')\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "688a1c9d1d6f1922afe04eecee82d5ff788e1e9a",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p><code>where.not</code> now generates NAND predicates instead of NOR.</p>\n\n<p>Before:</p>\n\n<pre><code>User.where.not(name: \"Jon\", role: \"admin\")\n# SELECT * FROM users WHERE name != 'Jon' AND role != 'admin'\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>User.where.not(name: \"Jon\", role: \"admin\")\n# SELECT * FROM users WHERE NOT (name == 'Jon' AND role == 'admin')\n</code></pre>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveRecord::Result#to_hash` method.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "b6d62491e4067dbbde05a54b6a32267021305fac",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveRecord::Result#to_hash</code> method.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Deprecate `ActiveRecord::Base.allow_unsafe_raw_sql`.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "317465a4a8f8c0ebaf9534921350c4540584c03c",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Deprecate <code>ActiveRecord::Base.allow_unsafe_raw_sql</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support for using unsafe raw SQL in `ActiveRecord::Relation` methods.\n\n    *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "317465a4a8f8c0ebaf9534921350c4540584c03c",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support for using unsafe raw SQL in <code>ActiveRecord::Relation</code> methods.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Allow users to silence the \"Rails couldn't infer whether you are using multiple databases...\"\n    message using `config.active_record.suppress_multiple_database_warning`.\n\n    *Omri Gabay*",
    "project": "activerecord",
    "date_merged": 1604005142000,
    "author": "Omri Gabay",
    "sha": "43d83e96c922af78129d1ee83b95866121d7cf81",
    "pr": null,
    "merge_sha": "77087bbc1535075134b2aa25eb9cb859143e59d3",
    "html": "<p>Allow users to silence the “Rails couldn’t infer whether you are using multiple databases…”<br />\nmessage using <code>config.active_record.suppress_multiple_database_warning</code>.</p>\n\n<p><em>Omri Gabay</em></p>\n"
  },
  {
    "message": "*   Connections can be granularly switched for abstract classes when `connected_to` is called.\n\n    This change allows `connected_to` to switch a `role` and/or `shard` for a single abstract class instead of all classes globally. Applications that want to use the new feature need to set `config.active_record.legacy_connection_handling` to `false` in their application configuration.\n\n    Example usage:\n\n    Given an application we have a `User` model that inherits from `ApplicationRecord` and a `Dog` model that inherits from `AnimalsRecord`. `AnimalsRecord` and `ApplicationRecord` have writing and reading connections as well as shard `default`, `one`, and `two`.\n\n    ```ruby\n    ActiveRecord::Base.connected_to(role: :reading) do\n      User.first # reads from default replica\n      Dog.first # reads from default replica\n\n      AnimalsRecord.connected_to(role: :writing, shard: :one) do\n        User.first # reads from default replica\n        Dog.first # reads from shard one primary\n      end\n\n      User.first # reads from default replica\n      Dog.first # reads from default replica\n\n      ApplicationRecord.connected_to(role: :writing, shard: :two) do\n        User.first # reads from shard two primary\n        Dog.first # reads from default replica\n      end\n    end\n    ```\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1603976964000,
    "author": "eileencodes",
    "sha": "31461d8a79cf7a6455589319b2e2d6fac76a04c1",
    "pr": "40370",
    "merge_sha": "60d5928a27c5db850f2b258a1484bf5ad7d1d302",
    "html": "<p>Connections can be granularly switched for abstract classes when <code>connected_to</code> is called.</p>\n\n<p>This change allows <code>connected_to</code> to switch a <code>role</code> and/or <code>shard</code> for a single abstract class instead of all classes globally. Applications that want to use the new feature need to set <code>config.active_record.legacy_connection_handling</code> to <code>false</code> in their application configuration.</p>\n\n<p>Example usage:</p>\n\n<p>Given an application we have a <code>User</code> model that inherits from <code>ApplicationRecord</code> and a <code>Dog</code> model that inherits from <code>AnimalsRecord</code>. <code>AnimalsRecord</code> and <code>ApplicationRecord</code> have writing and reading connections as well as shard <code>default</code>, <code>one</code>, and <code>two</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">connected_to</span><span class=\"p\">(</span><span class=\"ss\">role: :reading</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n  <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from default replica</span>\n  <span class=\"no\">Dog</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from default replica</span>\n\n  <span class=\"no\">AnimalsRecord</span><span class=\"p\">.</span><span class=\"nf\">connected_to</span><span class=\"p\">(</span><span class=\"ss\">role: :writing</span><span class=\"p\">,</span> <span class=\"ss\">shard: :one</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n    <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from default replica</span>\n    <span class=\"no\">Dog</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from shard one primary</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from default replica</span>\n  <span class=\"no\">Dog</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from default replica</span>\n\n  <span class=\"no\">ApplicationRecord</span><span class=\"p\">.</span><span class=\"nf\">connected_to</span><span class=\"p\">(</span><span class=\"ss\">role: :writing</span><span class=\"p\">,</span> <span class=\"ss\">shard: :two</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n    <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from shard two primary</span>\n    <span class=\"no\">Dog</span><span class=\"p\">.</span><span class=\"nf\">first</span> <span class=\"c1\"># reads from default replica</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Allow double-dash comment syntax when querying read-only databases\n\n    *James Adam*",
    "project": "activerecord",
    "date_merged": 1603911796000,
    "author": "James Adam",
    "sha": "d44b628ad0be4791180eb70863cfe5392ec0f177",
    "pr": null,
    "merge_sha": "982122bd3cf2a30022ea4d8deceae5f541c8eb01",
    "html": "<p>Allow double-dash comment syntax when querying read-only databases</p>\n\n<p><em>James Adam</em></p>\n"
  },
  {
    "message": "*   Add `values_at` method.\n\n    Returns an array containing the values associated with the given methods.\n\n    ```ruby\n    topic = Topic.first\n    topic.values_at(:title, :author_name)\n    # => [\"Budget\", \"Jason\"]\n    ```\n\n    Similar to `Hash#values_at` but on an Active Record instance.\n\n    *Guillaume Briday*",
    "project": "activerecord",
    "date_merged": 1603125119000,
    "author": "Guillaume Briday",
    "sha": "458fff60ce78723ec904bd1085b4bc9d89a0574f",
    "pr": "36481",
    "merge_sha": "0a608bd987fde4f9bc5bcf4bcebdb181d199cf4f",
    "html": "<p>Add <code>values_at</code> method.</p>\n\n<p>Returns an array containing the values associated with the given methods.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">topic</span> <span class=\"o\">=</span> <span class=\"no\">Topic</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"n\">topic</span><span class=\"p\">.</span><span class=\"nf\">values_at</span><span class=\"p\">(</span><span class=\"ss\">:title</span><span class=\"p\">,</span> <span class=\"ss\">:author_name</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt; [\"Budget\", \"Jason\"]</span>\n</code></pre></div></div>\n\n<p>Similar to <code>Hash#values_at</code> but on an Active Record instance.</p>\n\n<p><em>Guillaume Briday</em></p>\n"
  },
  {
    "message": "*   Fix `read_attribute_before_type_cast` to consider attribute aliases.\n\n    *Marcelo Lauxen*",
    "project": "activerecord",
    "date_merged": 1603065978000,
    "author": "Marcelo Lauxen",
    "sha": "5fdc7d385ff02b5fa79e107c32e6fdad0f932871",
    "pr": "40395",
    "merge_sha": "871073c4a9f51db9a5d61ed7e12f46829cf33ea8",
    "html": "<p>Fix <code>read_attribute_before_type_cast</code> to consider attribute aliases.</p>\n\n<p><em>Marcelo Lauxen</em></p>\n"
  },
  {
    "message": "*   Support passing record to uniqueness validator `:conditions` callable:\n\n    ```ruby\n    class Article < ApplicationRecord\n      validates_uniqueness_of :title, conditions: ->(article) {\n        published_at = article.published_at\n        where(published_at: published_at.beginning_of_year..published_at.end_of_year)\n      }\n    end\n    ```\n\n    *Eliot Sykes*",
    "project": "activerecord",
    "date_merged": 1601926588000,
    "author": "Eliot Sykes",
    "sha": "ab20be81e338a1c0bd996c64600b7a2d8fd6ed3f",
    "pr": "39602",
    "merge_sha": "04dcf56cec38fc91f7ac6694d8a4fad66dcdf4dd",
    "html": "<p>Support passing record to uniqueness validator <code>:conditions</code> callable:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Article</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">validates_uniqueness_of</span> <span class=\"ss\">:title</span><span class=\"p\">,</span> <span class=\"ss\">conditions: </span><span class=\"o\">-&gt;</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"n\">published_at</span> <span class=\"o\">=</span> <span class=\"n\">article</span><span class=\"p\">.</span><span class=\"nf\">published_at</span>\n    <span class=\"n\">where</span><span class=\"p\">(</span><span class=\"ss\">published_at: </span><span class=\"n\">published_at</span><span class=\"p\">.</span><span class=\"nf\">beginning_of_year</span><span class=\"o\">..</span><span class=\"n\">published_at</span><span class=\"p\">.</span><span class=\"nf\">end_of_year</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Eliot Sykes</em></p>\n"
  },
  {
    "message": "*   `BatchEnumerator#update_all` and `BatchEnumerator#delete_all` now return the\n    total number of rows affected, just like their non-batched counterparts.\n\n    ```ruby\n    Person.in_batches.update_all(\"first_name = 'Eugene'\") # => 42\n    Person.in_batches.delete_all # => 42\n    ```\n\n    Fixes #40287.\n\n    *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1601751113000,
    "author": "Eugene Kenny",
    "sha": "80e73ad7c198b69e86c3aac52f70b227c39a8c0e",
    "pr": "40293",
    "merge_sha": "d46668a3fe8564a57cdd09661943104313473181",
    "html": "<p><code>BatchEnumerator#update_all</code> and <code>BatchEnumerator#delete_all</code> now return the<br />\ntotal number of rows affected, just like their non-batched counterparts.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Person</span><span class=\"p\">.</span><span class=\"nf\">in_batches</span><span class=\"p\">.</span><span class=\"nf\">update_all</span><span class=\"p\">(</span><span class=\"s2\">\"first_name = 'Eugene'\"</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; 42</span>\n<span class=\"no\">Person</span><span class=\"p\">.</span><span class=\"nf\">in_batches</span><span class=\"p\">.</span><span class=\"nf\">delete_all</span> <span class=\"c1\"># =&gt; 42</span>\n</code></pre></div></div>\n\n<p>Fixes #40287.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Add support for PostgreSQL `interval` data type with conversion to\n    `ActiveSupport::Duration` when loading records from database and\n    serialization to ISO 8601 formatted duration string on save.\n    Add support to define a column in migrations and get it in a schema dump.\n    Optional column precision is supported.\n\n    To use this in 6.1, you need to place the next string to your model file:\n\n        attribute :duration, :interval\n\n    To keep old behavior until 7.0 is released:\n\n        attribute :duration, :string\n\n    Example:\n\n        create_table :events do |t|\n          t.string   :name\n          t.interval :duration\n        end\n\n        class Event < ApplicationRecord\n          attribute :duration, :interval\n        end\n\n        Event.create!(name: 'Rock Fest', duration: 2.days)\n        Event.last.duration # => 2 days\n        Event.last.duration.iso8601 # => \"P2D\"\n        Event.new(duration: 'P1DT12H3S').duration # => 1 day, 12 hours, and 3 seconds\n        Event.new(duration: '1 day') # Unknown value will be ignored and NULL will be written to database\n\n    *Andrey Novikov*",
    "project": "activerecord",
    "date_merged": 1601503046000,
    "author": "Andrey Novikov",
    "sha": "e5a5cc483573f41fa396779057bd83ce389640d8",
    "pr": null,
    "merge_sha": "0475215d4fa1a6db2a92a0065081fe19c64cc124",
    "html": "<p>Add support for PostgreSQL <code>interval</code> data type with conversion to<br />\n<code>ActiveSupport::Duration</code> when loading records from database and<br />\nserialization to ISO 8601 formatted duration string on save.<br />\nAdd support to define a column in migrations and get it in a schema dump.<br />\nOptional column precision is supported.</p>\n\n<p>To use this in 6.1, you need to place the next string to your model file:</p>\n\n<pre><code>attribute :duration, :interval\n</code></pre>\n\n<p>To keep old behavior until 7.0 is released:</p>\n\n<pre><code>attribute :duration, :string\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>create_table :events do |t|\n  t.string   :name\n  t.interval :duration\nend\n\nclass Event &lt; ApplicationRecord\n  attribute :duration, :interval\nend\n\nEvent.create!(name: 'Rock Fest', duration: 2.days)\nEvent.last.duration # =&gt; 2 days\nEvent.last.duration.iso8601 # =&gt; \"P2D\"\nEvent.new(duration: 'P1DT12H3S').duration # =&gt; 1 day, 12 hours, and 3 seconds\nEvent.new(duration: '1 day') # Unknown value will be ignored and NULL will be written to database\n</code></pre>\n\n<p><em>Andrey Novikov</em></p>\n"
  },
  {
    "message": "*   Allow associations supporting the `dependent:` key to take `dependent: :destroy_async`.\n\n    ```ruby\n    class Account < ActiveRecord::Base\n        belongs_to :supplier, dependent: :destroy_async\n    end\n    ```\n\n    `:destroy_async` will enqueue a job to destroy associated records in the background.\n\n    *DHH*, *George Claghorn*, *Cory Gwin*, *Rafael Mendonça França*, *Adrianna Chang*",
    "project": "activerecord",
    "date_merged": 1601059851000,
    "author": "George Claghorn",
    "sha": "4cf7559280cbde6b827c1817b46077f4e3cb8f31",
    "pr": "40157",
    "merge_sha": "397bfb0e83af5de6fa725c5e2a83f5a998258fa7",
    "html": "<p>Allow associations supporting the <code>dependent:</code> key to take <code>dependent: :destroy_async</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Account</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n    <span class=\"n\">belongs_to</span> <span class=\"ss\">:supplier</span><span class=\"p\">,</span> <span class=\"ss\">dependent: :destroy_async</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><code>:destroy_async</code> will enqueue a job to destroy associated records in the background.</p>\n\n<p><em>DHH</em>, <em>George Claghorn</em>, <em>Cory Gwin</em>, <em>Rafael Mendonça França</em>, <em>Adrianna Chang</em></p>\n"
  },
  {
    "message": "*   Add `SKIP_TEST_DATABASE` environment variable to disable modifying the test database when `rails db:create` and `rails db:drop` are called.\n\n    *Jason Schweier*",
    "project": "activerecord",
    "date_merged": 1600720339000,
    "author": "Jason Schweier",
    "sha": "0c678edb84814775cb0b5ab81503bc61adcf66a1",
    "pr": "39027",
    "merge_sha": "0bce813442e7aa9088e811d7bdd595264388f949",
    "html": "<p>Add <code>SKIP_TEST_DATABASE</code> environment variable to disable modifying the test database when <code>rails db:create</code> and <code>rails db:drop</code> are called.</p>\n\n<p><em>Jason Schweier</em></p>\n"
  },
  {
    "message": "*   `connects_to` can only be called on `ActiveRecord::Base` or abstract classes.\n\n    Ensure that `connects_to` can only be called from `ActiveRecord::Base` or abstract classes. This protects the application from opening duplicate or too many connections.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1600091991000,
    "author": "eileencodes",
    "sha": "5d36b04986f8a89d0f68faa3913dd6120feb5245",
    "pr": "40219",
    "merge_sha": "31197f2079272278107c8550741efcedf9981b06",
    "html": "<p><code>connects_to</code> can only be called on <code>ActiveRecord::Base</code> or abstract classes.</p>\n\n<p>Ensure that <code>connects_to</code> can only be called from <code>ActiveRecord::Base</code> or abstract classes. This protects the application from opening duplicate or too many connections.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   All connection adapters `execute` now raises `ActiveRecord::ConnectionNotEstablished` rather than\n    `ActiveRecord::StatementInvalid` when they encounter a connection error.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1600059647000,
    "author": "Jean Boussier",
    "sha": "1269ab776dd8906aaf9f168937fda1fdf584177a",
    "pr": "40212",
    "merge_sha": "e7a9f9de41e1f60e90ef95f404c3cf5ff689ac32",
    "html": "<p>All connection adapters <code>execute</code> now raises <code>ActiveRecord::ConnectionNotEstablished</code> rather than<br />\n<code>ActiveRecord::StatementInvalid</code> when they encounter a connection error.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   `Mysql2Adapter#quote_string` now raises `ActiveRecord::ConnectionNotEstablished` rather than\n    `ActiveRecord::StatementInvalid` when it can't connect to the MySQL server.\n\n    *Jean Boussier*",
    "project": "activerecord",
    "date_merged": 1600059647000,
    "author": "Jean Boussier",
    "sha": "1269ab776dd8906aaf9f168937fda1fdf584177a",
    "pr": "40212",
    "merge_sha": "e7a9f9de41e1f60e90ef95f404c3cf5ff689ac32",
    "html": "<p><code>Mysql2Adapter#quote_string</code> now raises <code>ActiveRecord::ConnectionNotEstablished</code> rather than<br />\n<code>ActiveRecord::StatementInvalid</code> when it can’t connect to the MySQL server.</p>\n\n<p><em>Jean Boussier</em></p>\n"
  },
  {
    "message": "*   Add support for check constraints that are `NOT VALID` via `validate: false` (PostgreSQL-only).\n\n    *Alex Robbin*",
    "project": "activerecord",
    "date_merged": 1599523685000,
    "author": "Alex Robbin",
    "sha": "368da3ef29462f438a8df7d864b927a329c51c25",
    "pr": "40192",
    "merge_sha": "78a81880079d0e23084279fc352299f321b5b0c0",
    "html": "<p>Add support for check constraints that are <code>NOT VALID</code> via <code>validate: false</code> (PostgreSQL-only).</p>\n\n<p><em>Alex Robbin</em></p>\n"
  },
  {
    "message": "*   Ensure the default configuration is considered primary or first for an environment\n\n    If a multiple database application provides a configuration named primary, that will be treated as default. In applications that do not have a primary entry, the default database configuration will be the first configuration for an environment.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1599167305000,
    "author": "eileencodes",
    "sha": "ee9e308f686ac1c7b0714671a1dcf1d96de87d70",
    "pr": "40169",
    "merge_sha": "77667bceadca7875cbfbbdb1edbf52a2d26e2ee3",
    "html": "<p>Ensure the default configuration is considered primary or first for an environment</p>\n\n<p>If a multiple database application provides a configuration named primary, that will be treated as default. In applications that do not have a primary entry, the default database configuration will be the first configuration for an environment.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Allow `where` references association names as joined table name aliases.\n\n    ```ruby\n    class Comment < ActiveRecord::Base\n      enum label: [:default, :child]\n      has_many :children, class_name: \"Comment\", foreign_key: :parent_id\n    end\n\n    # ... FROM comments LEFT OUTER JOIN comments children ON ... WHERE children.label = 1\n    Comment.includes(:children).where(\"children.label\": \"child\")\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1598954785000,
    "author": "Ryuta Kamizono",
    "sha": "7b9ca16394faf535535e2d926a7e2db7f4766f76",
    "pr": "40106",
    "merge_sha": "854587c268a5474f824215c84409d44466fba9dd",
    "html": "<p>Allow <code>where</code> references association names as joined table name aliases.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Comment</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">label: </span><span class=\"p\">[</span><span class=\"ss\">:default</span><span class=\"p\">,</span> <span class=\"ss\">:child</span><span class=\"p\">]</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:children</span><span class=\"p\">,</span> <span class=\"ss\">class_name: </span><span class=\"s2\">\"Comment\"</span><span class=\"p\">,</span> <span class=\"ss\">foreign_key: :parent_id</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># ... FROM comments LEFT OUTER JOIN comments children ON ... WHERE children.label = 1</span>\n<span class=\"no\">Comment</span><span class=\"p\">.</span><span class=\"nf\">includes</span><span class=\"p\">(</span><span class=\"ss\">:children</span><span class=\"p\">).</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"s2\">\"children.label\"</span><span class=\"p\">:</span> <span class=\"s2\">\"child\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Support storing demodulized class name for polymorphic type.\n\n    Before Rails 6.1, storing demodulized class name is supported only for STI type\n    by `store_full_sti_class` class attribute.\n\n    Now `store_full_class_name` class attribute can handle both STI and polymorphic types.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1598248104000,
    "author": "Ryuta Kamizono",
    "sha": "62cfbdf36e79bc4d2a0556b628a55bcc403b18b4",
    "pr": "39685",
    "merge_sha": "2a29dde552853ebaeb08af017bc95c9e57f0472b",
    "html": "<p>Support storing demodulized class name for polymorphic type.</p>\n\n<p>Before Rails 6.1, storing demodulized class name is supported only for STI type<br />\nby <code>store_full_sti_class</code> class attribute.</p>\n\n<p>Now <code>store_full_class_name</code> class attribute can handle both STI and polymorphic types.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Deprecate `rails db:structure:{load, dump}` tasks and extend\n    `rails db:schema:{load, dump}` tasks to work with either `:ruby` or `:sql` format,\n    depending on `config.active_record.schema_format` configuration value.\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1597753894000,
    "author": "fatkodima",
    "sha": "5488686851978c64346a0c03d2b6541cf2a94879",
    "pr": "39470",
    "merge_sha": "161fc87fbf8d0efee2cadc11199fbb4d183ce712",
    "html": "<p>Deprecate <code>rails db:structure:{load, dump}</code> tasks and extend<br />\n<code>rails db:schema:{load, dump}</code> tasks to work with either <code>:ruby</code> or <code>:sql</code> format,<br />\ndepending on <code>config.active_record.schema_format</code> configuration value.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Respect the `select` values for eager loading.\n\n    ```ruby\n    post = Post.select(\"UPPER(title) AS title\").first\n    post.title # => \"WELCOME TO THE WEBLOG\"\n    post.body  # => ActiveModel::MissingAttributeError\n\n    # Rails 6.0 (ignore the `select` values)\n    post = Post.select(\"UPPER(title) AS title\").eager_load(:comments).first\n    post.title # => \"Welcome to the weblog\"\n    post.body  # => \"Such a lovely day\"\n\n    # Rails 6.1 (respect the `select` values)\n    post = Post.select(\"UPPER(title) AS title\").eager_load(:comments).first\n    post.title # => \"WELCOME TO THE WEBLOG\"\n    post.body  # => ActiveModel::MissingAttributeError\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1597642472000,
    "author": "Ryuta Kamizono",
    "sha": "46393182158e5159be64349684be1716944ecc4e",
    "pr": "39999",
    "merge_sha": "9078abc0b8ce1739cdd5a410c084038312e55126",
    "html": "<p>Respect the <code>select</code> values for eager loading.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">post</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">select</span><span class=\"p\">(</span><span class=\"s2\">\"UPPER(title) AS title\"</span><span class=\"p\">).</span><span class=\"nf\">first</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">title</span> <span class=\"c1\"># =&gt; \"WELCOME TO THE WEBLOG\"</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">body</span>  <span class=\"c1\"># =&gt; ActiveModel::MissingAttributeError</span>\n\n<span class=\"c1\"># Rails 6.0 (ignore the `select` values)</span>\n<span class=\"n\">post</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">select</span><span class=\"p\">(</span><span class=\"s2\">\"UPPER(title) AS title\"</span><span class=\"p\">).</span><span class=\"nf\">eager_load</span><span class=\"p\">(</span><span class=\"ss\">:comments</span><span class=\"p\">).</span><span class=\"nf\">first</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">title</span> <span class=\"c1\"># =&gt; \"Welcome to the weblog\"</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">body</span>  <span class=\"c1\"># =&gt; \"Such a lovely day\"</span>\n\n<span class=\"c1\"># Rails 6.1 (respect the `select` values)</span>\n<span class=\"n\">post</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">select</span><span class=\"p\">(</span><span class=\"s2\">\"UPPER(title) AS title\"</span><span class=\"p\">).</span><span class=\"nf\">eager_load</span><span class=\"p\">(</span><span class=\"ss\">:comments</span><span class=\"p\">).</span><span class=\"nf\">first</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">title</span> <span class=\"c1\"># =&gt; \"WELCOME TO THE WEBLOG\"</span>\n<span class=\"n\">post</span><span class=\"p\">.</span><span class=\"nf\">body</span>  <span class=\"c1\"># =&gt; ActiveModel::MissingAttributeError</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Allow attribute's default to be configured but keeping its own type.\n\n    ```ruby\n    class Post < ActiveRecord::Base\n      attribute :written_at, default: -> { Time.now.utc }\n    end\n\n    # Rails 6.0\n    Post.type_for_attribute(:written_at) # => #<Type::Value ... precision: nil, ...>\n\n    # Rails 6.1\n    Post.type_for_attribute(:written_at) # => #<Type::DateTime ... precision: 6, ...>\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1594679673000,
    "author": "Ryuta Kamizono",
    "sha": "8c793aa88b9d116f7d17eec23f4038e1f60a8dfb",
    "pr": "39830",
    "merge_sha": "b6081f36347f563fa6eec4b4edd15bf4f76ddea4",
    "html": "<p>Allow attribute’s default to be configured but keeping its own type.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Post</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">attribute</span> <span class=\"ss\">:written_at</span><span class=\"p\">,</span> <span class=\"ss\">default: </span><span class=\"o\">-&gt;</span> <span class=\"p\">{</span> <span class=\"no\">Time</span><span class=\"p\">.</span><span class=\"nf\">now</span><span class=\"p\">.</span><span class=\"nf\">utc</span> <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># Rails 6.0</span>\n<span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">type_for_attribute</span><span class=\"p\">(</span><span class=\"ss\">:written_at</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; #&lt;Type::Value ... precision: nil, ...&gt;</span>\n\n<span class=\"c1\"># Rails 6.1</span>\n<span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">type_for_attribute</span><span class=\"p\">(</span><span class=\"ss\">:written_at</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; #&lt;Type::DateTime ... precision: 6, ...&gt;</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Allow default to be configured for Enum.\n\n    ```ruby\n    class Book < ActiveRecord::Base\n      enum status: [:proposed, :written, :published], _default: :published\n    end\n\n    Book.new.status # => \"published\"\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1594653377000,
    "author": "Ryuta Kamizono",
    "sha": "2d98240c060bc57a1cbd4fd00d0307194550f77b",
    "pr": "39820",
    "merge_sha": "04fe959b678467022b4dbcf984924bc02e0cf513",
    "html": "<p>Allow default to be configured for Enum.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Book</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">enum</span> <span class=\"ss\">status: </span><span class=\"p\">[</span><span class=\"ss\">:proposed</span><span class=\"p\">,</span> <span class=\"ss\">:written</span><span class=\"p\">,</span> <span class=\"ss\">:published</span><span class=\"p\">],</span> <span class=\"ss\">_default: :published</span>\n<span class=\"k\">end</span>\n\n<span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">.</span><span class=\"nf\">status</span> <span class=\"c1\"># =&gt; \"published\"</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Deprecate YAML loading from legacy format older than Rails 5.0.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1592231376000,
    "author": "Ryuta Kamizono",
    "sha": "cccf6c31b8ec2053d0fd536217b623c92d903c6f",
    "pr": "39630",
    "merge_sha": "9a076f449a57b371c067d25cf3ce7901e545064c",
    "html": "<p>Deprecate YAML loading from legacy format older than Rails 5.0.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Added the setting `ActiveRecord::Base.immutable_strings_by_default`, which\n    allows you to specify that all string columns should be frozen unless\n    otherwise specified. This will reduce memory pressure for applications which\n    do not generally mutate string properties of Active Record objects.\n\n    *Sean Griffin*, *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1592031102000,
    "author": "Sean Griffin",
    "sha": "332c3364b62906399d1df117bd27d3bc6801a33a",
    "pr": "39599",
    "merge_sha": "00c2d3e1e61093451a00b1b70548cfd9ae549c53",
    "html": "<p>Added the setting <code>ActiveRecord::Base.immutable_strings_by_default</code>, which<br />\nallows you to specify that all string columns should be frozen unless<br />\notherwise specified. This will reduce memory pressure for applications which<br />\ndo not generally mutate string properties of Active Record objects.</p>\n\n<p><em>Sean Griffin</em>, <em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Deprecate `map!` and `collect!` on `ActiveRecord::Result`.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1591776697000,
    "author": "Ryuta Kamizono",
    "sha": "ef361eacb4fc46d5c6d6b1d94c67fd2e79a80034",
    "pr": "39589",
    "merge_sha": "59c39f214c03ac172895c3f6e08afe96c42646ca",
    "html": "<p>Deprecate <code>map!</code> and <code>collect!</code> on <code>ActiveRecord::Result</code>.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Support `relation.and` for intersection as Set theory.\n\n    ```ruby\n    david_and_mary = Author.where(id: [david, mary])\n    mary_and_bob   = Author.where(id: [mary, bob])\n\n    david_and_mary.merge(mary_and_bob) # => [mary, bob]\n\n    david_and_mary.and(mary_and_bob) # => [mary]\n    david_and_mary.or(mary_and_bob)  # => [david, mary, bob]\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1591501788000,
    "author": "Ryuta Kamizono",
    "sha": "7219eb2cd21ac9c9c985fbf98dbfd30d79bfff1b",
    "pr": "39558",
    "merge_sha": "f4baf0f7e2b626dfc3d25849403052b709fa4f81",
    "html": "<p>Support <code>relation.and</code> for intersection as Set theory.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">david_and_mary</span> <span class=\"o\">=</span> <span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"n\">david</span><span class=\"p\">,</span> <span class=\"n\">mary</span><span class=\"p\">])</span>\n<span class=\"n\">mary_and_bob</span>   <span class=\"o\">=</span> <span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"n\">mary</span><span class=\"p\">,</span> <span class=\"n\">bob</span><span class=\"p\">])</span>\n\n<span class=\"n\">david_and_mary</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"n\">mary_and_bob</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [mary, bob]</span>\n\n<span class=\"n\">david_and_mary</span><span class=\"p\">.</span><span class=\"nf\">and</span><span class=\"p\">(</span><span class=\"n\">mary_and_bob</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [mary]</span>\n<span class=\"n\">david_and_mary</span><span class=\"p\">.</span><span class=\"nf\">or</span><span class=\"p\">(</span><span class=\"n\">mary_and_bob</span><span class=\"p\">)</span>  <span class=\"c1\"># =&gt; [david, mary, bob]</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Merging conditions on the same column no longer maintain both conditions,\n    and will be consistently replaced by the latter condition in Rails 7.0.\n    To migrate to Rails 7.0's behavior, use `relation.merge(other, rewhere: true)`.\n\n    ```ruby\n    # Rails 6.1 (IN clause is replaced by merger side equality condition)\n    Author.where(id: [david.id, mary.id]).merge(Author.where(id: bob)) # => [bob]\n\n    # Rails 6.1 (both conflict conditions exists, deprecated)\n    Author.where(id: david.id..mary.id).merge(Author.where(id: bob)) # => []\n\n    # Rails 6.1 with rewhere to migrate to Rails 7.0's behavior\n    Author.where(id: david.id..mary.id).merge(Author.where(id: bob), rewhere: true) # => [bob]\n\n    # Rails 7.0 (same behavior with IN clause, mergee side condition is consistently replaced)\n    Author.where(id: [david.id, mary.id]).merge(Author.where(id: bob)) # => [bob]\n    Author.where(id: david.id..mary.id).merge(Author.where(id: bob)) # => [bob]\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1591486398000,
    "author": "Ryuta Kamizono",
    "sha": "930bfb9393b6796558a5d1fdb515b6ded9e69ac0",
    "pr": "39328",
    "merge_sha": "159cc3421ce1963cb10e98920b621fb327fd87a6",
    "html": "<p>Merging conditions on the same column no longer maintain both conditions,<br />\nand will be consistently replaced by the latter condition in Rails 7.0.<br />\nTo migrate to Rails 7.0’s behavior, use <code>relation.merge(other, rewhere: true)</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Rails 6.1 (IN clause is replaced by merger side equality condition)</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">,</span> <span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">]).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n\n<span class=\"c1\"># Rails 6.1 (both conflict conditions exists, deprecated)</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; []</span>\n\n<span class=\"c1\"># Rails 6.1 with rewhere to migrate to Rails 7.0's behavior</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">),</span> <span class=\"ss\">rewhere: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [bob]</span>\n\n<span class=\"c1\"># Rails 7.0 (same behavior with IN clause, mergee side condition is consistently replaced)</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">,</span> <span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">]).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n<span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">).</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Do not mark Postgresql MAC address and UUID attributes as changed when the assigned value only varies by case.\n\n    *Peter Fry*",
    "project": "activerecord",
    "date_merged": 1591216573000,
    "author": "Peter Fry",
    "sha": "37f3b4dc05288f94b73f44fc9fa0d0176d179a02",
    "pr": "38867",
    "merge_sha": "5fdf76f8fd585bdd8ba6a5d9a6132b673b8b205f",
    "html": "<p>Do not mark Postgresql MAC address and UUID attributes as changed when the assigned value only varies by case.</p>\n\n<p><em>Peter Fry</em></p>\n"
  },
  {
    "message": "*   Resolve issue with insert_all unique_by option when used with expression index.\n\n    When the `:unique_by` option of `ActiveRecord::Persistence.insert_all` and\n    `ActiveRecord::Persistence.upsert_all` was used with the name of an expression index, an error\n    was raised. Adding a guard around the formatting behavior for the `:unique_by` corrects this.\n\n    Usage:\n\n    ```ruby\n    create_table :books, id: :integer, force: true do |t|\n      t.column :name, :string\n      t.index \"lower(name)\", unique: true\n    end\n\n    Book.insert_all [{ name: \"MyTest\" }], unique_by: :index_books_on_lower_name\n    ```\n\n    Fixes #39516.\n\n    *Austen Madden*",
    "project": "activerecord",
    "date_merged": 1591195204000,
    "author": "Austen Madden",
    "sha": "3315cc76e03f651864383c07f6cd8f5c4d840d0a",
    "pr": "39517",
    "merge_sha": "8717744c56c4c707a3c46e8bb0192f38ad9634fc",
    "html": "<p>Resolve issue with insert_all unique_by option when used with expression index.</p>\n\n<p>When the <code>:unique_by</code> option of <code>ActiveRecord::Persistence.insert_all</code> and<br />\n<code>ActiveRecord::Persistence.upsert_all</code> was used with the name of an expression index, an error<br />\nwas raised. Adding a guard around the formatting behavior for the <code>:unique_by</code> corrects this.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">create_table</span> <span class=\"ss\">:books</span><span class=\"p\">,</span> <span class=\"ss\">id: :integer</span><span class=\"p\">,</span> <span class=\"ss\">force: </span><span class=\"kp\">true</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n  <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">column</span> <span class=\"ss\">:name</span><span class=\"p\">,</span> <span class=\"ss\">:string</span>\n  <span class=\"n\">t</span><span class=\"p\">.</span><span class=\"nf\">index</span> <span class=\"s2\">\"lower(name)\"</span><span class=\"p\">,</span> <span class=\"ss\">unique: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n\n<span class=\"no\">Book</span><span class=\"p\">.</span><span class=\"nf\">insert_all</span> <span class=\"p\">[{</span> <span class=\"ss\">name: </span><span class=\"s2\">\"MyTest\"</span> <span class=\"p\">}],</span> <span class=\"ss\">unique_by: :index_books_on_lower_name</span>\n</code></pre></div></div>\n\n<p>Fixes #39516.</p>\n\n<p><em>Austen Madden</em></p>\n"
  },
  {
    "message": "*   Add basic support for CHECK constraints to database migrations.\n\n    Usage:\n\n    ```ruby\n    add_check_constraint :products, \"price > 0\", name: \"price_check\"\n    remove_check_constraint :products, name: \"price_check\"\n    ```\n\n    *fatkodima*",
    "project": "activerecord",
    "date_merged": 1591176394000,
    "author": "fatkodima",
    "sha": "1944a7e74c6c1b7a6234414a00d294412c05fde1",
    "pr": "39505",
    "merge_sha": "b93608c059a4303d2d372af2cfab6a759b8b9dcb",
    "html": "<p>Add basic support for CHECK constraints to database migrations.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">add_check_constraint</span> <span class=\"ss\">:products</span><span class=\"p\">,</span> <span class=\"s2\">\"price &gt; 0\"</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"s2\">\"price_check\"</span>\n<span class=\"n\">remove_check_constraint</span> <span class=\"ss\">:products</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"s2\">\"price_check\"</span>\n</code></pre></div></div>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Base.strict_loading_by_default` and `ActiveRecord::Base.strict_loading_by_default=`\n    to enable/disable strict_loading mode by default for a model. The configuration's value is\n    inheritable by subclasses, but they can override that value and it will not impact parent class.\n\n    Usage:\n\n    ```ruby\n    class Developer < ApplicationRecord\n      self.strict_loading_by_default = true\n\n      has_many :projects\n    end\n\n    dev = Developer.first\n    dev.projects.first\n    # => ActiveRecord::StrictLoadingViolationError Exception: Developer is marked as strict_loading and Project cannot be lazily loaded.\n    ```\n\n    *bogdanvlviv*",
    "project": "activerecord",
    "date_merged": 1591014813000,
    "author": "bogdanvlviv",
    "sha": "69bf870c50d14bb8c18142242cf93f4102cc13dc",
    "pr": "39491",
    "merge_sha": "0267f18aca10804ff6baec938a0f2663945dd25f",
    "html": "<p>Add <code>ActiveRecord::Base.strict_loading_by_default</code> and <code>ActiveRecord::Base.strict_loading_by_default=</code><br />\nto enable/disable strict_loading mode by default for a model. The configuration’s value is<br />\ninheritable by subclasses, but they can override that value and it will not impact parent class.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Developer</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"nf\">strict_loading_by_default</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n\n  <span class=\"n\">has_many</span> <span class=\"ss\">:projects</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">dev</span> <span class=\"o\">=</span> <span class=\"no\">Developer</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"n\">dev</span><span class=\"p\">.</span><span class=\"nf\">projects</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"c1\"># =&gt; ActiveRecord::StrictLoadingViolationError Exception: Developer is marked as strict_loading and Project cannot be lazily loaded.</span>\n</code></pre></div></div>\n\n<p><em>bogdanvlviv</em></p>\n"
  },
  {
    "message": "*   Deprecate passing an Active Record object to `quote`/`type_cast` directly.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1591002600000,
    "author": "Ryuta Kamizono",
    "sha": "87886c93dc22d528d8529d8b63873f699beaf695",
    "pr": "39489",
    "merge_sha": "926b3eab801d7d42112bbc43d88696629d343909",
    "html": "<p>Deprecate passing an Active Record object to <code>quote</code>/<code>type_cast</code> directly.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Default engine `ENGINE=InnoDB` is no longer dumped to make schema more agnostic.\n\n    Before:\n\n    ```ruby\n    create_table \"accounts\", options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\", force: :cascade do |t|\n    end\n    ```\n\n    After:\n\n    ```ruby\n    create_table \"accounts\", charset: \"utf8mb4\", collation: \"utf8mb4_0900_ai_ci\", force: :cascade do |t|\n    end\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1590280067000,
    "author": "Ryuta Kamizono",
    "sha": "3c6be5e502e203be17373f30336d59a7511ef31b",
    "pr": "39365",
    "merge_sha": "e7317a253819b917a3e2284e53347c67246a934e",
    "html": "<p>Default engine <code>ENGINE=InnoDB</code> is no longer dumped to make schema more agnostic.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">create_table</span> <span class=\"s2\">\"accounts\"</span><span class=\"p\">,</span> <span class=\"ss\">options: </span><span class=\"s2\">\"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\"</span><span class=\"p\">,</span> <span class=\"ss\">force: :cascade</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">create_table</span> <span class=\"s2\">\"accounts\"</span><span class=\"p\">,</span> <span class=\"ss\">charset: </span><span class=\"s2\">\"utf8mb4\"</span><span class=\"p\">,</span> <span class=\"ss\">collation: </span><span class=\"s2\">\"utf8mb4_0900_ai_ci\"</span><span class=\"p\">,</span> <span class=\"ss\">force: :cascade</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">t</span><span class=\"o\">|</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Added delegated type as an alternative to single-table inheritance for representing class hierarchies.\n    See ActiveRecord::DelegatedType for the full description.\n\n    *DHH*",
    "project": "activerecord",
    "date_merged": 1590276044000,
    "author": "David Heinemeier Hansson",
    "sha": "fd8fd4ae76b9ecaf9c049ee1295abc093398ab01",
    "pr": "39341",
    "merge_sha": "c9551fbaf19c5bf18d7ec6877926b4e7f8488434",
    "html": "<p>Added delegated type as an alternative to single-table inheritance for representing class hierarchies.<br />\nSee ActiveRecord::DelegatedType for the full description.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Deprecate aggregations with group by duplicated fields.\n\n    To migrate to Rails 7.0's behavior, use `uniq!(:group)` to deduplicate group fields.\n\n    ```ruby\n    accounts = Account.group(:firm_id)\n\n    # duplicated group fields, deprecated.\n    accounts.merge(accounts.where.not(credit_limit: nil)).sum(:credit_limit)\n    # => {\n    #   [1, 1] => 50,\n    #   [2, 2] => 60\n    # }\n\n    # use `uniq!(:group)` to deduplicate group fields.\n    accounts.merge(accounts.where.not(credit_limit: nil)).uniq!(:group).sum(:credit_limit)\n    # => {\n    #   1 => 50,\n    #   2 => 60\n    # }\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1590259949000,
    "author": "Ryuta Kamizono",
    "sha": "2580b83f424678d91d2d6cf38205521dd7eb4b0a",
    "pr": "39358",
    "merge_sha": "35813645b19378e5fd4a2c030b0d336ec504c686",
    "html": "<p>Deprecate aggregations with group by duplicated fields.</p>\n\n<p>To migrate to Rails 7.0’s behavior, use <code>uniq!(:group)</code> to deduplicate group fields.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">accounts</span> <span class=\"o\">=</span> <span class=\"no\">Account</span><span class=\"p\">.</span><span class=\"nf\">group</span><span class=\"p\">(</span><span class=\"ss\">:firm_id</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># duplicated group fields, deprecated.</span>\n<span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">.</span><span class=\"nf\">not</span><span class=\"p\">(</span><span class=\"ss\">credit_limit: </span><span class=\"kp\">nil</span><span class=\"p\">)).</span><span class=\"nf\">sum</span><span class=\"p\">(</span><span class=\"ss\">:credit_limit</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt; {</span>\n<span class=\"c1\">#   [1, 1] =&gt; 50,</span>\n<span class=\"c1\">#   [2, 2] =&gt; 60</span>\n<span class=\"c1\"># }</span>\n\n<span class=\"c1\"># use `uniq!(:group)` to deduplicate group fields.</span>\n<span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">.</span><span class=\"nf\">not</span><span class=\"p\">(</span><span class=\"ss\">credit_limit: </span><span class=\"kp\">nil</span><span class=\"p\">)).</span><span class=\"nf\">uniq!</span><span class=\"p\">(</span><span class=\"ss\">:group</span><span class=\"p\">).</span><span class=\"nf\">sum</span><span class=\"p\">(</span><span class=\"ss\">:credit_limit</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt; {</span>\n<span class=\"c1\">#   1 =&gt; 50,</span>\n<span class=\"c1\">#   2 =&gt; 60</span>\n<span class=\"c1\"># }</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Deprecate duplicated query annotations.\n\n    To migrate to Rails 7.0's behavior, use `uniq!(:annotate)` to deduplicate query annotations.\n\n    ```ruby\n    accounts = Account.where(id: [1, 2]).annotate(\"david and mary\")\n\n    # duplicated annotations, deprecated.\n    accounts.merge(accounts.rewhere(id: 3))\n    # SELECT accounts.* FROM accounts WHERE accounts.id = 3 /* david and mary */ /* david and mary */\n\n    # use `uniq!(:annotate)` to deduplicate annotations.\n    accounts.merge(accounts.rewhere(id: 3)).uniq!(:annotate)\n    # SELECT accounts.* FROM accounts WHERE accounts.id = 3 /* david and mary */\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1590259949000,
    "author": "Ryuta Kamizono",
    "sha": "2580b83f424678d91d2d6cf38205521dd7eb4b0a",
    "pr": "39358",
    "merge_sha": "35813645b19378e5fd4a2c030b0d336ec504c686",
    "html": "<p>Deprecate duplicated query annotations.</p>\n\n<p>To migrate to Rails 7.0’s behavior, use <code>uniq!(:annotate)</code> to deduplicate query annotations.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">accounts</span> <span class=\"o\">=</span> <span class=\"no\">Account</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">]).</span><span class=\"nf\">annotate</span><span class=\"p\">(</span><span class=\"s2\">\"david and mary\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># duplicated annotations, deprecated.</span>\n<span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">rewhere</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"mi\">3</span><span class=\"p\">))</span>\n<span class=\"c1\"># SELECT accounts.* FROM accounts WHERE accounts.id = 3 /* david and mary */ /* david and mary */</span>\n\n<span class=\"c1\"># use `uniq!(:annotate)` to deduplicate annotations.</span>\n<span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"n\">accounts</span><span class=\"p\">.</span><span class=\"nf\">rewhere</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"mi\">3</span><span class=\"p\">)).</span><span class=\"nf\">uniq!</span><span class=\"p\">(</span><span class=\"ss\">:annotate</span><span class=\"p\">)</span>\n<span class=\"c1\"># SELECT accounts.* FROM accounts WHERE accounts.id = 3 /* david and mary */</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Resolve conflict between counter cache and optimistic locking.\n\n    Bump an Active Record instance's lock version after updating its counter\n    cache. This avoids raising an unnecessary `ActiveRecord::StaleObjectError`\n    upon subsequent transactions by maintaining parity with the corresponding\n    database record's `lock_version` column.\n\n    Fixes #16449.\n\n    *Aaron Lipman*",
    "project": "activerecord",
    "date_merged": 1589937161000,
    "author": "Aaron Lipman",
    "sha": "cb554457a933fe18e73b4edcde57d22ca7dd54b5",
    "pr": "39316",
    "merge_sha": "f6a94aff2ee4c2e6bf8dfb9ee8a29ad03578c573",
    "html": "<p>Resolve conflict between counter cache and optimistic locking.</p>\n\n<p>Bump an Active Record instance’s lock version after updating its counter<br />\ncache. This avoids raising an unnecessary <code>ActiveRecord::StaleObjectError</code><br />\nupon subsequent transactions by maintaining parity with the corresponding<br />\ndatabase record’s <code>lock_version</code> column.</p>\n\n<p>Fixes #16449.</p>\n\n<p><em>Aaron Lipman</em></p>\n"
  },
  {
    "message": "*   Support merging option `:rewhere` to allow mergee side condition to be replaced exactly.\n\n    ```ruby\n    david_and_mary = Author.where(id: david.id..mary.id)\n\n    # both conflict conditions exists\n    david_and_mary.merge(Author.where(id: bob)) # => []\n\n    # mergee side condition is replaced by rewhere\n    david_and_mary.merge(Author.rewhere(id: bob)) # => [bob]\n\n    # mergee side condition is replaced by rewhere option\n    david_and_mary.merge(Author.where(id: bob), rewhere: true) # => [bob]\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1589781378000,
    "author": "Ryuta Kamizono",
    "sha": "f6fb3271d4c833520e50d55ecc7b693493142f27",
    "pr": "39250",
    "merge_sha": "972f22e42ab7eb58ed9d4feec6ffce6acf3f3319",
    "html": "<p>Support merging option <code>:rewhere</code> to allow mergee side condition to be replaced exactly.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">david_and_mary</span> <span class=\"o\">=</span> <span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">david</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"o\">..</span><span class=\"n\">mary</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># both conflict conditions exists</span>\n<span class=\"n\">david_and_mary</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; []</span>\n\n<span class=\"c1\"># mergee side condition is replaced by rewhere</span>\n<span class=\"n\">david_and_mary</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">rewhere</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">))</span> <span class=\"c1\"># =&gt; [bob]</span>\n\n<span class=\"c1\"># mergee side condition is replaced by rewhere option</span>\n<span class=\"n\">david_and_mary</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">id: </span><span class=\"n\">bob</span><span class=\"p\">),</span> <span class=\"ss\">rewhere: </span><span class=\"kp\">true</span><span class=\"p\">)</span> <span class=\"c1\"># =&gt; [bob]</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Add support for finding records based on signed ids, which are tamper-proof, verified ids that can be\n    set to expire and scoped with a purpose. This is particularly useful for things like password reset\n    or email verification, where you want the bearer of the signed id to be able to interact with the\n    underlying record, but usually only within a certain time period.\n\n    ```ruby\n    signed_id = User.first.signed_id expires_in: 15.minutes, purpose: :password_reset\n\n    User.find_signed signed_id # => nil, since the purpose does not match\n\n    travel 16.minutes\n    User.find_signed signed_id, purpose: :password_reset # => nil, since the signed id has expired\n\n    travel_back\n    User.find_signed signed_id, purpose: :password_reset # => User.first\n\n    User.find_signed! \"bad data\" # => ActiveSupport::MessageVerifier::InvalidSignature\n    ```\n\n    *DHH*",
    "project": "activerecord",
    "date_merged": 1589751912000,
    "author": "David Heinemeier Hansson",
    "sha": "1a3dc42c172863fc2db24e9813203d2e793a9e2a",
    "pr": "39313",
    "merge_sha": "a061d9012f9b63c43468203229f52140d34a8d0d",
    "html": "<p>Add support for finding records based on signed ids, which are tamper-proof, verified ids that can be<br />\nset to expire and scoped with a purpose. This is particularly useful for things like password reset<br />\nor email verification, where you want the bearer of the signed id to be able to interact with the<br />\nunderlying record, but usually only within a certain time period.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">signed_id</span> <span class=\"o\">=</span> <span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">first</span><span class=\"p\">.</span><span class=\"nf\">signed_id</span> <span class=\"ss\">expires_in: </span><span class=\"mi\">15</span><span class=\"p\">.</span><span class=\"nf\">minutes</span><span class=\"p\">,</span> <span class=\"ss\">purpose: :password_reset</span>\n\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">find_signed</span> <span class=\"n\">signed_id</span> <span class=\"c1\"># =&gt; nil, since the purpose does not match</span>\n\n<span class=\"n\">travel</span> <span class=\"mi\">16</span><span class=\"p\">.</span><span class=\"nf\">minutes</span>\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">find_signed</span> <span class=\"n\">signed_id</span><span class=\"p\">,</span> <span class=\"ss\">purpose: :password_reset</span> <span class=\"c1\"># =&gt; nil, since the signed id has expired</span>\n\n<span class=\"n\">travel_back</span>\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">find_signed</span> <span class=\"n\">signed_id</span><span class=\"p\">,</span> <span class=\"ss\">purpose: :password_reset</span> <span class=\"c1\"># =&gt; User.first</span>\n\n<span class=\"no\">User</span><span class=\"p\">.</span><span class=\"nf\">find_signed!</span> <span class=\"s2\">\"bad data\"</span> <span class=\"c1\"># =&gt; ActiveSupport::MessageVerifier::InvalidSignature</span>\n</code></pre></div></div>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Support `ALGORITHM = INSTANT` DDL option for index operations on MySQL.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1589093806000,
    "author": "Ryuta Kamizono",
    "sha": "11f420478c9af1a330fd87dc382506336b6ea2b5",
    "pr": "39211",
    "merge_sha": "1f1ab896197021ac88fe58658e1e674286e1db70",
    "html": "<p>Support <code>ALGORITHM = INSTANT</code> DDL option for index operations on MySQL.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix index creation to preserve index comment in bulk change table on MySQL.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1589044866000,
    "author": "Ryuta Kamizono",
    "sha": "fc7eab048b9d7c5283b6cf99b239d50a486337ac",
    "pr": "39203",
    "merge_sha": "0ce1c2ab31d23d4ef5639bab84fff202a619c484",
    "html": "<p>Fix index creation to preserve index comment in bulk change table on MySQL.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Allow `unscope` to be aware of table name qualified values.\n\n    It is possible to unscope only the column in the specified table.\n\n    ```ruby\n    posts = Post.joins(:comments).group(:\"posts.hidden\")\n    posts = posts.where(\"posts.hidden\": false, \"comments.hidden\": false)\n\n    posts.count\n    # => { false => 10 }\n\n    # unscope both hidden columns\n    posts.unscope(where: :hidden).count\n    # => { false => 11, true => 1 }\n\n    # unscope only comments.hidden column\n    posts.unscope(where: :\"comments.hidden\").count\n    # => { false => 11 }\n    ```\n\n    *Ryuta Kamizono*, *Slava Korolev*",
    "project": "activerecord",
    "date_merged": 1588818491000,
    "author": "Ryuta Kamizono",
    "sha": "5136277f44b3bd62d676a08d8542e0980590a31c",
    "pr": "39172",
    "merge_sha": "b385afc5f67d284838444e13be0c38ad87c2feaf",
    "html": "<p>Allow <code>unscope</code> to be aware of table name qualified values.</p>\n\n<p>It is possible to unscope only the column in the specified table.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">posts</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">joins</span><span class=\"p\">(</span><span class=\"ss\">:comments</span><span class=\"p\">).</span><span class=\"nf\">group</span><span class=\"p\">(</span><span class=\"ss\">:\"posts.hidden\"</span><span class=\"p\">)</span>\n<span class=\"n\">posts</span> <span class=\"o\">=</span> <span class=\"n\">posts</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"s2\">\"posts.hidden\"</span><span class=\"p\">:</span> <span class=\"kp\">false</span><span class=\"p\">,</span> <span class=\"s2\">\"comments.hidden\"</span><span class=\"p\">:</span> <span class=\"kp\">false</span><span class=\"p\">)</span>\n\n<span class=\"n\">posts</span><span class=\"p\">.</span><span class=\"nf\">count</span>\n<span class=\"c1\"># =&gt; { false =&gt; 10 }</span>\n\n<span class=\"c1\"># unscope both hidden columns</span>\n<span class=\"n\">posts</span><span class=\"p\">.</span><span class=\"nf\">unscope</span><span class=\"p\">(</span><span class=\"ss\">where: :hidden</span><span class=\"p\">).</span><span class=\"nf\">count</span>\n<span class=\"c1\"># =&gt; { false =&gt; 11, true =&gt; 1 }</span>\n\n<span class=\"c1\"># unscope only comments.hidden column</span>\n<span class=\"n\">posts</span><span class=\"p\">.</span><span class=\"nf\">unscope</span><span class=\"p\">(</span><span class=\"ss\">where: :\"comments.hidden\"</span><span class=\"p\">).</span><span class=\"nf\">count</span>\n<span class=\"c1\"># =&gt; { false =&gt; 11 }</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em>, <em>Slava Korolev</em></p>\n"
  },
  {
    "message": "*   Fix `rewhere` to truly overwrite collided where clause by new where clause.\n\n    ```ruby\n    steve = Person.find_by(name: \"Steve\")\n    david = Author.find_by(name: \"David\")\n\n    relation = Essay.where(writer: steve)\n\n    # Before\n    relation.rewhere(writer: david).to_a # => []\n\n    # After\n    relation.rewhere(writer: david).to_a # => [david]\n    ```\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1588647876000,
    "author": "Ryuta Kamizono",
    "sha": "6187b7138cc4d15d8a7cc61f75539bef7d398066",
    "pr": "39141",
    "merge_sha": "f3382bfb880df313296ff49ef3388c6bf96b4252",
    "html": "<p>Fix <code>rewhere</code> to truly overwrite collided where clause by new where clause.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">steve</span> <span class=\"o\">=</span> <span class=\"no\">Person</span><span class=\"p\">.</span><span class=\"nf\">find_by</span><span class=\"p\">(</span><span class=\"ss\">name: </span><span class=\"s2\">\"Steve\"</span><span class=\"p\">)</span>\n<span class=\"n\">david</span> <span class=\"o\">=</span> <span class=\"no\">Author</span><span class=\"p\">.</span><span class=\"nf\">find_by</span><span class=\"p\">(</span><span class=\"ss\">name: </span><span class=\"s2\">\"David\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">relation</span> <span class=\"o\">=</span> <span class=\"no\">Essay</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">writer: </span><span class=\"n\">steve</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Before</span>\n<span class=\"n\">relation</span><span class=\"p\">.</span><span class=\"nf\">rewhere</span><span class=\"p\">(</span><span class=\"ss\">writer: </span><span class=\"n\">david</span><span class=\"p\">).</span><span class=\"nf\">to_a</span> <span class=\"c1\"># =&gt; []</span>\n\n<span class=\"c1\"># After</span>\n<span class=\"n\">relation</span><span class=\"p\">.</span><span class=\"nf\">rewhere</span><span class=\"p\">(</span><span class=\"ss\">writer: </span><span class=\"n\">david</span><span class=\"p\">).</span><span class=\"nf\">to_a</span> <span class=\"c1\"># =&gt; [david]</span>\n</code></pre></div></div>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Inspect time attributes with subsec and time zone offset.\n\n    ```ruby\n    p Knot.create\n    => #<Knot id: 1, created_at: \"2016-05-05 01:29:47.116928000 +0000\">\n    ```\n\n    *akinomaeni*, *Jonathan Hefner*",
    "project": "activerecord",
    "date_merged": 1606948320000,
    "author": "Ryuta Kamizono",
    "sha": "439d725fd38137fbd5727b82b395e50b06053552",
    "pr": "40520",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Inspect time attributes with subsec and time zone offset.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">p</span> <span class=\"no\">Knot</span><span class=\"p\">.</span><span class=\"nf\">create</span>\n<span class=\"o\">=&gt;</span> <span class=\"c1\">#&lt;Knot id: 1, created_at: \"2016-05-05 01:29:47.116928000 +0000\"&gt;</span>\n</code></pre></div></div>\n\n<p><em>akinomaeni</em>, <em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Deprecate passing a column to `type_cast`.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1588399875000,
    "author": "Ryuta Kamizono",
    "sha": "92360e9ea3674c153adf2fa4c2cdcb6d9afd730b",
    "pr": "39106",
    "merge_sha": "cfa5aa7977c4c3c8e318df196d4dea54fb6b8802",
    "html": "<p>Deprecate passing a column to <code>type_cast</code>.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Deprecate `in_clause_length` and `allowed_index_name_length` in `DatabaseLimits`.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1588209893000,
    "author": "Ryuta Kamizono",
    "sha": "ab2d859e6c5430326a22a1328cc296c8cbae8727",
    "pr": "39083",
    "merge_sha": "e6ad2e4c05721b6a48d5271fff871979d3a0780e",
    "html": "<p>Deprecate <code>in_clause_length</code> and <code>allowed_index_name_length</code> in <code>DatabaseLimits</code>.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Support bulk insert/upsert on relation to preserve scope values.\n\n    *Josef Šimánek*, *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1587746834000,
    "author": "Ryuta Kamizono",
    "sha": "5cec7ce3cb2eaed0b03c5469b95fef182b604648",
    "pr": "38899",
    "merge_sha": "43d3b604651726ce8f018121a755732889c607ed",
    "html": "<p>Support bulk insert/upsert on relation to preserve scope values.</p>\n\n<p><em>Josef Šimánek</em>, <em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Preserve column comment value on changing column name on MySQL.\n\n    *Islam Taha*",
    "project": "activerecord",
    "date_merged": 1587372942000,
    "author": "Islam Taha",
    "sha": "c22cad96058561134f68f1b012934d73143194b7",
    "pr": "38995",
    "merge_sha": "2c03e17df972af36729102b5910a99fac1e0d90f",
    "html": "<p>Preserve column comment value on changing column name on MySQL.</p>\n\n<p><em>Islam Taha</em></p>\n"
  },
  {
    "message": "*   Add support for `if_exists` option for removing an index.\n\n    The `remove_index` method can take an `if_exists` option. If this is set to true an error won't be raised if the index doesn't exist.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1587059474000,
    "author": "eileencodes",
    "sha": "36ea1084fb77496a249fd0b90d647bc5394f2f32",
    "pr": "38967",
    "merge_sha": "130513d039e9855e0aeddd7a075650a644a10c1e",
    "html": "<p>Add support for <code>if_exists</code> option for removing an index.</p>\n\n<p>The <code>remove_index</code> method can take an <code>if_exists</code> option. If this is set to true an error won’t be raised if the index doesn’t exist.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Remove ibm_db, informix, mssql, oracle, and oracle12 Arel visitors which are not used in the code base.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1586944271000,
    "author": "Ryuta Kamizono",
    "sha": "a2040ee329569720c6148526f1262b2b0aaf6dce",
    "pr": "38946",
    "merge_sha": "943f1ea1eaf947bef853a1ec72d87eff8a7a0457",
    "html": "<p>Remove ibm_db, informix, mssql, oracle, and oracle12 Arel visitors which are not used in the code base.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Prevent `build_association` from `touching` a parent record if the record isn't persisted for `has_one` associations.\n\n    Fixes #38219.\n\n    *Josh Brody*",
    "project": "activerecord",
    "date_merged": 1586880500000,
    "author": "Josh",
    "sha": "ba3ef762fc00da2da77a43ed829d9894717f011c",
    "pr": "38942",
    "merge_sha": "3053e544f3ac627764572726a8756c95f9342c07",
    "html": "<p>Prevent <code>build_association</code> from <code>touching</code> a parent record if the record isn’t persisted for <code>has_one</code> associations.</p>\n\n<p>Fixes #38219.</p>\n\n<p><em>Josh Brody</em></p>\n"
  },
  {
    "message": "*   Add support for `if_not_exists` option for adding index.\n\n    The `add_index` method respects `if_not_exists` option. If it is set to true\n    index won't be added.\n\n    Usage:\n\n    ```ruby\n      add_index :users, :account_id, if_not_exists: true\n    ```\n\n    The `if_not_exists` option passed to `create_table` also gets propagated to indexes\n    created within that migration so that if table and its indexes exist then there is no\n    attempt to create them again.\n\n    *Prathamesh Sonpatki*",
    "project": "activerecord",
    "date_merged": 1585492218000,
    "author": "Prathamesh Sonpatki",
    "sha": "7ba08037f8d807cce2a25b0445743d07adfbe44c",
    "pr": null,
    "merge_sha": "975a4470665b1192b2f0a4453d8f3f506ce86a6b",
    "html": "<p>Add support for <code>if_not_exists</code> option for adding index.</p>\n\n<p>The <code>add_index</code> method respects <code>if_not_exists</code> option. If it is set to true<br />\nindex won’t be added.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>  <span class=\"n\">add_index</span> <span class=\"ss\">:users</span><span class=\"p\">,</span> <span class=\"ss\">:account_id</span><span class=\"p\">,</span> <span class=\"ss\">if_not_exists: </span><span class=\"kp\">true</span>\n</code></pre></div></div>\n\n<p>The <code>if_not_exists</code> option passed to <code>create_table</code> also gets propagated to indexes<br />\ncreated within that migration so that if table and its indexes exist then there is no<br />\nattempt to create them again.</p>\n\n<p><em>Prathamesh Sonpatki</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Base#previously_new_record?` to show if a record was new before the last save.\n\n    *Tom Ward*",
    "project": "activerecord",
    "date_merged": 1585422407000,
    "author": "Tom Ward",
    "sha": "2dbe1302a19e43ab4bfe753dfc7a4f5872093d30",
    "pr": "36276",
    "merge_sha": "af7d7b445f0ebf5d9d67e55d5f9501df20d7b598",
    "html": "<p>Add <code>ActiveRecord::Base#previously_new_record?</code> to show if a record was new before the last save.</p>\n\n<p><em>Tom Ward</em></p>\n"
  },
  {
    "message": "*   Support descending order for `find_each`, `find_in_batches`, and `in_batches`.\n\n    Batch processing methods allow you to work with the records in batches, greatly reducing memory consumption, but records are always batched from oldest id to newest.\n\n    This change allows reversing the order, batching from newest to oldest. This is useful when you need to process newer batches of records first.\n\n    Pass `order: :desc` to yield batches in descending order. The default remains `order: :asc`.\n\n    ```ruby\n    Person.find_each(order: :desc) do |person|\n      person.party_all_night!\n    end\n    ```\n\n    *Alexey Vasiliev*",
    "project": "activerecord",
    "date_merged": 1586968111000,
    "author": "Ryuta Kamizono",
    "sha": "6f2126c760e3ef8c21dcdf8e8fec466a0fdd88f1",
    "pr": "38959",
    "merge_sha": "9303873e57dd86a82ef69d58ed7e7af6bc7ed344",
    "html": "<p>Support descending order for <code>find_each</code>, <code>find_in_batches</code>, and <code>in_batches</code>.</p>\n\n<p>Batch processing methods allow you to work with the records in batches, greatly reducing memory consumption, but records are always batched from oldest id to newest.</p>\n\n<p>This change allows reversing the order, batching from newest to oldest. This is useful when you need to process newer batches of records first.</p>\n\n<p>Pass <code>order: :desc</code> to yield batches in descending order. The default remains <code>order: :asc</code>.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Person</span><span class=\"p\">.</span><span class=\"nf\">find_each</span><span class=\"p\">(</span><span class=\"ss\">order: :desc</span><span class=\"p\">)</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">person</span><span class=\"o\">|</span>\n  <span class=\"n\">person</span><span class=\"p\">.</span><span class=\"nf\">party_all_night!</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Alexey Vasiliev</em></p>\n"
  },
  {
    "message": "*   Fix `insert_all` with enum values.\n\n    Fixes #38716.\n\n    *Joel Blum*",
    "project": "activerecord",
    "date_merged": 1586968111000,
    "author": "Ryuta Kamizono",
    "sha": "6f2126c760e3ef8c21dcdf8e8fec466a0fdd88f1",
    "pr": "38959",
    "merge_sha": "9303873e57dd86a82ef69d58ed7e7af6bc7ed344",
    "html": "<p>Fix <code>insert_all</code> with enum values.</p>\n\n<p>Fixes #38716.</p>\n\n<p><em>Joel Blum</em></p>\n"
  },
  {
    "message": "*   Add support for `db:rollback:name` for multiple database applications.\n\n    Multiple database applications will now raise if `db:rollback` is call and recommend using the `db:rollback:[NAME]` to rollback migrations.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1584652610000,
    "author": "eileencodes",
    "sha": "e33075a0efce63658111ab35ce9a9103b8b0d9b4",
    "pr": "38770",
    "merge_sha": "8220cc9cbaf9e956e5bda4e8a1814b7e2193cd50",
    "html": "<p>Add support for <code>db:rollback:name</code> for multiple database applications.</p>\n\n<p>Multiple database applications will now raise if <code>db:rollback</code> is call and recommend using the <code>db:rollback:[NAME]</code> to rollback migrations.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   `Relation#pick` now uses already loaded results instead of making another query.\n\n    *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1584564036000,
    "author": "Eugene Kenny",
    "sha": "4ffd53f32d6a70495b8169c50555d29bed2d6c86",
    "pr": "38760",
    "merge_sha": "5c188c12ee719dfe4b76cde7763f269bcb992484",
    "html": "<p><code>Relation#pick</code> now uses already loaded results instead of making another query.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Deprecate using `return`, `break` or `throw` to exit a transaction block after writes.\n\n    *Dylan Thacker-Smith*",
    "project": "activerecord",
    "date_merged": 1590669164000,
    "author": "Dylan Thacker-Smith",
    "sha": "4332613b6d1cd7e69e5ee161cd52c943abf3f4a8",
    "pr": "39453",
    "merge_sha": "55f519f5b62db017077e2fc8aef31ba31708e038",
    "html": "<p>Deprecate using <code>return</code>, <code>break</code> or <code>throw</code> to exit a transaction block after writes.</p>\n\n<p><em>Dylan Thacker-Smith</em></p>\n"
  },
  {
    "message": "*   Dump the schema or structure of a database when calling `db:migrate:name`.\n\n    In previous versions of Rails, `rails db:migrate` would dump the schema of the database. In Rails 6, that holds true (`rails db:migrate` dumps all databases' schemas), but `rails db:migrate:name` does not share that behavior.\n\n    Going forward, calls to `rails db:migrate:name` will dump the schema (or structure) of the database being migrated.\n\n    *Kyle Thompson*",
    "project": "activerecord",
    "date_merged": 1584564036000,
    "author": "Carlos Antonio da Silva",
    "sha": "eed9f15ba87d4d4c9be48119e55e8ff17102c4a7",
    "pr": "38760",
    "merge_sha": "5c188c12ee719dfe4b76cde7763f269bcb992484",
    "html": "<p>Dump the schema or structure of a database when calling <code>db:migrate:name</code>.</p>\n\n<p>In previous versions of Rails, <code>rails db:migrate</code> would dump the schema of the database. In Rails 6, that holds true (<code>rails db:migrate</code> dumps all databases’ schemas), but <code>rails db:migrate:name</code> does not share that behavior.</p>\n\n<p>Going forward, calls to <code>rails db:migrate:name</code> will dump the schema (or structure) of the database being migrated.</p>\n\n<p><em>Kyle Thompson</em></p>\n"
  },
  {
    "message": "*   Reset the `ActiveRecord::Base` connection after `rails db:migrate:name`.\n\n    When `rails db:migrate` has finished, it ensures the `ActiveRecord::Base` connection is reset to its original configuration. Going forward, `rails db:migrate:name` will have the same behavior.\n\n    *Kyle Thompson*",
    "project": "activerecord",
    "date_merged": 1584564036000,
    "author": "Carlos Antonio da Silva",
    "sha": "eed9f15ba87d4d4c9be48119e55e8ff17102c4a7",
    "pr": "38760",
    "merge_sha": "5c188c12ee719dfe4b76cde7763f269bcb992484",
    "html": "<p>Reset the <code>ActiveRecord::Base</code> connection after <code>rails db:migrate:name</code>.</p>\n\n<p>When <code>rails db:migrate</code> has finished, it ensures the <code>ActiveRecord::Base</code> connection is reset to its original configuration. Going forward, <code>rails db:migrate:name</code> will have the same behavior.</p>\n\n<p><em>Kyle Thompson</em></p>\n"
  },
  {
    "message": "*   Disallow calling `connected_to` on subclasses of `ActiveRecord::Base`.\n\n    Behavior has not changed here but the previous API could be misleading to people who thought it would switch connections for only that class. `connected_to` switches the context from which we are getting connections, not the connections themselves.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1582752368000,
    "author": "eileencodes",
    "sha": "b7b26fabee21f15695cd88ee63a00b7bda4228c6",
    "pr": "38580",
    "merge_sha": "03d32ca23b80e74bb3bc385a29c8f44bb60a7b8c",
    "html": "<p>Disallow calling <code>connected_to</code> on subclasses of <code>ActiveRecord::Base</code>.</p>\n\n<p>Behavior has not changed here but the previous API could be misleading to people who thought it would switch connections for only that class. <code>connected_to</code> switches the context from which we are getting connections, not the connections themselves.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Add support for horizontal sharding to `connects_to` and `connected_to`.\n\n    Applications can now connect to multiple shards and switch between their shards in an application. Note that the shard swapping is still a manual process as this change does not include an API for automatic shard swapping.\n\n    Usage:\n\n    Given the following configuration:\n\n    ```yaml\n    # config/database.yml\n    production:\n      primary:\n        database: my_database\n      primary_shard_one:\n        database: my_database_shard_one\n    ```\n\n    Connect to multiple shards:\n\n    ```ruby\n    class ApplicationRecord < ActiveRecord::Base\n      self.abstract_class = true\n\n      connects_to shards: {\n        default: { writing: :primary },\n        shard_one: { writing: :primary_shard_one }\n      }\n    ```\n\n    Swap between shards in your controller / model code:\n\n    ```ruby\n    ActiveRecord::Base.connected_to(shard: :shard_one) do\n      # Read from shard one\n    end\n    ```\n\n    The horizontal sharding API also supports read replicas. See guides for more details.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1582572654000,
    "author": "eileencodes",
    "sha": "384e7d139eb3c2da1ff857033605284d6e70aba7",
    "pr": "38531",
    "merge_sha": "bbec38bf02041c770b40fb4588a4393ac85dd321",
    "html": "<p>Add support for horizontal sharding to <code>connects_to</code> and <code>connected_to</code>.</p>\n\n<p>Applications can now connect to multiple shards and switch between their shards in an application. Note that the shard swapping is still a manual process as this change does not include an API for automatic shard swapping.</p>\n\n<p>Usage:</p>\n\n<p>Given the following configuration:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># config/database.yml</span>\n<span class=\"na\">production</span><span class=\"pi\">:</span>\n  <span class=\"na\">primary</span><span class=\"pi\">:</span>\n    <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">my_database</span>\n  <span class=\"na\">primary_shard_one</span><span class=\"pi\">:</span>\n    <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">my_database_shard_one</span>\n</code></pre></div></div>\n\n<p>Connect to multiple shards:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">ApplicationRecord</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"nf\">abstract_class</span> <span class=\"o\">=</span> <span class=\"kp\">true</span>\n\n  <span class=\"n\">connects_to</span> <span class=\"ss\">shards: </span><span class=\"p\">{</span>\n    <span class=\"ss\">default: </span><span class=\"p\">{</span> <span class=\"ss\">writing: :primary</span> <span class=\"p\">},</span>\n    <span class=\"ss\">shard_one: </span><span class=\"p\">{</span> <span class=\"ss\">writing: :primary_shard_one</span> <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Swap between shards in your controller / model code:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">connected_to</span><span class=\"p\">(</span><span class=\"ss\">shard: :shard_one</span><span class=\"p\">)</span> <span class=\"k\">do</span>\n  <span class=\"c1\"># Read from shard one</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>The horizontal sharding API also supports read replicas. See guides for more details.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Deprecate `spec_name` in favor of `name` on database configurations.\n\n    The accessors for `spec_name` on `configs_for` and `DatabaseConfig` are deprecated. Please use `name` instead.\n\n    Deprecated behavior:\n\n    ```ruby\n    db_config = ActiveRecord::Base.configurations.configs_for(env_name: \"development\", spec_name: \"primary\")\n    db_config.spec_name\n    ```\n\n    New behavior:\n\n    ```ruby\n    db_config = ActiveRecord::Base.configurations.configs_for(env_name: \"development\", name: \"primary\")\n    db_config.name\n    ```\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Deprecate <code>spec_name</code> in favor of <code>name</code> on database configurations.</p>\n\n<p>The accessors for <code>spec_name</code> on <code>configs_for</code> and <code>DatabaseConfig</code> are deprecated. Please use <code>name</code> instead.</p>\n\n<p>Deprecated behavior:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">db_config</span> <span class=\"o\">=</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">configurations</span><span class=\"p\">.</span><span class=\"nf\">configs_for</span><span class=\"p\">(</span><span class=\"ss\">env_name: </span><span class=\"s2\">\"development\"</span><span class=\"p\">,</span> <span class=\"ss\">spec_name: </span><span class=\"s2\">\"primary\"</span><span class=\"p\">)</span>\n<span class=\"n\">db_config</span><span class=\"p\">.</span><span class=\"nf\">spec_name</span>\n</code></pre></div></div>\n\n<p>New behavior:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">db_config</span> <span class=\"o\">=</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">configurations</span><span class=\"p\">.</span><span class=\"nf\">configs_for</span><span class=\"p\">(</span><span class=\"ss\">env_name: </span><span class=\"s2\">\"development\"</span><span class=\"p\">,</span> <span class=\"ss\">name: </span><span class=\"s2\">\"primary\"</span><span class=\"p\">)</span>\n<span class=\"n\">db_config</span><span class=\"p\">.</span><span class=\"nf\">name</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Add additional database-specific rake tasks for multi-database users.\n\n    Previously, `rails db:create`, `rails db:drop`, and `rails db:migrate` were the only rails tasks that could operate on a single\n    database. For example:\n\n    ```\n    rails db:create\n    rails db:create:primary\n    rails db:create:animals\n    rails db:drop\n    rails db:drop:primary\n    rails db:drop:animals\n    rails db:migrate\n    rails db:migrate:primary\n    rails db:migrate:animals\n    ```\n\n    With these changes, `rails db:schema:dump`, `rails db:schema:load`, `rails db:structure:dump`, `rails db:structure:load` and\n    `rails db:test:prepare` can additionally operate on a single database. For example:\n\n    ```\n    rails db:schema:dump\n    rails db:schema:dump:primary\n    rails db:schema:dump:animals\n    rails db:schema:load\n    rails db:schema:load:primary\n    rails db:schema:load:animals\n    rails db:structure:dump\n    rails db:structure:dump:primary\n    rails db:structure:dump:animals\n    rails db:structure:load\n    rails db:structure:load:primary\n    rails db:structure:load:animals\n    rails db:test:prepare\n    rails db:test:prepare:primary\n    rails db:test:prepare:animals\n    ```\n\n    *Kyle Thompson*",
    "project": "activerecord",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Add additional database-specific rake tasks for multi-database users.</p>\n\n<p>Previously, <code>rails db:create</code>, <code>rails db:drop</code>, and <code>rails db:migrate</code> were the only rails tasks that could operate on a single<br />\ndatabase. For example:</p>\n\n<pre><code>rails db:create\nrails db:create:primary\nrails db:create:animals\nrails db:drop\nrails db:drop:primary\nrails db:drop:animals\nrails db:migrate\nrails db:migrate:primary\nrails db:migrate:animals\n</code></pre>\n\n<p>With these changes, <code>rails db:schema:dump</code>, <code>rails db:schema:load</code>, <code>rails db:structure:dump</code>, <code>rails db:structure:load</code> and<br />\n<code>rails db:test:prepare</code> can additionally operate on a single database. For example:</p>\n\n<pre><code>rails db:schema:dump\nrails db:schema:dump:primary\nrails db:schema:dump:animals\nrails db:schema:load\nrails db:schema:load:primary\nrails db:schema:load:animals\nrails db:structure:dump\nrails db:structure:dump:primary\nrails db:structure:dump:animals\nrails db:structure:load\nrails db:structure:load:primary\nrails db:structure:load:animals\nrails db:test:prepare\nrails db:test:prepare:primary\nrails db:test:prepare:animals\n</code></pre>\n\n<p><em>Kyle Thompson</em></p>\n"
  },
  {
    "message": "*   Add support for `strict_loading` mode on association declarations.\n\n    Raise an error if attempting to load a record from an association that has been marked as `strict_loading` unless it was explicitly eager loaded.\n\n    Usage:\n\n    ```ruby\n    class Developer < ApplicationRecord\n      has_many :projects, strict_loading: true\n    end\n\n    dev = Developer.first\n    dev.projects.first\n    # => ActiveRecord::StrictLoadingViolationError: The projects association is marked as strict_loading and cannot be lazily loaded.\n    ```\n\n    *Kevin Deisz*",
    "project": "activerecord",
    "date_merged": 1582313375000,
    "author": "Kevin Deisz",
    "sha": "b8ae1043186d6f0a166f37dd00ea6e02add1fd28",
    "pr": "38541",
    "merge_sha": "3dff30c14fa25f211088d62da26611616ab5616f",
    "html": "<p>Add support for <code>strict_loading</code> mode on association declarations.</p>\n\n<p>Raise an error if attempting to load a record from an association that has been marked as <code>strict_loading</code> unless it was explicitly eager loaded.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">Developer</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">has_many</span> <span class=\"ss\">:projects</span><span class=\"p\">,</span> <span class=\"ss\">strict_loading: </span><span class=\"kp\">true</span>\n<span class=\"k\">end</span>\n\n<span class=\"n\">dev</span> <span class=\"o\">=</span> <span class=\"no\">Developer</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"n\">dev</span><span class=\"p\">.</span><span class=\"nf\">projects</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"c1\"># =&gt; ActiveRecord::StrictLoadingViolationError: The projects association is marked as strict_loading and cannot be lazily loaded.</span>\n</code></pre></div></div>\n\n<p><em>Kevin Deisz</em></p>\n"
  },
  {
    "message": "*   Add support for `strict_loading` mode to prevent lazy loading of records.\n\n    Raise an error if a parent record is marked as `strict_loading` and attempts to lazily load its associations. This is useful for finding places you may want to preload an association and avoid additional queries.\n\n    Usage:\n\n    ```ruby\n    dev = Developer.strict_loading.first\n    dev.audit_logs.to_a\n    # => ActiveRecord::StrictLoadingViolationError: Developer is marked as strict_loading and AuditLog cannot be lazily loaded.\n    ```\n\n    *Eileen M. Uchitelle*, *Aaron Patterson*",
    "project": "activerecord",
    "date_merged": 1582206806000,
    "author": "eileencodes",
    "sha": "dbb92f8a779bd25ab9e5118118ceff24fc9e7439",
    "pr": "37400",
    "merge_sha": "ac9b11a830c98b48f2b08c32fc28873abcaed313",
    "html": "<p>Add support for <code>strict_loading</code> mode to prevent lazy loading of records.</p>\n\n<p>Raise an error if a parent record is marked as <code>strict_loading</code> and attempts to lazily load its associations. This is useful for finding places you may want to preload an association and avoid additional queries.</p>\n\n<p>Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">dev</span> <span class=\"o\">=</span> <span class=\"no\">Developer</span><span class=\"p\">.</span><span class=\"nf\">strict_loading</span><span class=\"p\">.</span><span class=\"nf\">first</span>\n<span class=\"n\">dev</span><span class=\"p\">.</span><span class=\"nf\">audit_logs</span><span class=\"p\">.</span><span class=\"nf\">to_a</span>\n<span class=\"c1\"># =&gt; ActiveRecord::StrictLoadingViolationError: Developer is marked as strict_loading and AuditLog cannot be lazily loaded.</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   Add support for PostgreSQL 11+ partitioned indexes when using `upsert_all`.\n\n    *Sebastián Palma*",
    "project": "activerecord",
    "date_merged": 1580974068000,
    "author": "Sebastián Palma",
    "sha": "db6eb846eb6340ee5ece08c84717d7fc56df34c0",
    "pr": "37585",
    "merge_sha": "ee6518137c1732153873c789dadeeb459a66159a",
    "html": "<p>Add support for PostgreSQL 11+ partitioned indexes when using <code>upsert_all</code>.</p>\n\n<p><em>Sebastián Palma</em></p>\n"
  },
  {
    "message": "*   Adds support for `if_not_exists` to `add_column` and `if_exists` to `remove_column`.\n\n    Applications can set their migrations to ignore exceptions raised when adding a column that already exists or when removing a column that does not exist.\n\n    Example Usage:\n\n    ```ruby\n    class AddColumnTitle < ActiveRecord::Migration[6.1]\n      def change\n        add_column :posts, :title, :string, if_not_exists: true\n      end\n    end\n    ```\n\n    ```ruby\n    class RemoveColumnTitle < ActiveRecord::Migration[6.1]\n      def change\n        remove_column :posts, :title, if_exists: true\n      end\n    end\n    ```\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1580415315000,
    "author": "Carlos Antonio da Silva",
    "sha": "d3e6eea755ed308f1992551b62319d323fb896c5",
    "pr": "38355",
    "merge_sha": "6a6e3f6efe9d621543da77dd3e9f1e875778d4e6",
    "html": "<p>Adds support for <code>if_not_exists</code> to <code>add_column</code> and <code>if_exists</code> to <code>remove_column</code>.</p>\n\n<p>Applications can set their migrations to ignore exceptions raised when adding a column that already exists or when removing a column that does not exist.</p>\n\n<p>Example Usage:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">AddColumnTitle</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Migration</span><span class=\"p\">[</span><span class=\"mf\">6.1</span><span class=\"p\">]</span>\n  <span class=\"k\">def</span> <span class=\"nf\">change</span>\n    <span class=\"n\">add_column</span> <span class=\"ss\">:posts</span><span class=\"p\">,</span> <span class=\"ss\">:title</span><span class=\"p\">,</span> <span class=\"ss\">:string</span><span class=\"p\">,</span> <span class=\"ss\">if_not_exists: </span><span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">RemoveColumnTitle</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Migration</span><span class=\"p\">[</span><span class=\"mf\">6.1</span><span class=\"p\">]</span>\n  <span class=\"k\">def</span> <span class=\"nf\">change</span>\n    <span class=\"n\">remove_column</span> <span class=\"ss\">:posts</span><span class=\"p\">,</span> <span class=\"ss\">:title</span><span class=\"p\">,</span> <span class=\"ss\">if_exists: </span><span class=\"kp\">true</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Regexp-escape table name for MS SQL Server.\n\n    Add `Regexp.escape` to one method in ActiveRecord, so that table names with regular expression characters in them work as expected. Since MS SQL Server uses \"[\" and \"]\" to quote table and column names, and those characters are regular expression characters, methods like `pluck` and `select` fail in certain cases when used with the MS SQL Server adapter.\n\n    *Larry Reid*",
    "project": "activerecord",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Regexp-escape table name for MS SQL Server.</p>\n\n<p>Add <code>Regexp.escape</code> to one method in ActiveRecord, so that table names with regular expression characters in them work as expected. Since MS SQL Server uses “[” and “]” to quote table and column names, and those characters are regular expression characters, methods like <code>pluck</code> and <code>select</code> fail in certain cases when used with the MS SQL Server adapter.</p>\n\n<p><em>Larry Reid</em></p>\n"
  },
  {
    "message": "*   Store advisory locks on their own named connection.\n\n    Previously advisory locks were taken out against a connection when a migration started. This works fine in single database applications but doesn't work well when migrations need to open new connections which results in the lock getting dropped.\n\n    In order to fix this we are storing the advisory lock on a new connection with the connection specification name `AdvisoryLockBase`. The caveat is that we need to maintain at least 2 connections to a database while migrations are running in order to do this.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1579810131000,
    "author": "eileencodes",
    "sha": "1ee4a8812fcaf2de48e5ab65d7f707c391fce31d",
    "pr": "38235",
    "merge_sha": "59d54b350d31669129cf25a0177dd06fdd09d6a9",
    "html": "<p>Store advisory locks on their own named connection.</p>\n\n<p>Previously advisory locks were taken out against a connection when a migration started. This works fine in single database applications but doesn’t work well when migrations need to open new connections which results in the lock getting dropped.</p>\n\n<p>In order to fix this we are storing the advisory lock on a new connection with the connection specification name <code>AdvisoryLockBase</code>. The caveat is that we need to maintain at least 2 connections to a database while migrations are running in order to do this.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Allow schema cache path to be defined in the database configuration file.\n\n    For example:\n\n    ```yaml\n    development:\n      adapter: postgresql\n      database: blog_development\n      pool: 5\n      schema_cache_path: tmp/schema/main.yml\n    ```\n\n    *Katrina Owen*",
    "project": "activerecord",
    "date_merged": 1579795514000,
    "author": "Katrina Owen",
    "sha": "2c2ff8228e19cf7cdcea6e26b5a9f20eeccb2a5c",
    "pr": "38283",
    "merge_sha": "0ec81957d58c425bfbd63a343fe2944ca7b87d41",
    "html": "<p>Allow schema cache path to be defined in the database configuration file.</p>\n\n<p>For example:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">development</span><span class=\"pi\">:</span>\n  <span class=\"na\">adapter</span><span class=\"pi\">:</span> <span class=\"s\">postgresql</span>\n  <span class=\"na\">database</span><span class=\"pi\">:</span> <span class=\"s\">blog_development</span>\n  <span class=\"na\">pool</span><span class=\"pi\">:</span> <span class=\"m\">5</span>\n  <span class=\"na\">schema_cache_path</span><span class=\"pi\">:</span> <span class=\"s\">tmp/schema/main.yml</span>\n</code></pre></div></div>\n\n<p><em>Katrina Owen</em></p>\n"
  },
  {
    "message": "*   Deprecate `#remove_connection` in favor of `#remove_connection_pool` when called on the handler.\n\n    `#remove_connection` is deprecated in order to support returning a `DatabaseConfig` object instead of a `Hash`. Use `#remove_connection_pool`, `#remove_connection` will be removed in Rails 7.0.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1579718714000,
    "author": "eileencodes",
    "sha": "7315c91d4583d59cd824727aef1ad0fc2e4fee1b",
    "pr": "38258",
    "merge_sha": "d80714e0834f17fb173d37e579409db11b0319c3",
    "html": "<p>Deprecate <code>#remove_connection</code> in favor of <code>#remove_connection_pool</code> when called on the handler.</p>\n\n<p><code>#remove_connection</code> is deprecated in order to support returning a <code>DatabaseConfig</code> object instead of a <code>Hash</code>. Use <code>#remove_connection_pool</code>, <code>#remove_connection</code> will be removed in Rails 7.0.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Deprecate `#default_hash` and it's alias `#[]` on database configurations.\n\n    Applications should use `configs_for`. `#default_hash` and `#[]` will be removed in Rails 7.0.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1582669956000,
    "author": "Ryuta Kamizono",
    "sha": "1d3eb7be13690515e12c30fb260bbf9f96a41a8e",
    "pr": "38568",
    "merge_sha": "ecaed2e8d7b265d416997648e6c58a30aaa4d431",
    "html": "<p>Deprecate <code>#default_hash</code> and it’s alias <code>#[]</code> on database configurations.</p>\n\n<p>Applications should use <code>configs_for</code>. <code>#default_hash</code> and <code>#[]</code> will be removed in Rails 7.0.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Add scale support to `ActiveRecord::Validations::NumericalityValidator`.\n\n    *Gannon McGibbon*",
    "project": "activerecord",
    "date_merged": 1578936752000,
    "author": "Gannon McGibbon",
    "sha": "f72f743dc380d6b4f3518a8a1047414499b5a6c2",
    "pr": "38212",
    "merge_sha": "8c71793b3b25740d15c6e078dfd452edecd88fd0",
    "html": "<p>Add scale support to <code>ActiveRecord::Validations::NumericalityValidator</code>.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Find orphans by looking for missing relations through chaining `where.missing`:\n\n    Before:\n\n    ```ruby\n    Post.left_joins(:author).where(authors: { id: nil })\n    ```\n\n    After:\n\n    ```ruby\n    Post.where.missing(:author)\n    ```\n\n    *Tom Rossi*",
    "project": "activerecord",
    "date_merged": 1578775056000,
    "author": "Tom Rossi",
    "sha": "9bfe89e68ee61d9c8ed71ac98c783a7e47bdb608",
    "pr": "34727",
    "merge_sha": "6368e8082fc883262fefaa7d29dae5ce36e19103",
    "html": "<p>Find orphans by looking for missing relations through chaining <code>where.missing</code>:</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">left_joins</span><span class=\"p\">(</span><span class=\"ss\">:author</span><span class=\"p\">).</span><span class=\"nf\">where</span><span class=\"p\">(</span><span class=\"ss\">authors: </span><span class=\"p\">{</span> <span class=\"ss\">id: </span><span class=\"kp\">nil</span> <span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">where</span><span class=\"p\">.</span><span class=\"nf\">missing</span><span class=\"p\">(</span><span class=\"ss\">:author</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Tom Rossi</em></p>\n"
  },
  {
    "message": "*   Ensure `:reading` connections always raise if a write is attempted.\n\n    Now Rails will raise an `ActiveRecord::ReadOnlyError` if any connection on the reading handler attempts to make a write. If your reading role needs to write you should name the role something other than `:reading`.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1578672925000,
    "author": "eileencodes",
    "sha": "1c98e6c0053033440c8ea5f3ee8e958d3a5e5b09",
    "pr": "38204",
    "merge_sha": "2c07d162b392f693ddbba020cad8b23b8b30eb2e",
    "html": "<p>Ensure <code>:reading</code> connections always raise if a write is attempted.</p>\n\n<p>Now Rails will raise an <code>ActiveRecord::ReadOnlyError</code> if any connection on the reading handler attempts to make a write. If your reading role needs to write you should name the role something other than <code>:reading</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Deprecate `\"primary\"` as the `connection_specification_name` for `ActiveRecord::Base`.\n\n    `\"primary\"` has been deprecated as the `connection_specification_name` for `ActiveRecord::Base` in favor of using `\"ActiveRecord::Base\"`. This change affects calls to `ActiveRecord::Base.connection_handler.retrieve_connection` and `ActiveRecord::Base.connection_handler.remove_connection`. If you're calling these methods with `\"primary\"`, please switch to `\"ActiveRecord::Base\"`.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1586968111000,
    "author": "Ryuta Kamizono",
    "sha": "6f2126c760e3ef8c21dcdf8e8fec466a0fdd88f1",
    "pr": "38959",
    "merge_sha": "9303873e57dd86a82ef69d58ed7e7af6bc7ed344",
    "html": "<p>Deprecate <code>\"primary\"</code> as the <code>connection_specification_name</code> for <code>ActiveRecord::Base</code>.</p>\n\n<p><code>\"primary\"</code> has been deprecated as the <code>connection_specification_name</code> for <code>ActiveRecord::Base</code> in favor of using <code>\"ActiveRecord::Base\"</code>. This change affects calls to <code>ActiveRecord::Base.connection_handler.retrieve_connection</code> and <code>ActiveRecord::Base.connection_handler.remove_connection</code>. If you’re calling these methods with <code>\"primary\"</code>, please switch to <code>\"ActiveRecord::Base\"</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Add `ActiveRecord::Validations::NumericalityValidator` with\n    support for casting floats using a database columns' precision value.\n\n    *Gannon McGibbon*",
    "project": "activerecord",
    "date_merged": 1578356603000,
    "author": "Gannon McGibbon",
    "sha": "b5c9974fa72278787762ab70227e263664f0abfc",
    "pr": "36664",
    "merge_sha": "f337669b0bf816b406155751ca1e9f07a3f683d3",
    "html": "<p>Add <code>ActiveRecord::Validations::NumericalityValidator</code> with<br />\nsupport for casting floats using a database columns’ precision value.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Enforce fresh ETag header after a collection's contents change by adding\n    ActiveRecord::Relation#cache_key_with_version. This method will be used by\n    ActionController::ConditionalGet to ensure that when collection cache versioning\n    is enabled, requests using ConditionalGet don't return the same ETag header\n    after a collection is modified.\n\n    Fixes #38078.\n\n    *Aaron Lipman*",
    "project": "activerecord",
    "date_merged": 1578018825000,
    "author": "Aaron Lipman",
    "sha": "58b040964f0a61254e38d6aa05d59e2c45f2c374",
    "pr": "38119",
    "merge_sha": "44af3395ae79b32e61615a8a45e9d24956b51879",
    "html": "<p>Enforce fresh ETag header after a collection’s contents change by adding<br />\nActiveRecord::Relation#cache_key_with_version. This method will be used by<br />\nActionController::ConditionalGet to ensure that when collection cache versioning<br />\nis enabled, requests using ConditionalGet don’t return the same ETag header<br />\nafter a collection is modified.</p>\n\n<p>Fixes #38078.</p>\n\n<p><em>Aaron Lipman</em></p>\n"
  },
  {
    "message": "*   Skip test database when running `db:create` or `db:drop` in development\n    with `DATABASE_URL` set.\n\n    *Brian Buchalter*",
    "project": "activerecord",
    "date_merged": 1576887338000,
    "author": "Brian Buchalter",
    "sha": "53e9438ef2c5a442502abd67728d172e53a075d9",
    "pr": "37351",
    "merge_sha": "e9a83780f9e7e9b8daff8ac361161099149b6013",
    "html": "<p>Skip test database when running <code>db:create</code> or <code>db:drop</code> in development<br />\nwith <code>DATABASE_URL</code> set.</p>\n\n<p><em>Brian Buchalter</em></p>\n"
  },
  {
    "message": "*   Don't allow mutations on the database configurations hash.\n\n    Freeze the configurations hash to disallow directly changing it. If applications need to change the hash, for example to create databases for parallelization, they should use the `DatabaseConfig` object directly.\n\n    Before:\n\n    ```ruby\n    @db_config = ActiveRecord::Base.configurations.configs_for(env_name: \"test\", spec_name: \"primary\")\n    @db_config.configuration_hash.merge!(idle_timeout: \"0.02\")\n    ```\n\n    After:\n\n    ```ruby\n    @db_config = ActiveRecord::Base.configurations.configs_for(env_name: \"test\", spec_name: \"primary\")\n    config = @db_config.configuration_hash.merge(idle_timeout: \"0.02\")\n    db_config = ActiveRecord::DatabaseConfigurations::HashConfig.new(@db_config.env_name, @db_config.spec_name, config)\n    ```\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1577945783000,
    "author": "Carlos Antonio da Silva",
    "sha": "8d89e3d180bbda648da8dc6a0a5a141936dbd46c",
    "pr": "38135",
    "merge_sha": "976224b4de70d0760d301d2e3d0d81794fc523b3",
    "html": "<p>Don’t allow mutations on the database configurations hash.</p>\n\n<p>Freeze the configurations hash to disallow directly changing it. If applications need to change the hash, for example to create databases for parallelization, they should use the <code>DatabaseConfig</code> object directly.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"vi\">@db_config</span> <span class=\"o\">=</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">configurations</span><span class=\"p\">.</span><span class=\"nf\">configs_for</span><span class=\"p\">(</span><span class=\"ss\">env_name: </span><span class=\"s2\">\"test\"</span><span class=\"p\">,</span> <span class=\"ss\">spec_name: </span><span class=\"s2\">\"primary\"</span><span class=\"p\">)</span>\n<span class=\"vi\">@db_config</span><span class=\"p\">.</span><span class=\"nf\">configuration_hash</span><span class=\"p\">.</span><span class=\"nf\">merge!</span><span class=\"p\">(</span><span class=\"ss\">idle_timeout: </span><span class=\"s2\">\"0.02\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"vi\">@db_config</span> <span class=\"o\">=</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span><span class=\"p\">.</span><span class=\"nf\">configurations</span><span class=\"p\">.</span><span class=\"nf\">configs_for</span><span class=\"p\">(</span><span class=\"ss\">env_name: </span><span class=\"s2\">\"test\"</span><span class=\"p\">,</span> <span class=\"ss\">spec_name: </span><span class=\"s2\">\"primary\"</span><span class=\"p\">)</span>\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"vi\">@db_config</span><span class=\"p\">.</span><span class=\"nf\">configuration_hash</span><span class=\"p\">.</span><span class=\"nf\">merge</span><span class=\"p\">(</span><span class=\"ss\">idle_timeout: </span><span class=\"s2\">\"0.02\"</span><span class=\"p\">)</span>\n<span class=\"n\">db_config</span> <span class=\"o\">=</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">DatabaseConfigurations</span><span class=\"o\">::</span><span class=\"no\">HashConfig</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"vi\">@db_config</span><span class=\"p\">.</span><span class=\"nf\">env_name</span><span class=\"p\">,</span> <span class=\"vi\">@db_config</span><span class=\"p\">.</span><span class=\"nf\">spec_name</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Remove `:connection_id` from the `sql.active_record` notification.\n\n    *Aaron Patterson*, *Rafael Mendonça França*",
    "project": "activerecord",
    "date_merged": 1576628372000,
    "author": "Rafael Mendonça França",
    "sha": "d140ab073f296a2a689a4dbd58cf9434c6b2a484",
    "pr": "36143",
    "merge_sha": "3bcc0ae0f45dd6297a06f0b2fe83a7cb7db6321b",
    "html": "<p>Remove <code>:connection_id</code> from the <code>sql.active_record</code> notification.</p>\n\n<p><em>Aaron Patterson</em>, <em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   The `:name` key will no longer be returned as part of `DatabaseConfig#configuration_hash`. Please use `DatabaseConfig#owner_name` instead.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1576617290000,
    "author": "John Crepezzi",
    "sha": "b76659e13910ddf949de80b8c5ae04c495ebb487",
    "pr": "38008",
    "merge_sha": "63ba07b63317597970dd6ae4bc95e681aaf08ad8",
    "html": "<p>The <code>:name</code> key will no longer be returned as part of <code>DatabaseConfig#configuration_hash</code>. Please use <code>DatabaseConfig#owner_name</code> instead.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   ActiveRecord's `belongs_to_required_by_default` flag can now be set per model.\n\n    You can now opt-out/opt-in specific models from having their associations required\n    by default.\n\n    This change is meant to ease the process of migrating all your models to have\n    their association required.\n\n    *Edouard Chin*",
    "project": "activerecord",
    "date_merged": 1576607335000,
    "author": "Edouard CHIN",
    "sha": "f2873d596d7fff5cf890651487d862a946a22faf",
    "pr": "38006",
    "merge_sha": "c56d49c26636421afa4f088dc6d6e3c9445aa891",
    "html": "<p>ActiveRecord’s <code>belongs_to_required_by_default</code> flag can now be set per model.</p>\n\n<p>You can now opt-out/opt-in specific models from having their associations required<br />\nby default.</p>\n\n<p>This change is meant to ease the process of migrating all your models to have<br />\ntheir association required.</p>\n\n<p><em>Edouard Chin</em></p>\n"
  },
  {
    "message": "*   The `connection_config` method has been deprecated, please use `connection_db_config` instead which will return a `DatabaseConfigurations::DatabaseConfig` instead of a `Hash`.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1576605995000,
    "author": "John Crepezzi",
    "sha": "5a37435192e472b3a0eb43e45ef2f716eb0171bd",
    "pr": "38005",
    "merge_sha": "f8bda7c5e42650c037c8a876441b6e51bf92bf40",
    "html": "<p>The <code>connection_config</code> method has been deprecated, please use <code>connection_db_config</code> instead which will return a <code>DatabaseConfigurations::DatabaseConfig</code> instead of a <code>Hash</code>.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Retain explicit selections on the base model after applying `includes` and `joins`.\n\n    Resolves #34889.\n\n    *Patrick Rebsch*",
    "project": "activerecord",
    "date_merged": 1575916126000,
    "author": "Patrick Rebsch",
    "sha": "2d6088ced5c338a4503816b25861908282b4dea2",
    "pr": "35210",
    "merge_sha": "73e079a184c84c6041aec0afd46bffc9f66c3798",
    "html": "<p>Retain explicit selections on the base model after applying <code>includes</code> and <code>joins</code>.</p>\n\n<p>Resolves #34889.</p>\n\n<p><em>Patrick Rebsch</em></p>\n"
  },
  {
    "message": "*   The `database` kwarg is deprecated without replacement because it can't be used for sharding and creates an issue if it's used during a request. Applications that need to create new connections should use `connects_to` instead.\n\n    *Eileen M. Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1575479281000,
    "author": "eileencodes",
    "sha": "254ba464aa47e4de4324c4d15c97c08f6944e10d",
    "pr": "37874",
    "merge_sha": "f9e4906c3769909f6d8d143876d68bc032df4a3f",
    "html": "<p>The <code>database</code> kwarg is deprecated without replacement because it can’t be used for sharding and creates an issue if it’s used during a request. Applications that need to create new connections should use <code>connects_to</code> instead.</p>\n\n<p><em>Eileen M. Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Allow attributes to be fetched from Arel node groupings.\n\n    *Jeff Emminger*, *Gannon McGibbon*",
    "project": "activerecord",
    "date_merged": 1574376478000,
    "author": "Gannon McGibbon",
    "sha": "12afdba8b9083f52d6b78ec9f16cf17e14f5222e",
    "pr": "37733",
    "merge_sha": "3f1473379ce3eafc6f8a9912a7c4fb410745cac6",
    "html": "<p>Allow attributes to be fetched from Arel node groupings.</p>\n\n<p><em>Jeff Emminger</em>, <em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   A database URL can now contain a querystring value that contains an equal sign. This is needed to support passing PostgreSQL `options`.\n\n    *Joshua Flanagan*",
    "project": "activerecord",
    "date_merged": 1576661376000,
    "author": "Ryuta Kamizono",
    "sha": "72af0bbc3d198910e005b23fce7126b45bb9e984",
    "pr": "38013",
    "merge_sha": "5d00eb41ca083bd48cecf3a5ac665125725b96ed",
    "html": "<p>A database URL can now contain a querystring value that contains an equal sign. This is needed to support passing PostgreSQL <code>options</code>.</p>\n\n<p><em>Joshua Flanagan</em></p>\n"
  },
  {
    "message": "*   Calling methods like `establish_connection` with a `Hash` which is invalid (eg: no `adapter`) will now raise an error the same way as connections defined in `config/database.yml`.\n\n    *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1573650683000,
    "author": "John Crepezzi",
    "sha": "8d5a4ff6a7025751bb2ad67f1a00363745f9dbb5",
    "pr": "37695",
    "merge_sha": "3ab43e7e4ea4659bdbb82ea341e857e13443672c",
    "html": "<p>Calling methods like <code>establish_connection</code> with a <code>Hash</code> which is invalid (eg: no <code>adapter</code>) will now raise an error the same way as connections defined in <code>config/database.yml</code>.</p>\n\n<p><em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Specifying `implicit_order_column` now subsorts the records by primary key if available to ensure deterministic results.\n\n    *Paweł Urbanek*",
    "project": "activerecord",
    "date_merged": 1573411449000,
    "author": "pawurb",
    "sha": "31d31fc287f6de7ca3ba4e5b980a7343f17ec1a2",
    "pr": "37626",
    "merge_sha": "9a6df0e12cddceea3d8543f05166112bf71c8e2a",
    "html": "<p>Specifying <code>implicit_order_column</code> now subsorts the records by primary key if available to ensure deterministic results.</p>\n\n<p><em>Paweł Urbanek</em></p>\n"
  },
  {
    "message": "*   `where(attr => [])` now loads an empty result without making a query.\n\n    *John Hawthorn*",
    "project": "activerecord",
    "date_merged": 1572140329000,
    "author": "John Hawthorn",
    "sha": "54f3e67172247b57379ec84b489e892620b743a5",
    "pr": "37558",
    "merge_sha": "6acdc5c1ace43b4c9a99f3af1513e720883a9fb7",
    "html": "<p><code>where(attr =&gt; [])</code> now loads an empty result without making a query.</p>\n\n<p><em>John Hawthorn</em></p>\n"
  },
  {
    "message": "*   Fixed the performance regression for `primary_keys` introduced MySQL 8.0.\n\n    *Hiroyuki Ishii*",
    "project": "activerecord",
    "date_merged": 1571096656000,
    "author": "alpaca-tc",
    "sha": "77f4ae0030971a0bf891cbf0dce17537b56b541f",
    "pr": "37465",
    "merge_sha": "0ab5206799dfdbb3315ca890e7fea62b30ddecc5",
    "html": "<p>Fixed the performance regression for <code>primary_keys</code> introduced MySQL 8.0.</p>\n\n<p><em>Hiroyuki Ishii</em></p>\n"
  },
  {
    "message": "*   Add support for `belongs_to` to `has_many` inversing.\n\n    *Gannon McGibbon*",
    "project": "activerecord",
    "date_merged": 1570056833000,
    "author": "Gannon McGibbon",
    "sha": "d45c9adf272ce749f76ba2dcfaa2745b5f877daa",
    "pr": "34533",
    "merge_sha": "b45699cbf2e5ba624079a681a5a2ec14cb09649a",
    "html": "<p>Add support for <code>belongs_to</code> to <code>has_many</code> inversing.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Allow length configuration for `has_secure_token` method. The minimum length\n    is set at 24 characters.\n\n    Before:\n\n    ```ruby\n    has_secure_token :auth_token\n    ```\n\n    After:\n\n    ```ruby\n    has_secure_token :default_token             # 24 characters\n    has_secure_token :auth_token, length: 36    # 36 characters\n    has_secure_token :invalid_token, length: 12 # => ActiveRecord::SecureToken::MinimumLengthError\n    ```\n\n    *Bernardo de Araujo*",
    "project": "activerecord",
    "date_merged": 1569870784000,
    "author": "Bernardo Araujo",
    "sha": "51443e22f3cba76907204cc528ebab43224adfd9",
    "pr": "35915",
    "merge_sha": "a273da7619ac6a2b2f98532a5610238c68ad219b",
    "html": "<p>Allow length configuration for <code>has_secure_token</code> method. The minimum length<br />\nis set at 24 characters.</p>\n\n<p>Before:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">has_secure_token</span> <span class=\"ss\">:auth_token</span>\n</code></pre></div></div>\n\n<p>After:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">has_secure_token</span> <span class=\"ss\">:default_token</span>             <span class=\"c1\"># 24 characters</span>\n<span class=\"n\">has_secure_token</span> <span class=\"ss\">:auth_token</span><span class=\"p\">,</span> <span class=\"ss\">length: </span><span class=\"mi\">36</span>    <span class=\"c1\"># 36 characters</span>\n<span class=\"n\">has_secure_token</span> <span class=\"ss\">:invalid_token</span><span class=\"p\">,</span> <span class=\"ss\">length: </span><span class=\"mi\">12</span> <span class=\"c1\"># =&gt; ActiveRecord::SecureToken::MinimumLengthError</span>\n</code></pre></div></div>\n\n<p><em>Bernardo de Araujo</em></p>\n"
  },
  {
    "message": "*   Deprecate `DatabaseConfigurations#to_h`. These connection hashes are still available via `ActiveRecord::Base.configurations.configs_for`.\n\n    *Eileen Uchitelle*, *John Crepezzi*",
    "project": "activerecord",
    "date_merged": 1568866422000,
    "author": "John Crepezzi",
    "sha": "694c9629804dc3ba1b3edf390e552070d841077b",
    "pr": "37243",
    "merge_sha": "516474def169b38caa743eb44a87e86a12de0595",
    "html": "<p>Deprecate <code>DatabaseConfigurations#to_h</code>. These connection hashes are still available via <code>ActiveRecord::Base.configurations.configs_for</code>.</p>\n\n<p><em>Eileen Uchitelle</em>, <em>John Crepezzi</em></p>\n"
  },
  {
    "message": "*   Add `DatabaseConfig#configuration_hash` to return database configuration hashes with symbol keys, and use all symbol-key configuration hashes internally. Deprecate `DatabaseConfig#config` which returns a String-keyed `Hash` with the same values.\n\n    *John Crepezzi*, *Eileen Uchitelle*",
    "project": "activerecord",
    "date_merged": 1568394191000,
    "author": "eileencodes",
    "sha": "ce9b197cc902ce8b72b7b3b5a3ec7e507fdba858",
    "pr": "37185",
    "merge_sha": "42dea6b0f62445f69db0608c0127aa17dce738ec",
    "html": "<p>Add <code>DatabaseConfig#configuration_hash</code> to return database configuration hashes with symbol keys, and use all symbol-key configuration hashes internally. Deprecate <code>DatabaseConfig#config</code> which returns a String-keyed <code>Hash</code> with the same values.</p>\n\n<p><em>John Crepezzi</em>, <em>Eileen Uchitelle</em></p>\n"
  },
  {
    "message": "*   Allow column names to be passed to `remove_index` positionally along with other options.\n\n    Passing other options can be necessary to make `remove_index` correctly reversible.\n\n    Before:\n\n        add_index    :reports, :report_id               # => works\n        add_index    :reports, :report_id, unique: true # => works\n        remove_index :reports, :report_id               # => works\n        remove_index :reports, :report_id, unique: true # => ArgumentError\n\n    After:\n\n        remove_index :reports, :report_id, unique: true # => works\n\n    *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1568152842000,
    "author": "Eugene Kenny",
    "sha": "0cc13d316948c68c1dcb0ca0298c854076c27608",
    "pr": "37168",
    "merge_sha": "da54c73cae51beaafc2bb1d67745057924fb45d7",
    "html": "<p>Allow column names to be passed to <code>remove_index</code> positionally along with other options.</p>\n\n<p>Passing other options can be necessary to make <code>remove_index</code> correctly reversible.</p>\n\n<p>Before:</p>\n\n<pre><code>add_index    :reports, :report_id               # =&gt; works\nadd_index    :reports, :report_id, unique: true # =&gt; works\nremove_index :reports, :report_id               # =&gt; works\nremove_index :reports, :report_id, unique: true # =&gt; ArgumentError\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>remove_index :reports, :report_id, unique: true # =&gt; works\n</code></pre>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Allow bulk `ALTER` statements to drop and recreate indexes with the same name.\n\n    *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1568113953000,
    "author": "Eugene Kenny",
    "sha": "edb23791d2ee9df89c5a4f24d72940ff8eaec8fc",
    "pr": "37161",
    "merge_sha": "ae2cbf40449c270feec6fa0aa82b3d5fc2350be7",
    "html": "<p>Allow bulk <code>ALTER</code> statements to drop and recreate indexes with the same name.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   `insert`, `insert_all`, `upsert`, and `upsert_all` now clear the query cache.\n\n    *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1568002793000,
    "author": "Eugene Kenny",
    "sha": "fad44a6999f561d2b5f7888920a8b91291b5b115",
    "pr": "37154",
    "merge_sha": "692145e8d161bb3dd3dacdceb95f1003485c741f",
    "html": "<p><code>insert</code>, <code>insert_all</code>, <code>upsert</code>, and <code>upsert_all</code> now clear the query cache.</p>\n\n<p><em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   Call `while_preventing_writes` directly from `connected_to`.\n\n    In some cases application authors want to use the database switching middleware and make explicit calls with `connected_to`. It's possible for an app to turn off writes and not turn them back on by the time we call `connected_to(role: :writing)`.\n\n    This change allows apps to fix this by assuming if a role is writing we want to allow writes, except in the case it's explicitly turned off.\n\n    *Eileen M. Uchitelle*",
    "project": "activerecord",
    "date_merged": 1567083774000,
    "author": "Carlos Antonio da Silva",
    "sha": "8e1c0011e5cef6fcc2e04cb996d25d36be3fff1f",
    "pr": null,
    "merge_sha": "520111096fdf27ab5d236ff12622c3107e5ea3e0",
    "html": "<p>Call <code>while_preventing_writes</code> directly from <code>connected_to</code>.</p>\n\n<p>In some cases application authors want to use the database switching middleware and make explicit calls with <code>connected_to</code>. It’s possible for an app to turn off writes and not turn them back on by the time we call <code>connected_to(role: :writing)</code>.</p>\n\n<p>This change allows apps to fix this by assuming if a role is writing we want to allow writes, except in the case it’s explicitly turned off.</p>\n\n<p><em>Eileen M. Uchitelle</em></p>\n"
  },
  {
    "message": "*   Improve detection of ActiveRecord::StatementTimeout with mysql2 adapter in the edge case when the query is terminated during filesort.\n\n    *Kir Shatrov*",
    "project": "activerecord",
    "date_merged": 1565905586000,
    "author": "Kir Shatrov",
    "sha": "c99c572d370dc3b4fc6e0f324f80126fdc2db3f9",
    "pr": "36932",
    "merge_sha": "12e2013c27f37ead5623453632d37f7a87378bb6",
    "html": "<p>Improve detection of ActiveRecord::StatementTimeout with mysql2 adapter in the edge case when the query is terminated during filesort.</p>\n\n<p><em>Kir Shatrov</em></p>\n"
  },
  {
    "message": "*   Stop trying to read yaml file fixtures when loading Active Record fixtures.\n\n    *Gannon McGibbon*",
    "project": "activerecord",
    "date_merged": 1565376726000,
    "author": "Gannon McGibbon",
    "sha": "98996977945bc85a2b941fff89680581f8c6a0e6",
    "pr": "36884",
    "merge_sha": "88209624af758218246757eba8f0d17b71b3aef8",
    "html": "<p>Stop trying to read yaml file fixtures when loading Active Record fixtures.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Deprecate `.reorder(nil)` with `.first` / `.first!` taking non-deterministic result.\n\n    To continue taking non-deterministic result, use `.take` / `.take!` instead.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1565341115000,
    "author": "Ryuta Kamizono",
    "sha": "eec562dbcf5624e38085b8262512a6584784dfdc",
    "pr": "36889",
    "merge_sha": "bdfd47053108f3e7757f35a6d3eee511bf6e0cc5",
    "html": "<p>Deprecate <code>.reorder(nil)</code> with <code>.first</code> / <code>.first!</code> taking non-deterministic result.</p>\n\n<p>To continue taking non-deterministic result, use <code>.take</code> / <code>.take!</code> instead.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Preserve user supplied joins order as much as possible.\n\n    Fixes #36761, #34328, #24281, #12953.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1564457990000,
    "author": "Ryuta Kamizono",
    "sha": "b4478ae8bc37c76d0143c2ff99dfc75ef34d2234",
    "pr": "36805",
    "merge_sha": "1e5c0a7836840be03c370d121c1cdefc1034595e",
    "html": "<p>Preserve user supplied joins order as much as possible.</p>\n\n<p>Fixes #36761, #34328, #24281, #12953.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Allow `matches_regex` and `does_not_match_regexp` on the MySQL Arel visitor.\n\n    *James Pearson*",
    "project": "activerecord",
    "date_merged": 1564423587000,
    "author": "Ryuta Kamizono",
    "sha": "e0b19a3622e9d6d328dde174165ac03719f565c4",
    "pr": "36800",
    "merge_sha": "8b0b591296448dd4dff5b85dbbbaf35f01f31e69",
    "html": "<p>Allow <code>matches_regex</code> and <code>does_not_match_regexp</code> on the MySQL Arel visitor.</p>\n\n<p><em>James Pearson</em></p>\n"
  },
  {
    "message": "*   Allow specifying fixtures to be ignored by setting `ignore` in YAML file's '_fixture' section.\n\n    *Tongfei Gao*",
    "project": "activerecord",
    "date_merged": 1564276326000,
    "author": "Tongfei Gao",
    "sha": "c09a4fd23d7d52552132edde7ad155f366c560b8",
    "pr": "36303",
    "merge_sha": "481714dd0605a1e639cb6a60a2ea5aedf98cfe29",
    "html": "<p>Allow specifying fixtures to be ignored by setting <code>ignore</code> in YAML file’s ‘_fixture’ section.</p>\n\n<p><em>Tongfei Gao</em></p>\n"
  },
  {
    "message": "*   Make the DATABASE_URL env variable only affect the primary connection. Add new env variables for multiple databases.\n\n    *John Crepezzi*, *Eileen Uchitelle*",
    "project": "activerecord",
    "date_merged": 1564176758000,
    "author": "John Crepezzi",
    "sha": "7df0eefacf1b6cbfdad8775ac86c6917f16bf859",
    "pr": "36773",
    "merge_sha": "798723177997a121e787f686bbf4586027fc2375",
    "html": "<p>Make the DATABASE_URL env variable only affect the primary connection. Add new env variables for multiple databases.</p>\n\n<p><em>John Crepezzi</em>, <em>Eileen Uchitelle</em></p>\n"
  },
  {
    "message": "*   Add a warning for enum elements with 'not_' prefix.\n\n        class Foo\n          enum status: [:sent, :not_sent]\n        end\n\n    *Edu Depetris*",
    "project": "activerecord",
    "date_merged": 1564089521000,
    "author": "Edu Depetris",
    "sha": "77daacf94d7d26c713d4412b68edb64260fc22d9",
    "pr": "36380",
    "merge_sha": "579864f79ce1e7b9e4cae0518ddb65b5dd456b8c",
    "html": "<p>Add a warning for enum elements with ‘not_’ prefix.</p>\n\n<pre><code>class Foo\n  enum status: [:sent, :not_sent]\nend\n</code></pre>\n\n<p><em>Edu Depetris</em></p>\n"
  },
  {
    "message": "*   Make currency symbols optional for money column type in PostgreSQL.\n\n    *Joel Schneider*",
    "project": "activerecord",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Make currency symbols optional for money column type in PostgreSQL.</p>\n\n<p><em>Joel Schneider</em></p>\n"
  },
  {
    "message": "*   Add support for beginless ranges, introduced in Ruby 2.7.\n\n    *Josh Goodall*",
    "project": "activerecord",
    "date_merged": 1563352516000,
    "author": "Josh Goodall",
    "sha": "b19150448bcf65362c34b5a741ce162cd2b79216",
    "pr": "36696",
    "merge_sha": "2a28b7c292b3d6c0a01722f50beedb8ec1bf074c",
    "html": "<p>Add support for beginless ranges, introduced in Ruby 2.7.</p>\n\n<p><em>Josh Goodall</em></p>\n"
  },
  {
    "message": "*   Add `database_exists?` method to connection adapters to check if a database exists.\n\n    *Guilherme Mansur*",
    "project": "activerecord",
    "date_merged": 1586968111000,
    "author": "Ryuta Kamizono",
    "sha": "6f2126c760e3ef8c21dcdf8e8fec466a0fdd88f1",
    "pr": "38959",
    "merge_sha": "9303873e57dd86a82ef69d58ed7e7af6bc7ed344",
    "html": "<p>Add <code>database_exists?</code> method to connection adapters to check if a database exists.</p>\n\n<p><em>Guilherme Mansur</em></p>\n"
  },
  {
    "message": "*   Loading the schema for a model that has no `table_name` raises a `TableNotSpecified` error.\n\n    *Guilherme Mansur*, *Eugene Kenny*",
    "project": "activerecord",
    "date_merged": 1560970028000,
    "author": "Guilherme Mansur",
    "sha": "fd3532204c7302ec80a245c72852a11288ec38b5",
    "pr": "36279",
    "merge_sha": "2dea8c29c794bec564a2e69ad715d25024e93932",
    "html": "<p>Loading the schema for a model that has no <code>table_name</code> raises a <code>TableNotSpecified</code> error.</p>\n\n<p><em>Guilherme Mansur</em>, <em>Eugene Kenny</em></p>\n"
  },
  {
    "message": "*   PostgreSQL: Fix GROUP BY with ORDER BY virtual count attribute.\n\n    Fixes #36022.\n\n    *Ryuta Kamizono*",
    "project": "activerecord",
    "date_merged": 1560783731000,
    "author": "Ryuta Kamizono",
    "sha": "cb0299c9eba6463085130debda6347abf9683463",
    "pr": "36506",
    "merge_sha": "c104bfe424e6cebe9c8e85a38515327a6c88b1f8",
    "html": "<p>PostgreSQL: Fix GROUP BY with ORDER BY virtual count attribute.</p>\n\n<p>Fixes #36022.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Make ActiveRecord `ConnectionPool.connections` method thread-safe.\n\n    Fixes #36465.\n\n    *Jeff Doering*",
    "project": "activerecord",
    "date_merged": 1560461438000,
    "author": "jeffdoering",
    "sha": "e2d11970f25890e8baa613bfa33e432bd693627b",
    "pr": "36473",
    "merge_sha": "c9e52d028c0347e377177a271486edfb3dac3975",
    "html": "<p>Make ActiveRecord <code>ConnectionPool.connections</code> method thread-safe.</p>\n\n<p>Fixes #36465.</p>\n\n<p><em>Jeff Doering</em></p>\n"
  },
  {
    "message": "*   Add support for multiple databases to `rails db:abort_if_pending_migrations`.\n\n    *Mark Lee*",
    "project": "activerecord",
    "date_merged": 1560255470000,
    "author": "Mark Lee",
    "sha": "cb8b57d07e132a6528bce47c93ee392c6cc64c10",
    "pr": "36440",
    "merge_sha": "96f142ae76b04f5ffe6e4c33550f5b04739f4f56",
    "html": "<p>Add support for multiple databases to <code>rails db:abort_if_pending_migrations</code>.</p>\n\n<p><em>Mark Lee</em></p>\n"
  },
  {
    "message": "*   Fix sqlite3 collation parsing when using decimal columns.\n\n    *Martin R. Schuster*",
    "project": "activerecord",
    "date_merged": 1559679970000,
    "author": "Martin Schuster",
    "sha": "86d3f251c802575fa1414a10f2981566002c19d4",
    "pr": "36404",
    "merge_sha": "6a1e00ce3a372e318338c4c5047d9a2fb5f75ed1",
    "html": "<p>Fix sqlite3 collation parsing when using decimal columns.</p>\n\n<p><em>Martin R. Schuster</em></p>\n"
  },
  {
    "message": "*   Fix invalid schema when primary key column has a comment.\n\n    Fixes #29966.\n\n    *Guilherme Goettems Schneider*",
    "project": "activerecord",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Fix invalid schema when primary key column has a comment.</p>\n\n<p>Fixes #29966.</p>\n\n<p><em>Guilherme Goettems Schneider</em></p>\n"
  },
  {
    "message": "*   Fix table comment also being applied to the primary key column.\n\n    *Guilherme Goettems Schneider*",
    "project": "activerecord",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Fix table comment also being applied to the primary key column.</p>\n\n<p><em>Guilherme Goettems Schneider</em></p>\n"
  },
  {
    "message": "*   Allow generated `create_table` migrations to include or skip timestamps.\n\n    *Michael Duchemin*",
    "project": "activerecord",
    "date_merged": 1557730456000,
    "author": "Vishal Telangre",
    "sha": "a67106ef16d5649e300a694386232f9d17634d4e",
    "pr": "36265",
    "merge_sha": "1dcafa43b3504bbe08305ddb6ee43d60219db408",
    "html": "<p>Allow generated <code>create_table</code> migrations to include or skip timestamps.</p>\n\n<p><em>Michael Duchemin</em></p>\n"
  },
  {
    "message": "*   Ignore certain data-* attributes in rails-ujs when element is contenteditable\n\n    [CVE-2023-23913]",
    "project": "actionview",
    "date_merged": 1678736582000,
    "author": "John Hawthorn",
    "sha": "7167e535201afc1d1864dd9eb862f177e309ade3",
    "pr": null,
    "merge_sha": "09fd64effc5d4a2c47d3665487a48e93ce2c95f2",
    "html": "<p>Ignore certain data-* attributes in rails-ujs when element is contenteditable</p>\n\n<p>[CVE-2023-23913]</p>\n"
  },
  {
    "message": "*   Fix and add protections for XSS in `ActionView::Helpers` and `ERB::Util`.\n\n    Escape dangerous characters in names of tags and names of attributes in the\n    tag helpers, following the XML specification. Rename the option\n    `:escape_attributes` to `:escape`, to simplify by applying the option to the\n    whole tag.\n\n    *Álvaro Martín Fraguas*",
    "project": "actionview",
    "date_merged": 1651004154000,
    "author": "Alvaro Martin Fraguas",
    "sha": "123f42a573f7fcbf391885c135ca809f21615180",
    "pr": null,
    "merge_sha": "3bcb481cfc06dec244f18b790344fb64697726a3",
    "html": "<p>Fix and add protections for XSS in <code>ActionView::Helpers</code> and <code>ERB::Util</code>.</p>\n\n<p>Escape dangerous characters in names of tags and names of attributes in the<br />\ntag helpers, following the XML specification. Rename the option<br />\n<code>:escape_attributes</code> to <code>:escape</code>, to simplify by applying the option to the<br />\nwhole tag.</p>\n\n<p><em>Álvaro Martín Fraguas</em></p>\n"
  },
  {
    "message": "*   `preload_link_tag` properly inserts `as` attributes for files with `image` MIME\n    types, such as JPG or SVG.\n\n    *Nate Berkopec*",
    "project": "actionview",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p><code>preload_link_tag</code> properly inserts <code>as</code> attributes for files with <code>image</code> MIME<br />\ntypes, such as JPG or SVG.</p>\n\n<p><em>Nate Berkopec</em></p>\n"
  },
  {
    "message": "*   Add `autocomplete=\"off\"` to all generated hidden fields.\n\n    Fixes #42610.\n\n    *Ryan Baumann*",
    "project": "actionview",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Add <code>autocomplete=\"off\"</code> to all generated hidden fields.</p>\n\n<p>Fixes #42610.</p>\n\n<p><em>Ryan Baumann</em></p>\n"
  },
  {
    "message": "*   Fix `current_page?` when URL has trailing slash.\n\n    This fixes the `current_page?` helper when the given URL has a trailing slash,\n    and is an absolute URL or also has query params.\n\n    Fixes #33956.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1647024493000,
    "author": "Rafael Mendonça França",
    "sha": "1afe117e6bf069d3644ea206e8effbfe5878357e",
    "pr": "44661",
    "merge_sha": "8c7b0c62d3126f622815421edb2a00538154a1d5",
    "html": "<p>Fix <code>current_page?</code> when URL has trailing slash.</p>\n\n<p>This fixes the <code>current_page?</code> helper when the given URL has a trailing slash,<br />\nand is an absolute URL or also has query params.</p>\n\n<p>Fixes #33956.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   The `translate` helper now passes `default` values that aren't\n    translation keys through `I18n.translate` for interpolation.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1619865687000,
    "author": "Eugene Kenny",
    "sha": "14f4e233c9da687d122975d82e09ca51f1213f48",
    "pr": "40691",
    "merge_sha": "b588d8335294c843ca4c43f97418ce1ef1230685",
    "html": "<p>The <code>translate</code> helper now passes <code>default</code> values that aren’t<br />\ntranslation keys through <code>I18n.translate</code> for interpolation.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   Don't attach UJS form submission handlers to Turbo forms.\n\n    *David Heinemeier Hansson*",
    "project": "actionview",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Don’t attach UJS form submission handlers to Turbo forms.</p>\n\n<p><em>David Heinemeier Hansson</em></p>\n"
  },
  {
    "message": "*   Allow both `current_page?(url_hash)` and `current_page?(**url_hash)` on Ruby 2.7.\n\n    *Ryuta Kamizono*",
    "project": "actionview",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Allow both <code>current_page?(url_hash)</code> and <code>current_page?(**url_hash)</code> on Ruby 2.7.</p>\n\n<p><em>Ryuta Kamizono</em></p>\n"
  },
  {
    "message": "*   Fix lazy translation in partial with block.\n\n    *Marek Kasztelnik*",
    "project": "actionview",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix lazy translation in partial with block.</p>\n\n<p><em>Marek Kasztelnik</em></p>\n"
  },
  {
    "message": "*   Avoid extra `SELECT COUNT` queries when rendering Active Record collections.\n\n    *aar0nr*",
    "project": "actionview",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Avoid extra <code>SELECT COUNT</code> queries when rendering Active Record collections.</p>\n\n<p><em>aar0nr</em></p>\n"
  },
  {
    "message": "*   Link preloading keep integrity hashes in the header.\n\n    *Étienne Barrié*",
    "project": "actionview",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Link preloading keep integrity hashes in the header.</p>\n\n<p><em>Étienne Barrié</em></p>\n"
  },
  {
    "message": "*   Add `config.action_view.preload_links_header` to allow disabling of\n    the `Link` header being added by default when using `stylesheet_link_tag`\n    and `javascript_include_tag`.\n\n    *Andrew White*",
    "project": "actionview",
    "date_merged": 1609286812000,
    "author": "Andrew White",
    "sha": "c55e32ec94c80168d3fbb7eace02cb5e72034e48",
    "pr": "40897",
    "merge_sha": "4453888760f6813aaefd2d8015364fb01c2264ca",
    "html": "<p>Add <code>config.action_view.preload_links_header</code> to allow disabling of<br />\nthe <code>Link</code> header being added by default when using <code>stylesheet_link_tag</code><br />\nand <code>javascript_include_tag</code>.</p>\n\n<p><em>Andrew White</em></p>\n"
  },
  {
    "message": "*   The `translate` helper now resolves `default` values when a `nil` key is\n    specified, instead of always returning `nil`.\n\n    *Jonathan Hefner*",
    "project": "actionview",
    "date_merged": 1609286812000,
    "author": "Rafael França",
    "sha": "472de761cac6bb468fe4174570313a25100ccda8",
    "pr": "40788",
    "merge_sha": "4453888760f6813aaefd2d8015364fb01c2264ca",
    "html": "<p>The <code>translate</code> helper now resolves <code>default</code> values when a <code>nil</code> key is<br />\nspecified, instead of always returning <code>nil</code>.</p>\n\n<p><em>Jonathan Hefner</em></p>\n"
  },
  {
    "message": "*   SanitizeHelper.sanitized_allowed_attributes and SanitizeHelper.sanitized_allowed_tags\n    call safe_list_sanitizer's class method\n\n    Fixes #39586\n\n    *Taufiq Muhammadi*",
    "project": "actionview",
    "date_merged": 1607467528000,
    "author": "Rafael Mendonça França",
    "sha": "73023569e15ec007aa6c29a79a152d7d6978a28f",
    "pr": "39587",
    "merge_sha": "188fb074a9b13031db283c1c7229e84ef0cc4375",
    "html": "<p>SanitizeHelper.sanitized_allowed_attributes and SanitizeHelper.sanitized_allowed_tags<br />\ncall safe_list_sanitizer’s class method</p>\n\n<p>Fixes #39586</p>\n\n<p><em>Taufiq Muhammadi</em></p>\n"
  },
  {
    "message": "*   Change form_with to generate non-remote forms by default.\n\n    `form_with` would generate a remote form by default. This would confuse\n    users because they were forced to handle remote requests.\n\n    All new 6.1 applications will generate non-remote forms by default.\n    When upgrading a 6.0 application you can enable remote forms by default by\n    setting `config.action_view.form_with_generates_remote_forms` to `true`.\n\n    *Petrik de Heus*",
    "project": "actionview",
    "date_merged": 1606948320000,
    "author": "Rafael França",
    "sha": "69311cff97e87b73f129d44a52f9e19298ee2518",
    "pr": "40708",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Change form_with to generate non-remote forms by default.</p>\n\n<p><code>form_with</code> would generate a remote form by default. This would confuse<br />\nusers because they were forced to handle remote requests.</p>\n\n<p>All new 6.1 applications will generate non-remote forms by default.<br />\nWhen upgrading a 6.0 application you can enable remote forms by default by<br />\nsetting <code>config.action_view.form_with_generates_remote_forms</code> to <code>true</code>.</p>\n\n<p><em>Petrik de Heus</em></p>\n"
  },
  {
    "message": "*   Yield translated strings to calls of `ActionView::FormBuilder#button`\n    when a block is given.\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1604090090000,
    "author": "Sean Doyle",
    "sha": "a086418283b5220a06bf86e485f654d8552b5b0b",
    "pr": "38550",
    "merge_sha": "6ade7c96323f82c7ac751772d49bdc0eaf3e1b5c",
    "html": "<p>Yield translated strings to calls of <code>ActionView::FormBuilder#button</code><br />\nwhen a block is given.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Alias `ActionView::Helpers::Tags::Label::LabelBuilder#translation` to\n    `#to_s` so that `form.label` calls can yield that value to their blocks.\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1604088586000,
    "author": "Sean Doyle",
    "sha": "d38c214b751e2c9622146536985d4008411c45c4",
    "pr": "38549",
    "merge_sha": "00439fdbdda58863483da067a1ec4df1dc276509",
    "html": "<p>Alias <code>ActionView::Helpers::Tags::Label::LabelBuilder#translation</code> to<br />\n<code>#to_s</code> so that <code>form.label</code> calls can yield that value to their blocks.</p>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Rename the new `TagHelper#class_names` method to `TagHelper#token_list`,\n    and make the original available as an alias.\n\n        token_list(\"foo\", \"foo bar\")\n        # => \"foo bar\"\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1604078654000,
    "author": "Sean Doyle",
    "sha": "67409e03a49b56bab8d46a1fd3330506edc5b7c1",
    "pr": "40146",
    "merge_sha": "55cfdaf1c0f60cc24b8b7c200776fde6b52868b6",
    "html": "<p>Rename the new <code>TagHelper#class_names</code> method to <code>TagHelper#token_list</code>,<br />\nand make the original available as an alias.</p>\n\n<pre><code>token_list(\"foo\", \"foo bar\")\n# =&gt; \"foo bar\"\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   ARIA Array and Hash attributes are treated as space separated `DOMTokenList`\n    values. This is useful when declaring lists of label text identifiers in\n    `aria-labelledby` or `aria-describedby`.\n\n        tag.input type: 'checkbox', name: 'published', aria: {\n          invalid: @post.errors[:published].any?,\n          labelledby: ['published_context', 'published_label'],\n          describedby: { published_errors: @post.errors[:published].any? }\n        }\n        #=> <input\n              type=\"checkbox\" name=\"published\" aria-invalid=\"true\"\n              aria-labelledby=\"published_context published_label\"\n              aria-describedby=\"published_errors\"\n            >\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1604024422000,
    "author": "Sean Doyle",
    "sha": "8b19d66fc631f26a5704231b4ffeffd46f066c9b",
    "pr": "40479",
    "merge_sha": "f5d68da97b6c83d010551a13db61b27f720e06f1",
    "html": "<p>ARIA Array and Hash attributes are treated as space separated <code>DOMTokenList</code><br />\nvalues. This is useful when declaring lists of label text identifiers in<br />\n<code>aria-labelledby</code> or <code>aria-describedby</code>.</p>\n\n<pre><code>tag.input type: 'checkbox', name: 'published', aria: {\n  invalid: @post.errors[:published].any?,\n  labelledby: ['published_context', 'published_label'],\n  describedby: { published_errors: @post.errors[:published].any? }\n}\n#=&gt; &lt;input\n      type=\"checkbox\" name=\"published\" aria-invalid=\"true\"\n      aria-labelledby=\"published_context published_label\"\n      aria-describedby=\"published_errors\"\n    &gt;\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `escape_whitelist` from `ActionView::Template::Handlers::ERB`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "6583895ebe7dd157eb9171b9d079565fd0ae84e0",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>escape_whitelist</code> from <code>ActionView::Template::Handlers::ERB</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `find_all_anywhere` from `ActionView::Resolver`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "dafa49bb4cd02bcffa806fa2f92e33795073a70d",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>find_all_anywhere</code> from <code>ActionView::Resolver</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `formats` from `ActionView::Template::HTML`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "db5a2dfe3e4a809d94647a485aedcd4e96fe52a9",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>formats</code> from <code>ActionView::Template::HTML</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `formats` from `ActionView::Template::RawFile`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "61242946848aed92afefb64d93431f0e2caeabce",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>formats</code> from <code>ActionView::Template::RawFile</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `formats` from `ActionView::Template::Text`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "217eb5dc4a567588875bfc7a59488cb766f461a3",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>formats</code> from <code>ActionView::Template::Text</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `find_file` from `ActionView::PathSet`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "71904857d4f0d3bc8f4f0598bdb3f052550cf446",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>find_file</code> from <code>ActionView::PathSet</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `rendered_format` from `ActionView::LookupContext`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "b57e227f6d6a1e410cca2d0d1b60fdf46bd3a186",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>rendered_format</code> from <code>ActionView::LookupContext</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `find_file` from `ActionView::ViewPaths`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "806e4874f5f172bb0c7f1b5534f3be06c73704dc",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>find_file</code> from <code>ActionView::ViewPaths</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Require that `ActionView::Base` subclasses implement `#compiled_method_container`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "469c4ccad775be515f8f837e7487d1fdc13e3b26",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Require that <code>ActionView::Base</code> subclasses implement <code>#compiled_method_container</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to pass an object that is not a `ActionView::LookupContext` as the first argument\n    in `ActionView::Base#initialize`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "05f234dbbdd512217d7a999949789155323dbc5d",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support to pass an object that is not a <code>ActionView::LookupContext</code> as the first argument<br />\nin <code>ActionView::Base#initialize</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `format` argument `ActionView::Base#initialize`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "c3b08725a1fadbb0d3df9c249b00d4e41d1862db",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>format</code> argument <code>ActionView::Base#initialize</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template#refresh`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "db82d4da62182762e5cba51d8370a0507f0fb4f8",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template#refresh</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template#original_encoding`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "9d2a0c903d02b24c2173b79f759d23a3eb9e6929",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template#original_encoding</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template#variants`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "d6575dc42e905dc5015b55cadd25b9ed389c6011",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template#variants</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template#formats`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "2a10775ac1b3a5f8d826d7180837a77795fdd69c",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template#formats</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template#virtual_path=`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "aa7d6f0c648844b268d959bf5fdda4b2b5ed38c2",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template#virtual_path=</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template#updated_at`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "b88615e875f767a23bea5c1b00674e3b0fb1037b",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template#updated_at</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `updated_at` argument required on `ActionView::Template#initialize`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "b88615e875f767a23bea5c1b00674e3b0fb1037b",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>updated_at</code> argument required on <code>ActionView::Template#initialize</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Make `locals` argument required on `ActionView::Template#initialize`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "d25840eb498e165c338fbd088ee2c4c72449049f",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Make <code>locals</code> argument required on <code>ActionView::Template#initialize</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionView::Template.finalize_compiled_template_methods`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "71ddfd78d438725b032d7429c5450712fcad5c68",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActionView::Template.finalize_compiled_template_methods</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `config.action_view.finalize_compiled_template_methods`\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "71ddfd78d438725b032d7429c5450712fcad5c68",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>config.action_view.finalize_compiled_template_methods</code></p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to calling `ActionView::ViewPaths#with_fallback` with a block.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "0de9560e3ed1a2dada3d521cd092fe65c41831df",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support to calling <code>ActionView::ViewPaths#with_fallback</code> with a block.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to passing absolute paths to `render template:`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "2759addf2c01b1f490676ac68422b6f3b07a05d1",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support to passing absolute paths to <code>render template:</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to passing relative paths to `render file:`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "d52d7739468153bd6cb7c629f60bd5cd7ebea3eb",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support to passing relative paths to <code>render file:</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove support to template handlers that don't accept two arguments.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "4d77dcad09a3efcdaee256628e95906bd8a3a029",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove support to template handlers that don’t accept two arguments.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated pattern argument in `ActionView::Template::PathResolver`.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "320e7f7c95e8302f9691b93f5d029b0ef9fe69d9",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated pattern argument in <code>ActionView::Template::PathResolver</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to call private methods from object in some view helpers.\n\n    *Rafael Mendonça França*",
    "project": "actionview",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "5b8fe6c37e70a3eff8b77496718d3225255013d1",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support to call private methods from object in some view helpers.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   `ActionView::Helpers::TranslationHelper#translate` accepts a block, yielding\n    the translated text and the fully resolved translation key:\n\n        <%= translate(\".relative_key\") do |translation, resolved_key| %>\n          <span title=\"<%= resolved_key %>\"><%= translation %></span>\n        <% end %>\n\n    *Sean Doyle*",
    "project": "actionview",
    "date_merged": 1598474823000,
    "author": "Sean Doyle",
    "sha": "7cf52ae9814f473b5665261e3b6677aefc83fe84",
    "pr": "39363",
    "merge_sha": "93e72cf56214ff072ef5d4426917b0bf97e619f5",
    "html": "<p><code>ActionView::Helpers::TranslationHelper#translate</code> accepts a block, yielding<br />\nthe translated text and the fully resolved translation key:</p>\n\n<pre><code>&lt;%= translate(\".relative_key\") do |translation, resolved_key| %&gt;\n  &lt;span title=\"&lt;%= resolved_key %&gt;\"&gt;&lt;%= translation %&gt;&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><em>Sean Doyle</em></p>\n"
  },
  {
    "message": "*   Ensure cache fragment digests include all relevant template dependencies when\n    fragments are contained in a block passed to the render helper. Remove the\n    virtual_path keyword arguments found in CacheHelper as they no longer possess\n    any function following 1581cab.\n\n    Fixes #38984.\n\n    *Aaron Lipman*",
    "project": "actionview",
    "date_merged": 1590524988000,
    "author": "Aaron Lipman",
    "sha": "4671fe20403770b8e932eb08d1f1c02d4b66213a",
    "pr": "39060",
    "merge_sha": "b378bda17d710eb08949771390e7b7d77ee2b39d",
    "html": "<p>Ensure cache fragment digests include all relevant template dependencies when<br />\nfragments are contained in a block passed to the render helper. Remove the<br />\nvirtual_path keyword arguments found in CacheHelper as they no longer possess<br />\nany function following 1581cab.</p>\n\n<p>Fixes #38984.</p>\n\n<p><em>Aaron Lipman</em></p>\n"
  },
  {
    "message": "*   Deprecate `config.action_view.raise_on_missing_translations` in favor of\n    `config.i18n.raise_on_missing_translations`.\n\n    New generalized configuration option now determines whether an error should be raised\n    for missing translations in controllers and views.\n\n    *fatkodima*",
    "project": "actionview",
    "date_merged": 1589932490000,
    "author": "fatkodima",
    "sha": "6c4f3be929f1f427d6767050848f2fbee8c1f05f",
    "pr": "31571",
    "merge_sha": "a4395a97db3c4df5ee266918a9e4c6af7b61e830",
    "html": "<p>Deprecate <code>config.action_view.raise_on_missing_translations</code> in favor of<br />\n<code>config.i18n.raise_on_missing_translations</code>.</p>\n\n<p>New generalized configuration option now determines whether an error should be raised<br />\nfor missing translations in controllers and views.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Instrument layout rendering in `TemplateRenderer#render_with_layout` as `render_layout.action_view`,\n    and include (when necessary) the layout's virtual path in notification payloads for collection and partial renders.\n\n    *Zach Kemp*",
    "project": "actionview",
    "date_merged": 1591657206000,
    "author": "Ryuta Kamizono",
    "sha": "cfb7c16ac42e2a076c2de2ed35506938e524a439",
    "pr": "39573",
    "merge_sha": "d6cb38075330c3b2914b23c3ebb42507e3c1025a",
    "html": "<p>Instrument layout rendering in <code>TemplateRenderer#render_with_layout</code> as <code>render_layout.action_view</code>,<br />\nand include (when necessary) the layout’s virtual path in notification payloads for collection and partial renders.</p>\n\n<p><em>Zach Kemp</em></p>\n"
  },
  {
    "message": "*   `ActionView::Base.annotate_rendered_view_with_filenames` annotates HTML output with template file names.\n\n    *Joel Hawksley*, *Aaron Patterson*",
    "project": "actionview",
    "date_merged": 1589929891000,
    "author": "Prathamesh Sonpatki",
    "sha": "a673ce69e758b36739964589cd2d39304cd1c593",
    "pr": "39204",
    "merge_sha": "a80115b7c5ee29733599d80f7155324e14089e02",
    "html": "<p><code>ActionView::Base.annotate_rendered_view_with_filenames</code> annotates HTML output with template file names.</p>\n\n<p><em>Joel Hawksley</em>, <em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   `ActionView::Helpers::TranslationHelper#translate` returns nil when\n    passed `default: nil` without a translation matching `I18n#translate`.\n\n    *Stefan Wrobel*",
    "project": "actionview",
    "date_merged": 1581286942000,
    "author": "Stefan Wrobel",
    "sha": "8877b5ff16c761e04a52d649dc0690d9d782ee5c",
    "pr": "37895",
    "merge_sha": "5bd61a2e85b9f815dd0411ecb2d31301192beb32",
    "html": "<p><code>ActionView::Helpers::TranslationHelper#translate</code> returns nil when<br />\npassed <code>default: nil</code> without a translation matching <code>I18n#translate</code>.</p>\n\n<p><em>Stefan Wrobel</em></p>\n"
  },
  {
    "message": "*   `OptimizedFileSystemResolver` prefers template details in order of locale,\n    formats, variants, handlers.\n\n    *Iago Pimenta*",
    "project": "actionview",
    "date_merged": 1578600116000,
    "author": "Iago Pimenta",
    "sha": "e7c3eb11e05236c22475ff391303bcfb80cf4fbe",
    "pr": null,
    "merge_sha": "7abcba6909855e71853308825698e57a22d1238c",
    "html": "<p><code>OptimizedFileSystemResolver</code> prefers template details in order of locale,<br />\nformats, variants, handlers.</p>\n\n<p><em>Iago Pimenta</em></p>\n"
  },
  {
    "message": "*   Added `class_names` helper to create a CSS class value with conditional classes.\n\n    *Joel Hawksley*, *Aaron Patterson*",
    "project": "actionview",
    "date_merged": 1576098513000,
    "author": "Joel Hawksley",
    "sha": "e1545682eb83f1aefda03d72e839b0f2a8dd682b",
    "pr": "37939",
    "merge_sha": "477ec2675d2321eeaa0f5330ab5f3e12b09cb361",
    "html": "<p>Added <code>class_names</code> helper to create a CSS class value with conditional classes.</p>\n\n<p><em>Joel Hawksley</em>, <em>Aaron Patterson</em></p>\n"
  },
  {
    "message": "*   Add support for conditional values to TagBuilder.\n\n    *Joel Hawksley*",
    "project": "actionview",
    "date_merged": 1575489054000,
    "author": "Joel Hawksley",
    "sha": "f1c63d8673e87589a0543075534e7ad03b8bd93f",
    "pr": "37872",
    "merge_sha": "8c121ce90e6ab7d291edc846fc6fccbb1d368cb9",
    "html": "<p>Add support for conditional values to TagBuilder.</p>\n\n<p><em>Joel Hawksley</em></p>\n"
  },
  {
    "message": "*   `ActionView::Helpers::FormOptionsHelper#select` should mark option for `nil` as selected.\n\n    ```ruby\n    @post = Post.new\n    @post.category = nil\n\n    # Before\n    select(\"post\", \"category\", none: nil, programming: 1, economics: 2)\n    # =>\n    # <select name=\"post[category]\" id=\"post_category\">\n    #   <option value=\"\">none</option>\n    #  <option value=\"1\">programming</option>\n    #  <option value=\"2\">economics</option>\n    # </select>\n\n    # After\n    select(\"post\", \"category\", none: nil, programming: 1, economics: 2)\n    # =>\n    # <select name=\"post[category]\" id=\"post_category\">\n    #   <option selected=\"selected\" value=\"\">none</option>\n    #  <option value=\"1\">programming</option>\n    #  <option value=\"2\">economics</option>\n    # </select>\n    ```\n\n    *bogdanvlviv*",
    "project": "actionview",
    "date_merged": 1568922340000,
    "author": "bogdanvlviv",
    "sha": "cd2cbdcb48f88d9cc73d2ee5c15029264d1d25fa",
    "pr": "34809",
    "merge_sha": "9c6bdb54a341addf8d5111c0ce33738235bc6959",
    "html": "<p><code>ActionView::Helpers::FormOptionsHelper#select</code> should mark option for <code>nil</code> as selected.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"vi\">@post</span> <span class=\"o\">=</span> <span class=\"no\">Post</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"vi\">@post</span><span class=\"p\">.</span><span class=\"nf\">category</span> <span class=\"o\">=</span> <span class=\"kp\">nil</span>\n\n<span class=\"c1\"># Before</span>\n<span class=\"nb\">select</span><span class=\"p\">(</span><span class=\"s2\">\"post\"</span><span class=\"p\">,</span> <span class=\"s2\">\"category\"</span><span class=\"p\">,</span> <span class=\"ss\">none: </span><span class=\"kp\">nil</span><span class=\"p\">,</span> <span class=\"ss\">programming: </span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ss\">economics: </span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt;</span>\n<span class=\"c1\"># &lt;select name=\"post[category]\" id=\"post_category\"&gt;</span>\n<span class=\"c1\">#   &lt;option value=\"\"&gt;none&lt;/option&gt;</span>\n<span class=\"c1\">#  &lt;option value=\"1\"&gt;programming&lt;/option&gt;</span>\n<span class=\"c1\">#  &lt;option value=\"2\"&gt;economics&lt;/option&gt;</span>\n<span class=\"c1\"># &lt;/select&gt;</span>\n\n<span class=\"c1\"># After</span>\n<span class=\"nb\">select</span><span class=\"p\">(</span><span class=\"s2\">\"post\"</span><span class=\"p\">,</span> <span class=\"s2\">\"category\"</span><span class=\"p\">,</span> <span class=\"ss\">none: </span><span class=\"kp\">nil</span><span class=\"p\">,</span> <span class=\"ss\">programming: </span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ss\">economics: </span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"c1\"># =&gt;</span>\n<span class=\"c1\"># &lt;select name=\"post[category]\" id=\"post_category\"&gt;</span>\n<span class=\"c1\">#   &lt;option selected=\"selected\" value=\"\"&gt;none&lt;/option&gt;</span>\n<span class=\"c1\">#  &lt;option value=\"1\"&gt;programming&lt;/option&gt;</span>\n<span class=\"c1\">#  &lt;option value=\"2\"&gt;economics&lt;/option&gt;</span>\n<span class=\"c1\"># &lt;/select&gt;</span>\n</code></pre></div></div>\n\n<p><em>bogdanvlviv</em></p>\n"
  },
  {
    "message": "*   Log lines for partial renders and started template renders are now\n    emitted at the `DEBUG` level instead of `INFO`.\n\n    Completed template renders are still logged at the `INFO` level.\n\n    *DHH*",
    "project": "actionview",
    "date_merged": 1567691060000,
    "author": "David Heinemeier Hansson",
    "sha": "6315a11b90727de782891f51b12951612abb66bd",
    "pr": "37040",
    "merge_sha": "3437691708f62eea5856ab1460b9ab4da6d52e86",
    "html": "<p>Log lines for partial renders and started template renders are now<br />\nemitted at the <code>DEBUG</code> level instead of <code>INFO</code>.</p>\n\n<p>Completed template renders are still logged at the <code>INFO</code> level.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   ActionView::Helpers::SanitizeHelper: support rails-html-sanitizer 1.1.0.\n\n    *Juanito Fatas*",
    "project": "actionview",
    "date_merged": 1564970228000,
    "author": "Juanito Fatas",
    "sha": "52f0b050e25cac6d9571d71c9f74ea583d8aa2b0",
    "pr": "36537",
    "merge_sha": "4f235e9a86d4589f2081f971e5e66d42586333bb",
    "html": "<p>ActionView::Helpers::SanitizeHelper: support rails-html-sanitizer 1.1.0.</p>\n\n<p><em>Juanito Fatas</em></p>\n"
  },
  {
    "message": "*   Added `phone_to` helper method to create a link from mobile numbers.\n\n    *Pietro Moro*",
    "project": "actionview",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Added <code>phone_to</code> helper method to create a link from mobile numbers.</p>\n\n<p><em>Pietro Moro</em></p>\n"
  },
  {
    "message": "*   annotated_source_code returns an empty array so TemplateErrors without a\n    template in the backtrace are surfaced properly by DebugExceptions.\n\n    *Guilherme Mansur*, *Kasper Timm Hansen*",
    "project": "actionview",
    "date_merged": 1563204867000,
    "author": "Guilherme Mansur",
    "sha": "526a5eb10cbe6092389c07c9529eb44c50fb0af6",
    "pr": "36532",
    "merge_sha": "88b91299f3fc5b912e10323ed0ad18c87c7584e5",
    "html": "<p>annotated_source_code returns an empty array so TemplateErrors without a<br />\ntemplate in the backtrace are surfaced properly by DebugExceptions.</p>\n\n<p><em>Guilherme Mansur</em>, <em>Kasper Timm Hansen</em></p>\n"
  },
  {
    "message": "*   Add autoload for SyntaxErrorInTemplate so syntax errors are correctly raised by DebugExceptions.\n\n    *Guilherme Mansur*, *Gannon McGibbon*",
    "project": "actionview",
    "date_merged": 1560971146000,
    "author": "Guilherme Mansur",
    "sha": "99e52ae7b1c621069f2971d2f352822f263efb49",
    "pr": "36521",
    "merge_sha": "75eb9494d897a30e41c63ee6ae266bb9b7c66140",
    "html": "<p>Add autoload for SyntaxErrorInTemplate so syntax errors are correctly raised by DebugExceptions.</p>\n\n<p><em>Guilherme Mansur</em>, <em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   `RenderingHelper` supports rendering objects that `respond_to?` `:render_in`.\n\n    *Joel Hawksley*, *Natasha Umer*, *Aaron Patterson*, *Shawn Allen*, *Emily Plummer*, *Diana Mounter*, *John Hawthorn*, *Nathan Herald*, *Zaid Zawaideh*, *Zach Ahn*",
    "project": "actionview",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p><code>RenderingHelper</code> supports rendering objects that <code>respond_to?</code> <code>:render_in</code>.</p>\n\n<p><em>Joel Hawksley</em>, <em>Natasha Umer</em>, <em>Aaron Patterson</em>, <em>Shawn Allen</em>, <em>Emily Plummer</em>, <em>Diana Mounter</em>, <em>John Hawthorn</em>, <em>Nathan Herald</em>, <em>Zaid Zawaideh</em>, <em>Zach Ahn</em></p>\n"
  },
  {
    "message": "*   Fix `select_tag` so that it doesn't change `options` when `include_blank` is present.\n\n    *Younes SERRAJ*",
    "project": "actionview",
    "date_merged": 1559056821000,
    "author": "Younes SERRAJ",
    "sha": "a4229a534ff237443b445de9aec0310c0f388b56",
    "pr": "36324",
    "merge_sha": "350ae29635c7e1e7a66a75e2d070259042ede3ea",
    "html": "<p>Fix <code>select_tag</code> so that it doesn’t change <code>options</code> when <code>include_blank</code> is present.</p>\n\n<p><em>Younes SERRAJ</em></p>\n"
  },
  {
    "message": "*   Sets default mailer queue to `\"default\"` in the mail assertions.\n\n    *Paul Keen*",
    "project": "actionmailer",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Sets default mailer queue to <code>\"default\"</code> in the mail assertions.</p>\n\n<p><em>Paul Keen</em></p>\n"
  },
  {
    "message": "*   Change default queue name of the deliver (`:mailers`) job to be the job adapter's\n    default (`:default`).\n\n    *Rafael Mendonça França*",
    "project": "actionmailer",
    "date_merged": 1607467528000,
    "author": "Rafael Mendonça França",
    "sha": "39304496ac597c98c12981e477760f6b0e1ab04b",
    "pr": "40766",
    "merge_sha": "188fb074a9b13031db283c1c7229e84ef0cc4375",
    "html": "<p>Change default queue name of the deliver (<code>:mailers</code>) job to be the job adapter’s<br />\ndefault (<code>:default</code>).</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActionMailer::Base.receive` in favor of [Action Mailbox](https://github.com/rails/rails/tree/master/actionmailbox).\n\n    *Rafael Mendonça França*",
    "project": "actionmailer",
    "date_merged": 1588685610000,
    "author": "Rafael Mendonça França",
    "sha": "d5fa9569a0d401893d54ee47fe43fd87b6155fb7",
    "pr": "39152",
    "merge_sha": "55e038cf17afcd6712d38d5a43d463bc7f7d098f",
    "html": "<p>Remove deprecated <code>ActionMailer::Base.receive</code> in favor of <a href=\"https://github.com/rails/rails/tree/master/actionmailbox\">Action Mailbox</a>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Fix ActionMailer assertions don't work for parameterized mail with legacy delivery job.\n\n    *bogdanvlviv*",
    "project": "actionmailer",
    "date_merged": 1572483244000,
    "author": "bogdanvlviv",
    "sha": "37b72ff5dee6d41dc30ca2a9eeceb51f6623bd43",
    "pr": "37608",
    "merge_sha": "6bac3ccbef30e56229be6a33ba59166d0059ebe4",
    "html": "<p>Fix ActionMailer assertions don’t work for parameterized mail with legacy delivery job.</p>\n\n<p><em>bogdanvlviv</em></p>\n"
  },
  {
    "message": "*   Added `email_address_with_name` to properly escape addresses with names.\n\n    *Sunny Ripert*",
    "project": "actionmailer",
    "date_merged": 1566833467000,
    "author": "Sunny Ripert",
    "sha": "3a8dbe1746b3279504152ff319e64ea49464e4cd",
    "pr": "36454",
    "merge_sha": "d64010fe672f78c35c76c47270b8a1e27651afd1",
    "html": "<p>Added <code>email_address_with_name</code> to properly escape addresses with names.</p>\n\n<p><em>Sunny Ripert</em></p>\n"
  },
  {
    "message": "*   Fix retrieving rotation value from FFmpeg on version 5.0+.\n\n    In FFmpeg version 5.0+ the rotation value has been removed from tags.\n    Instead the value can be found in side_data_list. Along with\n    this update it's possible to have values of -90, -270 to denote the video\n    has been rotated.\n\n    *Haroon Ahmed*",
    "project": "activestorage",
    "date_merged": 1704841363000,
    "author": "Eileen M. Uchitelle",
    "sha": "cef60d94268241ced1bd1e4fcfe85c6ec4eab9ef",
    "pr": "45837",
    "merge_sha": "b035464bea5a5c5200bc192a4795c6e24447d85e",
    "html": "<p>Fix retrieving rotation value from FFmpeg on version 5.0+.</p>\n\n<p>In FFmpeg version 5.0+ the rotation value has been removed from tags.<br />\nInstead the value can be found in side_data_list. Along with<br />\nthis update it’s possible to have values of -90, -270 to denote the video<br />\nhas been rotated.</p>\n\n<p><em>Haroon Ahmed</em></p>\n"
  },
  {
    "message": "*   Disables the session in `ActiveStorage::Blobs::ProxyController`\n    and `ActiveStorage::Representations::ProxyController`\n    in order to allow caching by default in some CDNs as CloudFlare\n\n    Fixes #44136\n\n    *Bruno Prieto*",
    "project": "activestorage",
    "date_merged": 1708541372000,
    "author": "Rafael Mendonça França",
    "sha": "78fe149509fac5b05e54187aaaef216fbb5fd0d3",
    "pr": "48869",
    "merge_sha": "2fcc0052feda9f9287ba9b6f2d2a551021cf0138",
    "html": "<p>Disables the session in <code>ActiveStorage::Blobs::ProxyController</code><br />\nand <code>ActiveStorage::Representations::ProxyController</code><br />\nin order to allow caching by default in some CDNs as CloudFlare</p>\n\n<p>Fixes #44136</p>\n\n<p><em>Bruno Prieto</em></p>\n"
  },
  {
    "message": "*   Respect Active Record's primary_key_type in Active Storage migrations. Backported from 7.0.\n\n    *fatkodima*",
    "project": "activestorage",
    "date_merged": 1657111389000,
    "author": "fatkodima",
    "sha": "3418ab5099c9f3892de82084ceda65bbab6c3f52",
    "pr": "45532",
    "merge_sha": "16a966ae3a65b1b3f8b6c181c019b702eaa530bb",
    "html": "<p>Respect Active Record’s primary_key_type in Active Storage migrations. Backported from 7.0.</p>\n\n<p><em>fatkodima</em></p>\n"
  },
  {
    "message": "*   Attachments can be deleted after their association is no longer defined.\n\n    Fixes #42514\n\n    *Don Sisco*",
    "project": "activestorage",
    "date_merged": 1629390780000,
    "author": "Rafael Mendonça França",
    "sha": "9810ed5c53154c46464a9c8a1948e106bd7c2700",
    "pr": "42515",
    "merge_sha": "e7b0eddc70bf516bed56f892a40c57e8ddec559f",
    "html": "<p>Attachments can be deleted after their association is no longer defined.</p>\n\n<p>Fixes #42514</p>\n\n<p><em>Don Sisco</em></p>\n"
  },
  {
    "message": "*   Added image transformation validation via configurable allow-list.\n    \n    Variant now offers a configurable allow-list for\n    transformation methods in addition to a configurable deny-list for arguments.\n    \n    [CVE-2022-21831]",
    "project": "activestorage",
    "date_merged": 1646764457000,
    "author": "Aaron Patterson",
    "sha": "1f6642418c9371ea201122b75419e7e0f3c3919e",
    "pr": null,
    "merge_sha": "b10c0ffed56b5c3dd216f964bd2a0f6bd299a7ec",
    "html": "<p>Added image transformation validation via configurable allow-list.</p>\n\n<p>Variant now offers a configurable allow-list for<br />\ntransformation methods in addition to a configurable deny-list for arguments.</p>\n\n<p>[CVE-2022-21831]</p>\n"
  },
  {
    "message": "*   The parameters sent to `ffmpeg` for generating a video preview image are now\n    configurable under `config.active_storage.video_preview_arguments`.\n\n    *Brendon Muir*",
    "project": "activestorage",
    "date_merged": 1623934607000,
    "author": "Brendon Muir",
    "sha": "842aeb2329a80e8ab19ef51afe36bb07931d2e93",
    "pr": "42472",
    "merge_sha": "447502ec93446349de75e6a43224095129144eba",
    "html": "<p>The parameters sent to <code>ffmpeg</code> for generating a video preview image are now<br />\nconfigurable under <code>config.active_storage.video_preview_arguments</code>.</p>\n\n<p><em>Brendon Muir</em></p>\n"
  },
  {
    "message": "*   Fix Active Storage update task when running in an engine.\n\n    *Justin Malčić*",
    "project": "activestorage",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>Fix Active Storage update task when running in an engine.</p>\n\n<p><em>Justin Malčić</em></p>\n"
  },
  {
    "message": "*   Don't raise an error if the mime type is not recognized.\n\n    Fixes #41777.\n\n    *Alex Ghiculescu*",
    "project": "activestorage",
    "date_merged": 1622732186000,
    "author": "Andrew White",
    "sha": "eb4c0f35b398a4f721ab189b7fdd57cca8acc276",
    "pr": "42225",
    "merge_sha": "519b55113463a3992158fdaa3ecaf2087975823c",
    "html": "<p>Don’t raise an error if the mime type is not recognized.</p>\n\n<p>Fixes #41777.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*   `ActiveStorage::PreviewError` is raised when a previewer is unable to generate a preview image.\n\n    *Alex Robbin*",
    "project": "activestorage",
    "date_merged": 1614688438000,
    "author": "Alex Robbin",
    "sha": "547645a5eed7f0206cc73f540900e03fd4b3a162",
    "pr": "41592",
    "merge_sha": "1f7287a4396f89ea13e3f8f6a116f05823c310b4",
    "html": "<p><code>ActiveStorage::PreviewError</code> is raised when a previewer is unable to generate a preview image.</p>\n\n<p><em>Alex Robbin</em></p>\n"
  },
  {
    "message": "*   respond with 404 given invalid variation key when asking for representations.\n\n    *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p>respond with 404 given invalid variation key when asking for representations.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   `Blob` creation shouldn't crash if no service selected.\n\n    *Alex Ghiculescu*",
    "project": "activestorage",
    "date_merged": 1624703928000,
    "author": "Rafael Mendonça França",
    "sha": "e71539cc27f970bfc3aad5d30c88b15e43b8e162",
    "pr": "42612",
    "merge_sha": "32097e3c15a7c3b97b37d4c0c42713b1d6fe1fc5",
    "html": "<p><code>Blob</code> creation shouldn’t crash if no service selected.</p>\n\n<p><em>Alex Ghiculescu</em></p>\n"
  },
  {
    "message": "*  Marcel is upgraded to version 1.0.0 to avoid a dependency on GPL-licensed\n   mime types data.\n\n   *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1616782618000,
    "author": "George Claghorn",
    "sha": "85c6823b77b60f2a3a6a25d7a1013032e8c580ef",
    "pr": null,
    "merge_sha": "f8f660b9609878cd178e6192ca3b8ed9005aa28d",
    "html": "<p>Marcel is upgraded to version 1.0.0 to avoid a dependency on GPL-licensed<br />\nmime types data.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Fix S3 multipart uploads when threshold is larger than file.\n\n    *Matt Muller*",
    "project": "activestorage",
    "date_merged": 1612990034000,
    "author": "Rafael Mendonça França",
    "sha": "5f3ff60084ab5d5921ca3499814e4697f8350ee7",
    "pr": null,
    "merge_sha": "d0f51649c12ed4d97ac24814cc30b47abd92a4b5",
    "html": "<p>Fix S3 multipart uploads when threshold is larger than file.</p>\n\n<p><em>Matt Muller</em></p>\n"
  },
  {
    "message": "*   Change default queue name of the analysis (`:active_storage_analysis`) and\n    purge (`:active_storage_purge`) jobs to be the job adapter's default (`:default`).\n\n    *Rafael Mendonça França*",
    "project": "activestorage",
    "date_merged": 1607467528000,
    "author": "Rafael Mendonça França",
    "sha": "39304496ac597c98c12981e477760f6b0e1ab04b",
    "pr": "40766",
    "merge_sha": "188fb074a9b13031db283c1c7229e84ef0cc4375",
    "html": "<p>Change default queue name of the analysis (<code>:active_storage_analysis</code>) and<br />\npurge (<code>:active_storage_purge</code>) jobs to be the job adapter’s default (<code>:default</code>).</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Implement `strict_loading` on ActiveStorage associations.\n\n    *David Angulo*",
    "project": "activestorage",
    "date_merged": 1606948320000,
    "author": "Eileen M. Uchitelle",
    "sha": "694982e2ca66d33a1bb8d1473bde9ef8abe6235a",
    "pr": "40623",
    "merge_sha": "ad8027ffec6558ceb7f7c5f5af5687af7d5cbea7",
    "html": "<p>Implement <code>strict_loading</code> on ActiveStorage associations.</p>\n\n<p><em>David Angulo</em></p>\n"
  },
  {
    "message": "*   Remove deprecated support to pass `:combine_options` operations to `ActiveStorage::Transformers::ImageProcessing`.\n\n    *Rafael Mendonça França*",
    "project": "activestorage",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "62bda903befc90171b8ac89e3414b27f28288059",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated support to pass <code>:combine_options</code> operations to <code>ActiveStorage::Transformers::ImageProcessing</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveStorage::Transformers::MiniMagickTransformer`.\n\n    *Rafael Mendonça França*",
    "project": "activestorage",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "74476f0f901e8283cfc2d891e964c5cc6adf8269",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveStorage::Transformers::MiniMagickTransformer</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `config.active_storage.queue`.\n\n    *Rafael Mendonça França*",
    "project": "activestorage",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "bc28e37de29a90d52949a14f78768dab6530520f",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>config.active_storage.queue</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Remove deprecated `ActiveStorage::Downloading`.\n\n    *Rafael Mendonça França*",
    "project": "activestorage",
    "date_merged": 1604018547000,
    "author": "Rafael Mendonça França",
    "sha": "92a8e1d7c58ca23fce89cc1e772294cb9b579cbd",
    "pr": "39539",
    "merge_sha": "1584825919a75f3f6395b1c25b12655d4d554ce2",
    "html": "<p>Remove deprecated <code>ActiveStorage::Downloading</code>.</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Add per-environment configuration support\n\n    *Pietro Moro*",
    "project": "activestorage",
    "date_merged": 1601503046000,
    "author": "Pietro Moro",
    "sha": "1e2cd7a75e64560f354a5f09538aa504927191b8",
    "pr": null,
    "merge_sha": "0475215d4fa1a6db2a92a0065081fe19c64cc124",
    "html": "<p>Add per-environment configuration support</p>\n\n<p><em>Pietro Moro</em></p>\n"
  },
  {
    "message": "*   The Poppler PDF previewer renders a preview image using the original\n    document's crop box rather than its media box, hiding print margins. This\n    matches the behavior of the MuPDF previewer.\n\n    *Vincent Robert*",
    "project": "activestorage",
    "date_merged": 1600395274000,
    "author": "Vincent Robert",
    "sha": "3803671a816232395f538c61046b00c875c1444b",
    "pr": "40250",
    "merge_sha": "f24840a4da903a00c2979df7fd8c140e218da2de",
    "html": "<p>The Poppler PDF previewer renders a preview image using the original<br />\ndocument’s crop box rather than its media box, hiding print margins. This<br />\nmatches the behavior of the MuPDF previewer.</p>\n\n<p><em>Vincent Robert</em></p>\n"
  },
  {
    "message": "*   Touch parent model when an attachment is purged.\n\n    *Víctor Pérez Rodríguez*",
    "project": "activestorage",
    "date_merged": 1595816402000,
    "author": "Victor Perez Rodriguez",
    "sha": "396b43a99d436d87c409a1260d55141716ab7cd3",
    "pr": "39891",
    "merge_sha": "70c9f39039e790c65236a2057fdbcb34002dfa62",
    "html": "<p>Touch parent model when an attachment is purged.</p>\n\n<p><em>Víctor Pérez Rodríguez</em></p>\n"
  },
  {
    "message": "*   Files can now be served by proxying them from the underlying storage service\n    instead of redirecting to a signed service URL. Use the\n    `rails_storage_proxy_path` and `_url` helpers to proxy an attached file:\n\n    ```erb\n    <%= image_tag rails_storage_proxy_path(@user.avatar) %>\n    ```\n\n    To proxy by default, set `config.active_storage.resolve_model_to_route`:\n\n    ```ruby\n    # Proxy attached files instead.\n    config.active_storage.resolve_model_to_route = :rails_storage_proxy\n    ```\n\n    ```erb\n    <%= image_tag @user.avatar %>\n    ```\n\n    To redirect to a signed service URL when the default file serving strategy\n    is set to proxying, use the `rails_storage_redirect_path` and `_url` helpers:\n\n    ```erb\n    <%= image_tag rails_storage_redirect_path(@user.avatar) %>\n    ```\n\n    *Jonathan Fleckenstein*",
    "project": "activestorage",
    "date_merged": 1589230058000,
    "author": "Jonathan Fleckenstein",
    "sha": "dfb5a82b259e134eac89784ac4ace0c44d1b4aee",
    "pr": "39241",
    "merge_sha": "de7f57f9482dd94c585cbd63cdef061b81371db3",
    "html": "<p>Files can now be served by proxying them from the underlying storage service<br />\ninstead of redirecting to a signed service URL. Use the<br />\n<code>rails_storage_proxy_path</code> and <code>_url</code> helpers to proxy an attached file:</p>\n\n<div class=\"language-erb highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">&lt;%=</span> <span class=\"n\">image_tag</span> <span class=\"n\">rails_storage_proxy_path</span><span class=\"p\">(</span><span class=\"vi\">@user</span><span class=\"p\">.</span><span class=\"nf\">avatar</span><span class=\"p\">)</span> <span class=\"cp\">%&gt;</span>\n</code></pre></div></div>\n\n<p>To proxy by default, set <code>config.active_storage.resolve_model_to_route</code>:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\"># Proxy attached files instead.</span>\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">active_storage</span><span class=\"p\">.</span><span class=\"nf\">resolve_model_to_route</span> <span class=\"o\">=</span> <span class=\"ss\">:rails_storage_proxy</span>\n</code></pre></div></div>\n\n<div class=\"language-erb highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">&lt;%=</span> <span class=\"n\">image_tag</span> <span class=\"vi\">@user</span><span class=\"p\">.</span><span class=\"nf\">avatar</span> <span class=\"cp\">%&gt;</span>\n</code></pre></div></div>\n\n<p>To redirect to a signed service URL when the default file serving strategy<br />\nis set to proxying, use the <code>rails_storage_redirect_path</code> and <code>_url</code> helpers:</p>\n\n<div class=\"language-erb highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">&lt;%=</span> <span class=\"n\">image_tag</span> <span class=\"n\">rails_storage_redirect_path</span><span class=\"p\">(</span><span class=\"vi\">@user</span><span class=\"p\">.</span><span class=\"nf\">avatar</span><span class=\"p\">)</span> <span class=\"cp\">%&gt;</span>\n</code></pre></div></div>\n\n<p><em>Jonathan Fleckenstein</em></p>\n"
  },
  {
    "message": "*   Add `config.active_storage.web_image_content_types` to allow applications\n    to add content types (like `image/webp`) in which variants can be processed,\n    instead of letting those images be converted to the fallback PNG format.\n\n    *Jeroen van Haperen*",
    "project": "activestorage",
    "date_merged": 1587531392000,
    "author": "JvH",
    "sha": "2a12b723bbc38be74275910204d29b534e80f50c",
    "pr": "39013",
    "merge_sha": "a3f62cbbe76f7f75c8442d5bab13a8f1bdfd00a7",
    "html": "<p>Add <code>config.active_storage.web_image_content_types</code> to allow applications<br />\nto add content types (like <code>image/webp</code>) in which variants can be processed,<br />\ninstead of letting those images be converted to the fallback PNG format.</p>\n\n<p><em>Jeroen van Haperen</em></p>\n"
  },
  {
    "message": "*   Add support for creating variants of `WebP` images out of the box.\n\n    *Dino Maric*",
    "project": "activestorage",
    "date_merged": 1583867434000,
    "author": "Dino Maric",
    "sha": "2a0823ecbaeb3a6fbedc5cc31879d68fdf27d0cb",
    "pr": "38694",
    "merge_sha": "30d092d26b5cd455b7faf29cef20dfd977da3417",
    "html": "<p>Add support for creating variants of <code>WebP</code> images out of the box.</p>\n\n<p><em>Dino Maric</em></p>\n"
  },
  {
    "message": "*   Only enqueue analysis jobs for blobs with non-null analyzer classes.\n\n    *Gannon McGibbon*",
    "project": "activestorage",
    "date_merged": 1579220352000,
    "author": "Gannon McGibbon",
    "sha": "ed81601723b672af92ae50315460a926c168bc8d",
    "pr": "38246",
    "merge_sha": "7da834fdda831f1b91c7fccc678b5bac80c9374f",
    "html": "<p>Only enqueue analysis jobs for blobs with non-null analyzer classes.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Previews are created on the same service as the original blob.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1576877680000,
    "author": "Peter Zhu",
    "sha": "4203093ad3117a953a92677184b33595bf1103d1",
    "pr": "38057",
    "merge_sha": "d9dbb534375da941491390b1e6132d403206e5ac",
    "html": "<p>Previews are created on the same service as the original blob.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Remove unused `disposition` and `content_type` query parameters for `DiskService`.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1575675612000,
    "author": "Peter Zhu",
    "sha": "2e15092942908ce6a240a2f10107e3b920d76abe",
    "pr": "37904",
    "merge_sha": "352445b2b6db00d040d3fcb6c742f9b2795a68d1",
    "html": "<p>Remove unused <code>disposition</code> and <code>content_type</code> query parameters for <code>DiskService</code>.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Use `DiskController` for both public and private files.\n\n    `DiskController` is able to handle multiple services by adding a\n    `service_name` field in the generated URL in `DiskService`.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1575668497000,
    "author": "Peter Zhu",
    "sha": "fbb83d78c3238dab8611788f55511683796365d6",
    "pr": "37897",
    "merge_sha": "8cf3f9ad2395707a4139a618af59f272d8aa13c8",
    "html": "<p>Use <code>DiskController</code> for both public and private files.</p>\n\n<p><code>DiskController</code> is able to handle multiple services by adding a<br />\n<code>service_name</code> field in the generated URL in <code>DiskService</code>.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Variants are tracked in the database to avoid existence checks in the storage service.\n\n    *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1575668497000,
    "author": "George Claghorn",
    "sha": "7d0327bbbf9fdb1f7f988ebb4e86649a776d1c65",
    "pr": "37897",
    "merge_sha": "8cf3f9ad2395707a4139a618af59f272d8aa13c8",
    "html": "<p>Variants are tracked in the database to avoid existence checks in the storage service.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Deprecate `service_url` methods in favour of `url`.\n\n    Deprecate `Variant#service_url` and `Preview#service_url` to instead use\n    `#url` method to be consistent with `Blob`.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1575324548000,
    "author": "Peter Zhu",
    "sha": "235f2636cd595527250d7c14e1692c102b8412c6",
    "pr": "37856",
    "merge_sha": "f16431e0c04a72e5a42fe1f7c5b5aefe76220ddc",
    "html": "<p>Deprecate <code>service_url</code> methods in favour of <code>url</code>.</p>\n\n<p>Deprecate <code>Variant#service_url</code> and <code>Preview#service_url</code> to instead use<br />\n<code>#url</code> method to be consistent with <code>Blob</code>.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Permanent URLs for public storage blobs.\n\n    Services can be configured in `config/storage.yml` with a new key\n    `public: true | false` to indicate whether a service holds public\n    blobs or private blobs. Public services will always return a permanent URL.\n\n    Deprecates `Blob#service_url` in favor of `Blob#url`.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1570821867000,
    "author": "Peter Zhu",
    "sha": "feab7031b57040afa2b2f5f78f9251dbad6cbdf8",
    "pr": "36729",
    "merge_sha": "94584c2510743a45d9030d1b94dd33a074518b17",
    "html": "<p>Permanent URLs for public storage blobs.</p>\n\n<p>Services can be configured in <code>config/storage.yml</code> with a new key<br />\n<code>public: true | false</code> to indicate whether a service holds public<br />\nblobs or private blobs. Public services will always return a permanent URL.</p>\n\n<p>Deprecates <code>Blob#service_url</code> in favor of <code>Blob#url</code>.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Make services aware of configuration names.\n\n    *Gannon McGibbon*",
    "project": "activestorage",
    "date_merged": 1570124871000,
    "author": "Gannon McGibbon",
    "sha": "e6487e84fc0dae30d3b20b396404881e962f1f3a",
    "pr": "37346",
    "merge_sha": "a6f42938390138ae88d4d32a3a16ddcb1e61d3f2",
    "html": "<p>Make services aware of configuration names.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   The `Content-Type` header is set on image variants when they're uploaded to third-party storage services.\n\n    *Kyle Ribordy*",
    "project": "activestorage",
    "date_merged": 1569999281000,
    "author": "Kyle Ribordy",
    "sha": "698e9ce0ffb516564e02053872077a2d5a287617",
    "pr": "37340",
    "merge_sha": "3082a409d8331693c9ab191556486c03b3dc3771",
    "html": "<p>The <code>Content-Type</code> header is set on image variants when they’re uploaded to third-party storage services.</p>\n\n<p><em>Kyle Ribordy</em></p>\n"
  },
  {
    "message": "*   Allow storage services to be configured per attachment.\n\n    ```ruby\n    class User < ActiveRecord::Base\n      has_one_attached :avatar, service: :s3\n    end\n\n    class Gallery < ActiveRecord::Base\n      has_many_attached :photos, service: :s3\n    end\n    ```\n\n    *Dmitry Tsepelev*",
    "project": "activestorage",
    "date_merged": 1574628363000,
    "author": "Ryuta Kamizono",
    "sha": "214f439343b4237c0b66ff5a655553ad0ce125fa",
    "pr": "37788",
    "merge_sha": "64ddabe58eb492f852f01fbe1cc0712264b63ecc",
    "html": "<p>Allow storage services to be configured per attachment.</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">User</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">has_one_attached</span> <span class=\"ss\">:avatar</span><span class=\"p\">,</span> <span class=\"ss\">service: :s3</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">Gallery</span> <span class=\"o\">&lt;</span> <span class=\"no\">ActiveRecord</span><span class=\"o\">::</span><span class=\"no\">Base</span>\n  <span class=\"n\">has_many_attached</span> <span class=\"ss\">:photos</span><span class=\"p\">,</span> <span class=\"ss\">service: :s3</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p><em>Dmitry Tsepelev</em></p>\n"
  },
  {
    "message": "*   You can optionally provide a custom blob key when attaching a new file:\n\n    ```ruby\n    user.avatar.attach key: \"avatars/#{user.id}.jpg\",\n      io: io, content_type: \"image/jpeg\", filename: \"avatar.jpg\"\n    ```\n\n    Active Storage will store the blob's data on the configured service at the provided key.\n\n    *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1569839150000,
    "author": "George Claghorn",
    "sha": "4dba136c83cc808282625c0d5b195ce5e0bbaa68",
    "pr": "37312",
    "merge_sha": "9a62e95f4a61ec010a146ade9c705909ed82c8ec",
    "html": "<p>You can optionally provide a custom blob key when attaching a new file:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">avatar</span><span class=\"p\">.</span><span class=\"nf\">attach</span> <span class=\"ss\">key: </span><span class=\"s2\">\"avatars/</span><span class=\"si\">#{</span><span class=\"n\">user</span><span class=\"p\">.</span><span class=\"nf\">id</span><span class=\"si\">}</span><span class=\"s2\">.jpg\"</span><span class=\"p\">,</span>\n  <span class=\"ss\">io: </span><span class=\"n\">io</span><span class=\"p\">,</span> <span class=\"ss\">content_type: </span><span class=\"s2\">\"image/jpeg\"</span><span class=\"p\">,</span> <span class=\"ss\">filename: </span><span class=\"s2\">\"avatar.jpg\"</span>\n</code></pre></div></div>\n\n<p>Active Storage will store the blob’s data on the configured service at the provided key.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Replace `Blob.create_after_upload!` with `Blob.create_and_upload!` and deprecate the former.\n\n    `create_after_upload!` has been removed since it could lead to data\n    corruption by uploading to a key on the storage service which happened to\n    be already taken. Creating the record would then correctly raise a\n    database uniqueness exception but the stored object would already have\n    overwritten another. `create_and_upload!` swaps the order of operations\n    so that the key gets reserved up-front or the uniqueness error gets raised,\n    before the upload to a key takes place.\n\n    *Julik Tarkhanov*",
    "project": "activestorage",
    "date_merged": 1569326914000,
    "author": "Julik Tarkhanov",
    "sha": "3c35de793340ca0e1a0c7cb6a7f93528357ba307",
    "pr": "37280",
    "merge_sha": "ddc73edf20c95ab8233f481e79b5319e204b0ab2",
    "html": "<p>Replace <code>Blob.create_after_upload!</code> with <code>Blob.create_and_upload!</code> and deprecate the former.</p>\n\n<p><code>create_after_upload!</code> has been removed since it could lead to data<br />\ncorruption by uploading to a key on the storage service which happened to<br />\nbe already taken. Creating the record would then correctly raise a<br />\ndatabase uniqueness exception but the stored object would already have<br />\noverwritten another. <code>create_and_upload!</code> swaps the order of operations<br />\nso that the key gets reserved up-front or the uniqueness error gets raised,<br />\nbefore the upload to a key takes place.</p>\n\n<p><em>Julik Tarkhanov</em></p>\n"
  },
  {
    "message": "*   Set content disposition in direct upload using `filename` and `disposition` parameters to `ActiveStorage::Service#headers_for_direct_upload`.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1567719477000,
    "author": "Peter Zhu",
    "sha": "9940c65a78c913c6f67b3fc0f1595311865128e9",
    "pr": "36793",
    "merge_sha": "78ced171aca7fe3a81547fba374b25bf1b1f32c3",
    "html": "<p>Set content disposition in direct upload using <code>filename</code> and <code>disposition</code> parameters to <code>ActiveStorage::Service#headers_for_direct_upload</code>.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Allow record to be optionally passed to blob finders to make sharding\n    easier.\n\n    *Gannon McGibbon*",
    "project": "activestorage",
    "date_merged": 1565211302000,
    "author": "Gannon McGibbon",
    "sha": "7fd006de0ba80791d16c34e6afe4e6a9f990af21",
    "pr": "36727",
    "merge_sha": "0f5db107a215b157381f0eea9e2852fb278ad85a",
    "html": "<p>Allow record to be optionally passed to blob finders to make sharding<br />\neasier.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Switch from `azure-storage` gem to `azure-storage-blob` gem for Azure service.\n\n    *Peter Zhu*",
    "project": "activestorage",
    "date_merged": 1565122388000,
    "author": "Peter Zhu",
    "sha": "ebedf0a6c031c81c895e0cb00329d91bc3ea577b",
    "pr": "36866",
    "merge_sha": "d1c2ba6dfc641d7568d98a0449c986ad0e4cba2d",
    "html": "<p>Switch from <code>azure-storage</code> gem to <code>azure-storage-blob</code> gem for Azure service.</p>\n\n<p><em>Peter Zhu</em></p>\n"
  },
  {
    "message": "*   Add `config.active_storage.draw_routes` to disable Active Storage routes.\n\n    *Gannon McGibbon*",
    "project": "activestorage",
    "date_merged": 1563815815000,
    "author": "Gannon McGibbon",
    "sha": "3cf65bcb8ee3c27204dee5cac003a749973240f9",
    "pr": "36666",
    "merge_sha": "2ee75971ef52a0c8faedf32f28b66bf64efa6a49",
    "html": "<p>Add <code>config.active_storage.draw_routes</code> to disable Active Storage routes.</p>\n\n<p><em>Gannon McGibbon</em></p>\n"
  },
  {
    "message": "*   Image analysis is skipped if ImageMagick returns an error.\n\n    `ActiveStorage::Analyzer::ImageAnalyzer#metadata` would previously raise a\n    `MiniMagick::Error`, which caused persistent `ActiveStorage::AnalyzeJob`\n    failures. It now logs the error and returns `{}`, resulting in no metadata\n    being added to the offending image blob.\n\n    *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Image analysis is skipped if ImageMagick returns an error.</p>\n\n<p><code>ActiveStorage::Analyzer::ImageAnalyzer#metadata</code> would previously raise a<br />\n<code>MiniMagick::Error</code>, which caused persistent <code>ActiveStorage::AnalyzeJob</code><br />\nfailures. It now logs the error and returns <code>{}</code>, resulting in no metadata<br />\nbeing added to the offending image blob.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Method calls on singular attachments return `nil` when no file is attached.\n\n    Previously, assuming the following User model, `user.avatar.filename` would\n    raise a `Module::DelegationError` if no avatar was attached:\n\n    ```ruby\n    class User < ApplicationRecord\n      has_one_attached :avatar\n    end\n    ```\n\n    They now return `nil`.\n\n    *Matthew Tanous*",
    "project": "activestorage",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Method calls on singular attachments return <code>nil</code> when no file is attached.</p>\n\n<p>Previously, assuming the following User model, <code>user.avatar.filename</code> would<br />\nraise a <code>Module::DelegationError</code> if no avatar was attached:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">class</span> <span class=\"nc\">User</span> <span class=\"o\">&lt;</span> <span class=\"no\">ApplicationRecord</span>\n  <span class=\"n\">has_one_attached</span> <span class=\"ss\">:avatar</span>\n<span class=\"k\">end</span>\n</code></pre></div></div>\n\n<p>They now return <code>nil</code>.</p>\n\n<p><em>Matthew Tanous</em></p>\n"
  },
  {
    "message": "*   The mirror service supports direct uploads.\n\n    New files are directly uploaded to the primary service. When a\n    directly-uploaded file is attached to a record, a background job is enqueued\n    to copy it to each secondary service.\n\n    Configure the queue used to process mirroring jobs by setting\n    `config.active_storage.queues.mirror`. The default is `:active_storage_mirror`.\n\n    *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>The mirror service supports direct uploads.</p>\n\n<p>New files are directly uploaded to the primary service. When a<br />\ndirectly-uploaded file is attached to a record, a background job is enqueued<br />\nto copy it to each secondary service.</p>\n\n<p>Configure the queue used to process mirroring jobs by setting<br />\n<code>config.active_storage.queues.mirror</code>. The default is <code>:active_storage_mirror</code>.</p>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   The S3 service now permits uploading files larger than 5 gigabytes.\n\n    When uploading a file greater than 100 megabytes in size, the service\n    transparently switches to [multipart uploads](https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html)\n    using a part size computed from the file's total size and S3's part count limit.\n\n    No application changes are necessary to take advantage of this feature. You\n    can customize the default 100 MB multipart upload threshold in your S3\n    service's configuration:\n\n    ```yaml\n    production:\n      service: s3\n      access_key_id: <%= Rails.application.credentials.dig(:aws, :access_key_id) %>\n      secret_access_key: <%= Rails.application.credentials.dig(:aws, :secret_access_key) %>\n      region: us-east-1\n      bucket: my-bucket\n      upload:\n        multipart_threshold: <%= 250.megabytes %>\n    ```\n\n    *George Claghorn*",
    "project": "activestorage",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>The S3 service now permits uploading files larger than 5 gigabytes.</p>\n\n<p>When uploading a file greater than 100 megabytes in size, the service<br />\ntransparently switches to <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html\">multipart uploads</a><br />\nusing a part size computed from the file’s total size and S3’s part count limit.</p>\n\n<p>No application changes are necessary to take advantage of this feature. You<br />\ncan customize the default 100 MB multipart upload threshold in your S3<br />\nservice’s configuration:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">production</span><span class=\"pi\">:</span>\n  <span class=\"na\">service</span><span class=\"pi\">:</span> <span class=\"s\">s3</span>\n  <span class=\"na\">access_key_id</span><span class=\"pi\">:</span> <span class=\"s\">&lt;%= Rails.application.credentials.dig(:aws, :access_key_id) %&gt;</span>\n  <span class=\"na\">secret_access_key</span><span class=\"pi\">:</span> <span class=\"s\">&lt;%= Rails.application.credentials.dig(:aws, :secret_access_key) %&gt;</span>\n  <span class=\"na\">region</span><span class=\"pi\">:</span> <span class=\"s\">us-east-1</span>\n  <span class=\"na\">bucket</span><span class=\"pi\">:</span> <span class=\"s\">my-bucket</span>\n  <span class=\"na\">upload</span><span class=\"pi\">:</span>\n    <span class=\"na\">multipart_threshold</span><span class=\"pi\">:</span> <span class=\"s\">&lt;%= 250.megabytes %&gt;</span>\n</code></pre></div></div>\n\n<p><em>George Claghorn</em></p>\n"
  },
  {
    "message": "*   Add `attachments` to the list of permitted parameters for inbound emails conductor.\n\n    When using the conductor to test inbound emails with attachments, this prevents an\n    unpermitted parameter warning in default configurations, and prevents errors for\n    applications that set:\n\n    ```ruby\n    config.action_controller.action_on_unpermitted_parameters = :raise\n    ```\n\n    *David Jones*, *Dana Henke*",
    "project": "actionmailbox",
    "date_merged": 1629390780000,
    "author": "Rafael França",
    "sha": "cf5feedb206c040d3184cba8f0bb9518f898ba72",
    "pr": "42395",
    "merge_sha": "e7b0eddc70bf516bed56f892a40c57e8ddec559f",
    "html": "<p>Add <code>attachments</code> to the list of permitted parameters for inbound emails conductor.</p>\n\n<p>When using the conductor to test inbound emails with attachments, this prevents an<br />\nunpermitted parameter warning in default configurations, and prevents errors for<br />\napplications that set:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"nf\">action_controller</span><span class=\"p\">.</span><span class=\"nf\">action_on_unpermitted_parameters</span> <span class=\"o\">=</span> <span class=\"ss\">:raise</span>\n</code></pre></div></div>\n\n<p><em>David Jones</em>, <em>Dana Henke</em></p>\n"
  },
  {
    "message": "*   Change default queue name of the incineration (`:action_mailbox_incineration`) and\n    routing (`:action_mailbox_routing`) jobs to be the job adapter's default (`:default`).\n\n    *Rafael Mendonça França*",
    "project": "actionmailbox",
    "date_merged": 1607467528000,
    "author": "Rafael Mendonça França",
    "sha": "39304496ac597c98c12981e477760f6b0e1ab04b",
    "pr": "40766",
    "merge_sha": "188fb074a9b13031db283c1c7229e84ef0cc4375",
    "html": "<p>Change default queue name of the incineration (<code>:action_mailbox_incineration</code>) and<br />\nrouting (<code>:action_mailbox_routing</code>) jobs to be the job adapter’s default (<code>:default</code>).</p>\n\n<p><em>Rafael Mendonça França</em></p>\n"
  },
  {
    "message": "*   Sendgrid ingress now passes through the envelope recipient as `X-Original-To`.\n\n    *Mark Haussmann*",
    "project": "actionmailbox",
    "date_merged": 1595406689000,
    "author": "Mark Haussmann",
    "sha": "71c8a89edd663dd21231f333ddb09b41bf94be37",
    "pr": "39902",
    "merge_sha": "6ffc8131504a1ba99611f74f181936e92f8fd869",
    "html": "<p>Sendgrid ingress now passes through the envelope recipient as <code>X-Original-To</code>.</p>\n\n<p><em>Mark Haussmann</em></p>\n"
  },
  {
    "message": "*   Update Mandrill inbound email route to respond appropriately to HEAD requests for URL health checks from Mandrill.\n\n    *Bill Cromie*",
    "project": "actionmailbox",
    "date_merged": 1586286487000,
    "author": "Bill Cromie",
    "sha": "fce29be3356269d2a0f586e15dcaf91ae680278a",
    "pr": "38794",
    "merge_sha": "9d8763bceb5b08a91d7fe532dd5e329fd5e1b716",
    "html": "<p>Update Mandrill inbound email route to respond appropriately to HEAD requests for URL health checks from Mandrill.</p>\n\n<p><em>Bill Cromie</em></p>\n"
  },
  {
    "message": "*   Add way to deliver emails via source instead of filling out a form through the conductor interface.\n\n    *DHH*",
    "project": "actionmailbox",
    "date_merged": 1585845809000,
    "author": "David Heinemeier Hansson",
    "sha": "d56d2e740612717334840b0d0ea979e1ca7cf5b1",
    "pr": "38849",
    "merge_sha": "3391494207f421983f3c89f5cab5a933e448fc35",
    "html": "<p>Add way to deliver emails via source instead of filling out a form through the conductor interface.</p>\n\n<p><em>DHH</em></p>\n"
  },
  {
    "message": "*   Mailgun ingress now passes through the envelope recipient as `X-Original-To`.\n\n    *Rikki Pitt*",
    "project": "actionmailbox",
    "date_merged": 1585094814000,
    "author": "Rikki Pitt",
    "sha": "667d69cc5b0527d0c3d0887cd175114e9310d519",
    "pr": "38738",
    "merge_sha": "931f95869510b5f80c6aa6c64bdbcfd64a8def49",
    "html": "<p>Mailgun ingress now passes through the envelope recipient as <code>X-Original-To</code>.</p>\n\n<p><em>Rikki Pitt</em></p>\n"
  },
  {
    "message": "*   Deprecate `Rails.application.credentials.action_mailbox.api_key` and `MAILGUN_INGRESS_API_KEY` in favor of `Rails.application.credentials.action_mailbox.signing_key` and `MAILGUN_INGRESS_SIGNING_KEY`.\n\n    *Matthijs Vos*",
    "project": "actionmailbox",
    "date_merged": 1582313359000,
    "author": "Matthijs Vos",
    "sha": "8dca5162f9a213fb03b5a74f67924df1c23755e4",
    "pr": "38542",
    "merge_sha": "30207c5b3628df0433a24a3d0063fe1dae366f3b",
    "html": "<p>Deprecate <code>Rails.application.credentials.action_mailbox.api_key</code> and <code>MAILGUN_INGRESS_API_KEY</code> in favor of <code>Rails.application.credentials.action_mailbox.signing_key</code> and <code>MAILGUN_INGRESS_SIGNING_KEY</code>.</p>\n\n<p><em>Matthijs Vos</em></p>\n"
  },
  {
    "message": "*   Allow easier creation of multi-part emails from the `create_inbound_email_from_mail` and `receive_inbound_email_from_mail` test helpers.\n\n    *Michael Herold*",
    "project": "actionmailbox",
    "date_merged": 1565187586000,
    "author": "Michael Herold",
    "sha": "ab34ed8acc4010bf450662a332d11902100f7ad8",
    "pr": "36877",
    "merge_sha": "135f79462abcb268a7592a721a6ebd69060d7a15",
    "html": "<p>Allow easier creation of multi-part emails from the <code>create_inbound_email_from_mail</code> and <code>receive_inbound_email_from_mail</code> test helpers.</p>\n\n<p><em>Michael Herold</em></p>\n"
  },
  {
    "message": "*   Fix Bcc header not being included with emails from `create_inbound_email_from` test helpers.\n\n    *jduff*",
    "project": "actionmailbox",
    "date_merged": 1564162043000,
    "author": "John Duff",
    "sha": "09e5d6d0040211a513d47ea7309af31aa719ed5b",
    "pr": "35992",
    "merge_sha": "a40da823d729296514f310d13a09ce8e0b37b699",
    "html": "<p>Fix Bcc header not being included with emails from <code>create_inbound_email_from</code> test helpers.</p>\n\n<p><em>jduff</em></p>\n"
  },
  {
    "message": "*   Add `ApplicationMailbox.mailbox_for` to expose mailbox routing.\n\n    *James Dabbs*",
    "project": "actionmailbox",
    "date_merged": 1559703180000,
    "author": "Ryuta Kamizono",
    "sha": "cc27e9988f9ce4e52acf491a5f67be70ab7d25d8",
    "pr": "36407",
    "merge_sha": "ee10e05af27facf42b1c49f8aaa0463d3af6989c",
    "html": "<p>Add <code>ApplicationMailbox.mailbox_for</code> to expose mailbox routing.</p>\n\n<p><em>James Dabbs</em></p>\n"
  }
]